from header_common import *
from header_presentations import *
from header_mission_templates import *
from ID_meshes import *
from header_operations import *
from header_triggers import *
from module_constants import *
import string
#COOP BEGIN#######################################
#from module_coop_presentations import *
#COOP END###############################################

####################################################################################################################
#  Each presentation record contains the following fields:
#  1) Presentation id: used for referencing presentations in other files. The prefix prsnt_ is automatically added before each presentation id.
#  2) Presentation flags. See header_presentations.py for a list of available flags
#  3) Presentation background mesh: See module_meshes.py for a list of available background meshes
#  4) Triggers: Simple triggers that are associated with the presentation
####################################################################################################################

presentations = [
	("game_start", prsntf_read_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			#(try_begin),
			#(neg|is_vanilla_warband),
			#(eq, "$script_fired", 0),
			#(assign, "$script_fired", 1),
			#(try_end),
			(set_fixed_point_multiplier, 1000),
			      (try_begin),
	    # x = LEFT/RIGHT (Lower number = leftmost)
		# y = UP/DOWN (Lower number = lower)
		(store_random_in_range, ":num_quotes", 0, 171), #Number of quotes
		#Quotes begin
		(try_begin),
		(eq, ":num_quotes", 0),
		(create_text_overlay, reg0, "@Gross Hospittler (Hospitaller) responsible for organising and running the hospices and alm-houses of the Order.  ^- Ranks of the Teutonic Order ", tf_double_space),
		(else_try),
		(eq, ":num_quotes", 1),
		(create_text_overlay, reg0, "@Gross Tressler (Grand Treasurer) resides with the Hochmeister and is responsible for the (state) treasury^ of the Order and almost all of their finances.  ^- Ranks of the Teutonic Order ", tf_double_space),
		(else_try),
		(eq, ":num_quotes", 2),
		(create_text_overlay, reg0, "@Grosskomtur (Grand Commander) responsible for much of the administrative side of the Order.  ^- Ranks of the Teutonic Order ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 3),
		(create_text_overlay, reg0, "@Komturei (the commandery) are the basic Order organisational unit. Each Komturei controls a district and a castle.  ^- Ranks of the Teutonic Order ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 4),
		(create_text_overlay, reg0, "@Hochmeister (Grand Master) head of the Order, elected for life by a General Conclave.  ^- Ranks of the Teutonic Order ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 5),
		(create_text_overlay, reg0, "@OberstTrappier (Quartermaster) governs areas regarded as pacified.  ^- Ranks of the Teutonic Order ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 6),
		(create_text_overlay, reg0, "@Landmeister (provincial Master), subordinate to the OrdenMarschall, ^the Landmeister is responsible for the administration and military operations of his Province.  ^- Ranks of the Teutonic Order ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 7),
		(create_text_overlay, reg0, "@OrdenMarschall (Order Marshall) also known as the Grand Marshal. ^Usually resides at the castle of Konigsberg and is responsible for all military operations on the Lithuanian borders.  ^- Ranks of the Teutonic Order ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 8),
		(create_text_overlay, reg0, "@At this very moment both armies, giving their war cries, met right in the middle of the valley...  ^- Dlugosz on the battle of Tannenberg ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 9),
		(create_text_overlay, reg0, "@...throughout the battle galloped amidst the banners, replacing the exhausted and the fallen by new forces,^ he watched with utmost alertness as fortunes swayed between the combatants  ^- Dlugosz on Grand Duke Alexander Vytautas, The Battle of Tannenberg, 1410 ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 10),
		(create_text_overlay, reg0, "@The Grand Duke instilled so much terror in all the knights that they shook like leaves before him.  ^- Dlugosz on Grand Duke Alexandre Vytautas ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 11),
		(create_text_overlay, reg0, "@The two armies met, and there was terrible carnage, and the crash of spears and their breaking and the clash of swords smiting as they moved over the frozen sea,^and you could not see the ice, it was covered with blood.  ^- Life of Alexandre Nevskii, The Battle of Lake Peipus, 1242 ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 12),
		(create_text_overlay, reg0, "@With God's help he vanquished them, and the enemy forces turned and fled. ^But they [Alexandre's army] smote and pursued as if from the air; there was no place which they [the Crusaders] ^could flee.  ^- Life of Alexandre Nevskii, The Battle of Lake Peipus, 1242 ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 13),
		(create_text_overlay, reg0, "@Spurning honesty and God, went against the Christians to destroy the land of Prussia.  ^- Posilge, the chronicler of the Teutonic Order on Bohemian mercenaries ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 14),
		(create_text_overlay, reg0, "@The forces of the Polish King were so numerous that there is no number high enough in the human languages.  ^- Prussian chronicles ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 15),
		(create_text_overlay, reg0, "@And they went against the godless Lithuanians, and thus for our sins they were defeated by the godless pagans, and only one man in ten came back to his home.  ^- The Chronicle of Novgorod, 1237 on Nemtsii ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 16),
		(create_text_overlay, reg0, "@hospitale sancte Marie Theutonicorum Jerosolimitanum - The Hospital of St. Mary of the Germans of Jerusalem  ^- The Teutonic Order ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 17),
		(create_text_overlay, reg0, "@The brothers [Teutonic Knights] fought well enough but they were nevertheless cut down. ^Some of those from Dorpat escaped from the battle, and it was their salvation that they had been forced to flee.  ^- Livonian Rhymed Chronicle, The Battle of Lake Peipus, 1242 ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 18),
		(create_text_overlay, reg0, "@He would water his horses in the Rhine  ^- Boast attributed to Grand Duke Vytautus of Lithuania ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 19),
		(create_text_overlay, reg0, "@A hundred picked men to plunder and harass the pagans... ^entering four villages that were not warned of their coming and putting to the sword whoever they find^ beginning their nights' sleep.  ^- The actions of a Teutonic raider, 1372 ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 20),
		(create_text_overlay, reg0, "@But you may rest assured that your childrens children will bewail your deeds.  ^- Heinrich Reuss von Plauen, 32nd Grand Master of the Teutonic Order ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 21),
		(create_text_overlay, reg0, "@And you should know that there was at least an acre of land behind the Templars, which was so covered with arrows fired by the Saracens, ^that none of the ground could be seen.  ^- John of Joinville 11th February 1250 ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 22),
		(create_text_overlay, reg0, "@And in this battle, brother William, Master of the Templars, lost an eye; and he had lost the other one on the previous Shrove Tuesday;^ and that lord died as a consequence, may God absolve him!  ^- John of Joinville 11th February 1250 ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 23),
		(create_text_overlay, reg0, "@Whoever devotedly undertakes and performs this most holy journey... shall have the enjoyment of eternal reward from the repayer of all men.  ^- Pope Eugenius III ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 24),
		(create_text_overlay, reg0, "@The strength of God will enable us, a small but faithful band, to overcome the multitude of the faithless.  ^- Robert Guiscard ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 25),
		(create_text_overlay, reg0, "@We should sympathize with their grief and in pity spare them, because they have lost a prince such as the rest of the world does not possess today.  ^- Nur ad-Din on the death of King Baldwin III of Jerusalem ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 26),
		(create_text_overlay, reg0, "@A king's son is not nobler than his food.  ^- Irish proverb ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 27),
		(create_text_overlay, reg0, "@Cry - God for Harry! England and Saint George!  ^- William Shakespeare, Henry V. Scene I. ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 28),
		(create_text_overlay, reg0, "@Henry seeing he could not resist the multitude of the Scots, turned his horse with the intention of returning to his companions; but Robert opposed him and struck him on the head with an axe.  ^- Account of the duel between Robert the Bruce King of Scotland and English knight Henry de Bohun", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 29),
		(create_text_overlay, reg0, "@From that time there gathered to him all who were of bitter heart ^and were weighed down beneath the burden of bondage ^under the intolerable rule of English domination and he became their leader.  ^- Scottish chronicler Fordun on William Wallace ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 30),
		(create_text_overlay, reg0, "@Twelve highlanders and a bagpipe make a rebellion.  ^- Scottish proverb ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 31),
		(create_text_overlay, reg0, "@It is easy to be brave behind a castle wall.  ^- Welsh proverb ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 32),
		(create_text_overlay, reg0, "@The weakness of the enemy makes our strength  ^- Cherokee proverb ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 33),
		#(create_text_overlay, reg0, "@Wisdom comes only when you stop looking for it and start living a life of conscience, freedom of thought, freedom to question, and to think by logic rather than religion.  ^- Faycal Kilali ", tf_double_space),
		(create_text_overlay, reg0, "@Wisdom comes only when you stop looking for it and start living a life of conscience, question the unquestionable, and think by logic rather than religion.  ^- Faycal Kilali ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 34),
		(create_text_overlay, reg0, "@The one who tells the stories rules the world  ^- Hopi proverb ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 35),
		(create_text_overlay, reg0, "@One finger cannot lift a pebble  ^- Hopi proverb ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 36),
		(create_text_overlay, reg0, "@In death, I am born  ^- Hopi proverb ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 37),
		(create_text_overlay, reg0, "@Force, no matter how concealed, begets resistance  ^- Lakota proverb ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 38),
		(create_text_overlay, reg0, "@You can't see the future with tears in your eyes  ^- Navajo proverb ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 39),
		(create_text_overlay, reg0, "@There is nothing as eloquent as a rattlesnake's tail  ^- Navajo proverb ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 40),
		(create_text_overlay, reg0, "@You can't wake a person who is pretending to be asleep  ^- Navajo proverb ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 41),
		(create_text_overlay, reg0, "@You can't win them all  ^- Navajo proverb ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 42),
		(create_text_overlay, reg0, "@After dark all cats are leopards  ^- Zuni proverb ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 43),
		(create_text_overlay, reg0, "@We went there to serve God, and also to get rich  ^- Bernal Diaz del Castillo ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 44),
		(create_text_overlay, reg0, "@It was all so wonderful that I do not know how to describe this first glimpse of things never heard of, seen or dreamed of before...  ^- Bernal Diaz del Castillo ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 45),
		(create_text_overlay, reg0, "@Following the light of the sun, we left the Old World ^- Cristopher Columbus ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 46),
		(create_text_overlay, reg0, "@So loud was the wailing of women and children that there was not one man among us whose heart did not bleed at the sound...  ^- Hernan Cortes ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 47),
		(create_text_overlay, reg0, "@What men in all the world have shown such daring?  ^- Hernan Cortes ", tf_double_space),
		
		##Quotes from game files, not wikipedia begin
				(else_try),
		(eq, ":num_quotes", 48),
		(create_text_overlay, reg0, "@Kill them all, God will recognise his own. ^- Arnaud Amaury, Abbot of Citeaux", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 49),
		(create_text_overlay, reg0, "@Nothing is to be feared but fear. ^- Francis Bacon ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 50),
		(create_text_overlay, reg0, "@In order for a war to be just, three things are necessary.^ First, the authority of the sovereign. Secondly, a just cause. Thirdly, a rightful intention.  ^- Thomas Aquinas", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 51),
		(create_text_overlay, reg0, "@The fields have eyes, and the woods have ears. ^- Geoffrey Chaucer, Canterbury Tales, The Knights Tale", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 52),
		(create_text_overlay, reg0, "@Following the light of the sun, we left the Old World. ^- Christopher Columbus", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 53),
		(create_text_overlay, reg0, "@War is delightful to those who have had no experience of it.  ^- Erasmus", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 54),
		(create_text_overlay, reg0, "@Fortune favours the audacious. ^- Erasmus", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 55),
		(create_text_overlay, reg0, "@The most disadvantageous peace is better than the most just war. ^- Erasmus", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 56),
		(create_text_overlay, reg0, "@If you do not leave this pasturage, Saladin will come and attack you here. And if you retreat from this attack the shame and reproach will be very great. ^- Gerard of Ridefort, letter written to King Guy ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 57),
		(create_text_overlay, reg0, "@The strength of God will enable us, a small but faithful band, to overcome the multitude of the faithless. ^- Robert Guiscard ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 58),
		(create_text_overlay, reg0, "@It is better to live one day as a lion than a hundred years as a sheep ^- Italian proverb", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 59),
		(create_text_overlay, reg0, "@Do you know, my son, with what little understanding the world is ruled? ^- Pope Julius III ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 60),
		(create_text_overlay, reg0, "@A safe stronghold our God is still. A trusty shield and weapon. ^- Martin Luther ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 61),
		(create_text_overlay, reg0, "@Faith must trample under foot all reason, sense, and understanding. ^- Martin Luther ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 62),
		(create_text_overlay, reg0, "@Nothing good ever comes of violence. ^- Martin Luther ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 63),
		(create_text_overlay, reg0, "@War is the greatest plague that can affect humanity; it destroys religion, it destroys states, it destroys families. ^Any scourge is preferable to it. ^- Martin Luther ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 64),
		(create_text_overlay, reg0, "@Since love and fear can hardly coexist together, if we must choose between them, it is far safer^ to be feared than loved. ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 65),
		(create_text_overlay, reg0, "@The princes who have done great things are the ones who have taken little account of their promises. ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 66),
		(create_text_overlay, reg0, "@So far as he is able, a prince should stick to the path of good but, if the necessity arises, he^ should know how to follow evil.  ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 67),
		(create_text_overlay, reg0, "@Men should either be treated generously or destroyed, because they take revenge for slight injures - for heavy ones they cannot.  ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 68),
		(create_text_overlay, reg0, "@The prince must be a fox... to recognize the traps and a lion to frighten the wolves.  ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 69),
		(create_text_overlay, reg0, "@The sinews of war are not gold, but good soldiers. ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 70),
		(create_text_overlay, reg0, "@Among other evils which being unarmed brings you, it causes you to be despised.  ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 71),
		(create_text_overlay, reg0, "@The best fortress which a prince can possess is the affection of his people. ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 72),
		(create_text_overlay, reg0, "@No enterprise is more likely to succeed than one concealed from the enemy until it is ripe for execution. ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 73),
		(create_text_overlay, reg0, "@A prince should therefore have no other aim or thought... but war and its organisation and discipline. ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 74),
		(create_text_overlay, reg0, "@Whoever conquers a free town and does not demolish it commits a great error^ and may expect to be ruined himself. ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 75),
		(create_text_overlay, reg0, "@Good order and discipline in any army are to be depended upon more than courage alone. ^- Niccolo Machiavelli", tf_double_space), #Quote 29
				(else_try),
		(eq, ":num_quotes", 76),
		(create_text_overlay, reg0, "@Good order makes men bold, and confusion, cowards. ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 77),
		(create_text_overlay, reg0, "@He who wishes to be obeyed must know how to command. ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 78),
		(create_text_overlay, reg0, "@One should never risk one's whole fortune unless supported by one's entire forces. ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 79),
		(create_text_overlay, reg0, "@It is not titles that honour men, but men that honour titles. ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 80),
		(create_text_overlay, reg0, "@To ensure victory the troops must have confidence in themselves as well as in their commanders. ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 81),
		(create_text_overlay, reg0, "@Strike up the drum and march courageously. ^- Christopher Marlowe ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 82),
		(create_text_overlay, reg0, "@Better to reign in hell than serve in heav'n. ^- John Milton", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 83),
		(create_text_overlay, reg0, "@For what can war, but endless war, still breed? ^- John Milton", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 84),
		(create_text_overlay, reg0, "@Will no one revenge me of the injuries I have sustained from one turbulent priest? ^- Henry II, King of England", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 85),
		(create_text_overlay, reg0, "@Luck is the residue of design.  ^- John Milton", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 86),
		(create_text_overlay, reg0, "@Peace hath her victories, no less renowned than War.  ^- John Milton", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 87),
		(create_text_overlay, reg0, "@What does not destroy me, makes me strong.  ^- John Milton", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 88),
		(create_text_overlay, reg0, "@If some among them are innocent, it is expedient that they should be assayed like gold in the furnace and purged by proper judicial examination. ^- Royal letter opening the enquiry into the Templar Knights ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 89),
		(create_text_overlay, reg0, "@He doth nothing but talk of his horse.  ^- Shakespeare, The Merchant of Venice, i, 2 ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 90),
		(create_text_overlay, reg0, "@All the world's a stage, And all the men and women merely players.  ^- Shakespeare, As You Like It, ii, 7", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 91),
		(create_text_overlay, reg0, "@I will kill thee a hundred and fifty ways.  ^- Shakespeare, As You Like It, v, 1", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 92),
		(create_text_overlay, reg0, "@Here I and sorrows sit; Here is my throne, bid kings come bow to it. ^- Shakespeare, King John, iii, 1", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 93),
		(create_text_overlay, reg0, "@Go, bid the soldiers shoot.  ^- Shakespeare, Hamlet, iv, 2 ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 94),
		(create_text_overlay, reg0, "@Come the three corners of the world in arms, and we shall shock them.  ^- Shakespeare, King John, iv, 7", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 95),
		(create_text_overlay, reg0, "@A man can die but once.  ^- Shakespeare, King Henry IV, Part:II. iii, 2", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 96),
		(create_text_overlay, reg0, "@Give me another horse: bind up my wounds.  ^- Shakespeare, King Richard III, v, 3", tf_double_space),
				(else_try),
				
				##Cut
				
				
		(eq, ":num_quotes", 97),
		(create_text_overlay, reg0, "@A horse! A horse! My kingdom for a horse!  ^- Shakespeare, King Richard III, v, 4", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 98),
		(create_text_overlay, reg0, "@The better part of valour is discretion.  ^- Shakespeare, King Henry IV, Part:I, v, 4", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 99),
		(create_text_overlay, reg0, "@To whom God will, there be the victory. ^- Shakespeare, King Henry the Sixth, Part:III, ii, 5", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 100),
		(create_text_overlay, reg0, "@A victory is twice itself when the achiever brings home full numbers. ^- Shakespeare, Much Ado About Nothing, i, 1 ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 101),
		(create_text_overlay, reg0, "@We are ready to try our fortunes To the last man.  ^- Shakespeare, King Henry IV, Part:II, iv, 2", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 102),
		(create_text_overlay, reg0, "@And many strokes, though with a little axe, hew down and fell the hardest-timbered oak. ^- Shakespeare, King Henry VI, Part:III, ii, 1", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 103),
		(create_text_overlay, reg0, "@Upon his royal face there is no note how dread an army hath enrounded him; ^- Shakespeare, King Henry V, iv prologue", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 104),
		(create_text_overlay, reg0, "@There's daggers in men's smiles. ^- Shakespeare, Macbeth, II, 3", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 105),
		(create_text_overlay, reg0, "@It is better to be on hand with ten men than absent with ten thousand. ^- Tamerlane", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 106),
		(create_text_overlay, reg0, "@And ye shall hear of wars and rumours of wars, see that ye be not troubled; for all these things must come to pass, but the end is not yet. ^- Matthew, ch. XXIV, V.6", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 107),
		(create_text_overlay, reg0, "@Blessed be the Lord my strength, which teacheth my hands to war, and my fingers to fight. ^- Psalm, CXLIV", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 108),
		(create_text_overlay, reg0, "@Inflict not on an enemy every injury in your power, for he may afterwards become your friend. ^- Moslih Eddin Saadi", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 109),
		(create_text_overlay, reg0, "@No one conquers who doesn't fight. ^- Gabriel Biel", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 110),
		(create_text_overlay, reg0, "@An emperor is subject to no one but God and justice. ^- Fredrick I, Barbarossa", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 111),
		(create_text_overlay, reg0, "@Wars begin when you will, but they do not end when you please. ^- Niccolo Machiavelli", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 112),
		(create_text_overlay, reg0, "@Let the boy win his spurs. ^- Edward III, King of England, Battle of Crecy 1345", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 113),
		(create_text_overlay, reg0, "@We who are the rest of the people raised our heart and eyes to heaven crying for God^ to have compassion upon us,^ and to turn away from us the power of the French. ^- Thomas Elthem, Henry V's Chaplain at Agincourt", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 114),
		(create_text_overlay, reg0, "@There are some defeats more triumphant than victories. ^- Michel Eyquem de Montaigne", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 115),
		(create_text_overlay, reg0, "@Tis so much to be a king, that he only is so by being so. ^- Michel Eyquem de Montaigne", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 116),
		(create_text_overlay, reg0, "@The souls of emperors and cobblers are cast in the same mould... The same reason that makes us wrangle with a neighbour causes a war betwixt princes. ^- Michel Eyquem de Montaigne", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 117),
		(create_text_overlay, reg0, "@He who knows not how to dissimulate, can not reign. ^- Louis XI, King of France", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 118),
		(create_text_overlay, reg0, "@So many great nobles, things, administrations, so many high chieftains,^ so many brave nations, so many proud princes, and power so splendid; In a moment, a twinkling, all utterly ended. ^- Jacobus de Benedictus", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 119),
		(create_text_overlay, reg0, "@It is more honourable to be raised to a throne than to be born to one. Fortune bestows the one, merit obtains the other. ^- Petrarch", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 120),
		(create_text_overlay, reg0, "@He who defends everything defends nothing. ^- Fredrick II, Holy Roman Emperor", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 121),
		(create_text_overlay, reg0, "@I am the King of Rome, and above grammar. ^- Sigismund, Holy Roman Emperor ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 122),
		(create_text_overlay, reg0, "@When you see contention amongst your enemies, go and sit at ease with your friends; but when you see them^ of one mind, string your bow, and place stones upon the ramparts. ^- Moslih Eddin Saadi", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 123),
		(create_text_overlay, reg0, "@Disasters teach us humility. ^- Saint Anselm, Archbishop of Canterbury", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 124),
		(create_text_overlay, reg0, "@I have loved justice and hated inequity; and therefore I die in exile. ^- Pope Gregory VII, Tuscan Pope", tf_double_space), #82
				(else_try),
		(eq, ":num_quotes", 125),
		(create_text_overlay, reg0, "@In a fight, anger is as good as courage. ^- Welsh proverb", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 126),
		(create_text_overlay, reg0, "@Undertake this journey for the remission of your sins, with the assurance^ of the imperishable glory of the Kingdom of Heaven! ^- Urban II, Pope", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 127),
		(create_text_overlay, reg0, "@To carry on war, three things are necessary: money, money, and yet more money. ^- Gian Jacopo Trivulzio", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 128),
		(create_text_overlay, reg0, "@Fight to the last gasp. ^- Shakespeare, King Henry VI, part 1, i, 1", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 129),
		(create_text_overlay, reg0, "@I'll fight, till from my bones my flesh be hacked. ^- Shakespeare, Macbeth, v, 3", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 130),
		(create_text_overlay, reg0, "@Once more unto the breach, dear friends, once more! ^- Shakespeare, King Henry V, iii, 1", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 131),
		(create_text_overlay, reg0, "@Let the world tremble as it senses all you are about to accomplish. ^- Luis Camoes, The Lusiads, canto 1:15", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 132),
		(create_text_overlay, reg0, "@Having done everything practical to make ready for so long a voyage, we prepared our souls to meet death, which is always on a sailor's horizon. ^- Luis Camoes, The Lusiads, canto 4:86", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 133),
		(create_text_overlay, reg0, "@I speak Spanish to God, Italian to women, French to men, and German to my horse. ^- King Charles V King of France", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 134),
		(create_text_overlay, reg0, "@Had I been present at the creation, I would have given some useful hints for the better ordering of the universe. ^- Alfonso X, the Wise, King of Castile", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 135),
		(create_text_overlay, reg0, "@Every man should arm himself as quickly as he could, and come to the King. ^- Charles Oman", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 136),
		(create_text_overlay, reg0, "@Let those who once fought against brothers and relatives now rightfully fight against barbarians. ^- Pope Urban II", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 137),
		(create_text_overlay, reg0, "@On both sides the troops were commanded by royal princes and they massacred each other mercilessly. ^- Matthew of Edessa", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 138),
		(create_text_overlay, reg0, "@Not even our royal power, nor our financial, or the pleasures of life are more valueable to our subjects than peace and the state's prosperity. ^- Tactika, by Emperor Leon VI the Wise", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 139),
		(create_text_overlay, reg0, "@All people are icons of our God and so they must be respected and if possible during times of war their lives must be protected. ^- Tactika, by Emperor Leon VI the Wise", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 140),
		(create_text_overlay, reg0, "@The Strategos is the ultimate ruler of the Thema by the authority that the Emperor gives him. ^- Tactika, by Emperor Leon VI the Wise", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 141),
		(create_text_overlay, reg0, "@You must equip your scoutati, known in the past as hoplitae, with sword, spear and a shield. ^All shields of your troops must have the same colours for each unit and they must be equipped with helmets also. ^- Tactika, by Emperor Leon VI the Wise", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 142),
		(create_text_overlay, reg0, "@Frontal attacks are insecure and dangerous against any nation's army, even if it is smaller than ours. ^- Tactika, by Emperor Leon VI the Wise", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 143),
		(create_text_overlay, reg0, "@When the army moves forward to engage the enemy, they must seek the victorious cross wins. ^- Tactika, by Emperor Leon VI the Wise", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 144),
		(create_text_overlay, reg0, "@The city of Constantinople is huge and it has high and powerful walls. The highest and the most powerful walls in the world. ^- Bilearduine 1203", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 145),
		(create_text_overlay, reg0, "@So we are Hellenes by origin, as our language and our fathers' heritage has proven. ^- Georgios Plethon Gemistos Mistras 1430", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 146),
		(create_text_overlay, reg0, "@And we went into the Greek lands, and we were led into a place where they serve their God, ^and we did not know where we were, on heaven or on earth; and do not know how to talk about this. ^- Russian Primary Cronicle, reported by embassy to Vladimir of Kiev", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 147),
		(create_text_overlay, reg0, "@My punishment is far heavier. I forgive you, and set you free. ^- Conversation between Byzantine emperor Romanus IV Diogenes and Alp Arslan, 1071 AD", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 148),
		(create_text_overlay, reg0, "@He was a wise and discreet prince of great magnificence, worthy of praise in every respect, ^a great-souled man of incomparable energy whose memory will ever be held in benediction. ^- William of Tyre, on death of Emperor Manuel I. Komnenos; Historia Rerum In Partibus Transmarinis Gestarum", tf_double_space),
						(else_try),
		(eq, ":num_quotes", 149),
		(create_text_overlay, reg0, "@^..They will be like flowers we gather from meadows to embellish incomparably the imperial splendor. They will be like a mirror, radiant and of a perfect clarity. ^And we will place them in the center of palace (and) will see there what's appropriate to the imperial power... ^- from preface of Constantin VII, De Ceremoniis", tf_double_space),
		(else_try),
		(eq, ":num_quotes", 150),
		(create_text_overlay, reg0, "@By the commands of Theodosius, in less than two months, Constantine triumphantly erected these strong walls. ^- Inscription on the Theodosian walls", tf_double_space),
		(else_try),
		(eq, ":num_quotes", 151),
		(create_text_overlay, reg0, "@Tell people there's an invisible man in the sky who created the universe, and the vast majority will believe you. ^Tell them the paint is wet, and they have to touch it to be sure. ^- George Carlin", tf_double_space),
		(else_try),
		(eq, ":num_quotes", 152),
		(create_text_overlay, reg0, "@The fighting was fierce and lasted for the greater part of a day; blood ran in rivers. ^- Matthew of Edessa", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 153),
		(create_text_overlay, reg0, "@Many of the common people in the armies were desolate, fearing future poverty; ^and so they sold their bows and the cowards returned to their own homes. ^- Fulcher of Chartres", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 154),
		(create_text_overlay, reg0, "@Let anyone who has zeal for God come with me! Let us fight for our brothers! Let Heaven's will be done!^- Conrad III, ruler of the Holy Roman Empire", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 155),
		(create_text_overlay, reg0, "@God has aroused the spirit of kings and princes to root up from the earth the enemies of the Christian name.^- Bernard of Clairvaux", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 156),
		(create_text_overlay, reg0, "@Surrender before you all die by the sword, for I do not wish you to perish.^- Imad ad-Din Zanghi", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 157),
		(create_text_overlay, reg0, "@We shall not surrender.^- Archbishop Hugh", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 158),
		(create_text_overlay, reg0, "@Come on soldiers! Guardians and agents of the supreme law! ^Here is a sacrifice of dogs ready for your swords!^- Il-Ghazi", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 159),
		(create_text_overlay, reg0, "@At the first sound of the bugle, everyone should make haste to put on arms and armour.^- Walter, Chancellor to Roger of Salerno", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 160),
		(create_text_overlay, reg0, "@Put an end to so great an evil and arrive at a peace settlement whatever the outcome, and whatever the conditions.^- William of Tyre", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 161),
		(create_text_overlay, reg0, "@Take up the weapons of the glorious army for the salvation of many thousands.^- Adela, wife of Stephen of Blois", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 162),
		(create_text_overlay, reg0, "@If they wish to fight today, let them come like men.^- Bohemund", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 163),
		(create_text_overlay, reg0, "@They assembled from all sides, one after another, with arms and horses and all the panoply of war... ^- Anna Comnenus, The Alexiad ", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 164),
		(create_text_overlay, reg0, "@Alas! How many noble and valiant knights we lost.^- Fulcher of Chartres", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 165),
		(create_text_overlay, reg0, "@There is now no hope of escaping. If you fight you will conquer, but if you flee you will fall.^- Fulcher of Chartres", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 166),
		(create_text_overlay, reg0, "@When he caught sight of their army, he was terrified and groaned in his mind.^- Fulcher of Chartres", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 167),
		(create_text_overlay, reg0, "@The Frankish duke wept bitterly to see his soldiers massacred.^- Matthew of Edessa", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 168),
		(create_text_overlay, reg0, "@He withdrew, himself wounded, and was compelled to return home inglorious, weeping - he who had once vainly hoped for the glory of a triumph.^- William of Apulia", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 169),
		(create_text_overlay, reg0, "@Therefore gird yourselves manfully and take up joyful arms for the name of Christ.^- Bernard of Clairvaux", tf_double_space),
				(else_try),
		(eq, ":num_quotes", 170),
		(create_text_overlay, reg0, "@Set out on pilgrimage and triumph gloriously over the infidels in the East.^- Orderic Vitalis", tf_double_space),
		(try_end),
		
#{Quote_100}The fighting was fierce and lasted for the greater part of a day; blood ran in rivers. #
#{Quote_102}Many of the common people in the armies were desolate, fearing future poverty; and so they sold their bows and the cowards returned to their own homes. 
#{Quote_103}Let anyone who has zeal for God come with me! Let us fight for our brothers! Let Heaven's will be done!
#{Quote_104}God has aroused the spirit of kings and princes to root up from the earth the enemies of the Christian name.
#{Quote_106}Surrender before you all die by the sword, for I do not wish you to perish.
#{Quote_107}We shall not surrender.
#{Quote_108}Come on soldiers! Guardians and agents of the supreme law! Here is a sacrifice of dogs ready for your swords!
#{Quote_109}At the first sound of the bugle, everyone should make haste to put on arms and armour.
#{Quote_110}Put an end to so great an evil and arrive at a peace settlement whatever the outcome, and whatever the conditions.
#{Quote_111}Take up the weapons of the glorious army for the salvation of many thousands.
#{Quote_112}If they wish to fight today, let them come like men.
#{Quote_113}They assembled from all sides, one after another, with arms and horses and all the panoply of war... 
#{Quote_114}Alas! How many noble and valiant knights we lost.
#{Quote_115}There is now no hope of escaping. If you fight you will conquer, but if you flee you will fall.
#{Quote_116}When he caught sight of their army, he was terrified and groaned in his mind.
#{Quote_117}The Frankish duke wept bitterly to see his soldiers massacred.
#{Quote_118}He withdrew, himself wounded, and was compelled to return home inglorious, weeping - he who had once vainly hoped for the glory of a triumph.
#{Quote_119}Therefore gird yourselves manfully and take up joyful arms for the name of Christ.
#{Quote_120}Set out on pilgrimage and triumph gloriously over the infidels in the East.
		
        (position_set_x, pos1, 816), #Size was 820 def
        (position_set_y, pos1, 1300), #1300 def
       (overlay_set_size, reg0, pos1),
        (overlay_set_color, reg0, 0xff0000),#0x000000 #0x00FFFF #0xCFB095 #Color might be change-able. #Black 222225 #Normal grey d7d8dc #Green 7cff82 #New black 020203 #Black 000000
        (position_set_x, pos1, 172), #Less pixels = more left, more pixels = more right, earlier: 233px = perfect for animated menus
        (position_set_y, pos1, 10), # 610 default Possibly put all the way at the bottom or move to the top.
       (overlay_set_position, reg0, pos1),
		#Quotes end
        #(is_vanilla_warband),
        (create_text_overlay, reg0, "@Made by: Faycal Kilali^ Twitter: twitter.com/faycalki (@faycalki)", tf_double_space),
        (position_set_x, pos1, 620),
        (position_set_y, pos1, 1300),
       (overlay_set_size, reg0, pos1),
        (overlay_set_color, reg0, 0x222225),
        (position_set_x, pos1, 233),
        (position_set_y, pos1, 555),
       (overlay_set_position, reg0, pos1),
	  # (create_text_overlay, reg0, "@Note: to clarify WSE is NOT a requirement, it is not necessary, you may play the whole mod, and join co-op campaigns without it.", tf_double_space),
      #  (position_set_x, pos1, 620),
      #  (position_set_y, pos1, 1300),
      # (overlay_set_size, reg0, pos1),
      #  (overlay_set_color, reg0, 0xFA8258),
      #  (position_set_x, pos1, 233),
      #  (position_set_y, pos1, 335),
      # (overlay_set_position, reg0, pos1),
      (else_try),
        (assign, reg1, 0),
        (assign, reg2, 33),
        (str_clear, s3),
        (str_store_string, s3, "@Tainted Paths Ember Form Active!"),
        (create_text_overlay, reg0, s3, tf_double_space),
        (position_set_x, pos1, 1000),
        (position_set_y, pos1, 1060), #1060 default for new font
        (overlay_set_size, reg0, pos1),
       (position_set_x, pos1, 50),
       (position_set_y, pos1, 710), #690 default for new font
       (overlay_set_position, reg0, pos1),
        (store_wse_version, reg10, 0),
        (store_wse_version, reg11, 1),
        (store_wse_version, reg12, 2),
        (create_text_overlay, reg0, "@Currently Running WSE V{reg10}.{reg11}.{reg12}", tf_double_space),
        (position_set_x, pos1, 620),
        (position_set_y, pos1, 850),
        (overlay_set_size, reg0, pos1),
        (position_set_x, pos1, 70),
        (position_set_y, pos1, 512),
        (overlay_set_position, reg0, pos1),
      (try_end),
	  
#	  #Start animated main menu
#      (create_mesh_overlay, reg0, "mesh_main_menu_dust"),
#      (position_set_x, pos1, 0),
#      (position_set_y, pos1, 0),
#      (overlay_set_position, reg0, pos1),
#      (create_mesh_overlay, reg0, "mesh_main_menu_static"),
#      (position_set_x, pos1, 0),
#      (position_set_y, pos1, 0),
#     (overlay_set_position, reg0, pos1),
##      (create_mesh_overlay, reg0, "mesh_main_menu_prs"),
##      (position_set_x, pos1, 0),
##     (position_set_y, pos1, 0),
##      (overlay_set_position, reg0, pos1),
#      (create_mesh_overlay, reg0, "mesh_main_menu_move_1"),
#      (position_set_x, pos1, 0),
#      (position_set_y, pos1, 0),
#      (overlay_set_position, reg0, pos1),
##      (assign, ":var0", 1400),
##      (assign, ":var1", 145),
##      (assign, ":var2", 452),
##      (assign, ":var3", -40),
#			#EDIT Module Name right here, CUSTOM CODE ENVIOUS, ENVFIX, HERE YA GO.
#			
#			#End animated main menu
			(create_text_overlay, "$g_presentation_credits_obj_1", "@Tainted Paths", 2048),
			(str_store_string, 22, "str_revision"),
			(create_text_overlay, "$g_presentation_credits_obj_2", "@{s22}", 2048),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_credits_obj_1", 1),
			(overlay_set_size, "$g_presentation_credits_obj_2", 1),
			(overlay_set_color, "$g_presentation_credits_obj_1", 16777215),
			(overlay_set_color, "$g_presentation_credits_obj_2", 16777215),
			(position_set_x, 1, -300), #-300
			(position_set_y, 1, 650), #650
			(overlay_set_position, "$g_presentation_credits_obj_1", 1),
			(position_set_x, 1, 430), #300 #MC Left/Right OLD: 450
			(position_set_y, 1, 720), #650 #MC Up/Down OLD
			(overlay_animate_to_position, "$g_presentation_credits_obj_1", 600, 1),
			(position_set_x, 1, 1300), 
			(position_set_y, 1, 600), 
			(overlay_set_position, "$g_presentation_credits_obj_2", 1),
			(position_set_x, 1, 320), #Version number left/right OLD: 450
			(position_set_y, 1, 700), #Version number up/down
			(overlay_animate_to_position, "$g_presentation_credits_obj_2", 600, 1)
		])
	]),

	("game_credits", prsntf_read_only, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(assign, "$g_presentation_credits_obj_1", -1),
			(assign, "$g_presentation_credits_obj_2", -1),
			(assign, "$g_presentation_credits_obj_3", -1),
			(assign, "$g_presentation_credits_obj_4", -1),
			(assign, "$g_presentation_credits_obj_5", -1),
			(assign, "$g_presentation_credits_obj_6", -1),
			(assign, "$g_presentation_credits_obj_7", -1),
			(assign, "$g_presentation_credits_obj_8", -1),
			(assign, "$g_presentation_credits_obj_9", -1),
			(assign, "$g_presentation_credits_obj_10", -1),
			(assign, "$g_presentation_credits_obj_11", -1),
			(assign, "$g_presentation_credits_obj_12", -1),
			(assign, "$g_presentation_credits_obj_1_alpha", 0),
			(assign, "$g_presentation_credits_obj_2_alpha", 0),
			(assign, "$g_presentation_credits_obj_3_alpha", 0),
			(assign, "$g_presentation_credits_obj_4_alpha", 0),
			(assign, "$g_presentation_credits_obj_5_alpha", 0),
			(assign, "$g_presentation_credits_obj_6_alpha", 0),
			(assign, "$g_presentation_credits_obj_7_alpha", 0),
			(assign, "$g_presentation_credits_obj_8_alpha", 0),
			(assign, "$g_presentation_credits_obj_9_alpha", 0)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 1000000),
			(try_begin),
				(this_or_next|key_clicked, 57),
				(this_or_next|key_clicked, 28),
				(this_or_next|key_clicked, 1),
				(this_or_next|key_clicked, 14),
				(this_or_next|key_clicked, 224),
				(this_or_next|key_clicked, 225),
				(this_or_next|key_clicked, 252),
				(key_clicked, 253),
				(presentation_set_duration, 0),
			(try_end),
			(try_begin),
				(lt, "$g_presentation_credits_obj_1", 0),
				(str_store_string, 1, "str_credits_1"),
				(create_text_overlay, "$g_presentation_credits_obj_1", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_1", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_1", 0),
				(position_set_x, 1, 1500),
				(position_set_y, 1, 1500),
				(overlay_set_size, "$g_presentation_credits_obj_1", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_1", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_1", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 2000),
				(eq, "$g_presentation_credits_obj_1_alpha", 0),
				(assign, "$g_presentation_credits_obj_1_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_1", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 3500),
				(lt, "$g_presentation_credits_obj_2", 0),
				(str_store_string, 1, "str_credits_2"),
				(create_text_overlay, "$g_presentation_credits_obj_2", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_2", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_2", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_2", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_2", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_2", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 5500),
				(eq, "$g_presentation_credits_obj_2_alpha", 0),
				(assign, "$g_presentation_credits_obj_2_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_2", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 7000),
				(lt, "$g_presentation_credits_obj_3", 0),
				(str_store_string, 1, "str_credits_3"),
				(create_text_overlay, "$g_presentation_credits_obj_3", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_3", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_3", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_3", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_3", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_3", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 9000),
				(eq, "$g_presentation_credits_obj_3_alpha", 0),
				(assign, "$g_presentation_credits_obj_3_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_3", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 10500),
				(lt, "$g_presentation_credits_obj_4", 0),
				(str_store_string, 1, "str_credits_4"),
				(create_text_overlay, "$g_presentation_credits_obj_4", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_4", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_4", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_4", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_4", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_4", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 12500),
				(eq, "$g_presentation_credits_obj_4_alpha", 0),
				(assign, "$g_presentation_credits_obj_4_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_4", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 14000),
				(lt, "$g_presentation_credits_obj_5", 0),
				(str_store_string, 1, "str_credits_5"),
				(create_text_overlay, "$g_presentation_credits_obj_5", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_5", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_5", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_5", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_5", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_5", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 16000),
				(eq, "$g_presentation_credits_obj_5_alpha", 0),
				(assign, "$g_presentation_credits_obj_5_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_5", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 17500),
				(lt, "$g_presentation_credits_obj_6", 0),
				(str_store_string, 1, "str_credits_6"),
				(create_text_overlay, "$g_presentation_credits_obj_6", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_6", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_6", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_6", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_6", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_6", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 19500),
				(eq, "$g_presentation_credits_obj_6_alpha", 0),
				(assign, "$g_presentation_credits_obj_6_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_6", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 21000),
				(lt, "$g_presentation_credits_obj_7", 0),
				(str_store_string, 1, "str_credits_7"),
				(create_text_overlay, "$g_presentation_credits_obj_7", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_7", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_7", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_7", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_7", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_7", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 23000),
				(eq, "$g_presentation_credits_obj_7_alpha", 0),
				(assign, "$g_presentation_credits_obj_7_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_7", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 24500),
				(lt, "$g_presentation_credits_obj_8", 0),
				(str_store_string, 1, "str_credits_8"),
				(create_text_overlay, "$g_presentation_credits_obj_8", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_8", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_8", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_8", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_8", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_8", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 26500),
				(eq, "$g_presentation_credits_obj_8_alpha", 0),
				(assign, "$g_presentation_credits_obj_8_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_8", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 28000),
				(lt, "$g_presentation_credits_obj_9", 0),
				(str_store_string, 1, "str_credits_10"),
				(create_text_overlay, "$g_presentation_credits_obj_9", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_9", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_9", 0),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, "$g_presentation_credits_obj_9", 1),
				(position_set_x, 1, 250),
				(position_set_y, 1, 485),
				(overlay_set_position, "$g_presentation_credits_obj_9", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_9", 1000, 255),
				(str_store_string, 1, "str_credits_11"),
				(create_text_overlay, "$g_presentation_credits_obj_10", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_10", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_10", 0),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, "$g_presentation_credits_obj_10", 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 470),
				(overlay_set_position, "$g_presentation_credits_obj_10", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_10", 1000, 255),
				(str_store_string, 1, "str_credits_12"),
				(create_text_overlay, "$g_presentation_credits_obj_11", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_11", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_11", 0),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, "$g_presentation_credits_obj_11", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 105),
				(overlay_set_position, "$g_presentation_credits_obj_11", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_11", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 34000),
				(eq, "$g_presentation_credits_obj_9_alpha", 0),
				(assign, "$g_presentation_credits_obj_9_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_9", 1000, 0),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_10", 1000, 0),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_11", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 35500),
				(lt, "$g_presentation_credits_obj_12", 0),
				(str_store_string, 1, "str_credits_9"),
				(create_text_overlay, "$g_presentation_credits_obj_12", 1, 2064),
				(overlay_set_color, "$g_presentation_credits_obj_12", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_12", 255),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, "$g_presentation_credits_obj_12", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, -4800),
				(overlay_set_position, "$g_presentation_credits_obj_12", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 760),
				(overlay_animate_to_position, "$g_presentation_credits_obj_12", 70000, 1),
			(else_try),
				(gt, ":trigger_param_1", 105500),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("game_profile_banner_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(str_store_string, 1, "str_profile_banner_selection_text"),
			(create_text_overlay, reg1, 1, 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(overlay_set_text, reg1, 1),
			(create_button_overlay, "$g_presentation_obj_profile_banner_selection_1", "str_nextpage_1", 16),
			(position_set_x, 1, 700),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_profile_banner_selection_1", 1),
			(create_button_overlay, "$g_presentation_obj_profile_banner_selection_2", "str_use_default_banner", 16),
			(position_set_x, 1, 300),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_profile_banner_selection_2", 1),
			(assign, ":value", 150),
			(assign, ":var_2", 575),
			(store_mul, ":value_2", 16, "$g_presentation_page_no"),
			(store_add, ":value_3", ":value_2", 16),
			(store_add, "$g_presentation_banner_start", "$g_presentation_obj_profile_banner_selection_2", 1),
			(assign, ":var_5", 0),
			(try_for_range, ":mesh", "mesh_banner_a01", "mesh_banner_k21"),
				(assign, ":value_4", 0),
				(try_for_range, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
					(faction_slot_eq, ":faction", 2, ":mesh"),
					(assign, ":value_4", 1),
				(try_end),
				(eq, ":value_4", 0),
				(val_add, ":var_5", 1),
				(gt, ":var_5", ":value_2"),
				(le, ":var_5", ":value_3"),
				(create_image_button_overlay, reg1, ":mesh", ":mesh"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 100),
				(position_set_y, 1, 100),
				(overlay_set_size, reg1, 1),
				(val_add, ":value", 100),
				(ge, ":value", 900),
				(assign, ":value", 150),
				(val_sub, ":var_2", 250),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_profile_banner_selection_1"),
				(val_add, "$g_presentation_page_no", 1),
				(val_mod, "$g_presentation_page_no", 15),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_profile_banner_selection"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_profile_banner_selection_2"),
				(profile_set_banner_id, -1),
				(presentation_set_duration, 0),
			(else_try),
				(store_sub, ":value", ":trigger_param_1", "$g_presentation_banner_start"),
				(store_mul, ":value_2", 16, "$g_presentation_page_no"),
				(val_add, ":value", ":value_2"),
				(assign, ":var_4", 0),
				(assign, ":value_3", "mesh_banner_k21"),
				(try_for_range, ":mesh", "mesh_banner_a01", ":value_3"),
					(assign, ":value_4", 0),
					(try_for_range, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
						(faction_slot_eq, ":faction", 2, ":mesh"),
						(assign, ":value_4", 1),
					(try_end),
					(eq, ":value_4", 0),
					(try_begin),
						(eq, ":value", ":var_4"),
						(store_sub, ":value_5", ":mesh", "mesh_banner_a01"),
						(profile_set_banner_id, ":value_5"),
						(assign, ":value_3", 0),
					(try_end),
					(val_add, ":var_4", 1),
				(try_end),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("game_multiplayer_admin_panel", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 248),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_welcome_message", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_team_select", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_troop_select", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_item_select", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[]),

		(ti_on_presentation_event_state_change,
		[]),

		(ti_on_presentation_mouse_press,
		[]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_message_1", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_message_2", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_message_3", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_round_time_counter", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_team_score_display", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_flag_projection_display", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_flag_projection_display_bt", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_destructible_targets_display", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_respawn_time_counter", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_stats_chart", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(omit_key_once, 238),
			(omit_key_once, 239),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_stats_chart_deathmatch", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(omit_key_once, 238),
			(omit_key_once, 239),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_escape_menu", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_poll_menu", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_show_players_list", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_show_maps_list", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_event_state_change,
		[]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_show_factions_list", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_show_number_of_bots_list", prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_event_state_change,
		[]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_poll", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_run,
		[])
	]),

	("tutorial_show_mouse_movement", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_run,
		[])
	]),

	("name_kingdom", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(str_store_string, 1, "str_name_kingdom_text"),
			(create_text_overlay, reg1, 1, 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_position, reg1, 1),
			(overlay_set_text, reg1, 1),
			(create_simple_text_box_overlay, "$g_presentation_obj_name_kingdom_1"),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_name_kingdom_1", 1),
			(try_begin),
				(str_store_faction_name, 7, "$wm_player_fac"),
				(overlay_set_text, "$g_presentation_obj_name_kingdom_1", 7),
			(try_end),
			(create_button_overlay, "$g_presentation_obj_name_kingdom_2", "str_continue_1", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_name_kingdom_2", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_name_kingdom_1"),
				(str_store_string, 7, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_name_kingdom_2"),
				(faction_set_name, "$wm_player_fac", 7),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
			(try_end)
		])
	]),

	("banner_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(str_store_string, 1, "str_banner_selection_text"),
			(create_text_overlay, reg1, 1, 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(overlay_set_text, reg1, 1),
			(create_button_overlay, "$g_presentation_obj_banner_selection_1", "str_nextpage_1", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_banner_selection_1", 1),
			(assign, ":value", 150),
			(assign, ":var_2", 575),
			(assign, ":var_3", "mesh_banner_k21"),
			(store_sub, ":value_2", "fac_kingdoms_end", "fac_kingdom_1"),
			(val_sub, ":var_3", ":value_2"),
			(store_mul, ":value_3", 16, "$g_presentation_page_no"),
			(val_add, ":value_3", "mesh_banner_a01"),
			(store_add, ":value_4", ":value_3", 16),
			(val_min, ":var_3", ":value_4"),
			(store_add, "$g_presentation_banner_start", "$g_presentation_obj_banner_selection_1", 1),
			(try_for_range, ":var_7", ":value_3", ":var_3"),
				(create_image_button_overlay, reg1, ":var_7", ":var_7"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 100),
				(position_set_y, 1, 100),
				(overlay_set_size, reg1, 1),
				(val_add, ":value", 100),
				(ge, ":value", 900),
				(assign, ":value", 150),
				(val_sub, ":var_2", 250),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_banner_selection_1"),
				(val_add, "$g_presentation_page_no", 1),
				(val_mod, "$g_presentation_page_no", 11),
				(start_presentation, "prsnt_banner_selection"),
			(else_try),
				(store_sub, ":value", ":trigger_param_1", "$g_presentation_banner_start"),
				(store_mul, ":value_2", 16, "$g_presentation_page_no"),
				(val_add, ":value", ":value_2"),
				(store_add, ":value_3", ":value", "icon_banner_01"),
				(party_set_banner_icon, "p_main_party", ":value_3"),
				(store_add, ":value_4", ":value", "spr_banner_a"),
				(troop_set_slot, "trp_player", 1, ":value_4"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(this_or_next|key_clicked, 57),
				(this_or_next|key_clicked, 28),
				(this_or_next|key_clicked, 1),
				(this_or_next|key_clicked, 14),
				(this_or_next|key_clicked, 252),
				(key_clicked, 253),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("custom_banner", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[])
	]),

	("banner_charge_positioning", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_event_state_change,
		[])
	]),

	("banner_charge_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_event_state_change,
		[])
	]),

	("banner_background_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_event_state_change,
		[])
	]),

	("banner_flag_type_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_event_state_change,
		[])
	]),

	("banner_flag_map_type_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_event_state_change,
		[])
	]),

	("color_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_event_state_change,
		[])
	]),
	
	
#		("ratio_bar_fix", 0, mesh_pic_bandits, 
#	[(ti_on_presentation_load,
#		[]),
#		(ti_on_presentation_run,
#		[
#(presentation_set_duration, 0), #Ratio bar fix		
#
#])
#	]),
	

	("battle", 0, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[

			(set_fixed_point_multiplier, 1000),
			(assign, "$g_formation_group0_selected", 0),
			(assign, "$g_formation_group1_selected", 0),
			(assign, "$g_formation_group2_selected", 0),
			(assign, "$g_formation_group3_selected", 0),
			(assign, "$g_formation_group4_selected", 0),
			(assign, "$g_formation_group5_selected", 0),
			(assign, "$g_formation_group6_selected", 0),
			(assign, "$g_formation_group7_selected", 0),
			(assign, "$g_formation_group8_selected", 0),
			(assign, "$g_presentation_obj_battle_but0", -1),
			(assign, "$g_presentation_obj_battle_but1", -1),
			(assign, "$g_presentation_obj_battle_but2", -1),
			(assign, "$g_presentation_obj_battle_but3", -1),
			(assign, "$g_presentation_obj_battle_but4", -1),
			(assign, "$g_presentation_obj_battle_but5", -1),
			(assign, "$g_presentation_obj_battle_but6", -1),
			(assign, "$g_presentation_obj_battle_but7", -1),
			(assign, "$g_presentation_obj_battle_but8", -1),
			(str_clear, 7),
			(try_for_agents, ":var_1"),
				(agent_set_slot, ":var_1", slot_agent_map_overlay_id, 0),
			(try_end),
			(create_mesh_overlay, reg0, "mesh_invisi_st_plane_fullsc"),
			(position_set_x, 1, 0),
			(position_set_y, 1, 0),
			(overlay_set_position, reg0, 1),
			(assign, "$group0_has_troops", 1),
			(assign, "$group1_has_troops", 1),
			(assign, "$group2_has_troops", 1),
			(assign, "$group3_has_troops", 1),
			(assign, "$group4_has_troops", 1),
			(assign, "$group5_has_troops", 1),
			(assign, "$group6_has_troops", 1),
			(assign, "$group7_has_troops", 1),
			(assign, "$group8_has_troops", 1),
			(assign, ":value", 181),
			(assign, ":value_2", 1),
			(assign, ":value_3", 67),
			(assign, ":var_5", 1300),
			(assign, ":var_6", 1300),
			(assign, ":var_7", 600),
			(assign, ":var_8", 600),
			(assign, ":var_9", 211),
			(assign, ":var_10", 46),
			(assign, ":var_11", 32),
			(try_begin),
				(eq, "$group0_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but0", "mesh_bt_flag_2", "mesh_bt_flag_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but0", 1),
				(create_text_overlay, "$g_presentation_obj_battle_name0", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name0", 1),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_size, "$g_presentation_obj_battle_name0", 1),
				(create_text_overlay, "$g_presentation_but0_movement", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_11"),
				(overlay_set_position, "$g_presentation_but0_movement", 1),
				(position_set_x, 1, ":var_7"),
				(position_set_y, 1, ":var_8"),
				(overlay_set_size, "$g_presentation_but0_movement", 1),
				(call_script, "script_battle_tab_class_icon_export", 0, 1),
				(create_mesh_overlay, "$g_presentation_icon_but0", "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_icon_but0", 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
			(try_end),
			(try_begin),
				(eq, "$group1_has_troops", 1),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_but1", "mesh_bt_flag_2", "mesh_bt_flag_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but1", 1),
				(val_add, ":var_9", ":value_3"),
				(create_text_overlay, "$g_presentation_obj_battle_name1", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name1", 1),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_size, "$g_presentation_obj_battle_name1", 1),
				(create_text_overlay, "$g_presentation_but1_movement", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_11"),
				(overlay_set_position, "$g_presentation_but1_movement", 1),
				(position_set_x, 1, ":var_7"),
				(position_set_y, 1, ":var_8"),
				(overlay_set_size, "$g_presentation_but1_movement", 1),
				(call_script, "script_battle_tab_class_icon_export", 1, 1),
				(create_mesh_overlay, "$g_presentation_icon_but1", "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_icon_but1", 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
			(try_end),
			(try_begin),
				(eq, "$group2_has_troops", 1),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_but2", "mesh_bt_flag_2", "mesh_bt_flag_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but2", 1),
				(val_add, ":var_9", ":value_3"),
				(create_text_overlay, "$g_presentation_obj_battle_name2", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name2", 1),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_size, "$g_presentation_obj_battle_name2", 1),
				(create_text_overlay, "$g_presentation_but2_movement", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_11"),
				(overlay_set_position, "$g_presentation_but2_movement", 1),
				(position_set_x, 1, ":var_7"),
				(position_set_y, 1, ":var_8"),
				(overlay_set_size, "$g_presentation_but2_movement", 1),
				(call_script, "script_battle_tab_class_icon_export", 2, 1),
				(create_mesh_overlay, "$g_presentation_icon_but2", "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_icon_but2", 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
			(try_end),
			(try_begin),
				(eq, "$group3_has_troops", 1),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_but3", "mesh_bt_flag_2", "mesh_bt_flag_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but3", 1),
				(val_add, ":var_9", ":value_3"),
				(create_text_overlay, "$g_presentation_obj_battle_name3", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name3", 1),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_size, "$g_presentation_obj_battle_name3", 1),
				(create_text_overlay, "$g_presentation_but3_movement", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_11"),
				(overlay_set_position, "$g_presentation_but3_movement", 1),
				(position_set_x, 1, ":var_7"),
				(position_set_y, 1, ":var_8"),
				(overlay_set_size, "$g_presentation_but3_movement", 1),
				(call_script, "script_battle_tab_class_icon_export", 3, 1),
				(create_mesh_overlay, "$g_presentation_icon_but3", "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_icon_but3", 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
			(try_end),
			(try_begin),
				(eq, "$group4_has_troops", 1),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_but4", "mesh_bt_flag_2", "mesh_bt_flag_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but4", 1),
				(val_add, ":var_9", ":value_3"),
				(create_text_overlay, "$g_presentation_obj_battle_name4", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name4", 1),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_size, "$g_presentation_obj_battle_name4", 1),
				(create_text_overlay, "$g_presentation_but4_movement", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_11"),
				(overlay_set_position, "$g_presentation_but4_movement", 1),
				(position_set_x, 1, ":var_7"),
				(position_set_y, 1, ":var_8"),
				(overlay_set_size, "$g_presentation_but4_movement", 1),
				(call_script, "script_battle_tab_class_icon_export", 4, 1),
				(create_mesh_overlay, "$g_presentation_icon_but4", "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_icon_but4", 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
			(try_end),
			(try_begin),
				(eq, "$group5_has_troops", 1),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_but5", "mesh_bt_flag_2", "mesh_bt_flag_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but5", 1),
				(val_add, ":var_9", ":value_3"),
				(create_text_overlay, "$g_presentation_obj_battle_name5", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name5", 1),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_size, "$g_presentation_obj_battle_name5", 1),
				(create_text_overlay, "$g_presentation_but5_movement", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_11"),
				(overlay_set_position, "$g_presentation_but5_movement", 1),
				(position_set_x, 1, ":var_7"),
				(position_set_y, 1, ":var_8"),
				(overlay_set_size, "$g_presentation_but5_movement", 1),
				(call_script, "script_battle_tab_class_icon_export", 5, 1),
				(create_mesh_overlay, "$g_presentation_icon_but5", "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_icon_but5", 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
			(try_end),
			(try_begin),
				(eq, "$group6_has_troops", 1),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_but6", "mesh_bt_flag_2", "mesh_bt_flag_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but6", 1),
				(val_add, ":var_9", ":value_3"),
				(create_text_overlay, "$g_presentation_obj_battle_name6", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name6", 1),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_size, "$g_presentation_obj_battle_name6", 1),
				(create_text_overlay, "$g_presentation_but6_movement", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_11"),
				(overlay_set_position, "$g_presentation_but6_movement", 1),
				(position_set_x, 1, ":var_7"),
				(position_set_y, 1, ":var_8"),
				(overlay_set_size, "$g_presentation_but6_movement", 1),
				(call_script, "script_battle_tab_class_icon_export", 6, 1),
				(create_mesh_overlay, "$g_presentation_icon_but6", "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_icon_but6", 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
			(try_end),
			(try_begin),
				(eq, "$group7_has_troops", 1),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_but7", "mesh_bt_flag_2", "mesh_bt_flag_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but7", 1),
				(val_add, ":var_9", ":value_3"),
				(create_text_overlay, "$g_presentation_obj_battle_name7", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name7", 1),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_size, "$g_presentation_obj_battle_name7", 1),
				(create_text_overlay, "$g_presentation_but7_movement", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_11"),
				(overlay_set_position, "$g_presentation_but7_movement", 1),
				(position_set_x, 1, ":var_7"),
				(position_set_y, 1, ":var_8"),
				(overlay_set_size, "$g_presentation_but7_movement", 1),
				(call_script, "script_battle_tab_class_icon_export", 7, 1),
				(create_mesh_overlay, "$g_presentation_icon_but7", "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_icon_but7", 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
			(try_end),
			(try_begin),
				(eq, "$group8_has_troops", 1),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_but8", "mesh_bt_flag_2", "mesh_bt_flag_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but8", 1),
				(val_add, ":var_9", ":value_3"),
				(create_text_overlay, "$g_presentation_obj_battle_name8", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name8", 1),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_size, "$g_presentation_obj_battle_name8", 1),
				(create_text_overlay, "$g_presentation_but8_movement", 7, 6160),
				(position_set_x, 1, ":var_9"),
				(position_set_y, 1, ":var_11"),
				(overlay_set_position, "$g_presentation_but8_movement", 1),
				(position_set_x, 1, ":var_7"),
				(position_set_y, 1, ":var_8"),
				(overlay_set_size, "$g_presentation_but8_movement", 1),
				(call_script, "script_battle_tab_class_icon_export", 8, 1),
				(create_mesh_overlay, "$g_presentation_icon_but8", "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_icon_but8", 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
			(try_end),
			(get_player_agent_no, ":player_agent_no"),
			(agent_get_team, ":team_player_agent_no", ":player_agent_no"),
			(call_script, "script_update_order_panel", ":team_player_agent_no"),
			(assign, ":value", 1),
			(assign, ":value_2", 650),
			(assign, ":value_3", 53),
			(assign, ":value_4", 800),
			(assign, ":value_5", 800),
			(try_begin),
				(eq, "$formation_battle_mode", 1),
				(troop_get_slot, ":slot_division_enemy_1", "trp_slot_division_enemy", 1),
				(gt, ":slot_division_enemy_1", 0),
				(troop_get_slot, ":slot_formation_enemy_love_interest_3", "trp_slot_formation_enemy", slot_troop_love_interest_3),
				(gt, ":slot_formation_enemy_love_interest_3", 0),
				(create_image_button_overlay, "$g_presentation_obj_battle_enemy_0", "mesh_bt_flag_3", "mesh_bt_flag_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_enemy_0", 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, "$g_presentation_obj_battle_enemy_0", 1),
				(call_script, "script_battle_tab_class_icon_export", 0, 0),
				(create_mesh_overlay, reg0, "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_enemy_0", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$formation_battle_mode", 1),
				(troop_get_slot, ":slot_division_enemy_1", "trp_slot_division_enemy", slot_troop_occupation),
				(gt, ":slot_division_enemy_1", 0),
				(troop_get_slot, ":slot_formation_enemy_love_interest_3", "trp_slot_formation_enemy", slot_troop_love_interests_end),
				(gt, ":slot_formation_enemy_love_interest_3", 0),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_enemy_1", "mesh_bt_flag_3", "mesh_bt_flag_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_enemy_1", 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, "$g_presentation_obj_battle_enemy_1", 1),
				(call_script, "script_battle_tab_class_icon_export", 1, 0),
				(create_mesh_overlay, reg0, "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_enemy_1", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$formation_battle_mode", 1),
				(troop_get_slot, ":slot_division_enemy_1", "trp_slot_division_enemy", slot_troop_state),
				(gt, ":slot_division_enemy_1", 0),
				(troop_get_slot, ":slot_formation_enemy_love_interest_3", "trp_slot_formation_enemy", slot_troop_betrothal_time),
				(gt, ":slot_formation_enemy_love_interest_3", 0),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_enemy_2", "mesh_bt_flag_3", "mesh_bt_flag_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_enemy_2", 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, "$g_presentation_obj_battle_enemy_2", 1),
				(call_script, "script_battle_tab_class_icon_export", 2, 0),
				(create_mesh_overlay, reg0, "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_enemy_2", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$formation_battle_mode", 1),
				(troop_get_slot, ":slot_division_enemy_1", "trp_slot_division_enemy", slot_troop_last_talk_time),
				(gt, ":slot_division_enemy_1", 0),
				(troop_get_slot, ":slot_formation_enemy_love_interest_3", "trp_slot_formation_enemy", slot_lady_used_tournament),
				(gt, ":slot_formation_enemy_love_interest_3", 0),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_enemy_3", "mesh_bt_flag_3", "mesh_bt_flag_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_enemy_3", 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, "$g_presentation_obj_battle_enemy_3", 1),
				(call_script, "script_battle_tab_class_icon_export", 3, 0),
				(create_mesh_overlay, reg0, "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_enemy_3", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$formation_battle_mode", 1),
				(troop_get_slot, ":slot_division_enemy_1", "trp_slot_division_enemy", slot_troop_met),
				(gt, ":slot_division_enemy_1", 0),
				(troop_get_slot, ":slot_formation_enemy_love_interest_3", "trp_slot_formation_enemy", 41),
				(gt, ":slot_formation_enemy_love_interest_3", 0),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_enemy_4", "mesh_bt_flag_3", "mesh_bt_flag_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_enemy_4", 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, "$g_presentation_obj_battle_enemy_4", 1),
				(call_script, "script_battle_tab_class_icon_export", 4, 0),
				(create_mesh_overlay, reg0, "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_enemy_4", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$formation_battle_mode", 1),
				(troop_get_slot, ":slot_division_enemy_1", "trp_slot_division_enemy", slot_troop_party_template),
				(gt, ":slot_division_enemy_1", 0),
				(troop_get_slot, ":slot_formation_enemy_love_interest_3", "trp_slot_formation_enemy", 42),
				(gt, ":slot_formation_enemy_love_interest_3", 0),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_enemy_5", "mesh_bt_flag_3", "mesh_bt_flag_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_enemy_5", 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, "$g_presentation_obj_battle_enemy_5", 1),
				(call_script, "script_battle_tab_class_icon_export", 5, 0),
				(create_mesh_overlay, reg0, "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_enemy_5", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$formation_battle_mode", 1),
				(troop_get_slot, ":slot_division_enemy_1", "trp_slot_division_enemy", slot_troop_renown),
				(gt, ":slot_division_enemy_1", 0),
				(troop_get_slot, ":slot_formation_enemy_love_interest_3", "trp_slot_formation_enemy", 43),
				(gt, ":slot_formation_enemy_love_interest_3", 0),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_enemy_6", "mesh_bt_flag_3", "mesh_bt_flag_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_enemy_6", 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, "$g_presentation_obj_battle_enemy_6", 1),
				(call_script, "script_battle_tab_class_icon_export", 6, 0),
				(create_mesh_overlay, reg0, "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_enemy_6", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$formation_battle_mode", 1),
				(troop_get_slot, ":slot_division_enemy_1", "trp_slot_division_enemy", slot_troop_prisoner_of_party),
				(gt, ":slot_division_enemy_1", 0),
				(troop_get_slot, ":slot_formation_enemy_love_interest_3", "trp_slot_formation_enemy", 44),
				(gt, ":slot_formation_enemy_love_interest_3", 0),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_enemy_7", "mesh_bt_flag_3", "mesh_bt_flag_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_enemy_7", 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, "$g_presentation_obj_battle_enemy_7", 1),
				(call_script, "script_battle_tab_class_icon_export", 7, 0),
				(create_mesh_overlay, reg0, "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_enemy_7", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$formation_battle_mode", 1),
				(troop_get_slot, ":slot_division_enemy_1", "trp_slot_division_enemy", slot_troop_present_at_event),
				(gt, ":slot_division_enemy_1", 0),
				(troop_get_slot, ":slot_formation_enemy_love_interest_3", "trp_slot_formation_enemy", slot_troop_current_rumor),
				(gt, ":slot_formation_enemy_love_interest_3", 0),
				(val_add, ":value", ":value_3"),
				(create_image_button_overlay, "$g_presentation_obj_battle_enemy_8", "mesh_bt_flag_3", "mesh_bt_flag_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_enemy_8", 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, "$g_presentation_obj_battle_enemy_8", 1),
				(call_script, "script_battle_tab_class_icon_export", 8, 0),
				(create_mesh_overlay, reg0, "$temp_mesh_id"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "$temp_mesh_id_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_enemy_8", "str_empty_string"),
			(try_end),
			(assign, ":value", 640),
			(assign, ":value_2", 130),
			(assign, ":value_6", 40),
			(assign, ":value_4", 550),
			(assign, ":value_5", 550),
			(try_begin),
				(eq, "$formation_battle_mode", 1),
				(create_mesh_overlay, reg0, "mesh_bt_flag_1"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_inf", "mesh_pic_bt_shield", "mesh_pic_bt_clicked"),
				(overlay_set_color, "$g_presentation_obj_battle_inf", 11869983),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_inf", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_inf", 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_presentation_obj_battle_inf", 1),
			(val_add, ":value", ":value_6"),
			(try_begin),
				(eq, "$formation_battle_mode", 1),
				(create_mesh_overlay, reg0, "mesh_bt_flag_1"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_arc", "mesh_pic_bt_bow", "mesh_pic_bt_clicked"),
				(overlay_set_color, "$g_presentation_obj_battle_arc", 11869983),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_arc", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_arc", 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_presentation_obj_battle_arc", 1),
			(val_add, ":value", ":value_6"),
			(try_begin),
				(eq, "$formation_battle_mode", 1),
				(create_mesh_overlay, reg0, "mesh_bt_flag_1"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_cav", "mesh_pic_bt_horse", "mesh_pic_bt_clicked"),
				(overlay_set_color, "$g_presentation_obj_battle_cav", 11869983),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_cav", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_cav", 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_presentation_obj_battle_cav", 1),
			(assign, ":value", 190),
			(assign, ":value_2", 130),
			(assign, ":value_4", 450),
			(assign, ":value_5", 450),
			(assign, ":value_7", 750),
			(assign, ":value_8", 750),
			(try_begin),
				(neq, "$formation_battle_mode", 1),
				(create_mesh_overlay, reg0, "mesh_bt_flag_1"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_advance", "mesh_pic_bt_advan", "mesh_pic_bt_clicked"),
				(overlay_set_color, "$g_presentation_obj_battle_advance", 11869983),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_advance", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_advance", 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_presentation_obj_battle_advance", 1),
			(val_add, ":value", ":value_6"),
			(try_begin),
				(neq, "$formation_battle_mode", 1),
				(create_mesh_overlay, reg0, "mesh_bt_flag_1"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_fallback", "mesh_pic_bt_fall", "mesh_pic_bt_clicked"),
				(overlay_set_color, "$g_presentation_obj_battle_fallback", 11869983),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_fallback", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_fallback", 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_presentation_obj_battle_fallback", 1),
			(val_add, ":value", ":value_6"),
			(val_add, ":value", ":value_6"),
			(try_begin),
				(neq, "$formation_battle_mode", 1),
				(create_mesh_overlay, reg0, "mesh_bt_flag_1"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_divide", "mesh_pic_bt_divide", "mesh_pic_bt_clicked"),
				(overlay_set_color, "$g_presentation_obj_battle_divide", 11869983),
				(create_text_overlay, reg0, "str_bttab_y"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_7"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg0, 1),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_divide", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_divide", 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_presentation_obj_battle_divide", 1),
			(val_add, ":value", ":value_6"),
			(try_begin),
				(neq, "$formation_battle_mode", 1),
				(create_mesh_overlay, reg0, "mesh_bt_flag_1"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_unite", "mesh_pic_bt_unite", "mesh_pic_bt_clicked"),
				(overlay_set_color, "$g_presentation_obj_battle_unite", 11869983),
				(create_text_overlay, reg0, "str_bttab_u"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_7"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg0, 1),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_unite", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_unite", 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_presentation_obj_battle_unite", 1),
			(assign, ":value", 400),
			(assign, ":value_2", 130),
			(assign, ":value_6", 40),
			(assign, ":value_4", 550),
			(assign, ":value_5", 550),
			(assign, ":value_7", 1100),
			(assign, ":value_8", 1100),
			(create_mesh_overlay, reg0, "mesh_bt_flag_1"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, reg0, 1),
			(create_image_button_overlay, "$g_presentation_obj_battle_autocharge", "mesh_pic_bt_charge_auto", "mesh_pic_bt_clicked"),
			(overlay_set_color, "$g_presentation_obj_battle_autocharge", 11869983),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_autocharge", 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_presentation_obj_battle_autocharge", 1),
			(create_text_overlay, reg0, "str_bttab_t"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, ":value_7"),
			(position_set_y, 1, ":value_8"),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", ":value_6"),
			(try_begin),
				(create_mesh_overlay, reg0, "mesh_bt_flag_1"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_hold", "mesh_pic_bt_hold", "mesh_pic_bt_clicked"),
				(overlay_set_color, "$g_presentation_obj_battle_hold", 11869983),
				(create_text_overlay, reg0, "str_bttab_h"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_7"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg0, 1),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_hold", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_hold", 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_presentation_obj_battle_hold", 1),
			(val_add, ":value", ":value_6"),
			(create_mesh_overlay, reg0, "mesh_bt_flag_1"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(eq, "$formation_battle_mode", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_return", "mesh_pic_bt_return", "mesh_pic_bt_clicked"),
			(else_try),
				(neq, "$formation_battle_mode", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_return", "mesh_pic_bt_followme", "mesh_pic_bt_clicked"),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_return", "str_empty_string"),
			(try_end),
			(overlay_set_color, "$g_presentation_obj_battle_return", 11869983),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_return", 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_presentation_obj_battle_return", 1),
			(create_text_overlay, reg0, "str_bttab_n"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, ":value_7"),
			(position_set_y, 1, ":value_8"),
			(overlay_set_size, reg0, 1),
			(assign, ":value", 815),
			(assign, ":value_2", 145),
			(assign, ":value_6", 30),
			(assign, ":value_4", 450),
			(assign, ":value_5", 450),
			(assign, ":value_7", 750),
			(assign, ":value_8", 750),
			(try_begin),
				(create_mesh_overlay, reg0, "mesh_bt_flag_1"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_fireatwill", "mesh_pic_bt_musket", "mesh_pic_bt_clicked"),
				(overlay_set_color, "$g_presentation_obj_battle_fireatwill", 11869983),
				(create_text_overlay, reg0, "str_bttab_m"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_7"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg0, 1),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_fireatwill", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_fireatwill", 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_presentation_obj_battle_fireatwill", 1),
			(val_add, ":value", ":value_6"),
			(try_begin),
				(create_mesh_overlay, reg0, "mesh_bt_flag_1"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_holdfire", "mesh_pic_bt_holdfire", "mesh_pic_bt_clicked"),
				(overlay_set_color, "$g_presentation_obj_battle_holdfire", 11869983),
				(create_text_overlay, reg0, "str_bttab_j"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_7"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg0, 1),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_holdfire", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_holdfire", 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_presentation_obj_battle_holdfire", 1),
			(val_add, ":value", ":value_6"),
			(try_begin),
				(create_mesh_overlay, reg0, "mesh_bt_flag_1"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_meleew", "mesh_pic_bt_twohand", "mesh_pic_bt_clicked"),
				(overlay_set_color, "$g_presentation_obj_battle_meleew", 11869983),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_meleew", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_meleew", 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_presentation_obj_battle_meleew", 1),
			(val_add, ":value", ":value_6"),
			(try_begin),
				(create_mesh_overlay, reg0, "mesh_bt_flag_1"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_rangew", "mesh_pic_bt_crossbow", "mesh_pic_bt_clicked"),
				(overlay_set_color, "$g_presentation_obj_battle_rangew", 11869983),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_rangew", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_rangew", 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_presentation_obj_battle_rangew", 1),
			(val_add, ":value", ":value_6"),
			(try_begin),
				(create_mesh_overlay, reg0, "mesh_bt_flag_1"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_size, reg0, 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_anyw", "mesh_pic_bt_anyw", "mesh_pic_bt_clicked"),
				(overlay_set_color, "$g_presentation_obj_battle_anyw", 11869983),
			(else_try),
				(create_text_overlay, "$g_presentation_obj_battle_anyw", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_anyw", 1),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_presentation_obj_battle_anyw", 1),
			(create_text_overlay, "$g_presentation_obj_battle_22", "str_us_", 0),
			(create_text_overlay, "$g_presentation_obj_battle_23", "str_allies_", 0),
			(create_text_overlay, "$g_presentation_obj_battle_24", "str_enemies_", 0),
			(create_text_overlay, "$g_presentation_obj_battle_25", "str_bttab_ready", 16),
			(create_text_overlay, "$g_presentation_obj_battle_26", "str_bttab_wounded", 16),
			(create_text_overlay, "$g_presentation_obj_battle_28", "str_routed", 16),
			(create_text_overlay, "$g_presentation_obj_battle_27", "str_bttab_dead", 16),
			(create_text_overlay, "$g_battle_us_ready", 7, 16),
			(create_text_overlay, "$g_battle_us_wounded", 7, 16),
			(create_text_overlay, "$g_battle_us_routed", 7, 16),
			(create_text_overlay, "$g_battle_us_dead", 7, 16),
			(create_text_overlay, "$g_battle_enemies_ready", 7, 16),
			(create_text_overlay, "$g_battle_enemies_wounded", 7, 16),
			(create_text_overlay, "$g_battle_enemies_routed", 7, 16),
			(create_text_overlay, "$g_battle_enemies_dead", 7, 16),
			(create_text_overlay, "$g_battle_allies_ready", 7, 16),
			(create_text_overlay, "$g_battle_allies_wounded", 7, 16),
			(create_text_overlay, "$g_battle_allies_routed", 7, 16),
			(create_text_overlay, "$g_battle_allies_dead", 7, 16),
			(create_image_button_overlay, "$g_battle_report_plane", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_color, "$g_battle_report_plane", 0),
			(position_set_x, 1, 15500),
			(position_set_y, 1, 6000),
			(overlay_set_size, "$g_battle_report_plane", 1),
			(position_set_x, 1, 672),
			(position_set_y, 1, 210),
			(overlay_set_position, "$g_battle_report_plane", 1),
			(overlay_set_alpha, "$g_battle_report_plane", 68),
			(overlay_set_color, "$g_battle_report_plane", 1140411),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, "$g_presentation_obj_battle_22", 1),
			(overlay_set_size, "$g_presentation_obj_battle_23", 1),
			(overlay_set_size, "$g_presentation_obj_battle_24", 1),
			(overlay_set_size, "$g_presentation_obj_battle_25", 1),
			(overlay_set_size, "$g_presentation_obj_battle_26", 1),
			(overlay_set_size, "$g_presentation_obj_battle_27", 1),
			(overlay_set_size, "$g_presentation_obj_battle_28", 1),
			(overlay_set_size, "$g_battle_us_ready", 1),
			(overlay_set_size, "$g_battle_us_wounded", 1),
			(overlay_set_size, "$g_battle_us_routed", 1),
			(overlay_set_size, "$g_battle_us_dead", 1),
			(overlay_set_size, "$g_battle_enemies_ready", 1),
			(overlay_set_size, "$g_battle_enemies_wounded", 1),
			(overlay_set_size, "$g_battle_enemies_routed", 1),
			(overlay_set_size, "$g_battle_enemies_dead", 1),
			(overlay_set_size, "$g_battle_allies_ready", 1),
			(overlay_set_size, "$g_battle_allies_wounded", 1),
			(overlay_set_size, "$g_battle_allies_routed", 1),
			(overlay_set_size, "$g_battle_allies_dead", 1),
			(assign, ":var_21", 675),
			(assign, ":var_22", 215),
			(val_add, ":var_21", 70),
			(val_add, ":var_22", 90),
			(position_set_x, 1, ":var_21"),
			(position_set_y, 1, ":var_22"),
			(overlay_set_position, "$g_presentation_obj_battle_25", 1),
			(val_add, ":var_21", 70),
			(position_set_x, 1, ":var_21"),
			(overlay_set_position, "$g_presentation_obj_battle_26", 1),
			(val_add, ":var_21", 70),
			(position_set_x, 1, ":var_21"),
			(overlay_set_position, "$g_presentation_obj_battle_28", 1),
			(val_add, ":var_21", 70),
			(position_set_x, 1, ":var_21"),
			(overlay_set_position, "$g_presentation_obj_battle_27", 1),
			(val_add, ":var_21", -280),
			(val_add, ":var_22", -30),
			(position_set_x, 1, ":var_21"),
			(position_set_y, 1, ":var_22"),
			(overlay_set_position, "$g_presentation_obj_battle_22", 1),
			(val_add, ":var_22", -30),
			(position_set_y, 1, ":var_22"),
			(overlay_set_position, "$g_presentation_obj_battle_23", 1),
			(val_add, ":var_22", -30),
			(position_set_y, 1, ":var_22"),
			(overlay_set_position, "$g_presentation_obj_battle_24", 1),
			(get_scene_boundaries, 2, 3),
			(position_transform_position_to_local, 4, 2, 3),
			(set_fixed_point_multiplier, 1000),
			(position_get_x, ":position_x_4", 4),
			(position_get_y, ":position_y_4", 4),
			(set_fixed_point_multiplier, 1000),
			(store_div, ":value_9", ":position_y_4", 100),
			(store_div, ":value_9", ":position_x_4", ":value_9"),
			(try_begin),
			(else_try),
				(gt, ":value_9", 100),
				(assign, "$g_battle_map_width", 300),
				(store_div, "$g_battle_map_scale", ":position_x_4", "$g_battle_map_width"),
				(store_div, "$g_battle_map_height", ":position_y_4", "$g_battle_map_scale"),
			(else_try),
				(assign, "$g_battle_map_height", 300),
				(store_div, "$g_battle_map_scale", ":position_y_4", "$g_battle_map_height"),
				(store_div, "$g_battle_map_width", ":position_x_4", "$g_battle_map_scale"),
			(try_end),
			(assign, "$battle_tab_x", 980),
			(assign, "$battle_tab_y", 730),
			(assign, "$g_battle_map_height", 380),
			(store_div, "$g_battle_map_scale", ":position_y_4", "$g_battle_map_height"),
			(store_div, "$g_battle_map_width", ":position_x_4", "$g_battle_map_scale"),
			(store_add, ":value_10", "$battle_tab_x", 10),
			(store_add, ":value_11", "$battle_tab_y", 10),
			(create_image_button_overlay, "$g_battle_map_plane", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_color, "$g_battle_map_plane", 0),
			(store_add, ":value_12", "$g_battle_map_width", 20),
			(store_add, ":value_13", "$g_battle_map_height", 20),
			(store_mul, ":value_14", ":value_12", 50),
			(store_mul, ":value_15", ":value_13", 50),
			(position_set_x, 1, ":value_14"),
			(position_set_y, 1, ":value_15"),
			(overlay_set_size, "$g_battle_map_plane", 1),
			(store_sub, ":value_16", ":value_10", ":value_12"),
			(store_sub, ":value_17", ":value_11", ":value_13"),
			(position_set_x, 1, ":value_16"),
			(position_set_y, 1, ":value_17"),
			(overlay_set_position, "$g_battle_map_plane", 1),
			(overlay_set_alpha, "$g_battle_map_plane", 68),
			(create_mesh_overlay, "$g_battle_map_squad_1_order_flag", "mesh_flag_div_1"),
			(create_mesh_overlay, "$g_battle_map_squad_2_order_flag", "mesh_flag_div_2"),
			(create_mesh_overlay, "$g_battle_map_squad_3_order_flag", "mesh_flag_div_3"),
			(create_mesh_overlay, "$g_battle_map_squad_4_order_flag", "mesh_flag_div_4"),
			(create_mesh_overlay, "$g_battle_map_squad_5_order_flag", "mesh_flag_div_5"),
			(create_mesh_overlay, "$g_battle_map_squad_6_order_flag", "mesh_flag_div_6"),
			(create_mesh_overlay, "$g_battle_map_squad_7_order_flag", "mesh_flag_div_7"),
			(create_mesh_overlay, "$g_battle_map_squad_8_order_flag", "mesh_flag_div_8"),
			(create_mesh_overlay, "$g_battle_map_squad_9_order_flag", "mesh_flag_div_9"),
			(overlay_set_alpha, "$g_battle_map_squad_1_order_flag", 0),
			(overlay_set_alpha, "$g_battle_map_squad_2_order_flag", 0),
			(overlay_set_alpha, "$g_battle_map_squad_3_order_flag", 0),
			(overlay_set_alpha, "$g_battle_map_squad_4_order_flag", 0),
			(overlay_set_alpha, "$g_battle_map_squad_5_order_flag", 0),
			(overlay_set_alpha, "$g_battle_map_squad_6_order_flag", 0),
			(overlay_set_alpha, "$g_battle_map_squad_7_order_flag", 0),
			(overlay_set_alpha, "$g_battle_map_squad_8_order_flag", 0),
			(overlay_set_alpha, "$g_battle_map_squad_9_order_flag", 0),
			(call_script, "script_update_order_panel_checked_classes"),
			(call_script, "script_update_order_panel_statistics_and_map"),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(get_player_agent_no, ":player_agent_no"),
			(agent_get_team, ":team_player_agent_no", ":player_agent_no"),
			(assign, ":value", 0),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but0"),
				(play_sound, "snd_pst_click"),
				(assign, ":value", 1),
				(assign, "$g_formation_group0_selected", 1),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but1"),
				(play_sound, "snd_pst_click"),
				(assign, ":value", 1),
				(assign, "$g_formation_group1_selected", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but2"),
				(play_sound, "snd_pst_click"),
				(assign, ":value", 1),
				(assign, "$g_formation_group2_selected", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but3"),
				(play_sound, "snd_pst_click"),
				(assign, ":value", 1),
				(assign, "$g_formation_group3_selected", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but4"),
				(play_sound, "snd_pst_click"),
				(assign, ":value", 1),
				(assign, "$g_formation_group4_selected", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but5"),
				(play_sound, "snd_pst_click"),
				(assign, ":value", 1),
				(assign, "$g_formation_group5_selected", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but6"),
				(play_sound, "snd_pst_click"),
				(assign, ":value", 1),
				(assign, "$g_formation_group6_selected", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but7"),
				(play_sound, "snd_pst_click"),
				(assign, ":value", 1),
				(assign, "$g_formation_group7_selected", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but8"),
				(play_sound, "snd_pst_click"),
				(assign, ":value", 1),
				(assign, "$g_formation_group8_selected", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_divide"),
				(play_sound, "snd_pst_click"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 8),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_spread"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_unite"),
				(play_sound, "snd_pst_click"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 7),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_closer"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_fallback"),
				(play_sound, "snd_pst_click"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 6),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_fallback"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_advance"),
				(play_sound, "snd_pst_click"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 5),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_advance"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_enemy_0"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 2, 0),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_enemy_1"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 2, 1),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_enemy_2"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 2, 2),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_enemy_3"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 2, 3),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_enemy_4"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 2, 4),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_enemy_5"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 2, 5),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_enemy_6"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 2, 6),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_enemy_7"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 2, 7),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_enemy_8"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 2, 8),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_inf"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(display_message, "str_bt_class_call_1"),
					(team_set_order_listener, ":team_player_agent_no", -1),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", 1),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(neg|troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group0_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 0, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_occupation),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(neg|troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group1_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 1, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_state),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(neg|troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group2_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 2, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_last_talk_time),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(neg|troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group3_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 3, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_met),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(neg|troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group4_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 4, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_party_template),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(neg|troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group5_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 5, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_renown),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(neg|troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group6_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 6, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_prisoner_of_party),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(neg|troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group7_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 7, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_present_at_event),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(neg|troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group8_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 8, 1),
					(try_end),
					(start_presentation, "prsnt_battle"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_arc"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(display_message, "str_bt_class_call_2"),
					(team_set_order_listener, ":team_player_agent_no", -1),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", 1),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group0_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 0, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_occupation),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group1_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 1, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_state),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group2_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 2, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_last_talk_time),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group3_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 3, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_met),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group4_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 4, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_party_template),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group5_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 5, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_renown),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group6_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 6, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_prisoner_of_party),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group7_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 7, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_present_at_event),
					(try_begin),
						(neg|troop_is_guarantee_horse, ":slot_division_ally_1"),
						(troop_is_guarantee_ranged, ":slot_division_ally_1"),
						(assign, "$g_formation_group8_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 8, 1),
					(try_end),
					(start_presentation, "prsnt_battle"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_cav"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(display_message, "str_bt_class_call_3"),
					(team_set_order_listener, ":team_player_agent_no", -1),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", 1),
					(try_begin),
						(troop_is_guarantee_horse, ":slot_division_ally_1"),
						(assign, "$g_formation_group0_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 0, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_occupation),
					(try_begin),
						(troop_is_guarantee_horse, ":slot_division_ally_1"),
						(assign, "$g_formation_group1_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 1, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_state),
					(try_begin),
						(troop_is_guarantee_horse, ":slot_division_ally_1"),
						(assign, "$g_formation_group2_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 2, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_last_talk_time),
					(try_begin),
						(troop_is_guarantee_horse, ":slot_division_ally_1"),
						(assign, "$g_formation_group3_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 3, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_met),
					(try_begin),
						(troop_is_guarantee_horse, ":slot_division_ally_1"),
						(assign, "$g_formation_group4_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 4, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_party_template),
					(try_begin),
						(troop_is_guarantee_horse, ":slot_division_ally_1"),
						(assign, "$g_formation_group5_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 5, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_renown),
					(try_begin),
						(troop_is_guarantee_horse, ":slot_division_ally_1"),
						(assign, "$g_formation_group6_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 6, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_prisoner_of_party),
					(try_begin),
						(troop_is_guarantee_horse, ":slot_division_ally_1"),
						(assign, "$g_formation_group7_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 7, 1),
					(try_end),
					(troop_get_slot, ":slot_division_ally_1", "trp_slot_division_ally", slot_troop_present_at_event),
					(try_begin),
						(troop_is_guarantee_horse, ":slot_division_ally_1"),
						(assign, "$g_formation_group8_selected", 1),
						(team_set_order_listener, ":team_player_agent_no", 8, 1),
					(try_end),
					(start_presentation, "prsnt_battle"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_autocharge"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 3, 0),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
				(else_try),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 2),
					(call_script, "script_battle_tile_agent_division_reset"),
					(display_message, "str_c_charge"),
										
					
				#######Horn additions begin
				(try_begin),
				(eq, "$horn_multiple", 1),
				#(display_message, "@Debug first formation member!"),
				(call_script, "script_cf_first_formation_member_sound_horn"),
				(try_end),
				#######Horn additions end
				
				
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_hold"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 0, 0),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
				(else_try),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 11),
					(call_script, "script_battle_tile_agent_division_reset"),
					(display_message, "str_c_hold"),
										
					
				#######Horn additions begin
				(try_begin),
				(eq, "$horn_multiple", 1),
				#(display_message, "@Debug first formation member!"),
				(call_script, "script_cf_first_formation_member_sound_horn"),
				(try_end),
				#######Horn additions end
				
				
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_return"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 13, 0),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
				(else_try),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 1),
					(call_script, "script_battle_tile_agent_division_reset"),
					(display_message, "str_c_followme"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_fireatwill"),
				(play_sound, "snd_pst_click"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 13),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_fire_at_will"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_holdfire"),
				(play_sound, "snd_pst_click"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 12),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_hold_fire"),
									
					
				#######Horn additions begin
				(try_begin),
				(eq, "$horn_multiple", 1),
				#(display_message, "@Debug first formation member!"),
				(call_script, "script_cf_first_formation_member_sound_horn"),
				(try_end),
				#######Horn additions end
				
				
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_meleew"),
				(play_sound, "snd_pst_click"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 15),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_melee"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_rangew"),
				(play_sound, "snd_pst_click"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 16),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_ranged"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_anyw"),
				(play_sound, "snd_pst_click"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 10),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_any"),
			(else_try),
				(eq, ":trigger_param_1", "$g_battle_map_plane"),
				(eq, "$formation_battle_mode", 1),
				(play_sound, "snd_pst_click"),
				(get_scene_boundaries, 2, 3),
				(mouse_get_position, 1),
				(set_fixed_point_multiplier, 1000),
				(position_get_x, ":position_x_1", 1),
				(position_get_y, ":position_y_1", 1),
				(store_sub, ":value_2", "$battle_tab_x", "$g_battle_map_width"),
				(store_sub, ":value_3", "$battle_tab_y", "$g_battle_map_height"),
				(val_sub, ":position_x_1", ":value_2"),
				(val_sub, ":position_y_1", ":value_3"),
				(val_clamp, ":position_x_1", 0, "$g_battle_map_width"),
				(val_clamp, ":position_y_1", 0, "$g_battle_map_height"),
				(val_mul, ":position_x_1", "$g_battle_map_scale"),
				(val_mul, ":position_y_1", "$g_battle_map_scale"),
				(set_fixed_point_multiplier, 1000),
				(position_set_x, 1, ":position_x_1"),
				(position_set_y, 1, ":position_y_1"),
				(position_transform_position_to_parent, 3, 2, 1),
				(try_begin),
					(eq, "$g_formation_group0_selected", 1),
					(assign, ":value_4", 0),
					(store_add, ":value_5", ":value_4", 46),
					(troop_get_slot, ":slot_formation_ally_value_5", "trp_slot_formation_ally", ":value_5"),
					(neq, ":slot_formation_ally_value_5", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_4", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_4", 3),
					(set_show_messages, 1),
					(store_add, ":value_6", ":value_4", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_6", 1),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_4", 3, 1),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group1_selected", 1),
					(assign, ":value_4", 1),
					(store_add, ":value_5", ":value_4", 46),
					(troop_get_slot, ":slot_formation_ally_value_5", "trp_slot_formation_ally", ":value_5"),
					(neq, ":slot_formation_ally_value_5", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_4", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_4", 3),
					(set_show_messages, 1),
					(store_add, ":value_6", ":value_4", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_6", 1),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_4", 3, 1),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group2_selected", 1),
					(assign, ":value_4", 2),
					(store_add, ":value_5", ":value_4", 46),
					(troop_get_slot, ":slot_formation_ally_value_5", "trp_slot_formation_ally", ":value_5"),
					(neq, ":slot_formation_ally_value_5", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_4", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_4", 3),
					(set_show_messages, 1),
					(store_add, ":value_6", ":value_4", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_6", 1),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_4", 3, 1),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group3_selected", 1),
					(assign, ":value_4", 3),
					(store_add, ":value_5", ":value_4", 46),
					(troop_get_slot, ":slot_formation_ally_value_5", "trp_slot_formation_ally", ":value_5"),
					(neq, ":slot_formation_ally_value_5", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_4", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_4", 3),
					(set_show_messages, 1),
					(store_add, ":value_6", ":value_4", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_6", 1),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_4", 3, 1),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group4_selected", 1),
					(assign, ":value_4", 4),
					(store_add, ":value_5", ":value_4", 46),
					(troop_get_slot, ":slot_formation_ally_value_5", "trp_slot_formation_ally", ":value_5"),
					(neq, ":slot_formation_ally_value_5", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_4", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_4", 3),
					(set_show_messages, 1),
					(store_add, ":value_6", ":value_4", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_6", 1),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_4", 3, 1),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group5_selected", 1),
					(assign, ":value_4", 5),
					(store_add, ":value_5", ":value_4", 46),
					(troop_get_slot, ":slot_formation_ally_value_5", "trp_slot_formation_ally", ":value_5"),
					(neq, ":slot_formation_ally_value_5", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_4", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_4", 3),
					(set_show_messages, 1),
					(store_add, ":value_6", ":value_4", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_6", 1),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_4", 3, 1),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group6_selected", 1),
					(assign, ":value_4", 6),
					(store_add, ":value_5", ":value_4", 46),
					(troop_get_slot, ":slot_formation_ally_value_5", "trp_slot_formation_ally", ":value_5"),
					(neq, ":slot_formation_ally_value_5", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_4", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_4", 3),
					(set_show_messages, 1),
					(store_add, ":value_6", ":value_4", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_6", 1),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_4", 3, 1),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group7_selected", 1),
					(assign, ":value_4", 7),
					(store_add, ":value_5", ":value_4", 46),
					(troop_get_slot, ":slot_formation_ally_value_5", "trp_slot_formation_ally", ":value_5"),
					(neq, ":slot_formation_ally_value_5", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_4", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_4", 3),
					(set_show_messages, 1),
					(store_add, ":value_6", ":value_4", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_6", 1),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_4", 3, 1),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group8_selected", 1),
					(assign, ":value_4", 8),
					(store_add, ":value_5", ":value_4", 46),
					(troop_get_slot, ":slot_formation_ally_value_5", "trp_slot_formation_ally", ":value_5"),
					(neq, ":slot_formation_ally_value_5", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_4", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_4", 3),
					(set_show_messages, 1),
					(store_add, ":value_6", ":value_4", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_6", 1),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_4", 3, 1),
				(try_end),
				(set_fixed_point_multiplier, 1000),
				(call_script, "script_update_order_flags_on_map"),
				(call_script, "script_update_order_panel", ":team_player_agent_no"),
				(call_script, "script_battle_tile_agent_division_reset"),
			(else_try),
				(eq, ":trigger_param_1", "$g_battle_map_plane"),
				(play_sound, "snd_pst_click"),
				(get_scene_boundaries, 2, 3),
				(mouse_get_position, 1),
				(set_fixed_point_multiplier, 1000),
				(position_get_x, ":position_x_1", 1),
				(position_get_y, ":position_y_1", 1),
				(store_sub, ":value_2", 980, "$g_battle_map_width"),
				(store_sub, ":value_3", 730, "$g_battle_map_height"),
				(val_sub, ":position_x_1", ":value_2"),
				(val_sub, ":position_y_1", ":value_3"),
				(val_clamp, ":position_x_1", 0, "$g_battle_map_width"),
				(val_clamp, ":position_y_1", 0, "$g_battle_map_height"),
				(val_mul, ":position_x_1", "$g_battle_map_scale"),
				(val_mul, ":position_y_1", "$g_battle_map_scale"),
				(set_fixed_point_multiplier, 1000),
				(position_set_x, 1, ":position_x_1"),
				(position_set_y, 1, ":position_y_1"),
				(position_transform_position_to_parent, 3, 2, 1),
				(try_begin),
					(eq, "$g_formation_group0_selected", 1),
					(team_give_order, ":team_player_agent_no", 0, 0),
					(team_set_order_position, ":team_player_agent_no", 0, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group1_selected", 1),
					(team_give_order, ":team_player_agent_no", 1, 0),
					(team_set_order_position, ":team_player_agent_no", 1, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group2_selected", 1),
					(team_give_order, ":team_player_agent_no", 2, 0),
					(team_set_order_position, ":team_player_agent_no", 2, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group3_selected", 1),
					(team_give_order, ":team_player_agent_no", 3, 0),
					(team_set_order_position, ":team_player_agent_no", 3, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group4_selected", 1),
					(team_give_order, ":team_player_agent_no", 4, 0),
					(team_set_order_position, ":team_player_agent_no", 4, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group5_selected", 1),
					(team_give_order, ":team_player_agent_no", 5, 0),
					(team_set_order_position, ":team_player_agent_no", 5, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group6_selected", 1),
					(team_give_order, ":team_player_agent_no", 6, 0),
					(team_set_order_position, ":team_player_agent_no", 6, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group7_selected", 1),
					(team_give_order, ":team_player_agent_no", 7, 0),
					(team_set_order_position, ":team_player_agent_no", 7, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group8_selected", 1),
					(team_give_order, ":team_player_agent_no", 8, 0),
					(team_set_order_position, ":team_player_agent_no", 8, 3),
				(try_end),
				(call_script, "script_update_order_flags_on_map"),
				(call_script, "script_update_order_panel", ":team_player_agent_no"),
				(call_script, "script_battle_tile_agent_division_reset"),
			(try_end),
			(try_begin),
				(eq, ":value", 1),
				(team_set_order_listener, ":team_player_agent_no", -1),
				(try_begin),
					(this_or_next|eq, "$g_formation_group0_selected", 1),
					(eq, "$group0_has_troops", 0),
					(this_or_next|eq, "$g_formation_group1_selected", 1),
					(eq, "$group1_has_troops", 0),
					(this_or_next|eq, "$g_formation_group2_selected", 1),
					(eq, "$group2_has_troops", 0),
					(this_or_next|eq, "$g_formation_group3_selected", 1),
					(eq, "$group3_has_troops", 0),
					(this_or_next|eq, "$g_formation_group4_selected", 1),
					(eq, "$group4_has_troops", 0),
					(this_or_next|eq, "$g_formation_group5_selected", 1),
					(eq, "$group5_has_troops", 0),
					(this_or_next|eq, "$g_formation_group6_selected", 1),
					(eq, "$group6_has_troops", 0),
					(this_or_next|eq, "$g_formation_group7_selected", 1),
					(eq, "$group7_has_troops", 0),
					(this_or_next|eq, "$g_formation_group8_selected", 1),
					(eq, "$group8_has_troops", 0),
					(team_set_order_listener, ":team_player_agent_no", 9),
				(else_try),
					(eq, "$g_formation_group0_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 0, 1),
				(else_try),
					(eq, "$g_formation_group1_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 1, 1),
				(else_try),
					(eq, "$g_formation_group2_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 2, 1),
				(else_try),
					(eq, "$g_formation_group3_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 3, 1),
				(else_try),
					(eq, "$g_formation_group4_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 4, 1),
				(else_try),
					(eq, "$g_formation_group5_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 5, 1),
				(else_try),
					(eq, "$g_formation_group6_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 6, 1),
				(else_try),
					(eq, "$g_formation_group7_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 7, 1),
				(else_try),
					(eq, "$g_formation_group8_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 8, 1),
				(try_end),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_battle"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[

			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|game_key_clicked, 30),
				(this_or_next|game_key_clicked, 31),
				(this_or_next|game_key_clicked, 32),
				(this_or_next|game_key_clicked, 33),
				(this_or_next|game_key_clicked, 34),
				(this_or_next|game_key_clicked, 35),
				(this_or_next|game_key_clicked, 36),
				(this_or_next|game_key_clicked, 37),
				(this_or_next|game_key_clicked, 38),
				(this_or_next|game_key_clicked, 29),
				(game_key_clicked, 39),
				(play_sound, "snd_pst_click"),
				(call_script, "script_update_order_panel_checked_classes"),
			(try_end),
			(try_begin),
				(gt, ":trigger_param_1", 200),
				(this_or_next|key_clicked, 47),
				(game_key_clicked, 22),
				(play_sound, "snd_pst_click"),
				(assign, "$minimap_divi_hud_on", 0),
				(try_for_agents, ":var_2"),
					(agent_set_slot, ":var_2", slot_agent_map_overlay_id, 0),
				(try_end),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_mini_map"),

			(try_end),
			(try_begin),
				(key_clicked, 21),
				(play_sound, "snd_pst_click"),
				(call_script, "script_team_give_order_from_order_panel", "$bt_player_agent", 8),
				(call_script, "script_update_order_panel", "$bt_player_team"),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_spread"),
			(try_end),
			(try_begin),
				(key_clicked, 22),
				(play_sound, "snd_pst_click"),
				(call_script, "script_team_give_order_from_order_panel", "$bt_player_agent", 7),
				(call_script, "script_update_order_panel", "$bt_player_team"),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_closer"),
			(try_end),
			(try_begin),
				(key_clicked, 20),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 3, 0),
					(call_script, "script_update_order_panel", "$bt_player_team"),
				(else_try),
					(call_script, "script_team_give_order_from_order_panel", "$bt_player_agent", 2),
					(call_script, "script_update_order_panel", "$bt_player_team"),
					(call_script, "script_battle_tile_agent_division_reset"),
					(display_message, "str_c_charge"),
										
					
				#######Horn additions begin
				(try_begin),
				(eq, "$horn_multiple", 1),
				#(display_message, "@Debug first formation member!"),
				(call_script, "script_cf_first_formation_member_sound_horn"),
				(try_end),
				#######Horn additions end
				
				
				(try_end),
			(try_end),
			(try_begin),
				(key_clicked, 35),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 0, 0),
					(call_script, "script_update_order_panel", "$bt_player_team"),
				(else_try),
					(call_script, "script_team_give_order_from_order_panel", "$bt_player_agent", 11),
					(call_script, "script_battle_tile_agent_division_reset"),
					(display_message, "str_c_hold"),
										
					
				#######Horn additions begin
				(try_begin),
				(eq, "$horn_multiple", 1),
				#(display_message, "@Debug first formation member!"),
				(call_script, "script_cf_first_formation_member_sound_horn"),
				(try_end),
				#######Horn additions end
				
				
				(try_end),
			(try_end),
			(try_begin),
				(key_clicked, 49),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 13, 0),
					(call_script, "script_update_order_panel", "$bt_player_team"),
				(else_try),
					(call_script, "script_team_give_order_from_order_panel", "$bt_player_agent", 1),
					(call_script, "script_update_order_panel", "$bt_player_team"),
					(call_script, "script_battle_tile_agent_division_reset"),
					(display_message, "str_c_followme"),
				(try_end),
			(try_end),
			(try_begin),
				(key_clicked, 50),
				(play_sound, "snd_pst_click"),
				(call_script, "script_team_give_order_from_order_panel", "$bt_player_agent", 13),
				(call_script, "script_update_order_panel", "$bt_player_team"),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_fire_at_will"),
			(try_end),
			(try_begin),
				(key_clicked, 36),
				(play_sound, "snd_pst_click"),
				(call_script, "script_team_give_order_from_order_panel", "$bt_player_agent", 12),
				(call_script, "script_update_order_panel", "$bt_player_team"),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_hold_fire"),
									
					
				#######Horn additions begin
				(try_begin),
				(eq, "$horn_multiple", 1),
				#(display_message, "@Debug first formation member!"),
				(call_script, "script_cf_first_formation_member_sound_horn"),
				(try_end),
				#######Horn additions end
				
				
			(try_end),
		]),

		(ti_on_presentation_mouse_press,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(eq, ":trigger_param_2", 1),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but0"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 6, 0),
					(call_script, "script_update_order_panel", "$bt_player_team"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but1"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 6, 1),
					(call_script, "script_update_order_panel", "$bt_player_team"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but2"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 6, 2),
					(call_script, "script_update_order_panel", "$bt_player_team"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but3"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 6, 3),
					(call_script, "script_update_order_panel", "$bt_player_team"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but4"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 6, 4),
					(call_script, "script_update_order_panel", "$bt_player_team"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but5"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 6, 5),
					(call_script, "script_update_order_panel", "$bt_player_team"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but6"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 6, 6),
					(call_script, "script_update_order_panel", "$bt_player_team"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but7"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 6, 7),
					(call_script, "script_update_order_panel", "$bt_player_team"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but8"),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 6, 8),
					(call_script, "script_update_order_panel", "$bt_player_team"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_battle_map_plane"),
				(eq, "$formation_battle_mode", 1),
				(play_sound, "snd_pst_click"),
				(get_player_agent_no, ":player_agent_no"),
				(agent_get_team, ":team_player_agent_no", ":player_agent_no"),
				(get_scene_boundaries, 2, 3),
				(mouse_get_position, 1),
				(set_fixed_point_multiplier, 1000),
				(position_get_x, ":position_x_1", 1),
				(position_get_y, ":position_y_1", 1),
				(store_sub, ":value", "$battle_tab_x", "$g_battle_map_width"),
				(store_sub, ":value_2", "$battle_tab_y", "$g_battle_map_height"),
				(val_sub, ":position_x_1", ":value"),
				(val_sub, ":position_y_1", ":value_2"),
				(val_clamp, ":position_x_1", 0, "$g_battle_map_width"),
				(val_clamp, ":position_y_1", 0, "$g_battle_map_height"),
				(val_mul, ":position_x_1", "$g_battle_map_scale"),
				(val_mul, ":position_y_1", "$g_battle_map_scale"),
				(set_fixed_point_multiplier, 1000),
				(position_set_x, 1, ":position_x_1"),
				(position_set_y, 1, ":position_y_1"),
				(position_transform_position_to_parent, 3, 2, 1),
				(try_begin),
					(eq, "$g_formation_group0_selected", 1),
					(assign, ":value_3", 0),
					(store_add, ":value_4", ":value_3", 46),
					(troop_get_slot, ":slot_formation_ally_value_4", "trp_slot_formation_ally", ":value_4"),
					(neq, ":slot_formation_ally_value_4", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_3", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_3", 3),
					(set_show_messages, 1),
					(store_add, ":value_5", ":value_3", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_5", 14),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_3", 3, 14),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group1_selected", 1),
					(assign, ":value_3", 1),
					(store_add, ":value_4", ":value_3", 46),
					(troop_get_slot, ":slot_formation_ally_value_4", "trp_slot_formation_ally", ":value_4"),
					(neq, ":slot_formation_ally_value_4", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_3", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_3", 3),
					(set_show_messages, 1),
					(store_add, ":value_5", ":value_3", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_5", 14),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_3", 3, 14),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group2_selected", 1),
					(assign, ":value_3", 2),
					(store_add, ":value_4", ":value_3", 46),
					(troop_get_slot, ":slot_formation_ally_value_4", "trp_slot_formation_ally", ":value_4"),
					(neq, ":slot_formation_ally_value_4", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_3", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_3", 3),
					(set_show_messages, 1),
					(store_add, ":value_5", ":value_3", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_5", 14),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_3", 3, 14),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group3_selected", 1),
					(assign, ":value_3", 3),
					(store_add, ":value_4", ":value_3", 46),
					(troop_get_slot, ":slot_formation_ally_value_4", "trp_slot_formation_ally", ":value_4"),
					(neq, ":slot_formation_ally_value_4", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_3", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_3", 3),
					(set_show_messages, 1),
					(store_add, ":value_5", ":value_3", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_5", 14),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_3", 3, 14),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group4_selected", 1),
					(assign, ":value_3", 4),
					(store_add, ":value_4", ":value_3", 46),
					(troop_get_slot, ":slot_formation_ally_value_4", "trp_slot_formation_ally", ":value_4"),
					(neq, ":slot_formation_ally_value_4", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_3", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_3", 3),
					(set_show_messages, 1),
					(store_add, ":value_5", ":value_3", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_5", 14),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_3", 3, 14),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group5_selected", 1),
					(assign, ":value_3", 5),
					(store_add, ":value_4", ":value_3", 46),
					(troop_get_slot, ":slot_formation_ally_value_4", "trp_slot_formation_ally", ":value_4"),
					(neq, ":slot_formation_ally_value_4", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_3", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_3", 3),
					(set_show_messages, 1),
					(store_add, ":value_5", ":value_3", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_5", 14),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_3", 3, 14),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group6_selected", 1),
					(assign, ":value_3", 6),
					(store_add, ":value_4", ":value_3", 46),
					(troop_get_slot, ":slot_formation_ally_value_4", "trp_slot_formation_ally", ":value_4"),
					(neq, ":slot_formation_ally_value_4", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_3", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_3", 3),
					(set_show_messages, 1),
					(store_add, ":value_5", ":value_3", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_5", 14),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_3", 3, 14),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group7_selected", 1),
					(assign, ":value_3", 7),
					(store_add, ":value_4", ":value_3", 46),
					(troop_get_slot, ":slot_formation_ally_value_4", "trp_slot_formation_ally", ":value_4"),
					(neq, ":slot_formation_ally_value_4", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_3", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_3", 3),
					(set_show_messages, 1),
					(store_add, ":value_5", ":value_3", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_5", 14),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_3", 3, 14),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group8_selected", 1),
					(assign, ":value_3", 8),
					(store_add, ":value_4", ":value_3", 46),
					(troop_get_slot, ":slot_formation_ally_value_4", "trp_slot_formation_ally", ":value_4"),
					(neq, ":slot_formation_ally_value_4", 12),
					(set_show_messages, 0),
					(team_give_order, ":team_player_agent_no", ":value_3", 0),
					(team_set_order_position, ":team_player_agent_no", ":value_3", 3),
					(set_show_messages, 1),
					(store_add, ":value_5", ":value_3", 46),
					(troop_set_slot, "trp_slot_formation_ally", ":value_5", 14),
					(call_script, "script_bt_formation_process", ":team_player_agent_no", ":value_3", 3, 14),
				(try_end),
				(set_fixed_point_multiplier, 1000),
				(call_script, "script_update_order_flags_on_map"),
				(call_script, "script_update_order_panel", ":team_player_agent_no"),
				(call_script, "script_battle_tile_agent_division_reset"),
			(try_end)
		])
	]),

	("sliders", 0, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_slider_overlay, "$g_presentation_obj_sliders_1", 0, 100),
			(create_slider_overlay, "$g_presentation_obj_sliders_2", 0, 100),
			(create_slider_overlay, "$g_presentation_obj_sliders_3", 0, 100),
			(create_slider_overlay, "$g_presentation_obj_sliders_4", 0, 100),
			(assign, reg1, 25),
			(str_store_string, 1, "str_reg1"),
			(create_text_overlay, "$g_presentation_obj_sliders_5", 1),
			(create_text_overlay, "$g_presentation_obj_sliders_6", 1),
			(create_text_overlay, "$g_presentation_obj_sliders_7", 1),
			(create_text_overlay, "$g_presentation_obj_sliders_8", 1),
			(assign, "$g_presentation_obj_sliders_1_val", 25),
			(overlay_set_val, "$g_presentation_obj_sliders_1", 25),
			(assign, "$g_presentation_obj_sliders_2_val", 25),
			(overlay_set_val, "$g_presentation_obj_sliders_2", 25),
			(assign, "$g_presentation_obj_sliders_3_val", 25),
			(overlay_set_val, "$g_presentation_obj_sliders_3", 25),
			(assign, "$g_presentation_obj_sliders_4_val", 25),
			(overlay_set_val, "$g_presentation_obj_sliders_4", 25),
			(position_set_x, 1, 600),
			(position_set_y, 1, 200),
			(overlay_set_position, "$g_presentation_obj_sliders_1", 1),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_sliders_2", 1),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_sliders_3", 1),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_sliders_4", 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 200),
			(overlay_set_position, "$g_presentation_obj_sliders_5", 1),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_sliders_6", 1),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_sliders_7", 1),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_sliders_8", 1),
			(position_set_x, 1, 500),
			(overlay_set_size, "$g_presentation_obj_sliders_3", 1)
		]),

		(ti_on_presentation_run,
		[]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(assign, ":value", 0),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_1"),
				(try_begin),
					(neq, "$g_presentation_obj_sliders_1_val", ":trigger_param_2"),
					(assign, "$g_presentation_obj_sliders_1_val", ":trigger_param_2"),
					(assign, ":value", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_2"),
				(try_begin),
					(neq, "$g_presentation_obj_sliders_2_val", ":trigger_param_2"),
					(assign, "$g_presentation_obj_sliders_2_val", ":trigger_param_2"),
					(assign, ":value", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_3"),
				(try_begin),
					(neq, "$g_presentation_obj_sliders_3_val", ":trigger_param_2"),
					(assign, "$g_presentation_obj_sliders_3_val", ":trigger_param_2"),
					(assign, ":value", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_4"),
				(try_begin),
					(neq, "$g_presentation_obj_sliders_4_val", ":trigger_param_2"),
					(assign, "$g_presentation_obj_sliders_4_val", ":trigger_param_2"),
					(assign, ":value", 1),
				(try_end),
			(try_end),
			(try_begin),
				(eq, ":value", 1),
				(assign, ":var_4", 0),
				(val_add, ":var_4", "$g_presentation_obj_sliders_1_val"),
				(val_add, ":var_4", "$g_presentation_obj_sliders_2_val"),
				(val_add, ":var_4", "$g_presentation_obj_sliders_3_val"),
				(val_add, ":var_4", "$g_presentation_obj_sliders_4_val"),
				(store_sub, ":value_2", 100, ":var_4"),
				(assign, ":var_6", "$g_presentation_obj_sliders_1_val"),
				(assign, ":var_7", "$g_presentation_obj_sliders_2_val"),
				(assign, ":var_8", "$g_presentation_obj_sliders_3_val"),
				(assign, ":var_9", "$g_presentation_obj_sliders_4_val"),
				(assign, ":value_3", 1),
				(assign, ":value_4", 0),
				(assign, ":value_5", 100),
				(try_begin),
					(lt, ":value_2", 0),
					(val_mul, ":value_2", -1),
					(assign, ":value_3", -1),
					(assign, ":value_4", 1),
					(assign, ":value_5", 101),
				(try_end),
				(store_sub, ":value_6", ":var_4", ":trigger_param_2"),
				(val_add, ":value_6", 30),
				(try_for_range, ":unused", 0, ":value_2"),
					(store_random_in_range, ":random_in_range_0_value_6", 0, ":value_6"),
					(try_begin),
						(neq, ":trigger_param_1", "$g_presentation_obj_sliders_1"),
						(val_sub, ":random_in_range_0_value_6", "$g_presentation_obj_sliders_1_val"),
						(val_sub, ":random_in_range_0_value_6", 10),
						(lt, ":random_in_range_0_value_6", 0),
						(is_between, ":var_6", ":value_4", ":value_5"),
						(val_add, ":var_6", ":value_3"),
					(else_try),
						(neq, ":trigger_param_1", "$g_presentation_obj_sliders_2"),
						(val_sub, ":random_in_range_0_value_6", "$g_presentation_obj_sliders_2_val"),
						(val_sub, ":random_in_range_0_value_6", 10),
						(lt, ":random_in_range_0_value_6", 0),
						(is_between, ":var_7", ":value_4", ":value_5"),
						(val_add, ":var_7", ":value_3"),
					(else_try),
						(neq, ":trigger_param_1", "$g_presentation_obj_sliders_3"),
						(val_sub, ":random_in_range_0_value_6", "$g_presentation_obj_sliders_3_val"),
						(val_sub, ":random_in_range_0_value_6", 10),
						(lt, ":random_in_range_0_value_6", 0),
						(is_between, ":var_8", ":value_4", ":value_5"),
						(val_add, ":var_8", ":value_3"),
					(else_try),
						(is_between, ":var_9", ":value_4", ":value_5"),
						(val_add, ":var_9", ":value_3"),
					(else_try),
						(val_add, ":value_2", 1),
					(try_end),
				(try_end),
				(assign, "$g_presentation_obj_sliders_1_val", ":var_6"),
				(assign, "$g_presentation_obj_sliders_2_val", ":var_7"),
				(assign, "$g_presentation_obj_sliders_3_val", ":var_8"),
				(assign, "$g_presentation_obj_sliders_4_val", ":var_9"),
			(try_end),
			(overlay_set_val, "$g_presentation_obj_sliders_1", "$g_presentation_obj_sliders_1_val"),
			(overlay_set_val, "$g_presentation_obj_sliders_2", "$g_presentation_obj_sliders_2_val"),
			(overlay_set_val, "$g_presentation_obj_sliders_3", "$g_presentation_obj_sliders_3_val"),
			(overlay_set_val, "$g_presentation_obj_sliders_4", "$g_presentation_obj_sliders_4_val"),
			(assign, reg1, "$g_presentation_obj_sliders_1_val"),
			(str_store_string, 1, "str_reg1"),
			(overlay_set_text, "$g_presentation_obj_sliders_5", 1),
			(assign, reg1, "$g_presentation_obj_sliders_2_val"),
			(str_store_string, 1, "str_reg1"),
			(overlay_set_text, "$g_presentation_obj_sliders_6", 1),
			(assign, reg1, "$g_presentation_obj_sliders_3_val"),
			(str_store_string, 1, "str_reg1"),
			(overlay_set_text, "$g_presentation_obj_sliders_7", 1),
			(assign, reg1, "$g_presentation_obj_sliders_4_val"),
			(str_store_string, 1, "str_reg1"),
			(overlay_set_text, "$g_presentation_obj_sliders_8", 1)
		])
	]),

	("arena_training", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_run,
		[])
	]),

#	("game_before_quit", 0, mesh_load_window, 
#	[(ti_on_presentation_load,
#		[
#			(try_begin),
#				(is_trial_version),
#				(set_fixed_point_multiplier, 1000),
#				(create_mesh_overlay, reg0, "mesh_quit_adv"),
#				(position_set_x, 1, -1),
#				(position_set_y, 1, -1),
#				(overlay_set_position, reg0, 1),
#				(position_set_x, 1, 1002),
#				(position_set_y, 1, 1002),
#				(overlay_set_size, reg0, 1),
#				(assign, "$g_game_before_quit_state", 0),
#				(presentation_set_duration, 999999),
#			(try_end)
#		]),
#
#		(ti_on_presentation_run,
#		[
#			(store_trigger_param_1, ":trigger_param_1"),
#			(gt, ":trigger_param_1", 500),
#			(try_begin),
#				(this_or_next|key_clicked, 57),
#				(this_or_next|key_clicked, 28),
#				(this_or_next|key_clicked, 1),
#				(this_or_next|key_clicked, 14),
#				(this_or_next|key_clicked, 224),
#				(this_or_next|key_clicked, 225),
#				(this_or_next|key_clicked, 252),
#				(key_clicked, 253),
#				(try_begin),
#					(eq, "$g_game_before_quit_state", 0),
#					(val_add, "$g_game_before_quit_state", 1),
#					(create_mesh_overlay, reg0, "mesh_quit_adv_b"),
#					(position_set_x, 1, -1),
#					(position_set_y, 1, -1),
#					(overlay_set_position, reg0, 1),
#					(position_set_x, 1, 1002),
#					(position_set_y, 1, 1002),
#					(overlay_set_size, reg0, 1),
#				(else_try),
#					(presentation_set_duration, 0),
#				(try_end),
#			(try_end)
#		])
#	]),

	("multiplayer_duel_start_counter", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[]),

		(ti_on_presentation_run,
		[])
	]),

	("mini_map", prsntf_read_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(try_for_agents, ":var_1"),
				(agent_set_slot, ":var_1", slot_agent_map_overlay_id, 0),
			(try_end),
			(get_scene_boundaries, 2, 3),
			(position_transform_position_to_local, 4, 2, 3),
			(set_fixed_point_multiplier, 1000),
			(position_get_x, ":position_x_4", 4),
			(position_get_y, ":position_y_4", 4),
			(set_fixed_point_multiplier, 1000),
			(store_div, ":value", ":position_y_4", 100),
			(store_div, ":value", ":position_x_4", ":value"),
			(try_begin),
				(gt, ":value", 100),
				(assign, "$g_battle_map_width", 200),
				(store_div, "$g_battle_map_scale", ":position_x_4", "$g_battle_map_width"),
				(store_div, "$g_battle_map_height", ":position_y_4", "$g_battle_map_scale"),
			(else_try),
				(assign, "$g_battle_map_height", 200),
				(store_div, "$g_battle_map_scale", ":position_y_4", "$g_battle_map_height"),
				(store_div, "$g_battle_map_width", ":position_x_4", "$g_battle_map_scale"),
			(try_end),
			(create_mesh_overlay, "$g_battle_map_plane", "mesh_white_plane"),
			(overlay_set_color, "$g_battle_map_plane", 0),
			(store_add, ":value_2", "$g_battle_map_width", 20),
			(store_add, ":value_3", "$g_battle_map_height", 20),
			(store_mul, ":value_4", ":value_2", 50),
			(store_mul, ":value_5", ":value_3", 50),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_size, "$g_battle_map_plane", 1),
			(store_sub, ":value_6", 990, ":value_2"),
			(store_sub, ":value_7", 740, ":value_3"),
			(position_set_x, 1, ":value_6"),
			(position_set_y, 1, ":value_7"),
			(overlay_set_position, "$g_battle_map_plane", 1),
			(overlay_set_alpha, "$g_battle_map_plane", 18),
			(try_begin),
				(scene_prop_get_instance, ":scene_prop_instance_inventory_0", "spr_inventory", 0),
				(ge, ":scene_prop_instance_inventory_0", 0),
				(create_mesh_overlay, "$g_presentation_obj_39", "mesh_white_plane"),
				(overlay_set_color, "$g_presentation_obj_39", 16777015),
				(position_set_x, 1, 250),
				(position_set_y, 1, 250),
				(overlay_set_size, "$g_presentation_obj_39", 1),
			(try_end),
			(call_script, "script_update_order_panel_map"),
			(create_mesh_overlay, reg0, "mesh_invisi_st_plane_fullsc"),
			(position_set_x, 1, 0),
			(position_set_y, 1, 0),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(eq, "$wm_battle_result_state", 1),
				(create_text_overlay, reg1, "str_msg_battle_won2", 16),
				(position_set_x, 1, 3000),
				(position_set_y, 1, 3000),
				(overlay_set_size, reg1, 1),
				(position_set_y, 1, 450),
				(position_set_x, 1, 510),
				(overlay_set_position, reg1, 1),
				(overlay_set_color, reg1, 16777215),
			(try_end),
			(try_begin),
				(eq, "$wm_battle_result_state", 2),
				(create_text_overlay, reg1, "str_msg_battle_lose2", 16),
				(position_set_x, 1, 3000),
				(position_set_y, 1, 3000),
				(overlay_set_size, reg1, 1),
				(position_set_y, 1, 450),
				(position_set_x, 1, 510),
				(overlay_set_position, reg1, 1),
				(overlay_set_color, reg1, 16777215),
			(try_end),
			(try_begin),
				(eq, "$minimap_number_farmdef", 1),
				(assign, reg31, "$temp_num_01"),
				(create_text_overlay, reg1, "str_farmdef_dis", 16),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, reg1, 1),
				(position_set_y, 1, 650),
				(position_set_x, 1, 690),
				(overlay_set_position, reg1, 1),
				(overlay_set_color, reg1, 16777215),
			(try_end),
			(assign, ":value_8", 800),
			(assign, ":value_9", 985),
			(assign, ":value_10", 705),
			(assign, ":value_11", 20),
			(try_begin),
				(eq, "$minimap_number_display", 1),
				(create_text_overlay, reg1, "str_mini_dis_a", 8),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value_9"),
				(position_set_y, 1, ":value_10"),
				(overlay_set_position, reg1, 1),
				(overlay_set_color, reg1, 16777215),
				(val_sub, ":value_10", ":value_11"),
				(assign, reg31, "$minimap_ally_team_num"),
				(create_text_overlay, reg1, "str_glob_reg31", 8),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value_9"),
				(position_set_y, 1, ":value_10"),
				(overlay_set_position, reg1, 1),
				(overlay_set_color, reg1, 16777215),
				(val_sub, ":value_10", ":value_11"),
				(val_sub, ":value_10", ":value_11"),
				(val_sub, ":value_10", ":value_11"),
				(create_text_overlay, reg1, "str_mini_dis_e", 8),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value_9"),
				(position_set_y, 1, ":value_10"),
				(overlay_set_position, reg1, 1),
				(overlay_set_color, reg1, 16777215),
				(val_sub, ":value_10", ":value_11"),
				(assign, reg31, "$minimap_enemy_team_num"),
				(create_text_overlay, reg1, "str_glob_reg31", 8),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value_9"),
				(position_set_y, 1, ":value_10"),
				(overlay_set_position, reg1, 1),
				(overlay_set_color, reg1, 16777215),
			(try_end),
			(try_begin),
				(eq, "$minimap_divi_hud_on", 1),
				(assign, ":value_8", 900),
				(assign, ":value_9", 18),
				(assign, ":value_10", 580),
				(create_text_overlay, reg1, "str_battle_tabv", 4),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value_9"),
				(position_set_y, 1, ":value_10"),
				(overlay_set_position, reg1, 1),
				(overlay_set_color, reg1, 16777215),
				(val_sub, ":value_10", 20),
				(try_begin),
					(eq, "$formation_battle_mode", 0),
					(create_text_overlay, reg1, "str_charget", 4),
				(else_try),
					(create_text_overlay, reg1, "str_delegationt", 4),
				(try_end),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value_9"),
				(position_set_y, 1, ":value_10"),
				(overlay_set_position, reg1, 1),
				(overlay_set_color, reg1, 16777215),
				(val_sub, ":value_10", 20),
				(create_text_overlay, reg1, "str_holdh", 4),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value_9"),
				(position_set_y, 1, ":value_10"),
				(overlay_set_position, reg1, 1),
				(overlay_set_color, reg1, 16777215),
				(val_sub, ":value_10", 20),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(create_text_overlay, reg1, "str_returnn", 4),
				(else_try),
					(create_text_overlay, reg1, "str_follow_men", 4),
				(try_end),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value_9"),
				(position_set_y, 1, ":value_10"),
				(overlay_set_position, reg1, 1),
				(overlay_set_color, reg1, 16777215),
				(val_sub, ":value_10", 20),
				(create_text_overlay, reg1, "str_minimap_lef", 4),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value_9"),
				(position_set_y, 1, ":value_10"),
				(overlay_set_position, reg1, 1),
				(overlay_set_color, reg1, 16777215),
				(val_sub, ":value_10", 20),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(create_text_overlay, reg1, "str_minimap_rig", 4),
				(else_try),
					(create_text_overlay, reg1, "str_empty_string", 4),
				(try_end),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value_9"),
				(position_set_y, 1, ":value_10"),
				(overlay_set_position, reg1, 1),
				(overlay_set_color, reg1, 16777215),
				(val_sub, ":value_10", 20),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(create_text_overlay, reg1, "str_minimap_trace", 4),
				(else_try),
					(create_text_overlay, reg1, "str_empty_string", 4),
				(try_end),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value_9"),
				(position_set_y, 1, ":value_10"),
				(overlay_set_position, reg1, 1),
				(overlay_set_color, reg1, 16777215),
				(val_sub, ":value_10", 20),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(create_text_overlay, reg1, "str_minimap_backup", 4),
				(else_try),
					(create_text_overlay, reg1, "str_empty_string", 4),
				(try_end),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_8"),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value_9"),
				(position_set_y, 1, ":value_10"),
				(overlay_set_position, reg1, 1),
				(overlay_set_color, reg1, 16777215),
			(try_end),
			(try_begin),
				(eq, "$sea_battle_hud_on", 1),
				(assign, ":value_8", 900),
				(assign, ":value_11", 25),
				(assign, ":var_16", 20),
				(assign, ":var_17", 630),
				(assign, ":var_18", 975),
				(assign, ":var_19", 630),
				(get_player_agent_no, ":player_agent_no"),
				(agent_get_team, ":team_player_agent_no", ":player_agent_no"),
				(try_for_agents, ":var_22"),
					(agent_is_alive, ":var_22"),
					(agent_is_human, ":var_22"),
					(agent_get_team, ":team_var_22", ":var_22"),
					(agent_get_horse, ":horse_var_22", ":var_22"),
					(gt, ":horse_var_22", 0),
					(agent_get_troop_id, ":troop_id_var_22", ":var_22"),
					(store_agent_hit_points, ":agent_hit_points_horse_var_22_1", ":horse_var_22", 1),
					(assign, reg8, ":agent_hit_points_horse_var_22_1"),
					(str_store_troop_name, 8, ":troop_id_var_22"),
					(try_begin),
						(eq, ":team_var_22", ":team_player_agent_no"),
						(assign, ":value_9", ":var_16"),
						(assign, ":value_10", ":var_17"),
						(create_text_overlay, reg1, "str_sea_hud_dis", 4),
						(overlay_set_color, reg1, 16777215),
					(else_try),
						(assign, ":value_9", ":var_18"),
						(assign, ":value_10", ":var_19"),
						(create_text_overlay, reg1, "str_sea_hud_dis", 8),
						(overlay_set_color, reg1, 16759996),
					(try_end),
					(position_set_x, 1, ":value_8"),
					(position_set_y, 1, ":value_8"),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, ":value_9"),
					(position_set_y, 1, ":value_10"),
					(overlay_set_position, reg1, 1),
					(try_begin),
						(eq, ":team_var_22", ":team_player_agent_no"),
						(val_sub, ":var_17", ":value_11"),
					(else_try),
						(val_sub, ":var_19", ":value_11"),
					(try_end),
				(try_end),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(neg|key_is_down, 42),
				(try_begin),
					(game_key_clicked, 30),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group0_selected", 1),
					(assign, "$g_formation_group1_selected", 0),
					(assign, "$g_formation_group2_selected", 0),
					(assign, "$g_formation_group3_selected", 0),
					(assign, "$g_formation_group4_selected", 0),
					(assign, "$g_formation_group5_selected", 0),
					(assign, "$g_formation_group6_selected", 0),
					(assign, "$g_formation_group7_selected", 0),
					(assign, "$g_formation_group8_selected", 0),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 31),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group0_selected", 0),
					(assign, "$g_formation_group1_selected", 1),
					(assign, "$g_formation_group2_selected", 0),
					(assign, "$g_formation_group3_selected", 0),
					(assign, "$g_formation_group4_selected", 0),
					(assign, "$g_formation_group5_selected", 0),
					(assign, "$g_formation_group6_selected", 0),
					(assign, "$g_formation_group7_selected", 0),
					(assign, "$g_formation_group8_selected", 0),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 32),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group0_selected", 0),
					(assign, "$g_formation_group1_selected", 0),
					(assign, "$g_formation_group2_selected", 1),
					(assign, "$g_formation_group3_selected", 0),
					(assign, "$g_formation_group4_selected", 0),
					(assign, "$g_formation_group5_selected", 0),
					(assign, "$g_formation_group6_selected", 0),
					(assign, "$g_formation_group7_selected", 0),
					(assign, "$g_formation_group8_selected", 0),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 33),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group0_selected", 0),
					(assign, "$g_formation_group1_selected", 0),
					(assign, "$g_formation_group2_selected", 0),
					(assign, "$g_formation_group3_selected", 1),
					(assign, "$g_formation_group4_selected", 0),
					(assign, "$g_formation_group5_selected", 0),
					(assign, "$g_formation_group6_selected", 0),
					(assign, "$g_formation_group7_selected", 0),
					(assign, "$g_formation_group8_selected", 0),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 34),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group0_selected", 0),
					(assign, "$g_formation_group1_selected", 0),
					(assign, "$g_formation_group2_selected", 0),
					(assign, "$g_formation_group3_selected", 0),
					(assign, "$g_formation_group4_selected", 1),
					(assign, "$g_formation_group5_selected", 0),
					(assign, "$g_formation_group6_selected", 0),
					(assign, "$g_formation_group7_selected", 0),
					(assign, "$g_formation_group8_selected", 0),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 35),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group0_selected", 0),
					(assign, "$g_formation_group1_selected", 0),
					(assign, "$g_formation_group2_selected", 0),
					(assign, "$g_formation_group3_selected", 0),
					(assign, "$g_formation_group4_selected", 0),
					(assign, "$g_formation_group5_selected", 1),
					(assign, "$g_formation_group6_selected", 0),
					(assign, "$g_formation_group7_selected", 0),
					(assign, "$g_formation_group8_selected", 0),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 36),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group0_selected", 0),
					(assign, "$g_formation_group1_selected", 0),
					(assign, "$g_formation_group2_selected", 0),
					(assign, "$g_formation_group3_selected", 0),
					(assign, "$g_formation_group4_selected", 0),
					(assign, "$g_formation_group5_selected", 0),
					(assign, "$g_formation_group6_selected", 1),
					(assign, "$g_formation_group7_selected", 0),
					(assign, "$g_formation_group8_selected", 0),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 37),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group0_selected", 0),
					(assign, "$g_formation_group1_selected", 0),
					(assign, "$g_formation_group2_selected", 0),
					(assign, "$g_formation_group3_selected", 0),
					(assign, "$g_formation_group4_selected", 0),
					(assign, "$g_formation_group5_selected", 0),
					(assign, "$g_formation_group6_selected", 0),
					(assign, "$g_formation_group7_selected", 1),
					(assign, "$g_formation_group8_selected", 0),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 38),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group0_selected", 0),
					(assign, "$g_formation_group1_selected", 0),
					(assign, "$g_formation_group2_selected", 0),
					(assign, "$g_formation_group3_selected", 0),
					(assign, "$g_formation_group4_selected", 0),
					(assign, "$g_formation_group5_selected", 0),
					(assign, "$g_formation_group6_selected", 0),
					(assign, "$g_formation_group7_selected", 0),
					(assign, "$g_formation_group8_selected", 1),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 29),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group0_selected", 1),
					(assign, "$g_formation_group1_selected", 1),
					(assign, "$g_formation_group2_selected", 1),
					(assign, "$g_formation_group3_selected", 1),
					(assign, "$g_formation_group4_selected", 1),
					(assign, "$g_formation_group5_selected", 1),
					(assign, "$g_formation_group6_selected", 1),
					(assign, "$g_formation_group7_selected", 1),
					(assign, "$g_formation_group8_selected", 1),
					(start_presentation, "prsnt_mini_map"),
				(try_end),
			(else_try),
				(try_begin),
					(game_key_clicked, 30),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group0_selected", 1),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 31),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group1_selected", 1),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 32),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group2_selected", 1),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 33),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group3_selected", 1),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 34),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group4_selected", 1),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 35),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group5_selected", 1),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 36),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group6_selected", 1),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 37),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group7_selected", 1),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 38),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group8_selected", 1),
					(start_presentation, "prsnt_mini_map"),
				(else_try),
					(game_key_clicked, 29),
					(play_sound, "snd_pst_click"),
					(assign, "$minimap_divi_hud_on", 1),
					(assign, "$g_formation_group0_selected", 1),
					(assign, "$g_formation_group1_selected", 1),
					(assign, "$g_formation_group2_selected", 1),
					(assign, "$g_formation_group3_selected", 1),
					(assign, "$g_formation_group4_selected", 1),
					(assign, "$g_formation_group5_selected", 1),
					(assign, "$g_formation_group6_selected", 1),
					(assign, "$g_formation_group7_selected", 1),
					(assign, "$g_formation_group8_selected", 1),
					(start_presentation, "prsnt_mini_map"),
				(try_end),
			(try_end),
			(try_begin),
				(key_clicked, 21),
				(play_sound, "snd_pst_click"),
				(assign, "$minimap_divi_hud_on", 0),
				(call_script, "script_team_give_order_from_order_panel", "$bt_player_agent", 8),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_spread"),
				(start_presentation, "prsnt_mini_map"),
			(try_end),
			(try_begin),
				(key_clicked, 22),
				(play_sound, "snd_pst_click"),
				(assign, "$minimap_divi_hud_on", 0),
				(call_script, "script_team_give_order_from_order_panel", "$bt_player_agent", 7),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_closer"),
				(start_presentation, "prsnt_mini_map"),
			(try_end),
			(try_begin),
				(key_clicked, 20),
				(play_sound, "snd_pst_click"),
				(assign, "$minimap_divi_hud_on", 0),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 3, 0),
				(else_try),
					(call_script, "script_team_give_order_from_order_panel", "$bt_player_agent", 2),
					(call_script, "script_battle_tile_agent_division_reset"),
					(display_message, "str_c_charge"),
										
					
				#######Horn additions begin
				(try_begin),
				(eq, "$horn_multiple", 1),
				#(display_message, "@Debug first formation member!"),
				(call_script, "script_cf_first_formation_member_sound_horn"),
				(try_end),
				#######Horn additions end
				
				
				(try_end),
				(start_presentation, "prsnt_mini_map"),
			(try_end),
			(try_begin),
				(key_clicked, 35),
				(play_sound, "snd_pst_click"),
				(assign, "$minimap_divi_hud_on", 0),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 0, 0),
					(call_script, "script_update_order_panel", "$bt_player_team"),
				(else_try),
					(call_script, "script_team_give_order_from_order_panel", "$bt_player_agent", 11),
					(call_script, "script_battle_tile_agent_division_reset"),
					(display_message, "str_c_hold"),
										
					
				#######Horn additions begin
				(try_begin),
				(eq, "$horn_multiple", 1),
				#(display_message, "@Debug first formation member!"),
				(call_script, "script_cf_first_formation_member_sound_horn"),
				(try_end),
				#######Horn additions end
				
				
				(try_end),
				(start_presentation, "prsnt_mini_map"),
			(try_end),
			(try_begin),
				(key_clicked, 49),
				(play_sound, "snd_pst_click"),
				(assign, "$minimap_divi_hud_on", 0),
				(try_begin),
					(eq, "$formation_battle_mode", 1),
					(call_script, "script_molda_order_execute", 13, 0),
					(call_script, "script_update_order_panel", "$bt_player_team"),
				(else_try),
					(call_script, "script_team_give_order_from_order_panel", "$bt_player_agent", 1),
					(call_script, "script_battle_tile_agent_division_reset"),
					(display_message, "str_c_followme"),
				(try_end),
				(start_presentation, "prsnt_mini_map"),
			(try_end),
			(try_begin),
				(key_clicked, 50),
				(play_sound, "snd_pst_click"),
				(assign, "$minimap_divi_hud_on", 0),
				(call_script, "script_team_give_order_from_order_panel", "$bt_player_agent", 13),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_fire_at_will"),
				(start_presentation, "prsnt_mini_map"),
			(try_end),
			(try_begin),
				(key_clicked, 36),
				(play_sound, "snd_pst_click"),
				(assign, "$minimap_divi_hud_on", 0),
				(call_script, "script_team_give_order_from_order_panel", "$bt_player_agent", 12),
				(call_script, "script_battle_tile_agent_division_reset"),
				(display_message, "str_c_hold_fire"),
									
					
				#######Horn additions begin
				(try_begin),
				(eq, "$horn_multiple", 1),
				#(display_message, "@Debug first formation member!"),
				(call_script, "script_cf_first_formation_member_sound_horn"),
				(try_end),
				#######Horn additions end
				
				
				(start_presentation, "prsnt_mini_map"),
			(try_end),
#############################################################
################ troop_ratio_bar
#############################################################
#		(try_begin),
#		(eq, "$use_troopbars", 1),
#          (start_presentation, "prsnt_troop_ratio_bar"),
#		  (try_end),
#############################################################
################ troop_ratio_bar
#############################################################
		])
	]),

	("multiplayer_name_projection_display", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
			(mission_cam_get_position, 3),
			(try_for_agents, ":var_3"),
				(agent_is_human, ":var_3"),
				(agent_is_alive, ":var_3"),
				(neq, ":var_3", ":agent_id_multiplayer_my_player"),
				(agent_get_position, 1, ":var_3"),
				(get_distance_between_positions, ":distance_between_positions_1_3", 1, 3),
				(le, ":distance_between_positions_1_3", 4000),
				(position_move_z, 1, 230),
				(agent_get_horse, ":horse_var_3", ":var_3"),
				(try_begin),
					(ge, ":horse_var_3", 0),
					(position_move_z, 1, 80),
				(try_end),
				(copy_position, 4, 1),
				(position_move_z, 4, 200),
				(position_get_screen_projection, 2, 1),
				(position_get_screen_projection, 5, 4),
				(position_get_x, ":position_x_2", 2),
				(position_get_y, ":position_y_2", 2),
				(position_get_y, ":position_y_5", 5),
				(is_between, ":position_x_2", -100, 1100),
				(is_between, ":position_y_2", -100, 850),
				(try_begin),
					(agent_is_non_player, ":var_3"),
					(agent_get_troop_id, ":troop_id_var_3", ":var_3"),
					(str_store_troop_name, 1, ":troop_id_var_3"),
				(else_try),
					(agent_get_player_id, ":player_id_var_3", ":var_3"),
					(str_store_player_username, 1, ":player_id_var_3"),
				(try_end),
				(store_sub, ":value", ":position_y_5", ":position_y_2"),
				(val_mul, ":value", 6),
				(create_text_overlay, reg1, "str_glob_s1"),
				(store_div, ":value_2", ":value", -100),
				(position_move_x, 2, ":value_2"),
				(overlay_set_position, reg1, 2),
				(overlay_set_color, reg1, 16777215),
				(position_set_y, 1, ":value"),
				(position_set_x, 1, ":value"),
				(overlay_set_size, reg1, 1),
			(try_end),
			(presentation_set_duration, 9999)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(gt, ":trigger_param_1", 20),
				(presentation_set_duration, 0),
				(key_is_down, 56),
				(start_presentation, "prsnt_multiplayer_name_projection_display"),
			(try_end)
		])
	]),

	("wm_shipyard_pst", 0, mesh_pic_sea_backg, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(position_set_x, 3, 3800),
			(position_set_y, 3, 4500),
			(position_set_x, 4, 1200),
			(position_set_y, 4, 1500),
			(try_begin),
				(position_set_x, 1, 160),
				(position_set_y, 1, 670),
				(create_mesh_overlay_with_item_id, reg0, "$m_ship_type_1"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 130),
				(position_set_y, 1, 620),
				(create_image_button_overlay, "$cur_ship_1", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$cur_ship_1", 1),
				(overlay_set_size, "$cur_ship_1", 3),
				(overlay_set_alpha, "$cur_ship_1", 0),
			(try_end),
			(try_begin),
				(position_set_x, 1, 330),
				(position_set_y, 1, 670),
				(create_mesh_overlay_with_item_id, reg0, "$m_ship_type_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 300),
				(position_set_y, 1, 620),
				(create_image_button_overlay, "$cur_ship_2", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$cur_ship_2", 1),
				(overlay_set_size, "$cur_ship_2", 3),
				(overlay_set_alpha, "$cur_ship_2", 0),
			(try_end),
			(try_begin),
				(position_set_x, 1, 500),
				(position_set_y, 1, 670),
				(create_mesh_overlay_with_item_id, reg0, "$m_ship_type_3"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 470),
				(position_set_y, 1, 620),
				(create_image_button_overlay, "$cur_ship_3", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$cur_ship_3", 1),
				(overlay_set_size, "$cur_ship_3", 3),
				(overlay_set_alpha, "$cur_ship_3", 0),
			(try_end),
			(try_begin),
				(position_set_x, 1, 670),
				(position_set_y, 1, 670),
				(create_mesh_overlay_with_item_id, reg0, "$m_ship_type_4"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 640),
				(position_set_y, 1, 620),
				(create_image_button_overlay, "$cur_ship_4", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$cur_ship_4", 1),
				(overlay_set_size, "$cur_ship_4", 3),
				(overlay_set_alpha, "$cur_ship_4", 0),
			(try_end),
			(try_begin),
				(position_set_x, 1, 840),
				(position_set_y, 1, 670),
				(create_mesh_overlay_with_item_id, reg0, "$m_ship_type_5"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 810),
				(position_set_y, 1, 620),
				(create_image_button_overlay, "$cur_ship_5", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$cur_ship_5", 1),
				(overlay_set_size, "$cur_ship_5", 3),
				(overlay_set_alpha, "$cur_ship_5", 0),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1184),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 1),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 2),
				(position_set_x, 1, 80),
				(position_set_y, 1, 200),
				(create_mesh_overlay_with_item_id, reg0, 1401),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 50),
				(position_set_y, 1, 150),
				(create_image_button_overlay, "$buy_ship_01", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_01", 1),
				(overlay_set_size, "$buy_ship_01", 3),
				(overlay_set_alpha, "$buy_ship_01", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_01", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1184),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 1),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 2),
				(position_set_x, 1, 200),
				(position_set_y, 1, 200),
				(create_mesh_overlay_with_item_id, reg0, 1402),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 170),
				(position_set_y, 1, 150),
				(create_image_button_overlay, "$buy_ship_02", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_02", 1),
				(overlay_set_size, "$buy_ship_02", 3),
				(overlay_set_alpha, "$buy_ship_02", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_02", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1184),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 6),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 7),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 14),
				(position_set_x, 1, 320),
				(position_set_y, 1, 200),
				(create_mesh_overlay_with_item_id, reg0, 1403),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 290),
				(position_set_y, 1, 150),
				(create_image_button_overlay, "$buy_ship_03", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_03", 1),
				(overlay_set_size, "$buy_ship_03", 3),
				(overlay_set_alpha, "$buy_ship_03", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_03", "str_empty_string"),
			(try_end),
			(try_begin),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 2),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 3),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 4),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 5),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 6),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 7),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 14),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 19),
				(position_set_x, 1, 440),
				(position_set_y, 1, 200),
				(create_mesh_overlay_with_item_id, reg0, 1404),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 410),
				(position_set_y, 1, 150),
				(create_image_button_overlay, "$buy_ship_04", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_04", 1),
				(overlay_set_size, "$buy_ship_04", 3),
				(overlay_set_alpha, "$buy_ship_04", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_04", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1184),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 1),
				(position_set_x, 1, 560),
				(position_set_y, 1, 200),
				(create_mesh_overlay_with_item_id, reg0, 1405),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 530),
				(position_set_y, 1, 150),
				(create_image_button_overlay, "$buy_ship_05", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_05", 1),
				(overlay_set_size, "$buy_ship_05", 3),
				(overlay_set_alpha, "$buy_ship_05", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_05", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1184),
				(eq, "$choose_ship_num", 1),
				(player_has_item, 1423),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 9),
				(position_set_x, 1, 680),
				(position_set_y, 1, 200),
				(create_mesh_overlay_with_item_id, reg0, 1406),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 650),
				(position_set_y, 1, 150),
				(create_image_button_overlay, "$buy_ship_06", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_06", 1),
				(overlay_set_size, "$buy_ship_06", 3),
				(overlay_set_alpha, "$buy_ship_06", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_06", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1184),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 11),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 12),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 13),
				(position_set_x, 1, 800),
				(position_set_y, 1, 200),
				(create_mesh_overlay_with_item_id, reg0, 1407),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 770),
				(position_set_y, 1, 150),
				(create_image_button_overlay, "$buy_ship_07", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_07", 1),
				(overlay_set_size, "$buy_ship_07", 3),
				(overlay_set_alpha, "$buy_ship_07", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_07", "str_empty_string"),
			(try_end),
			(try_begin),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 8),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 9),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 10),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 11),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 12),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 13),
				(position_set_x, 1, 920),
				(position_set_y, 1, 200),
				(create_mesh_overlay_with_item_id, reg0, 1408),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 890),
				(position_set_y, 1, 150),
				(create_image_button_overlay, "$buy_ship_08", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_08", 1),
				(overlay_set_size, "$buy_ship_08", 3),
				(overlay_set_alpha, "$buy_ship_08", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_08", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1184),
				(eq, "$choose_ship_num", 1),
				(player_has_item, 1424),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 1),
				(position_set_x, 1, 80),
				(position_set_y, 1, 80),
				(create_mesh_overlay_with_item_id, reg0, 1409),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 50),
				(position_set_y, 1, 30),
				(create_image_button_overlay, "$buy_ship_09", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_09", 1),
				(overlay_set_size, "$buy_ship_09", 3),
				(overlay_set_alpha, "$buy_ship_09", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_09", "str_empty_string"),
			(try_end),
			(try_begin),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 3),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 4),
				(position_set_x, 1, 200),
				(position_set_y, 1, 80),
				(create_mesh_overlay_with_item_id, reg0, 1410),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 170),
				(position_set_y, 1, 30),
				(create_image_button_overlay, "$buy_ship_10", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_10", 1),
				(overlay_set_size, "$buy_ship_10", 3),
				(overlay_set_alpha, "$buy_ship_10", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_10", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1184),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 1),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 2),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 3),
				(position_set_x, 1, 320),
				(position_set_y, 1, 80),
				(create_mesh_overlay_with_item_id, reg0, 1411),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 290),
				(position_set_y, 1, 30),
				(create_image_button_overlay, "$buy_ship_11", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_11", 1),
				(overlay_set_size, "$buy_ship_11", 3),
				(overlay_set_alpha, "$buy_ship_11", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_11", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1184),
				(eq, "$choose_ship_num", 1),
				(player_has_item, 1421),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 1),
				(position_set_x, 1, 440),
				(position_set_y, 1, 80),
				(create_mesh_overlay_with_item_id, reg0, 1412),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 410),
				(position_set_y, 1, 30),
				(create_image_button_overlay, "$buy_ship_12", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_12", 1),
				(overlay_set_size, "$buy_ship_12", 3),
				(overlay_set_alpha, "$buy_ship_12", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_12", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1184),
				(eq, "$choose_ship_num", 1),
				(player_has_item, 1422),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 1),
				(position_set_x, 1, 560),
				(position_set_y, 1, 80),
				(create_mesh_overlay_with_item_id, reg0, 1413),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 530),
				(position_set_y, 1, 30),
				(create_image_button_overlay, "$buy_ship_13", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_13", 1),
				(overlay_set_size, "$buy_ship_13", 3),
				(overlay_set_alpha, "$buy_ship_13", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_13", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1184),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 8),
				(position_set_x, 1, 680),
				(position_set_y, 1, 80),
				(create_mesh_overlay_with_item_id, reg0, 1414),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 650),
				(position_set_y, 1, 30),
				(create_image_button_overlay, "$buy_ship_14", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_14", 1),
				(overlay_set_size, "$buy_ship_14", 3),
				(overlay_set_alpha, "$buy_ship_14", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_14", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1184),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 11),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 12),
				(position_set_x, 1, 800),
				(position_set_y, 1, 80),
				(create_mesh_overlay_with_item_id, reg0, 1415),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 770),
				(position_set_y, 1, 30),
				(create_image_button_overlay, "$buy_ship_15", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_15", 1),
				(overlay_set_size, "$buy_ship_15", 3),
				(overlay_set_alpha, "$buy_ship_15", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_15", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1184),
				(party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 9),
				(position_set_x, 1, 920),
				(position_set_y, 1, 80),
				(create_mesh_overlay_with_item_id, reg0, 1416),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, 890),
				(position_set_y, 1, 30),
				(create_image_button_overlay, "$buy_ship_16", "mesh_white_plane", "mesh_white_plane"),
				(overlay_set_position, "$buy_ship_16", 1),
				(overlay_set_size, "$buy_ship_16", 3),
				(overlay_set_alpha, "$buy_ship_16", 0),
			(else_try),
				(create_text_overlay, "$buy_ship_16", "str_empty_string"),
			(try_end),
			(party_get_slot, reg55, "p_main_party", slot_center_last_taken_by_troop),
			(create_text_overlay, reg0, "str_buy_ship_money", 4),
			(position_set_x, 1, 850),
			(position_set_y, 1, 535),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(gt, "$choose_ship_num", 0),
				(gt, "$choose_buy_ship_n", 0),
				(assign, ":value", 0),
				(try_begin),
					(eq, "$choose_ship_num", 1),
					(eq, "$m_ship_type_1", 1400),
					(assign, ":value", 1),
				(else_try),
					(eq, "$choose_ship_num", 2),
					(eq, "$m_ship_type_2", 1400),
					(assign, ":value", 1),
				(else_try),
					(eq, "$choose_ship_num", 3),
					(eq, "$m_ship_type_3", 1400),
					(assign, ":value", 1),
				(else_try),
					(eq, "$choose_ship_num", 4),
					(eq, "$m_ship_type_4", 1400),
					(assign, ":value", 1),
				(else_try),
					(eq, "$choose_ship_num", 5),
					(eq, "$m_ship_type_5", 1400),
					(assign, ":value", 1),
				(try_end),
				(eq, ":value", 1),
				(position_set_x, 1, 910),
				(position_set_y, 1, 410),
				(create_game_button_overlay, "$buy_ship_butt", "str_buy_ship", 16),
				(overlay_set_position, "$buy_ship_butt", 1),
			(else_try),
				(create_text_overlay, "$buy_ship_butt", "str_empty_string"),
			(try_end),
			(try_begin),
				(gt, "$choose_ship_num", 0),
				(assign, ":value", 0),
				(try_begin),
					(eq, "$choose_ship_num", 1),
					(gt, "$m_ship_type_1", 1400),
					(assign, ":value", 1),
				(else_try),
					(eq, "$choose_ship_num", 2),
					(gt, "$m_ship_type_2", 1400),
					(assign, ":value", 1),
				(else_try),
					(eq, "$choose_ship_num", 3),
					(gt, "$m_ship_type_3", 1400),
					(assign, ":value", 1),
				(else_try),
					(eq, "$choose_ship_num", 4),
					(gt, "$m_ship_type_4", 1400),
					(assign, ":value", 1),
				(else_try),
					(eq, "$choose_ship_num", 5),
					(gt, "$m_ship_type_5", 1400),
					(assign, ":value", 1),
				(try_end),
				(eq, ":value", 1),
				(position_set_x, 1, 910),
				(position_set_y, 1, 350),
				(create_game_button_overlay, "$sell_ship_butt", "str_sell_ship", 16),
				(overlay_set_position, "$sell_ship_butt", 1),
			(else_try),
				(create_text_overlay, "$sell_ship_butt", "str_empty_string"),
			(try_end),
			(try_begin),
				(position_set_x, 1, 910),
				(position_set_y, 1, 290),
				(create_game_button_overlay, "$ship_yard_return", "str_return_butt", 16),
				(overlay_set_position, "$ship_yard_return", 1),
			(try_end),
			(try_begin),
				(gt, "$choose_ship_num", 0),
				(try_begin),
					(eq, "$choose_ship_num", 1),
					(call_script, "script_wm_ship_stat_val", "$m_ship_type_1", 0),
				(else_try),
					(eq, "$choose_ship_num", 2),
					(call_script, "script_wm_ship_stat_val", "$m_ship_type_2", 0),
				(else_try),
					(eq, "$choose_ship_num", 3),
					(call_script, "script_wm_ship_stat_val", "$m_ship_type_3", 0),
				(else_try),
					(eq, "$choose_ship_num", 4),
					(call_script, "script_wm_ship_stat_val", "$m_ship_type_4", 0),
				(else_try),
					(eq, "$choose_ship_num", 5),
					(call_script, "script_wm_ship_stat_val", "$m_ship_type_5", 0),
				(try_end),
				(create_text_overlay, reg0, "str_current_ship_dis"),
				(position_set_x, 1, 10),
				(position_set_y, 1, 425),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, reg0, 1),
			(try_end),
			(try_begin),
				(gt, "$choose_buy_ship_n", 0),
				(create_text_overlay, reg0, "str_selected_ship_dis"),
				(position_set_x, 1, 10),
				(position_set_y, 1, 285),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, reg0, 1),
			(try_end),
			(try_begin),
				(create_text_overlay, reg0, "str_flagshipd"),
				(position_set_x, 1, 130),
				(position_set_y, 1, 590),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, reg0, 1),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$cur_ship_1"),
				(assign, "$choose_ship_num", 1),
				(str_store_item_name, 8, "$m_ship_type_1"),
				(call_script, "script_wm_ship_stat_val", "$m_ship_type_1", 0),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$cur_ship_2"),
				(assign, "$choose_ship_num", 2),
				(str_store_item_name, 8, "$m_ship_type_2"),
				(call_script, "script_wm_ship_stat_val", "$m_ship_type_2", 0),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$cur_ship_3"),
				(assign, "$choose_ship_num", 3),
				(str_store_item_name, 8, "$m_ship_type_3"),
				(call_script, "script_wm_ship_stat_val", "$m_ship_type_3", 0),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$cur_ship_4"),
				(assign, "$choose_ship_num", 4),
				(str_store_item_name, 8, "$m_ship_type_4"),
				(call_script, "script_wm_ship_stat_val", "$m_ship_type_4", 0),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$cur_ship_5"),
				(assign, "$choose_ship_num", 5),
				(str_store_item_name, 8, "$m_ship_type_5"),
				(call_script, "script_wm_ship_stat_val", "$m_ship_type_5", 0),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_01"),
				(assign, "$choose_buy_ship_n", 1),
				(str_store_item_name, 9, 1401),
				(call_script, "script_wm_ship_stat_val", 1401, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_02"),
				(assign, "$choose_buy_ship_n", 2),
				(str_store_item_name, 9, 1402),
				(call_script, "script_wm_ship_stat_val", 1402, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_03"),
				(assign, "$choose_buy_ship_n", 3),
				(str_store_item_name, 9, 1403),
				(call_script, "script_wm_ship_stat_val", 1403, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_04"),
				(assign, "$choose_buy_ship_n", 4),
				(str_store_item_name, 9, 1404),
				(call_script, "script_wm_ship_stat_val", 1404, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_05"),
				(assign, "$choose_buy_ship_n", 5),
				(str_store_item_name, 9, 1405),
				(call_script, "script_wm_ship_stat_val", 1405, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_06"),
				(assign, "$choose_buy_ship_n", 6),
				(str_store_item_name, 9, 1406),
				(call_script, "script_wm_ship_stat_val", 1406, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_07"),
				(assign, "$choose_buy_ship_n", 7),
				(str_store_item_name, 9, 1407),
				(call_script, "script_wm_ship_stat_val", 1407, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_08"),
				(assign, "$choose_buy_ship_n", 8),
				(str_store_item_name, 9, 1408),
				(call_script, "script_wm_ship_stat_val", 1408, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_09"),
				(assign, "$choose_buy_ship_n", 9),
				(str_store_item_name, 9, 1409),
				(call_script, "script_wm_ship_stat_val", 1409, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_10"),
				(assign, "$choose_buy_ship_n", 10),
				(str_store_item_name, 9, 1410),
				(call_script, "script_wm_ship_stat_val", 1410, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_11"),
				(assign, "$choose_buy_ship_n", 11),
				(str_store_item_name, 9, 1411),
				(call_script, "script_wm_ship_stat_val", 1411, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_12"),
				(assign, "$choose_buy_ship_n", 12),
				(str_store_item_name, 9, 1412),
				(call_script, "script_wm_ship_stat_val", 1412, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_13"),
				(assign, "$choose_buy_ship_n", 13),
				(str_store_item_name, 9, 1413),
				(call_script, "script_wm_ship_stat_val", 1413, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_14"),
				(assign, "$choose_buy_ship_n", 14),
				(str_store_item_name, 9, 1414),
				(call_script, "script_wm_ship_stat_val", 1414, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_15"),
				(assign, "$choose_buy_ship_n", 15),
				(str_store_item_name, 9, 1415),
				(call_script, "script_wm_ship_stat_val", 1415, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_16"),
				(assign, "$choose_buy_ship_n", 16),
				(str_store_item_name, 9, 1416),
				(call_script, "script_wm_ship_stat_val", 1416, 1),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$buy_ship_butt"),
				(store_add, ":value", "$choose_buy_ship_n", 1400),
				(call_script, "script_wm_ship_stat_val", ":value", 1),
				(try_begin),
					(party_slot_ge, "$g_encountered_party", 12, 50),
					(val_div, "$wm_ship_buy", 2),
					(display_message, "str_harbor_rel_bonus", 0x00ffff00),
				(try_end),
				(call_script, "script_party_money_level_ge", "p_main_party", "$wm_ship_buy"),
				(try_begin),
					(neq, "$wm_mo_continue", 1),
					(display_message, "str_nomoney", 0x00ff0000),
				(else_try),
					(eq, "$choose_ship_num", 1),
					(call_script, "script_party_money_level_diff", "p_main_party", "$wm_ship_buy", 34),
					(assign, "$m_ship_type_1", ":value"),
					(display_message, "str_ship_purc", 0x00ffff00),
				(else_try),
					(eq, "$choose_ship_num", 2),
					(call_script, "script_party_money_level_diff", "p_main_party", "$wm_ship_buy", 34),
					(assign, "$m_ship_type_2", ":value"),
					(display_message, "str_ship_purc", 0x00ffff00),
				(else_try),
					(eq, "$choose_ship_num", 3),
					(call_script, "script_party_money_level_diff", "p_main_party", "$wm_ship_buy", 34),
					(assign, "$m_ship_type_3", ":value"),
					(display_message, "str_ship_purc", 0x00ffff00),
				(else_try),
					(eq, "$choose_ship_num", 4),
					(call_script, "script_party_money_level_diff", "p_main_party", "$wm_ship_buy", 34),
					(assign, "$m_ship_type_4", ":value"),
					(display_message, "str_ship_purc", 0x00ffff00),
				(else_try),
					(eq, "$choose_ship_num", 5),
					(call_script, "script_party_money_level_diff", "p_main_party", "$wm_ship_buy", 34),
					(assign, "$m_ship_type_5", ":value"),
					(display_message, "str_ship_purc", 0x00ffff00),
				(try_end),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$sell_ship_butt"),
				(try_begin),
					(eq, "$choose_ship_num", 1),
					(call_script, "script_wm_ship_stat_val", "$m_ship_type_1", 0),
					(call_script, "script_party_money_level_diff", "p_main_party", "$wm_ship_sell", 87),
					(assign, "$m_ship_type_1", 1400),
				(else_try),
					(eq, "$choose_ship_num", 2),
					(call_script, "script_wm_ship_stat_val", "$m_ship_type_2", 0),
					(call_script, "script_party_money_level_diff", "p_main_party", "$wm_ship_sell", 87),
					(assign, "$m_ship_type_2", 1400),
				(else_try),
					(eq, "$choose_ship_num", 3),
					(call_script, "script_wm_ship_stat_val", "$m_ship_type_3", 0),
					(call_script, "script_party_money_level_diff", "p_main_party", "$wm_ship_sell", 87),
					(assign, "$m_ship_type_3", 1400),
				(else_try),
					(eq, "$choose_ship_num", 4),
					(call_script, "script_wm_ship_stat_val", "$m_ship_type_4", 0),
					(call_script, "script_party_money_level_diff", "p_main_party", "$wm_ship_sell", 87),
					(assign, "$m_ship_type_4", 1400),
				(else_try),
					(eq, "$choose_ship_num", 5),
					(call_script, "script_wm_ship_stat_val", "$m_ship_type_5", 0),
					(call_script, "script_party_money_level_diff", "p_main_party", "$wm_ship_sell", 87),
					(assign, "$m_ship_type_5", 1400),
				(try_end),
				(start_presentation, "prsnt_wm_shipyard_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$ship_yard_return"),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("choose_kingdom_pst", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(str_store_faction_name, 11, "$kingdom_pick_start_faction"),
			(create_text_overlay, reg0, "str_finfo_fname", 16),
			(overlay_set_size, reg0, 3),
			(position_set_x, 1, 490),
			(position_set_y, 1, 150),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 2000),
			(position_set_y, 1, 2000),
			(overlay_set_size, reg0, 1),
			(faction_get_slot, ":kingdom_pick_start_faction_2", "$kingdom_pick_start_faction", 2),
			(create_mesh_overlay, reg0, ":kingdom_pick_start_faction_2"),
			(overlay_set_alpha, reg0, 191),
			(position_set_x, 1, 490),
			(position_set_y, 1, 720),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 250),
			(position_set_y, 1, 250),
			(overlay_set_size, reg0, 1),
			(create_in_game_button_overlay, "$g_choose_kingdom_select", "str_select_butt", 16),
			(position_set_x, 1, 880),
			(position_set_y, 1, 40),
			(overlay_set_position, "$g_choose_kingdom_select", 1),
			(overlay_set_color, "$g_choose_kingdom_select", 16777215),
			(create_in_game_button_overlay, "$g_choose_kingdom_next", "str_next_butt", 16),
			(position_set_x, 1, 590),
			(position_set_y, 1, 40),
			(overlay_set_position, "$g_choose_kingdom_next", 1),
			(overlay_set_color, "$g_choose_kingdom_next", 16777215),
			(create_in_game_button_overlay, "$g_choose_kingdom_prev", "str_prev_butt", 16),
			(position_set_x, 1, 400),
			(position_set_y, 1, 40),
			(overlay_set_position, "$g_choose_kingdom_prev", 1),
			(overlay_set_color, "$g_choose_kingdom_prev", 16777215)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_choose_kingdom_select"),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_start_game_1"),
			(else_try),
				(try_begin),
					(eq, "$start_age", 1573),
					(try_begin),
						(eq, ":trigger_param_1", "$g_choose_kingdom_next"),
						(lt, "$kingdom_pick_start_faction", "fac_kingdom_67"),
						(call_script, "script_pick_kingdom_deactive_skip", 1),
						(start_presentation, "prsnt_choose_kingdom_pst"),
					(else_try),
						(eq, ":trigger_param_1", "$g_choose_kingdom_prev"),
						(gt, "$kingdom_pick_start_faction", "fac_kingdom_1"),
						(call_script, "script_pick_kingdom_deactive_skip", 2),
						(start_presentation, "prsnt_choose_kingdom_pst"),
					(try_end),
				(else_try),
					(eq, "$start_age", 1184),
					(try_begin),
						(eq, ":trigger_param_1", "$g_choose_kingdom_next"),
						(lt, "$kingdom_pick_start_faction", "fac_kingdom_65"),
						(call_script, "script_pick_kingdom_deactive_skip", 1),
						(start_presentation, "prsnt_choose_kingdom_pst"),
					(else_try),
						(eq, ":trigger_param_1", "$g_choose_kingdom_prev"),
						(gt, "$kingdom_pick_start_faction", "fac_kingdom_1"),
						(call_script, "script_pick_kingdom_deactive_skip", 2),
						(start_presentation, "prsnt_choose_kingdom_pst"),
					(try_end),
				(else_try),
					(eq, "$start_age", 0),
					(try_begin),
						(eq, ":trigger_param_1", "$g_choose_kingdom_next"),
						(lt, "$kingdom_pick_start_faction", "fac_kingdom_55"),
						(call_script, "script_pick_kingdom_deactive_skip", 1),
						(start_presentation, "prsnt_choose_kingdom_pst"),
					(else_try),
						(eq, ":trigger_param_1", "$g_choose_kingdom_prev"),
						(gt, "$kingdom_pick_start_faction", "fac_kingdom_1"),
						(call_script, "script_pick_kingdom_deactive_skip", 2),
						(start_presentation, "prsnt_choose_kingdom_pst"),
					(try_end),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("player_color_select", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, "$fac_color_new"),
			(position_set_x, 1, 290),
			(position_set_y, 1, 243),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 20000),
			(position_set_y, 1, 20000),
			(overlay_set_size, reg0, 1),
			(assign, ":var_1", 810),
			(assign, ":var_2", 15),
			(create_in_game_button_overlay, "$ply_color_exit", "str_return_butt", 4),
			(overlay_set_color, "$ply_color_exit", 16777215),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$ply_color_exit", 1),
			(val_add, ":var_2", 37),
			(create_in_game_button_overlay, "$ply_color_rollback", "str_init_butt", 4),
			(overlay_set_color, "$ply_color_rollback", 16777215),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$ply_color_rollback", 1),
			(val_sub, ":var_2", 37),
			(val_add, ":var_2", 74),
			(create_in_game_button_overlay, "$ply_color_apply", "str_apply_fac_col", 4),
			(overlay_set_color, "$ply_color_apply", 16777215),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$ply_color_apply", 1),
			(val_sub, ":var_2", 74),
			(val_sub, ":var_1", 190),
			(create_in_game_button_overlay, "$ply_color_blue_down", "str_blue_down", 4),
			(overlay_set_color, "$ply_color_blue_down", 16777215),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$ply_color_blue_down", 1),
			(val_add, ":var_2", 37),
			(create_in_game_button_overlay, "$ply_color_blue_up", "str_blue_up", 4),
			(overlay_set_color, "$ply_color_blue_up", 16777215),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$ply_color_blue_up", 1),
			(val_sub, ":var_2", 37),
			(val_sub, ":var_1", 190),
			(create_in_game_button_overlay, "$ply_color_green_down", "str_green_down", 4),
			(overlay_set_color, "$ply_color_green_down", 16777215),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$ply_color_green_down", 1),
			(val_add, ":var_2", 37),
			(create_in_game_button_overlay, "$ply_color_green_up", "str_green_up", 4),
			(overlay_set_color, "$ply_color_green_up", 16777215),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$ply_color_green_up", 1),
			(val_sub, ":var_2", 37),
			(val_sub, ":var_1", 190),
			(create_in_game_button_overlay, "$ply_color_red_down", "str_red_down", 4),
			(overlay_set_color, "$ply_color_red_down", 16777215),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$ply_color_red_down", 1),
			(val_add, ":var_2", 37),
			(create_in_game_button_overlay, "$ply_color_red_up", "str_red_up", 4),
			(overlay_set_color, "$ply_color_red_up", 16777215),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$ply_color_red_up", 1),
			(val_sub, ":var_2", 37)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$ply_color_red_up"),
				(try_begin),
					(lt, "$fac_color_red", 248),
					(val_add, "$fac_color_red", 7),
					(store_mul, ":value", "$fac_color_red", 65536),
					(store_mul, ":value_2", "$fac_color_green", 256),
					(assign, ":value_3", 0),
					(val_add, ":value_3", "$fac_color_blue"),
					(val_add, ":value_3", ":value_2"),
					(val_add, ":value_3", ":value"),
					(assign, "$fac_color_new", ":value_3"),
					(start_presentation, "prsnt_player_color_select"),
				(else_try),
					(display_message, "str_color_testlimit"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$ply_color_red_down"),
				(try_begin),
					(gt, "$fac_color_red", 8),
					(val_sub, "$fac_color_red", 7),
					(store_mul, ":value", "$fac_color_red", 65536),
					(store_mul, ":value_2", "$fac_color_green", 256),
					(assign, ":value_3", 0),
					(val_add, ":value_3", "$fac_color_blue"),
					(val_add, ":value_3", ":value_2"),
					(val_add, ":value_3", ":value"),
					(assign, "$fac_color_new", ":value_3"),
					(start_presentation, "prsnt_player_color_select"),
				(else_try),
					(display_message, "str_color_testlimit"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$ply_color_green_up"),
				(try_begin),
					(lt, "$fac_color_green", 248),
					(val_add, "$fac_color_green", 7),
					(store_mul, ":value", "$fac_color_red", 65536),
					(store_mul, ":value_2", "$fac_color_green", 256),
					(assign, ":value_3", 0),
					(val_add, ":value_3", "$fac_color_blue"),
					(val_add, ":value_3", ":value_2"),
					(val_add, ":value_3", ":value"),
					(assign, "$fac_color_new", ":value_3"),
					(start_presentation, "prsnt_player_color_select"),
				(else_try),
					(display_message, "str_color_testlimit"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$ply_color_green_down"),
				(try_begin),
					(gt, "$fac_color_green", 8),
					(val_sub, "$fac_color_green", 7),
					(store_mul, ":value", "$fac_color_red", 65536),
					(store_mul, ":value_2", "$fac_color_green", 256),
					(assign, ":value_3", 0),
					(val_add, ":value_3", "$fac_color_blue"),
					(val_add, ":value_3", ":value_2"),
					(val_add, ":value_3", ":value"),
					(assign, "$fac_color_new", ":value_3"),
					(start_presentation, "prsnt_player_color_select"),
				(else_try),
					(display_message, "str_color_testlimit"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$ply_color_blue_up"),
				(try_begin),
					(lt, "$fac_color_blue", 248),
					(val_add, "$fac_color_blue", 7),
					(store_mul, ":value", "$fac_color_red", 65536),
					(store_mul, ":value_2", "$fac_color_green", 256),
					(assign, ":value_3", 0),
					(val_add, ":value_3", "$fac_color_blue"),
					(val_add, ":value_3", ":value_2"),
					(val_add, ":value_3", ":value"),
					(assign, "$fac_color_new", ":value_3"),
					(start_presentation, "prsnt_player_color_select"),
				(else_try),
					(display_message, "str_color_testlimit"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$ply_color_blue_down"),
				(try_begin),
					(gt, "$fac_color_blue", 8),
					(val_sub, "$fac_color_blue", 7),
					(store_mul, ":value", "$fac_color_red", 65536),
					(store_mul, ":value_2", "$fac_color_green", 256),
					(assign, ":value_3", 0),
					(val_add, ":value_3", "$fac_color_blue"),
					(val_add, ":value_3", ":value_2"),
					(val_add, ":value_3", ":value"),
					(assign, "$fac_color_new", ":value_3"),
					(start_presentation, "prsnt_player_color_select"),
				(else_try),
					(display_message, "str_color_testlimit"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$ply_color_exit"),
				(start_presentation, "prsnt_mod_option"),
			(else_try),
				(eq, ":trigger_param_1", "$ply_color_rollback"),
				(assign, "$fac_color_new", "$fac_color_ori"),
				(assign, "$fac_color_player", "$fac_color_ori"),
				(start_presentation, "prsnt_player_color_select"),
			(else_try),
				(eq, ":trigger_param_1", "$ply_color_apply"),
				(assign, "$fac_color_player", "$fac_color_new"),
				(try_begin),
					(faction_slot_eq, "$wm_player_fac", 1, "trp_player"),
					(faction_set_color, "$wm_player_fac", "$fac_color_player"),
					(display_message, "str_color_selected"),
				(else_try),
					(display_message, "str_not_leader_of_faction"),
				(try_end),
				(start_presentation, "prsnt_player_color_select"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("library_pst", 0, mesh_pic_library, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(assign, "$have_book_01", -1),
			(assign, "$have_book_02", -1),
			(assign, "$have_book_03", -1),
			(assign, "$have_book_04", -1),
			(assign, "$have_book_05", -1),
			(assign, "$have_book_06", -1),
			(assign, "$have_book_07", -1),
			(assign, "$have_book_08", -1),
			(assign, "$have_book_09", -1),
			(assign, "$have_book_10", -1),
			(assign, ":value", 50),
			(assign, ":value_2", 300),
			(position_set_x, 3, 1100),
			(position_set_y, 3, 1100),
			(position_set_x, 4, 900),
			(position_set_y, 4, 900),
			(try_for_range, ":number", 1081, 1252),
				(player_has_item, ":number"),
				(store_sub, ":value_3", ":number", 1081),
				(store_add, ":value_4", "p_ruin_1", ":value_3"),
				(party_slot_eq, ":value_4", slot_party_ignore_player_until, 0),
				(call_script, "script_lib_book_assign", ":number"),
			(try_end),
			(try_begin),
				(eq, "$main_q_step", 11),
				(player_has_item, 1442),
				(assign, "$have_book_01", 1442),
			(try_end),
			(try_begin),
				(eq, "$have_book_01", 1442),
				(str_store_item_name, 11, "$have_book_01"),
				(try_begin),
					(eq, reg40, 0),
					(create_button_overlay, "$pst_library_book_1", "str_lib_book_1"),
				(else_try),
					(create_text_overlay, "$pst_library_book_1", "str_lib_book_1"),
				(try_end),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_book_1", 1),
				(overlay_set_size, "$pst_library_book_1", 3),
			(else_try),
				(neq, "$have_book_01", -1),
				(store_sub, ":value_3", "$have_book_01", 1081),
				(store_add, ":value_4", "p_ruin_1", ":value_3"),
				(party_slot_eq, ":value_4", slot_party_ignore_player_until, 0),
				(str_store_item_name, 11, "$have_book_01"),
				(try_begin),
					(eq, reg40, 0),
					(create_button_overlay, "$pst_library_book_1", "str_lib_book_1"),
				(else_try),
					(create_text_overlay, "$pst_library_book_1", "str_lib_book_1"),
				(try_end),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_book_1", 1),
				(overlay_set_size, "$pst_library_book_1", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_1", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_02", -1),
				(store_sub, ":value_3", "$have_book_02", 1081),
				(store_add, ":value_4", "p_ruin_1", ":value_3"),
				(party_slot_eq, ":value_4", slot_party_ignore_player_until, 0),
				(str_store_item_name, 12, "$have_book_02"),
				(try_begin),
					(eq, reg40, 0),
					(create_button_overlay, "$pst_library_book_2", "str_lib_book_2"),
				(else_try),
					(create_text_overlay, "$pst_library_book_2", "str_lib_book_2"),
				(try_end),
				(val_sub, ":value_2", 25),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_book_2", 1),
				(overlay_set_size, "$pst_library_book_2", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_2", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_03", -1),
				(store_sub, ":value_3", "$have_book_03", 1081),
				(store_add, ":value_4", "p_ruin_1", ":value_3"),
				(party_slot_eq, ":value_4", slot_party_ignore_player_until, 0),
				(str_store_item_name, 13, "$have_book_03"),
				(try_begin),
					(eq, reg40, 0),
					(create_button_overlay, "$pst_library_book_3", "str_lib_book_3"),
				(else_try),
					(create_text_overlay, "$pst_library_book_3", "str_lib_book_3"),
				(try_end),
				(val_sub, ":value_2", 25),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_book_3", 1),
				(overlay_set_size, "$pst_library_book_3", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_3", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_04", -1),
				(store_sub, ":value_3", "$have_book_04", 1081),
				(store_add, ":value_4", "p_ruin_1", ":value_3"),
				(party_slot_eq, ":value_4", slot_party_ignore_player_until, 0),
				(str_store_item_name, 14, "$have_book_04"),
				(try_begin),
					(eq, reg40, 0),
					(create_button_overlay, "$pst_library_book_4", "str_lib_book_4"),
				(else_try),
					(create_text_overlay, "$pst_library_book_4", "str_lib_book_4"),
				(try_end),
				(val_sub, ":value_2", 25),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_book_4", 1),
				(overlay_set_size, "$pst_library_book_4", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_4", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_05", -1),
				(store_sub, ":value_3", "$have_book_05", 1081),
				(store_add, ":value_4", "p_ruin_1", ":value_3"),
				(party_slot_eq, ":value_4", slot_party_ignore_player_until, 0),
				(str_store_item_name, 15, "$have_book_05"),
				(try_begin),
					(eq, reg40, 0),
					(create_button_overlay, "$pst_library_book_5", "str_lib_book_5"),
				(else_try),
					(create_text_overlay, "$pst_library_book_5", "str_lib_book_5"),
				(try_end),
				(val_sub, ":value_2", 25),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_book_5", 1),
				(overlay_set_size, "$pst_library_book_5", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_5", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_06", -1),
				(store_sub, ":value_3", "$have_book_06", 1081),
				(store_add, ":value_4", "p_ruin_1", ":value_3"),
				(party_slot_eq, ":value_4", slot_party_ignore_player_until, 0),
				(str_store_item_name, 16, "$have_book_06"),
				(try_begin),
					(eq, reg40, 0),
					(create_button_overlay, "$pst_library_book_6", "str_lib_book_6"),
				(else_try),
					(create_text_overlay, "$pst_library_book_6", "str_lib_book_6"),
				(try_end),
				(val_sub, ":value_2", 25),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_book_6", 1),
				(overlay_set_size, "$pst_library_book_6", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_6", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_07", -1),
				(store_sub, ":value_3", "$have_book_07", 1081),
				(store_add, ":value_4", "p_ruin_1", ":value_3"),
				(party_slot_eq, ":value_4", slot_party_ignore_player_until, 0),
				(str_store_item_name, 17, "$have_book_07"),
				(try_begin),
					(eq, reg40, 0),
					(create_button_overlay, "$pst_library_book_7", "str_lib_book_7"),
				(else_try),
					(create_text_overlay, "$pst_library_book_7", "str_lib_book_7"),
				(try_end),
				(val_sub, ":value_2", 25),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_book_7", 1),
				(overlay_set_size, "$pst_library_book_7", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_7", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_08", -1),
				(store_sub, ":value_3", "$have_book_08", 1081),
				(store_add, ":value_4", "p_ruin_1", ":value_3"),
				(party_slot_eq, ":value_4", slot_party_ignore_player_until, 0),
				(str_store_item_name, 18, "$have_book_08"),
				(try_begin),
					(eq, reg40, 0),
					(create_button_overlay, "$pst_library_book_8", "str_lib_book_8"),
				(else_try),
					(create_text_overlay, "$pst_library_book_8", "str_lib_book_8"),
				(try_end),
				(val_sub, ":value_2", 25),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_book_8", 1),
				(overlay_set_size, "$pst_library_book_8", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_8", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_09", -1),
				(store_sub, ":value_3", "$have_book_09", 1081),
				(store_add, ":value_4", "p_ruin_1", ":value_3"),
				(party_slot_eq, ":value_4", slot_party_ignore_player_until, 0),
				(str_store_item_name, 19, "$have_book_09"),
				(try_begin),
					(eq, reg40, 0),
					(create_button_overlay, "$pst_library_book_9", "str_lib_book_9"),
				(else_try),
					(create_text_overlay, "$pst_library_book_9", "str_lib_book_9"),
				(try_end),
				(val_sub, ":value_2", 25),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_book_9", 1),
				(overlay_set_size, "$pst_library_book_9", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_9", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_10", -1),
				(store_sub, ":value_3", "$have_book_10", 1081),
				(store_add, ":value_4", "p_ruin_1", ":value_3"),
				(party_slot_eq, ":value_4", slot_party_ignore_player_until, 0),
				(str_store_item_name, 20, "$have_book_10"),
				(try_begin),
					(eq, reg40, 0),
					(create_button_overlay, "$pst_library_book_10", "str_lib_book_10"),
				(else_try),
					(create_text_overlay, "$pst_library_book_10", "str_lib_book_10"),
				(try_end),
				(val_sub, ":value_2", 25),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_book_10", 1),
				(overlay_set_size, "$pst_library_book_10", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_10", "str_empty_string"),
			(try_end),
			(create_text_overlay, reg0, "str_lib_textt"),
			(position_set_x, 1, 60),
			(position_set_y, 1, 500),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(try_begin),
				(neq, reg31, -1),
				(neq, reg32, -1),
				(neq, reg33, -1),
				(neq, reg34, -1),
				(neq, reg35, -1),
				(create_text_overlay, reg0, "str_lib_loc_question"),
				(position_set_x, 1, 555),
				(position_set_y, 1, 250),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(try_end),
			(assign, ":value", 625),
			(assign, ":value_2", 220),
			(try_begin),
				(neq, reg31, -1),
				(create_button_overlay, "$pst_library_question_1", reg31),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_question_1", 1),
				(overlay_set_size, "$pst_library_question_1", 3),
			(else_try),
				(create_text_overlay, "$pst_library_question_1", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, reg32, -1),
				(create_button_overlay, "$pst_library_question_2", reg32),
				(val_sub, ":value_2", 25),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_question_2", 1),
				(overlay_set_size, "$pst_library_question_2", 3),
			(else_try),
				(create_text_overlay, "$pst_library_question_2", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, reg33, -1),
				(create_button_overlay, "$pst_library_question_3", reg33),
				(val_sub, ":value_2", 25),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_question_3", 1),
				(overlay_set_size, "$pst_library_question_3", 3),
			(else_try),
				(create_text_overlay, "$pst_library_question_3", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, reg34, -1),
				(create_button_overlay, "$pst_library_question_4", reg34),
				(val_sub, ":value_2", 25),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_question_4", 1),
				(overlay_set_size, "$pst_library_question_4", 3),
			(else_try),
				(create_text_overlay, "$pst_library_question_4", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, reg35, -1),
				(create_button_overlay, "$pst_library_question_5", reg35),
				(val_sub, ":value_2", 25),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_library_question_5", 1),
				(overlay_set_size, "$pst_library_question_5", 3),
			(else_try),
				(create_text_overlay, "$pst_library_question_5", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, reg40, 0),
				(create_game_button_overlay, "$g_library_question_exit", "str_return_butt", 16),
				(position_set_x, 1, 460),
				(position_set_y, 1, 30),
				(overlay_set_position, "$g_library_question_exit", 1),
			(else_try),
				(create_text_overlay, "$g_library_question_exit", "str_empty_string"),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$pst_library_book_1"),
				(try_begin),
					(eq, "$have_book_01", 1442),
					(call_script, "script_book_question_rand", "str_mq_1_11r"),
					(str_store_string, 41, "str_mq_1_11r2"),
					(assign, reg40, 1),
					(start_presentation, "prsnt_library_pst"),
				(else_try),
					(store_sub, ":value", "$have_book_01", 1081),
					(store_add, ":value_2", "str_r_text_001", ":value"),
					(str_store_string, 41, ":value_2"),
					(store_add, "$lib_right_answer", "str_r_clue_001", ":value"),
					(call_script, "script_book_question_rand", "$lib_right_answer"),
					(store_add, "$lib_target_party", "p_ruin_1", ":value"),
					(assign, reg40, 1),
					(start_presentation, "prsnt_library_pst"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_2"),
				(store_sub, ":value", "$have_book_02", 1081),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(str_store_string, 41, ":value_2"),
				(store_add, "$lib_right_answer", "str_r_clue_001", ":value"),
				(call_script, "script_book_question_rand", "$lib_right_answer"),
				(store_add, "$lib_target_party", "p_ruin_1", ":value"),
				(assign, reg40, 1),
				(start_presentation, "prsnt_library_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_3"),
				(store_sub, ":value", "$have_book_03", 1081),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(str_store_string, 41, ":value_2"),
				(store_add, "$lib_right_answer", "str_r_clue_001", ":value"),
				(call_script, "script_book_question_rand", "$lib_right_answer"),
				(store_add, "$lib_target_party", "p_ruin_1", ":value"),
				(start_presentation, "prsnt_library_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_4"),
				(store_sub, ":value", "$have_book_04", 1081),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(str_store_string, 41, ":value_2"),
				(store_add, "$lib_right_answer", "str_r_clue_001", ":value"),
				(call_script, "script_book_question_rand", "$lib_right_answer"),
				(store_add, "$lib_target_party", "p_ruin_1", ":value"),
				(assign, reg40, 1),
				(start_presentation, "prsnt_library_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_5"),
				(store_sub, ":value", "$have_book_05", 1081),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(str_store_string, 41, ":value_2"),
				(store_add, "$lib_right_answer", "str_r_clue_001", ":value"),
				(call_script, "script_book_question_rand", "$lib_right_answer"),
				(store_add, "$lib_target_party", "p_ruin_1", ":value"),
				(assign, reg40, 1),
				(start_presentation, "prsnt_library_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_6"),
				(store_sub, ":value", "$have_book_06", 1081),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(str_store_string, 41, ":value_2"),
				(store_add, "$lib_right_answer", "str_r_clue_001", ":value"),
				(call_script, "script_book_question_rand", "$lib_right_answer"),
				(store_add, "$lib_target_party", "p_ruin_1", ":value"),
				(assign, reg40, 1),
				(start_presentation, "prsnt_library_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_7"),
				(store_sub, ":value", "$have_book_07", 1081),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(str_store_string, 41, ":value_2"),
				(store_add, "$lib_right_answer", "str_r_clue_001", ":value"),
				(call_script, "script_book_question_rand", "$lib_right_answer"),
				(store_add, "$lib_target_party", "p_ruin_1", ":value"),
				(assign, reg40, 1),
				(start_presentation, "prsnt_library_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_8"),
				(store_sub, ":value", "$have_book_08", 1081),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(str_store_string, 41, ":value_2"),
				(store_add, "$lib_right_answer", "str_r_clue_001", ":value"),
				(call_script, "script_book_question_rand", "$lib_right_answer"),
				(store_add, "$lib_target_party", "p_ruin_1", ":value"),
				(assign, reg40, 1),
				(start_presentation, "prsnt_library_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_9"),
				(store_sub, ":value", "$have_book_09", 1081),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(str_store_string, 41, ":value_2"),
				(store_add, "$lib_right_answer", "str_r_clue_001", ":value"),
				(call_script, "script_book_question_rand", "$lib_right_answer"),
				(store_add, "$lib_target_party", "p_ruin_1", ":value"),
				(assign, reg40, 1),
				(start_presentation, "prsnt_library_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_10"),
				(store_sub, ":value", "$have_book_10", 1081),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(str_store_string, 41, ":value_2"),
				(store_add, "$lib_right_answer", "str_r_clue_001", ":value"),
				(call_script, "script_book_question_rand", "$lib_right_answer"),
				(store_add, "$lib_target_party", "p_ruin_1", ":value"),
				(assign, reg40, 1),
				(start_presentation, "prsnt_library_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_question_1"),
				(try_begin),
					(eq, reg31, "$lib_right_answer"),
					(play_sound, "snd_skill_choose"),
					(party_set_slot, "$lib_target_party", slot_party_ignore_player_until, 1),
					(display_message, "str_lib_right", 0x00ffff00),
					(display_message, "str_lib_right2", 0x00ffff00),
					(presentation_set_duration, 0),
				(else_try),
					(display_message, "str_lib_wrong", 0x00ff0000),
					(play_sound, "snd_skill_cancel"),
					(presentation_set_duration, 0),
					(jump_to_menu, "mnu_wm_pst_map_return"),
					(rest_for_hours, 6, 5, 0),
				(try_end),
				(assign, reg31, -1),
				(assign, reg32, -1),
				(assign, reg33, -1),
				(assign, reg34, -1),
				(assign, reg35, -1),
				(assign, reg40, 0),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_question_2"),
				(try_begin),
					(eq, reg32, "str_mq_1_11r"),
					(play_sound, "snd_skill_choose"),
					(display_message, "str_lib_right", 0x00ffff00),
					(display_message, "str_lib_right2", 0x00ffff00),
					(assign, "$main_q_step", 12),
					(presentation_set_duration, 0),
				(else_try),
					(eq, reg32, "$lib_right_answer"),
					(play_sound, "snd_skill_choose"),
					(party_set_slot, "$lib_target_party", slot_party_ignore_player_until, 1),
					(display_message, "str_lib_right", 0x00ffff00),
					(display_message, "str_lib_right2", 0x00ffff00),
					(presentation_set_duration, 0),
				(else_try),
					(display_message, "str_lib_wrong", 0x00ff0000),
					(play_sound, "snd_skill_cancel"),
					(presentation_set_duration, 0),
					(jump_to_menu, "mnu_wm_pst_map_return"),
					(rest_for_hours, 6, 5, 0),
				(try_end),
				(assign, reg31, -1),
				(assign, reg32, -1),
				(assign, reg33, -1),
				(assign, reg34, -1),
				(assign, reg35, -1),
				(assign, reg40, 0),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_question_3"),
				(try_begin),
					(eq, reg33, "$lib_right_answer"),
					(play_sound, "snd_skill_choose"),
					(party_set_slot, "$lib_target_party", slot_party_ignore_player_until, 1),
					(display_message, "str_lib_right", 0x00ffff00),
					(display_message, "str_lib_right2", 0x00ffff00),
					(presentation_set_duration, 0),
				(else_try),
					(display_message, "str_lib_wrong", 0x00ff0000),
					(play_sound, "snd_skill_cancel"),
					(presentation_set_duration, 0),
					(jump_to_menu, "mnu_wm_pst_map_return"),
					(rest_for_hours, 6, 5, 0),
				(try_end),
				(assign, reg31, -1),
				(assign, reg32, -1),
				(assign, reg33, -1),
				(assign, reg34, -1),
				(assign, reg35, -1),
				(assign, reg40, 0),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_question_4"),
				(try_begin),
					(eq, reg34, "$lib_right_answer"),
					(play_sound, "snd_skill_choose"),
					(party_set_slot, "$lib_target_party", slot_party_ignore_player_until, 1),
					(display_message, "str_lib_right", 0x00ffff00),
					(display_message, "str_lib_right2", 0x00ffff00),
					(presentation_set_duration, 0),
				(else_try),
					(display_message, "str_lib_wrong", 0x00ff0000),
					(play_sound, "snd_skill_cancel"),
					(presentation_set_duration, 0),
					(jump_to_menu, "mnu_wm_pst_map_return"),
					(rest_for_hours, 6, 5, 0),
				(try_end),
				(assign, reg31, -1),
				(assign, reg32, -1),
				(assign, reg33, -1),
				(assign, reg34, -1),
				(assign, reg35, -1),
				(assign, reg40, 0),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_question_5"),
				(try_begin),
					(eq, reg35, "$lib_right_answer"),
					(play_sound, "snd_skill_choose"),
					(party_set_slot, "$lib_target_party", slot_party_ignore_player_until, 1),
					(display_message, "str_lib_right", 0x00ffff00),
					(display_message, "str_lib_right2", 0x00ffff00),
					(presentation_set_duration, 0),
				(else_try),
					(display_message, "str_lib_wrong", 0x00ff0000),
					(play_sound, "snd_skill_cancel"),
					(presentation_set_duration, 0),
					(jump_to_menu, "mnu_wm_pst_map_return"),
					(rest_for_hours, 6, 5, 0),
				(try_end),
				(assign, reg31, -1),
				(assign, reg32, -1),
				(assign, reg33, -1),
				(assign, reg34, -1),
				(assign, reg35, -1),
				(assign, reg40, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_library_question_exit"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("pst_found_ruin_list", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(assign, "$have_book_01", -1),
			(assign, "$have_book_02", -1),
			(assign, "$have_book_03", -1),
			(assign, "$have_book_04", -1),
			(assign, "$have_book_05", -1),
			(assign, "$have_book_06", -1),
			(assign, "$have_book_07", -1),
			(assign, "$have_book_08", -1),
			(assign, "$have_book_09", -1),
			(assign, "$have_book_10", -1),
			(assign, "$have_book_11", -1),
			(assign, "$have_book_12", -1),
			(assign, "$have_book_13", -1),
			(assign, "$have_book_14", -1),
			(assign, "$have_book_15", -1),
			(assign, "$have_book_16", -1),
			(assign, "$have_book_17", -1),
			(assign, "$have_book_18", -1),
			(assign, "$have_book_19", -1),
			(assign, "$have_book_20", -1),
			(position_set_x, 3, 1100),
			(position_set_y, 3, 1100),
			(position_set_x, 4, 900),
			(position_set_y, 4, 900),
			(store_add, ":value", "$ruin_list_page_start", 20),
			(try_for_range, ":var_2", "$ruin_list_page_start", ":value"),
				(party_slot_eq, ":var_2", slot_party_ignore_player_until, 4),
				(call_script, "script_lib_book_assign_20", ":var_2"),
			(try_end),
			(assign, ":value_2", 50),
			(assign, ":value_3", 330),
			(try_begin),
				(neq, "$have_book_01", -1),
				(str_store_party_name, 11, "$have_book_01"),
				(create_button_overlay, "$pst_library_book_1", "str_lib_book_1"),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_1", 1),
				(overlay_set_size, "$pst_library_book_1", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_1", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_02", -1),
				(str_store_party_name, 12, "$have_book_02"),
				(create_button_overlay, "$pst_library_book_2", "str_lib_book_2"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_2", 1),
				(overlay_set_size, "$pst_library_book_2", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_2", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_03", -1),
				(str_store_party_name, 13, "$have_book_03"),
				(create_button_overlay, "$pst_library_book_3", "str_lib_book_3"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_3", 1),
				(overlay_set_size, "$pst_library_book_3", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_3", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_04", -1),
				(str_store_party_name, 14, "$have_book_04"),
				(create_button_overlay, "$pst_library_book_4", "str_lib_book_4"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_4", 1),
				(overlay_set_size, "$pst_library_book_4", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_4", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_05", -1),
				(str_store_party_name, 15, "$have_book_05"),
				(create_button_overlay, "$pst_library_book_5", "str_lib_book_5"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_5", 1),
				(overlay_set_size, "$pst_library_book_5", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_5", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_06", -1),
				(str_store_party_name, 16, "$have_book_06"),
				(create_button_overlay, "$pst_library_book_6", "str_lib_book_6"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_6", 1),
				(overlay_set_size, "$pst_library_book_6", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_6", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_07", -1),
				(str_store_party_name, 17, "$have_book_07"),
				(create_button_overlay, "$pst_library_book_7", "str_lib_book_7"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_7", 1),
				(overlay_set_size, "$pst_library_book_7", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_7", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_08", -1),
				(str_store_party_name, 18, "$have_book_08"),
				(create_button_overlay, "$pst_library_book_8", "str_lib_book_8"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_8", 1),
				(overlay_set_size, "$pst_library_book_8", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_8", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_09", -1),
				(str_store_party_name, 19, "$have_book_09"),
				(create_button_overlay, "$pst_library_book_9", "str_lib_book_9"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_9", 1),
				(overlay_set_size, "$pst_library_book_9", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_9", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_10", -1),
				(str_store_party_name, 20, "$have_book_10"),
				(create_button_overlay, "$pst_library_book_10", "str_lib_book_10"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_10", 1),
				(overlay_set_size, "$pst_library_book_10", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_10", "str_empty_string"),
			(try_end),
			(assign, ":value_2", 500),
			(assign, ":value_3", 330),
			(try_begin),
				(neq, "$have_book_11", -1),
				(str_store_party_name, 21, "$have_book_11"),
				(create_button_overlay, "$pst_library_book_11", "str_lib_book_11"),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_11", 1),
				(overlay_set_size, "$pst_library_book_11", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_11", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_12", -1),
				(str_store_party_name, 22, "$have_book_12"),
				(create_button_overlay, "$pst_library_book_12", "str_lib_book_12"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_12", 1),
				(overlay_set_size, "$pst_library_book_12", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_12", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_13", -1),
				(str_store_party_name, 23, "$have_book_13"),
				(create_button_overlay, "$pst_library_book_13", "str_lib_book_13"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_13", 1),
				(overlay_set_size, "$pst_library_book_13", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_13", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_14", -1),
				(str_store_party_name, 24, "$have_book_14"),
				(create_button_overlay, "$pst_library_book_14", "str_lib_book_14"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_14", 1),
				(overlay_set_size, "$pst_library_book_14", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_14", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_15", -1),
				(str_store_party_name, 25, "$have_book_15"),
				(create_button_overlay, "$pst_library_book_15", "str_lib_book_15"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_15", 1),
				(overlay_set_size, "$pst_library_book_15", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_15", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_16", -1),
				(str_store_party_name, 26, "$have_book_16"),
				(create_button_overlay, "$pst_library_book_16", "str_lib_book_16"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_16", 1),
				(overlay_set_size, "$pst_library_book_16", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_16", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_17", -1),
				(str_store_party_name, 27, "$have_book_17"),
				(create_button_overlay, "$pst_library_book_17", "str_lib_book_17"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_17", 1),
				(overlay_set_size, "$pst_library_book_17", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_17", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_18", -1),
				(str_store_party_name, 28, "$have_book_18"),
				(create_button_overlay, "$pst_library_book_18", "str_lib_book_18"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_18", 1),
				(overlay_set_size, "$pst_library_book_18", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_18", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_19", -1),
				(str_store_party_name, 29, "$have_book_19"),
				(create_button_overlay, "$pst_library_book_19", "str_lib_book_19"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_19", 1),
				(overlay_set_size, "$pst_library_book_19", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_19", "str_empty_string"),
			(try_end),
			(try_begin),
				(neq, "$have_book_20", -1),
				(str_store_party_name, 30, "$have_book_20"),
				(create_button_overlay, "$pst_library_book_20", "str_lib_book_20"),
				(val_sub, ":value_3", 25),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$pst_library_book_20", 1),
				(overlay_set_size, "$pst_library_book_20", 3),
			(else_try),
				(create_text_overlay, "$pst_library_book_20", "str_empty_string"),
			(try_end),
			(store_sub, ":value_4", reg40, "p_ruin_1"),
			(store_add, ":value_5", "mesh_1pic_ruin_1", ":value_4"),
			(create_mesh_overlay, reg0, ":value_5"),
			(position_set_x, 1, 0),
			(position_set_y, 1, 0),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_lib_textt"),
			(position_set_x, 1, 60),
			(position_set_y, 1, 500),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(create_game_button_overlay, "$g_library_exit", "str_return_butt", 16),
			(position_set_x, 1, 460),
			(position_set_y, 1, 30),
			(overlay_set_position, "$g_library_exit", 1),
			(create_game_button_overlay, "$g_library_prev_butt", "str_prev_butt", 16),
			(position_set_x, 1, 260),
			(position_set_y, 1, 30),
			(overlay_set_position, "$g_library_prev_butt", 1),
			(create_game_button_overlay, "$g_library_next_butt", "str_next_butt", 16),
			(position_set_x, 1, 660),
			(position_set_y, 1, 30),
			(overlay_set_position, "$g_library_next_butt", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$pst_library_book_1"),
				(store_sub, ":value", "$have_book_01", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_01"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_2"),
				(store_sub, ":value", "$have_book_02", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_02"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_3"),
				(store_sub, ":value", "$have_book_03", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_03"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_4"),
				(store_sub, ":value", "$have_book_04", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_04"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_5"),
				(store_sub, ":value", "$have_book_05", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_05"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_6"),
				(store_sub, ":value", "$have_book_06", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_06"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_7"),
				(store_sub, ":value", "$have_book_07", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_07"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_8"),
				(store_sub, ":value", "$have_book_08", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_08"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_9"),
				(store_sub, ":value", "$have_book_09", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_09"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_10"),
				(store_sub, ":value", "$have_book_10", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_10"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_11"),
				(store_sub, ":value", "$have_book_11", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_11"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_12"),
				(store_sub, ":value", "$have_book_12", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_12"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_13"),
				(store_sub, ":value", "$have_book_13", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_13"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_14"),
				(store_sub, ":value", "$have_book_14", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_14"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_15"),
				(store_sub, ":value", "$have_book_15", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_15"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_16"),
				(store_sub, ":value", "$have_book_16", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_16"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_17"),
				(store_sub, ":value", "$have_book_17", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_17"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_18"),
				(store_sub, ":value", "$have_book_18", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_18"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_19"),
				(store_sub, ":value", "$have_book_19", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_19"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_library_book_20"),
				(store_sub, ":value", "$have_book_20", "p_ruin_1"),
				(store_add, ":value_2", "str_r_text_001", ":value"),
				(store_add, ":value_3", "str_r_name_001", ":value"),
				(str_store_string, 45, ":value_3"),
				(str_store_string, 41, ":value_2"),
				(assign, reg40, "$have_book_20"),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_library_exit"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_library_prev_butt"),
				(ge, "$ruin_list_page_start", "p_ruin_21"),
				(val_sub, "$ruin_list_page_start", 20),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_library_next_butt"),
				(lt, "$ruin_list_page_start", "p_ruin_161"),
				(val_add, "$ruin_list_page_start", 20),
				(start_presentation, "prsnt_pst_found_ruin_list"),
			(try_end)
		])
	]),

	("adv_exp_skill", 0, mesh_pic_visit_train, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(assign, ":value", 810),
			(assign, ":value_2", 15),
			(create_in_game_button_overlay, "$adv_skill_exit", "str_return_butt", 4),
			(overlay_set_color, "$adv_skill_exit", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_exit", 1),
			(val_sub, ":value", 190),
			(assign, reg10, "$g_slot_troop_adv_exp"),
			(create_in_game_button_overlay, "$adv_skill_adv_exp", "str_adv_exp_reg10", 4),
			(overlay_set_color, "$adv_skill_adv_exp", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_adv_exp", 1),
			(assign, ":value", 210),
			(assign, ":value_2", 670),
			(store_mul, reg11, "$as_st", 2),
			(create_in_game_button_overlay, "$adv_skill_str", "str_str_reg11", 4),
			(overlay_set_color, "$adv_skill_str", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_str", 1),
			(val_add, ":value", 190),
			(store_mul, reg12, "$as_de", 2),
			(create_in_game_button_overlay, "$adv_skill_dex", "str_dex_reg12", 4),
			(overlay_set_color, "$adv_skill_dex", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_dex", 1),
			(val_add, ":value", 190),
			(store_mul, reg13, "$as_in", 2),
			(create_in_game_button_overlay, "$adv_skill_int", "str_int_reg13", 4),
			(overlay_set_color, "$adv_skill_int", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_int", 1),
			(val_add, ":value", 190),
			(store_mul, reg14, "$as_ch", 2),
			(create_in_game_button_overlay, "$adv_skill_cha", "str_cha_reg14", 4),
			(overlay_set_color, "$adv_skill_cha", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_cha", 1),
			(assign, ":value", 210),
			(assign, ":value_2", 570),
			(assign, reg15, "$as_oh"),
			(create_in_game_button_overlay, "$adv_skill_onh", "str_one_hand__lv", 4),
			(overlay_set_color, "$adv_skill_onh", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_onh", 1),
			(val_add, ":value", 190),
			(assign, reg16, "$as_th"),
			(create_in_game_button_overlay, "$adv_skill_twh", "str_two_hand__lv", 4),
			(overlay_set_color, "$adv_skill_twh", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_twh", 1),
			(val_add, ":value", 190),
			(assign, reg17, "$as_po"),
			(create_in_game_button_overlay, "$adv_skill_pol", "str_polarm__lv", 4),
			(overlay_set_color, "$adv_skill_pol", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_pol", 1),
			(val_add, ":value", 190),
			(assign, reg18, "$as_ar"),
			(create_in_game_button_overlay, "$adv_skill_arc", "str_archery__lv", 4),
			(overlay_set_color, "$adv_skill_arc", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_arc", 1),
			(assign, ":value", 315),
			(assign, ":value_2", 510),
			(assign, reg19, "$as_cr"),
			(create_in_game_button_overlay, "$adv_skill_cro", "str_crossbow__lv", 4),
			(overlay_set_color, "$adv_skill_cro", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_cro", 1),
			(val_add, ":value", 190),
			(assign, reg20, "$as_tr"),
			(create_in_game_button_overlay, "$adv_skill_trw", "str_throw__lv", 4),
			(overlay_set_color, "$adv_skill_trw", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_trw", 1),
			(val_add, ":value", 190),
			(assign, reg21, "$as_fa"),
			(create_in_game_button_overlay, "$adv_skill_fam", "str_firearm__lv", 4),
			(overlay_set_color, "$adv_skill_fam", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_fam", 1),
			(assign, ":value", 210),
			(assign, ":value_2", 410),
			(troop_get_slot, reg22, "trp_player", slot_troop_love_interest_1),
			(create_in_game_button_overlay, "$adv_skill_logistics", "str_logistics_r", 4),
			(overlay_set_color, "$adv_skill_logistics", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_logistics", 1),
			(val_add, ":value", 190),
			(troop_get_slot, reg23, "trp_player", slot_troop_love_interest_2),
			(create_in_game_button_overlay, "$adv_skill_navigation", "str_navigation_r", 4),
			(overlay_set_color, "$adv_skill_navigation", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_navigation", 1),
			(val_add, ":value", 190),
			(troop_get_slot, reg24, "trp_player", slot_troop_love_interest_3),
			(create_in_game_button_overlay, "$adv_skill_exploration", "str_exploration_r", 4),
			(overlay_set_color, "$adv_skill_exploration", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_exploration", 1),
			(val_add, ":value", 190),
			(troop_get_slot, reg33, "trp_player", slot_troop_love_interests_end),
			(create_in_game_button_overlay, "$adv_skill_warfighting", "str_warfighting_r", 4),
			(overlay_set_color, "$adv_skill_warfighting", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_warfighting", 1),
			(assign, ":value", 210),
			(assign, ":value_2", 350),
			(troop_get_slot, reg25, "trp_player", slot_troop_betrothal_time),
			(create_in_game_button_overlay, "$adv_skill_persuasion", "str_persuasion_r", 4),
			(overlay_set_color, "$adv_skill_persuasion", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_persuasion", 1),
			(val_add, ":value", 190),
			(troop_get_slot, reg26, "trp_player", slot_lady_used_tournament),
			(create_in_game_button_overlay, "$adv_skill_fascination", "str_fascination_r", 4),
			(overlay_set_color, "$adv_skill_fascination", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_fascination", 1),
			(val_add, ":value", 190),
			(troop_get_slot, reg27, "trp_player", 41),
			(create_in_game_button_overlay, "$adv_skill_trade", "str_trade_r", 4),
			(overlay_set_color, "$adv_skill_trade", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_trade", 1),
			(assign, ":value", 210),
			(assign, ":value_2", 290),
			(troop_get_slot, reg28, "trp_player", slot_troop_spawned_before),
			(create_in_game_button_overlay, "$adv_skill_tactics", "str_tactics_r", 4),
			(overlay_set_color, "$adv_skill_tactics", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_tactics", 1),
			(val_add, ":value", 190),
			(troop_get_slot, reg29, "trp_player", slot_troop_last_comment_slot),
			(create_in_game_button_overlay, "$adv_skill_leadership", "str_leadershipr", 4),
			(overlay_set_color, "$adv_skill_leadership", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_leadership", 1),
			(val_add, ":value", 190),
			(troop_get_slot, reg30, "trp_player", slot_troop_spouse),
			(create_in_game_button_overlay, "$adv_skill_strategy", "str_strategyr", 4),
			(overlay_set_color, "$adv_skill_strategy", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_strategy", 1),
			(val_add, ":value", 190),
			(troop_get_slot, reg34, "trp_player", slot_troop_father),
			(create_in_game_button_overlay, "$adv_skill_naval_tactics", "str_naval_tacticsr", 4),
			(overlay_set_color, "$adv_skill_naval_tactics", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$adv_skill_naval_tactics", 1),
			(create_text_overlay, reg0, "str_s11_space"),
			(position_set_x, 1, 125),
			(position_set_y, 1, 100),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1200),
			(position_set_y, 1, 1200),
			(overlay_set_size, reg0, 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$adv_skill_exit"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_str"),
				(str_store_string, 11, "str_adv_att_increase"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_dex"),
				(str_store_string, 11, "str_adv_att_increase"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_int"),
				(str_store_string, 11, "str_adv_att_increase"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_cha"),
				(str_store_string, 11, "str_adv_att_increase"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_onh"),
				(str_store_string, 11, "str_adv_wp_increase"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_twh"),
				(str_store_string, 11, "str_adv_wp_increase"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_pol"),
				(str_store_string, 11, "str_adv_wp_increase"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_arc"),
				(str_store_string, 11, "str_adv_wp_increase"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_cro"),
				(str_store_string, 11, "str_adv_wp_increase"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_trw"),
				(str_store_string, 11, "str_adv_wp_increase"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_fam"),
				(str_store_string, 11, "str_adv_wp_increase"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_logistics"),
				(str_store_string, 11, "str_adv_increase_logistics"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_navigation"),
				(str_store_string, 11, "str_adv_increase_navigation"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_exploration"),
				(str_store_string, 11, "str_adv_increase_exploration"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_warfighting"),
				(str_store_string, 11, "str_adv_increase_warfighting"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_persuasion"),
				(str_store_string, 11, "str_adv_increase_persuasion"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_fascination"),
				(str_store_string, 11, "str_adv_increase_fascination"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_trade"),
				(str_store_string, 11, "str_adv_increase_trade"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_tactics"),
				(str_store_string, 11, "str_adv_increase_tactics"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_leadership"),
				(str_store_string, 11, "str_adv_increase_leadership"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_strategy"),
				(str_store_string, 11, "str_adv_increase_strategy"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_naval_tactics"),
				(str_store_string, 11, "str_adv_increase_naval"),
				(start_presentation, "prsnt_adv_exp_skill"),
			(try_end)
		]),

		(ti_on_presentation_mouse_press,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(eq, ":trigger_param_2", 1),
			(store_skill_level, ":skill_level_weapon_master_player", "skl_weapon_master", "trp_player"),
			(try_begin),
				(eq, ":trigger_param_1", "$adv_skill_exit"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_adv_exp"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_str"),
				(str_store_string, 11, "str_adv_att_increase"),
				(call_script, "script_adv_exp_ge", 200),
				(try_begin),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(ge, "$as_st", 10),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(val_add, "$as_st", 1),
					(troop_raise_attribute, "trp_player", 0, 2),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_dex"),
				(str_store_string, 11, "str_adv_att_increase"),
				(call_script, "script_adv_exp_ge", 200),
				(try_begin),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(ge, "$as_de", 10),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(val_add, "$as_de", 1),
					(troop_raise_attribute, "trp_player", 1, 2),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_int"),
				(str_store_string, 11, "str_adv_att_increase"),
				(call_script, "script_adv_exp_ge", 200),
				(try_begin),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(ge, "$as_in", 10),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(val_add, "$as_in", 1),
					(troop_raise_attribute, "trp_player", 2, 2),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_cha"),
				(str_store_string, 11, "str_adv_att_increase"),
				(call_script, "script_adv_exp_ge", 200),
				(try_begin),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(ge, "$as_ch", 10),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(val_add, "$as_ch", 1),
					(troop_raise_attribute, "trp_player", 3, 2),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_onh"),
				(str_store_string, 11, "str_adv_wp_increase"),
				(call_script, "script_adv_exp_ge", 200),
				(try_begin),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(ge, "$as_oh", 20),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(ge, "$as_oh", 10),
					(lt, ":skill_level_weapon_master_player", 10),
					(display_message, "str_adv_skill_limit_wm", 0x00ff0000),
				(else_try),
					(val_add, "$as_oh", 1),
					(store_mul, ":value", 25, "$as_oh"),
					(try_for_range, ":unused", 0, 50),
						(store_proficiency_level, ":proficiency_level_player_0", "trp_player", 0),
						(try_begin),
							(lt, ":proficiency_level_player_0", ":value"),
							(troop_raise_proficiency_linear, "trp_player", 0, 1),
						(try_end),
					(try_end),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_twh"),
				(str_store_string, 11, "str_adv_wp_increase"),
				(call_script, "script_adv_exp_ge", 200),
				(try_begin),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(ge, "$as_th", 20),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(ge, "$as_th", 10),
					(lt, ":skill_level_weapon_master_player", 10),
					(display_message, "str_adv_skill_limit_wm", 0x00ff0000),
				(else_try),
					(val_add, "$as_th", 1),
					(store_mul, ":value", 25, "$as_th"),
					(try_for_range, ":unused", 0, 50),
						(store_proficiency_level, ":proficiency_level_player_0", "trp_player", 1),
						(try_begin),
							(lt, ":proficiency_level_player_0", ":value"),
							(troop_raise_proficiency_linear, "trp_player", 1, 1),
						(try_end),
					(try_end),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_pol"),
				(str_store_string, 11, "str_adv_wp_increase"),
				(call_script, "script_adv_exp_ge", 200),
				(try_begin),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(ge, "$as_po", 20),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(ge, "$as_po", 10),
					(lt, ":skill_level_weapon_master_player", 10),
					(display_message, "str_adv_skill_limit_wm", 0x00ff0000),
				(else_try),
					(val_add, "$as_po", 1),
					(store_mul, ":value", 25, "$as_po"),
					(try_for_range, ":unused", 0, 50),
						(store_proficiency_level, ":proficiency_level_player_0", "trp_player", 2),
						(try_begin),
							(lt, ":proficiency_level_player_0", ":value"),
							(troop_raise_proficiency_linear, "trp_player", 2, 1),
						(try_end),
					(try_end),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_arc"),
				(str_store_string, 11, "str_adv_wp_increase"),
				(call_script, "script_adv_exp_ge", 200),
				(try_begin),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(ge, "$as_ar", 20),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(ge, "$as_ar", 10),
					(lt, ":skill_level_weapon_master_player", 10),
					(display_message, "str_adv_skill_limit_wm", 0x00ff0000),
				(else_try),
					(val_add, "$as_ar", 1),
					(store_mul, ":value", 25, "$as_ar"),
					(try_for_range, ":unused", 0, 50),
						(store_proficiency_level, ":proficiency_level_player_0", "trp_player", 3),
						(try_begin),
							(lt, ":proficiency_level_player_0", ":value"),
							(troop_raise_proficiency_linear, "trp_player", 3, 1),
						(try_end),
					(try_end),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_cro"),
				(str_store_string, 11, "str_adv_wp_increase"),
				(call_script, "script_adv_exp_ge", 200),
				(try_begin),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(ge, "$as_cr", 20),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(ge, "$as_cr", 10),
					(lt, ":skill_level_weapon_master_player", 10),
					(display_message, "str_adv_skill_limit_wm", 0x00ff0000),
				(else_try),
					(val_add, "$as_cr", 1),
					(store_mul, ":value", 25, "$as_cr"),
					(try_for_range, ":unused", 0, 50),
						(store_proficiency_level, ":proficiency_level_player_0", "trp_player", 4),
						(try_begin),
							(lt, ":proficiency_level_player_0", ":value"),
							(troop_raise_proficiency_linear, "trp_player", 4, 1),
						(try_end),
					(try_end),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_trw"),
				(str_store_string, 11, "str_adv_wp_increase"),
				(call_script, "script_adv_exp_ge", 200),
				(try_begin),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(ge, "$as_tr", 20),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(ge, "$as_tr", 10),
					(lt, ":skill_level_weapon_master_player", 10),
					(display_message, "str_adv_skill_limit_wm", 0x00ff0000),
				(else_try),
					(val_add, "$as_tr", 1),
					(store_mul, ":value", 25, "$as_tr"),
					(try_for_range, ":unused", 0, 50),
						(store_proficiency_level, ":proficiency_level_player_0", "trp_player", 5),
						(try_begin),
							(lt, ":proficiency_level_player_0", ":value"),
							(troop_raise_proficiency_linear, "trp_player", 5, 1),
						(try_end),
					(try_end),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_fam"),
				(str_store_string, 11, "str_adv_wp_increase"),
				(call_script, "script_adv_exp_ge", 200),
				(try_begin),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(ge, "$as_fa", 20),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(ge, "$as_fa", 10),
					(lt, ":skill_level_weapon_master_player", 10),
					(display_message, "str_adv_skill_limit_wm", 0x00ff0000),
				(else_try),
					(val_add, "$as_fa", 1),
					(store_mul, ":value", 25, "$as_fa"),
					(try_for_range, ":unused", 0, 50),
						(store_proficiency_level, ":proficiency_level_player_0", "trp_player", 6),
						(try_begin),
							(lt, ":proficiency_level_player_0", ":value"),
							(troop_raise_proficiency_linear, "trp_player", 6, 1),
						(try_end),
					(try_end),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_logistics"),
				(str_store_string, 11, "str_adv_increase_logistics"),
				(call_script, "script_adv_exp_ge", 200),
				(troop_get_slot, ":player_love_interest_1", "trp_player", slot_troop_love_interest_1),
				(val_mul, ":player_love_interest_1", 5),
				(store_attribute_level, ":attribute_level_player_2", "trp_player", 2),
				(try_begin),
					(lt, ":attribute_level_player_2", ":player_love_interest_1"),
					(display_message, "str_need_intell", 0x00ff0000),
				(else_try),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(troop_slot_ge, "trp_player", 35, 5),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(troop_get_slot, ":player_love_interest_1_2", "trp_player", slot_troop_love_interest_1),
					(val_add, ":player_love_interest_1_2", 1),
					(troop_set_slot, "trp_player", slot_troop_love_interest_1, ":player_love_interest_1_2"),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_navigation"),
				(str_store_string, 11, "str_adv_increase_navigation"),
				(call_script, "script_adv_exp_ge", 200),
				(troop_get_slot, ":player_love_interest_1", "trp_player", slot_troop_love_interest_2),
				(val_mul, ":player_love_interest_1", 5),
				(store_attribute_level, ":attribute_level_player_2", "trp_player", 2),
				(try_begin),
					(lt, ":attribute_level_player_2", ":player_love_interest_1"),
					(display_message, "str_need_intell", 0x00ff0000),
				(else_try),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(troop_slot_ge, "trp_player", 36, 5),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(troop_get_slot, ":player_love_interest_1_2", "trp_player", slot_troop_love_interest_2),
					(val_add, ":player_love_interest_1_2", 1),
					(troop_set_slot, "trp_player", slot_troop_love_interest_2, ":player_love_interest_1_2"),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_exploration"),
				(str_store_string, 11, "str_adv_increase_exploration"),
				(call_script, "script_adv_exp_ge", 200),
				(troop_get_slot, ":player_love_interest_1", "trp_player", slot_troop_love_interest_3),
				(val_mul, ":player_love_interest_1", 5),
				(store_attribute_level, ":attribute_level_player_2", "trp_player", 1),
				(try_begin),
					(lt, ":attribute_level_player_2", ":player_love_interest_1"),
					(display_message, "str_need_agilit", 0x00ff0000),
				(else_try),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(troop_slot_ge, "trp_player", 37, 5),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(troop_get_slot, ":player_love_interest_1_2", "trp_player", slot_troop_love_interest_3),
					(val_add, ":player_love_interest_1_2", 1),
					(troop_set_slot, "trp_player", slot_troop_love_interest_3, ":player_love_interest_1_2"),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_warfighting"),
				(str_store_string, 11, "str_adv_increase_warfighting"),
				(call_script, "script_adv_exp_ge", 200),
				(troop_get_slot, ":player_love_interest_1", "trp_player", slot_troop_love_interests_end),
				(val_mul, ":player_love_interest_1", 5),
				(store_attribute_level, ":attribute_level_player_2", "trp_player", 0),
				(try_begin),
					(lt, ":attribute_level_player_2", ":player_love_interest_1"),
					(display_message, "str_need_strr", 0x00ff0000),
				(else_try),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(troop_slot_ge, "trp_player", 38, 10),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(troop_get_slot, ":player_love_interest_1_2", "trp_player", slot_troop_love_interests_end),
					(val_add, ":player_love_interest_1_2", 1),
					(troop_set_slot, "trp_player", slot_troop_love_interests_end, ":player_love_interest_1_2"),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_persuasion"),
				(str_store_string, 11, "str_adv_increase_persuasion"),
				(call_script, "script_adv_exp_ge", 200),
				(troop_get_slot, ":player_love_interest_1", "trp_player", slot_troop_betrothal_time),
				(val_mul, ":player_love_interest_1", 5),
				(store_attribute_level, ":attribute_level_player_2", "trp_player", 3),
				(try_begin),
					(lt, ":attribute_level_player_2", ":player_love_interest_1"),
					(display_message, "str_need_chari", 0x00ff0000),
				(else_try),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(troop_slot_ge, "trp_player", 39, 5),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(troop_get_slot, ":player_love_interest_1_2", "trp_player", slot_troop_betrothal_time),
					(val_add, ":player_love_interest_1_2", 1),
					(troop_set_slot, "trp_player", slot_troop_betrothal_time, ":player_love_interest_1_2"),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_fascination"),
				(str_store_string, 11, "str_adv_increase_fascination"),
				(call_script, "script_adv_exp_ge", 200),
				(troop_get_slot, ":player_love_interest_1", "trp_player", slot_lady_used_tournament),
				(val_mul, ":player_love_interest_1", 5),
				(store_attribute_level, ":attribute_level_player_2", "trp_player", 3),
				(try_begin),
					(lt, ":attribute_level_player_2", ":player_love_interest_1"),
					(display_message, "str_need_chari", 0x00ff0000),
				(else_try),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(troop_slot_ge, "trp_player", 40, 5),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(troop_get_slot, ":player_love_interest_1_2", "trp_player", slot_lady_used_tournament),
					(val_add, ":player_love_interest_1_2", 1),
					(troop_set_slot, "trp_player", slot_lady_used_tournament, ":player_love_interest_1_2"),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_trade"),
				(str_store_string, 11, "str_adv_increase_trade"),
				(call_script, "script_adv_exp_ge", 200),
				(troop_get_slot, ":player_love_interest_1", "trp_player", 41),
				(val_mul, ":player_love_interest_1", 5),
				(store_attribute_level, ":attribute_level_player_2", "trp_player", 2),
				(try_begin),
					(lt, ":attribute_level_player_2", ":player_love_interest_1"),
					(display_message, "str_need_intell", 0x00ff0000),
				(else_try),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(troop_slot_ge, "trp_player", 41, 5),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(troop_get_slot, ":player_love_interest_1_2", "trp_player", 41),
					(val_add, ":player_love_interest_1_2", 1),
					(troop_set_slot, "trp_player", 41, ":player_love_interest_1_2"),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_tactics"),
				(str_store_string, 11, "str_adv_increase_tactics"),
				(call_script, "script_adv_exp_ge", 200),
				(troop_get_slot, ":player_love_interest_1", "trp_player", slot_troop_spawned_before),
				(val_mul, ":player_love_interest_1", 5),
				(store_attribute_level, ":attribute_level_player_2", "trp_player", 2),
				(try_begin),
					(lt, ":attribute_level_player_2", ":player_love_interest_1"),
					(display_message, "str_need_intell", 0x00ff0000),
				(else_try),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(troop_slot_ge, "trp_player", 28, 7), #Tactics
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(troop_get_slot, ":player_love_interest_1_2", "trp_player", slot_troop_spawned_before),
					(val_add, ":player_love_interest_1_2", 1),
					(troop_set_slot, "trp_player", slot_troop_spawned_before, ":player_love_interest_1_2"),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_leadership"),
				(str_store_string, 11, "str_adv_increase_leadership"),
				(call_script, "script_adv_exp_ge", 200),
				(troop_get_slot, ":player_love_interest_1", "trp_player", slot_troop_last_comment_slot),
				(val_mul, ":player_love_interest_1", 5),
				(store_attribute_level, ":attribute_level_player_2", "trp_player", 3),
				(try_begin),
					(lt, ":attribute_level_player_2", ":player_love_interest_1"),
					(display_message, "str_need_chari", 0x00ff0000),
				(else_try),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(troop_slot_ge, "trp_player", 29, 7), #Leadership
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(troop_get_slot, ":player_love_interest_1_2", "trp_player", slot_troop_last_comment_slot),
					(val_add, ":player_love_interest_1_2", 1),
					(troop_set_slot, "trp_player", slot_troop_last_comment_slot, ":player_love_interest_1_2"),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_strategy"),
				(str_store_string, 11, "str_adv_increase_strategy"),
				(call_script, "script_adv_exp_ge", 200),
				(troop_get_slot, ":player_love_interest_1", "trp_player", slot_troop_spouse),
				(val_mul, ":player_love_interest_1", 5),
				(store_attribute_level, ":attribute_level_player_2", "trp_player", 2),
				(try_begin),
					(lt, ":attribute_level_player_2", ":player_love_interest_1"),
					(display_message, "str_need_intell", 0x00ff0000),
				(else_try),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(troop_slot_ge, "trp_player", 30, 7), #Strategy
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(troop_get_slot, ":player_love_interest_1_2", "trp_player", slot_troop_spouse),
					(val_add, ":player_love_interest_1_2", 1),
					(troop_set_slot, "trp_player", slot_troop_spouse, ":player_love_interest_1_2"),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(else_try),
				(eq, ":trigger_param_1", "$adv_skill_naval_tactics"),
				(str_store_string, 11, "str_adv_increase_naval"),
				(call_script, "script_adv_exp_ge", 200),
				(troop_get_slot, ":player_love_interest_1", "trp_player", slot_troop_spouse),
				(val_mul, ":player_love_interest_1", 5),
				(store_attribute_level, ":attribute_level_player_2", "trp_player", 2),
				(try_begin),
					(lt, ":attribute_level_player_2", ":player_love_interest_1"),
					(display_message, "str_need_intell", 0x00ff0000),
				(else_try),
					(neq, "$wm_btexp_continue", 1),
					(assign, reg8, 200),
					(display_message, "str_need_adv_exp", 0x00ff0000),
				(else_try),
					(troop_slot_ge, "trp_player", 31, 7),
					(display_message, "str_adv_skill_limit", 0x00ff0000),
				(else_try),
					(troop_get_slot, ":player_love_interest_1_2", "trp_player", slot_troop_father),
					(val_add, ":player_love_interest_1_2", 1),
					(troop_set_slot, "trp_player", slot_troop_father, ":player_love_interest_1_2"),
					(display_message, "str_adv_skill_att", 0x0000ff00),
					(call_script, "script_adv_exp_diff", 200, 34),
				(try_end),
				(start_presentation, "prsnt_adv_exp_skill"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("wm_kingdom_meeting", 0, mesh_pic_policy_choose_prt, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(call_script, "script_wm_lord_count_own_place"),
			(assign, ":value", 5),
			(assign, ":value_2", 640),
			(assign, ":var_3", 100),
			(assign, ":value_3", 20),
			(assign, ":var_5", 9699212),
			(assign, ":var_6", 14179012),
			(assign, ":var_7", 16776960),
			(position_set_x, 3, 250),
			(position_set_y, 3, 300),
			(position_set_x, 4, 4300),
			(position_set_y, 4, 5150),
			(position_set_x, 5, 800),
			(position_set_y, 5, 800),
			(faction_get_slot, ":wm_player_fac_1", "$wm_player_fac", 1),
			(faction_get_slot, ":wm_player_fac_quick_battle_tier_1_infantry", "$wm_player_fac", slot_faction_quick_battle_tier_1_infantry),
			(try_begin),
				(str_store_troop_name, 11, ":wm_player_fac_quick_battle_tier_1_infantry"),
				(troop_get_slot, reg9, ":wm_player_fac_quick_battle_tier_1_infantry", slot_troop_betrothed),
				(try_begin),
					(eq, "$meeting_face_model_on", 1),
					(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", ":wm_player_fac_quick_battle_tier_1_infantry"),
					(overlay_set_size, reg0, 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
				(try_end),
				(create_image_button_overlay, "$kingdom_meeting_lord_list_01", "mesh_white_plane", "mesh_white_plane"),
				(try_begin),
					(eq, "$opinion_suggester", ":wm_player_fac_quick_battle_tier_1_infantry"),
					(overlay_set_color, "$kingdom_meeting_lord_list_01", ":var_7"),
				(else_try),
					(eq, ":wm_player_fac_1", ":wm_player_fac_quick_battle_tier_1_infantry"),
					(overlay_set_color, "$kingdom_meeting_lord_list_01", ":var_6"),
				(else_try),
					(overlay_set_color, "$kingdom_meeting_lord_list_01", ":var_5"),
				(try_end),
				(overlay_set_alpha, "$kingdom_meeting_lord_list_01", 191),
				(overlay_set_size, "$kingdom_meeting_lord_list_01", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_lord_list_01", 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_glob_s11", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(eq, "$opinion_list_1", 1),
					(create_text_overlay, reg0, "str_meeting_opinion_agree", 32772),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$opinion_list_1", 2),
					(create_text_overlay, reg0, "str_meeting_opinion_disagree", 32772),
					(overlay_set_color, reg0, 16711680),
				(else_try),
					(eq, "$opinion_list_1", 3),
					(create_text_overlay, reg0, "str_meeting_opinion_abstention", 32772),
					(overlay_set_color, reg0, 255),
				(else_try),
					(create_text_overlay, reg0, "str_empty_string", 32772),
				(try_end),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_playerr", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_fief_reg9", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_lord_list_01", "str_empty_string"),
			(try_end),
			(val_add, ":value", ":var_3"),
			(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_quick_battle_tier_2_infantry),
			(try_begin),
				(is_between, ":wm_player_fac_quick_battle_tier_2_infantry", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(neg|troop_slot_ge, ":wm_player_fac_quick_battle_tier_2_infantry", 12, 2),
				(str_store_troop_name, 12, ":wm_player_fac_quick_battle_tier_2_infantry"),
				(troop_get_slot, reg8, ":wm_player_fac_quick_battle_tier_2_infantry", slot_troop_occupation),
				(troop_get_slot, reg9, ":wm_player_fac_quick_battle_tier_2_infantry", slot_troop_betrothed),
				(try_begin),
					(eq, "$meeting_face_model_on", 1),
					(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", ":wm_player_fac_quick_battle_tier_2_infantry"),
					(overlay_set_size, reg0, 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
				(try_end),
				(create_image_button_overlay, "$kingdom_meeting_lord_list_02", "mesh_white_plane", "mesh_white_plane"),
				(try_begin),
					(eq, "$opinion_suggester", ":wm_player_fac_quick_battle_tier_2_infantry"),
					(overlay_set_color, "$kingdom_meeting_lord_list_02", ":var_7"),
				(else_try),
					(eq, ":wm_player_fac_1", ":wm_player_fac_quick_battle_tier_2_infantry"),
					(overlay_set_color, "$kingdom_meeting_lord_list_02", ":var_6"),
				(else_try),
					(overlay_set_color, "$kingdom_meeting_lord_list_02", ":var_5"),
				(try_end),
				(overlay_set_alpha, "$kingdom_meeting_lord_list_02", 191),
				(overlay_set_size, "$kingdom_meeting_lord_list_02", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_lord_list_02", 1),
				(val_sub, ":value_2", ":value_3"),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_glob_s12", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(eq, "$opinion_list_2", 1),
					(create_text_overlay, reg0, "str_meeting_opinion_agree", 32772),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$opinion_list_2", 2),
					(create_text_overlay, reg0, "str_meeting_opinion_disagree", 32772),
					(overlay_set_color, reg0, 16711680),
				(else_try),
					(eq, "$opinion_list_2", 3),
					(create_text_overlay, reg0, "str_meeting_opinion_abstention", 32772),
					(overlay_set_color, reg0, 255),
				(else_try),
					(create_text_overlay, reg0, "str_empty_string", 32772),
				(try_end),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_rel_reg8", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_fief_reg9", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_lord_list_02", "str_empty_string"),
			(try_end),
			(val_add, ":value", ":var_3"),
			(faction_get_slot, ":wm_player_fac_quick_battle_tier_1_archer", "$wm_player_fac", slot_faction_quick_battle_tier_1_archer),
			(try_begin),
				(is_between, ":wm_player_fac_quick_battle_tier_1_archer", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(neg|troop_slot_ge, ":wm_player_fac_quick_battle_tier_1_archer", 12, 2),
				(str_store_troop_name, 13, ":wm_player_fac_quick_battle_tier_1_archer"),
				(troop_get_slot, reg8, ":wm_player_fac_quick_battle_tier_1_archer", slot_troop_occupation),
				(troop_get_slot, reg9, ":wm_player_fac_quick_battle_tier_1_archer", slot_troop_betrothed),
				(try_begin),
					(eq, "$meeting_face_model_on", 1),
					(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", ":wm_player_fac_quick_battle_tier_1_archer"),
					(overlay_set_size, reg0, 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
				(try_end),
				(create_image_button_overlay, "$kingdom_meeting_lord_list_03", "mesh_white_plane", "mesh_white_plane"),
				(try_begin),
					(eq, "$opinion_suggester", ":wm_player_fac_quick_battle_tier_1_archer"),
					(overlay_set_color, "$kingdom_meeting_lord_list_03", ":var_7"),
				(else_try),
					(eq, ":wm_player_fac_1", ":wm_player_fac_quick_battle_tier_1_archer"),
					(overlay_set_color, "$kingdom_meeting_lord_list_03", ":var_6"),
				(else_try),
					(overlay_set_color, "$kingdom_meeting_lord_list_03", ":var_5"),
				(try_end),
				(overlay_set_alpha, "$kingdom_meeting_lord_list_03", 191),
				(overlay_set_size, "$kingdom_meeting_lord_list_03", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_lord_list_03", 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_glob_s13", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(eq, "$opinion_list_3", 1),
					(create_text_overlay, reg0, "str_meeting_opinion_agree", 32772),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$opinion_list_3", 2),
					(create_text_overlay, reg0, "str_meeting_opinion_disagree", 32772),
					(overlay_set_color, reg0, 16711680),
				(else_try),
					(eq, "$opinion_list_3", 3),
					(create_text_overlay, reg0, "str_meeting_opinion_abstention", 32772),
					(overlay_set_color, reg0, 255),
				(else_try),
					(create_text_overlay, reg0, "str_empty_string", 32772),
				(try_end),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_rel_reg8", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_fief_reg9", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_lord_list_03", "str_empty_string"),
			(try_end),
			(val_add, ":value", ":var_3"),
			(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_archer", "$wm_player_fac", slot_faction_quick_battle_tier_2_archer),
			(try_begin),
				(is_between, ":wm_player_fac_quick_battle_tier_2_archer", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(neg|troop_slot_ge, ":wm_player_fac_quick_battle_tier_2_archer", 12, 2),
				(str_store_troop_name, 14, ":wm_player_fac_quick_battle_tier_2_archer"),
				(troop_get_slot, reg8, ":wm_player_fac_quick_battle_tier_2_archer", slot_troop_occupation),
				(troop_get_slot, reg9, ":wm_player_fac_quick_battle_tier_2_archer", slot_troop_betrothed),
				(try_begin),
					(eq, "$meeting_face_model_on", 1),
					(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", ":wm_player_fac_quick_battle_tier_2_archer"),
					(overlay_set_size, reg0, 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
				(try_end),
				(create_image_button_overlay, "$kingdom_meeting_lord_list_04", "mesh_white_plane", "mesh_white_plane"),
				(try_begin),
					(eq, "$opinion_suggester", ":wm_player_fac_quick_battle_tier_2_archer"),
					(overlay_set_color, "$kingdom_meeting_lord_list_04", ":var_7"),
				(else_try),
					(eq, ":wm_player_fac_1", ":wm_player_fac_quick_battle_tier_2_archer"),
					(overlay_set_color, "$kingdom_meeting_lord_list_04", ":var_6"),
				(else_try),
					(overlay_set_color, "$kingdom_meeting_lord_list_04", ":var_5"),
				(try_end),
				(overlay_set_alpha, "$kingdom_meeting_lord_list_04", 191),
				(overlay_set_size, "$kingdom_meeting_lord_list_04", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_lord_list_04", 1),
				(val_sub, ":value_2", ":value_3"),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_glob_s14", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(eq, "$opinion_list_4", 1),
					(create_text_overlay, reg0, "str_meeting_opinion_agree", 32772),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$opinion_list_4", 2),
					(create_text_overlay, reg0, "str_meeting_opinion_disagree", 32772),
					(overlay_set_color, reg0, 16711680),
				(else_try),
					(eq, "$opinion_list_4", 3),
					(create_text_overlay, reg0, "str_meeting_opinion_abstention", 32772),
					(overlay_set_color, reg0, 255),
				(else_try),
					(create_text_overlay, reg0, "str_empty_string", 32772),
				(try_end),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_rel_reg8", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_fief_reg9", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_lord_list_04", "str_empty_string"),
			(try_end),
			(val_add, ":value", ":var_3"),
			(faction_get_slot, ":wm_player_fac_quick_battle_tier_1_cavalry", "$wm_player_fac", slot_faction_quick_battle_tier_1_cavalry),
			(try_begin),
				(is_between, ":wm_player_fac_quick_battle_tier_1_cavalry", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(neg|troop_slot_ge, ":wm_player_fac_quick_battle_tier_1_cavalry", 12, 2),
				(str_store_troop_name, 15, ":wm_player_fac_quick_battle_tier_1_cavalry"),
				(troop_get_slot, reg8, ":wm_player_fac_quick_battle_tier_1_cavalry", slot_troop_occupation),
				(troop_get_slot, reg9, ":wm_player_fac_quick_battle_tier_1_cavalry", slot_troop_betrothed),
				(try_begin),
					(eq, "$meeting_face_model_on", 1),
					(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", ":wm_player_fac_quick_battle_tier_1_cavalry"),
					(overlay_set_size, reg0, 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
				(try_end),
				(create_image_button_overlay, "$kingdom_meeting_lord_list_05", "mesh_white_plane", "mesh_white_plane"),
				(try_begin),
					(eq, "$opinion_suggester", ":wm_player_fac_quick_battle_tier_1_cavalry"),
					(overlay_set_color, "$kingdom_meeting_lord_list_05", ":var_7"),
				(else_try),
					(eq, ":wm_player_fac_1", ":wm_player_fac_quick_battle_tier_1_cavalry"),
					(overlay_set_color, "$kingdom_meeting_lord_list_05", ":var_6"),
				(else_try),
					(overlay_set_color, "$kingdom_meeting_lord_list_05", ":var_5"),
				(try_end),
				(overlay_set_alpha, "$kingdom_meeting_lord_list_05", 191),
				(overlay_set_size, "$kingdom_meeting_lord_list_05", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_lord_list_05", 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_glob_s15", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(eq, "$opinion_list_5", 1),
					(create_text_overlay, reg0, "str_meeting_opinion_agree", 32772),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$opinion_list_5", 2),
					(create_text_overlay, reg0, "str_meeting_opinion_disagree", 32772),
					(overlay_set_color, reg0, 16711680),
				(else_try),
					(eq, "$opinion_list_5", 3),
					(create_text_overlay, reg0, "str_meeting_opinion_abstention", 32772),
					(overlay_set_color, reg0, 255),
				(else_try),
					(create_text_overlay, reg0, "str_empty_string", 32772),
				(try_end),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_rel_reg8", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_fief_reg9", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_lord_list_05", "str_empty_string"),
			(try_end),
			(val_add, ":value", ":var_3"),
			(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_cavalry", "$wm_player_fac", slot_faction_quick_battle_tier_2_cavalry),
			(try_begin),
				(is_between, ":wm_player_fac_quick_battle_tier_2_cavalry", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(neg|troop_slot_ge, ":wm_player_fac_quick_battle_tier_2_cavalry", 12, 2),
				(str_store_troop_name, 16, ":wm_player_fac_quick_battle_tier_2_cavalry"),
				(troop_get_slot, reg8, ":wm_player_fac_quick_battle_tier_2_cavalry", slot_troop_occupation),
				(troop_get_slot, reg9, ":wm_player_fac_quick_battle_tier_2_cavalry", slot_troop_betrothed),
				(try_begin),
					(eq, "$meeting_face_model_on", 1),
					(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", ":wm_player_fac_quick_battle_tier_2_cavalry"),
					(overlay_set_size, reg0, 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
				(try_end),
				(create_image_button_overlay, "$kingdom_meeting_lord_list_06", "mesh_white_plane", "mesh_white_plane"),
				(try_begin),
					(eq, "$opinion_suggester", ":wm_player_fac_quick_battle_tier_2_cavalry"),
					(overlay_set_color, "$kingdom_meeting_lord_list_06", ":var_7"),
				(else_try),
					(eq, ":wm_player_fac_1", ":wm_player_fac_quick_battle_tier_2_cavalry"),
					(overlay_set_color, "$kingdom_meeting_lord_list_06", ":var_6"),
				(else_try),
					(overlay_set_color, "$kingdom_meeting_lord_list_06", ":var_5"),
				(try_end),
				(overlay_set_alpha, "$kingdom_meeting_lord_list_06", 191),
				(overlay_set_size, "$kingdom_meeting_lord_list_06", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_lord_list_06", 1),
				(val_sub, ":value_2", ":value_3"),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_glob_s16", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(eq, "$opinion_list_6", 1),
					(create_text_overlay, reg0, "str_meeting_opinion_agree", 32772),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$opinion_list_6", 2),
					(create_text_overlay, reg0, "str_meeting_opinion_disagree", 32772),
					(overlay_set_color, reg0, 16711680),
				(else_try),
					(eq, "$opinion_list_6", 3),
					(create_text_overlay, reg0, "str_meeting_opinion_abstention", 32772),
					(overlay_set_color, reg0, 255),
				(else_try),
					(create_text_overlay, reg0, "str_empty_string", 32772),
				(try_end),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_rel_reg8", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_fief_reg9", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_lord_list_06", "str_empty_string"),
			(try_end),
			(val_add, ":value", ":var_3"),
			(faction_get_slot, ":wm_player_fac_47", "$wm_player_fac", 47),
			(try_begin),
				(is_between, ":wm_player_fac_47", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(neg|troop_slot_ge, ":wm_player_fac_47", 12, 2),
				(str_store_troop_name, 17, ":wm_player_fac_47"),
				(troop_get_slot, reg8, ":wm_player_fac_47", slot_troop_occupation),
				(troop_get_slot, reg9, ":wm_player_fac_47", slot_troop_betrothed),
				(try_begin),
					(eq, "$meeting_face_model_on", 1),
					(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", ":wm_player_fac_47"),
					(overlay_set_size, reg0, 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
				(try_end),
				(create_image_button_overlay, "$kingdom_meeting_lord_list_07", "mesh_white_plane", "mesh_white_plane"),
				(try_begin),
					(eq, "$opinion_suggester", ":wm_player_fac_47"),
					(overlay_set_color, "$kingdom_meeting_lord_list_07", ":var_7"),
				(else_try),
					(eq, ":wm_player_fac_1", ":wm_player_fac_47"),
					(overlay_set_color, "$kingdom_meeting_lord_list_07", ":var_6"),
				(else_try),
					(overlay_set_color, "$kingdom_meeting_lord_list_07", ":var_5"),
				(try_end),
				(overlay_set_alpha, "$kingdom_meeting_lord_list_07", 191),
				(overlay_set_size, "$kingdom_meeting_lord_list_07", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_lord_list_07", 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_glob_s17", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(eq, "$opinion_list_7", 1),
					(create_text_overlay, reg0, "str_meeting_opinion_agree", 32772),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$opinion_list_7", 2),
					(create_text_overlay, reg0, "str_meeting_opinion_disagree", 32772),
					(overlay_set_color, reg0, 16711680),
				(else_try),
					(eq, "$opinion_list_7", 3),
					(create_text_overlay, reg0, "str_meeting_opinion_abstention", 32772),
					(overlay_set_color, reg0, 255),
				(else_try),
					(create_text_overlay, reg0, "str_empty_string", 32772),
				(try_end),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_rel_reg8", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_fief_reg9", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_lord_list_07", "str_empty_string"),
			(try_end),
			(val_add, ":value", ":var_3"),
			(faction_get_slot, ":wm_player_fac_deserter_troop", "$wm_player_fac", slot_faction_deserter_troop),
			(try_begin),
				(is_between, ":wm_player_fac_deserter_troop", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(neg|troop_slot_ge, ":wm_player_fac_deserter_troop", 12, 2),
				(str_store_troop_name, 18, ":wm_player_fac_deserter_troop"),
				(troop_get_slot, reg8, ":wm_player_fac_deserter_troop", slot_troop_occupation),
				(troop_get_slot, reg9, ":wm_player_fac_deserter_troop", slot_troop_betrothed),
				(try_begin),
					(eq, "$meeting_face_model_on", 1),
					(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", ":wm_player_fac_deserter_troop"),
					(overlay_set_size, reg0, 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
				(try_end),
				(create_image_button_overlay, "$kingdom_meeting_lord_list_08", "mesh_white_plane", "mesh_white_plane"),
				(try_begin),
					(eq, "$opinion_suggester", ":wm_player_fac_deserter_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_08", ":var_7"),
				(else_try),
					(eq, ":wm_player_fac_1", ":wm_player_fac_deserter_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_08", ":var_6"),
				(else_try),
					(overlay_set_color, "$kingdom_meeting_lord_list_08", ":var_5"),
				(try_end),
				(overlay_set_alpha, "$kingdom_meeting_lord_list_08", 191),
				(overlay_set_size, "$kingdom_meeting_lord_list_08", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_lord_list_08", 1),
				(val_sub, ":value_2", ":value_3"),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_glob_s18", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(eq, "$opinion_list_8", 1),
					(create_text_overlay, reg0, "str_meeting_opinion_agree", 32772),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$opinion_list_8", 2),
					(create_text_overlay, reg0, "str_meeting_opinion_disagree", 32772),
					(overlay_set_color, reg0, 16711680),
				(else_try),
					(eq, "$opinion_list_8", 3),
					(create_text_overlay, reg0, "str_meeting_opinion_abstention", 32772),
					(overlay_set_color, reg0, 255),
				(else_try),
					(create_text_overlay, reg0, "str_empty_string", 32772),
				(try_end),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_rel_reg8", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_fief_reg9", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_lord_list_08", "str_empty_string"),
			(try_end),
			(val_add, ":value", ":var_3"),
			(faction_get_slot, ":wm_player_fac_guard_troop", "$wm_player_fac", slot_faction_guard_troop),
			(try_begin),
				(is_between, ":wm_player_fac_guard_troop", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(neg|troop_slot_ge, ":wm_player_fac_guard_troop", 12, 2),
				(str_store_troop_name, 19, ":wm_player_fac_guard_troop"),
				(troop_get_slot, reg8, ":wm_player_fac_guard_troop", slot_troop_occupation),
				(troop_get_slot, reg9, ":wm_player_fac_guard_troop", slot_troop_betrothed),
				(try_begin),
					(eq, "$meeting_face_model_on", 1),
					(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", ":wm_player_fac_guard_troop"),
					(overlay_set_size, reg0, 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
				(try_end),
				(create_image_button_overlay, "$kingdom_meeting_lord_list_09", "mesh_white_plane", "mesh_white_plane"),
				(try_begin),
					(eq, "$opinion_suggester", ":wm_player_fac_guard_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_09", ":var_7"),
				(else_try),
					(eq, ":wm_player_fac_1", ":wm_player_fac_guard_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_09", ":var_6"),
				(else_try),
					(overlay_set_color, "$kingdom_meeting_lord_list_09", ":var_5"),
				(try_end),
				(overlay_set_alpha, "$kingdom_meeting_lord_list_09", 191),
				(overlay_set_size, "$kingdom_meeting_lord_list_09", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_lord_list_09", 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_glob_s19", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(eq, "$opinion_list_9", 1),
					(create_text_overlay, reg0, "str_meeting_opinion_agree", 32772),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$opinion_list_9", 2),
					(create_text_overlay, reg0, "str_meeting_opinion_disagree", 32772),
					(overlay_set_color, reg0, 16711680),
				(else_try),
					(eq, "$opinion_list_9", 3),
					(create_text_overlay, reg0, "str_meeting_opinion_abstention", 32772),
					(overlay_set_color, reg0, 255),
				(else_try),
					(create_text_overlay, reg0, "str_empty_string", 32772),
				(try_end),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_rel_reg8", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_fief_reg9", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_lord_list_09", "str_empty_string"),
			(try_end),
			(val_add, ":value", ":var_3"),
			(faction_get_slot, ":wm_player_fac_messenger_troop", "$wm_player_fac", slot_faction_messenger_troop),
			(try_begin),
				(is_between, ":wm_player_fac_messenger_troop", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(neg|troop_slot_ge, ":wm_player_fac_messenger_troop", 12, 2),
				(str_store_troop_name, 20, ":wm_player_fac_messenger_troop"),
				(troop_get_slot, reg8, ":wm_player_fac_messenger_troop", slot_troop_occupation),
				(troop_get_slot, reg9, ":wm_player_fac_messenger_troop", slot_troop_betrothed),
				(try_begin),
					(eq, "$meeting_face_model_on", 1),
					(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", ":wm_player_fac_messenger_troop"),
					(overlay_set_size, reg0, 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
				(try_end),
				(create_image_button_overlay, "$kingdom_meeting_lord_list_10", "mesh_white_plane", "mesh_white_plane"),
				(try_begin),
					(eq, "$opinion_suggester", ":wm_player_fac_messenger_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_10", ":var_7"),
				(else_try),
					(eq, ":wm_player_fac_1", ":wm_player_fac_messenger_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_10", ":var_6"),
				(else_try),
					(overlay_set_color, "$kingdom_meeting_lord_list_10", ":var_5"),
				(try_end),
				(overlay_set_alpha, "$kingdom_meeting_lord_list_10", 191),
				(overlay_set_size, "$kingdom_meeting_lord_list_10", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_lord_list_10", 1),
				(val_sub, ":value_2", ":value_3"),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_glob_s20", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(eq, "$opinion_list_10", 1),
					(create_text_overlay, reg0, "str_meeting_opinion_agree", 32772),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$opinion_list_10", 2),
					(create_text_overlay, reg0, "str_meeting_opinion_disagree", 32772),
					(overlay_set_color, reg0, 16711680),
				(else_try),
					(eq, "$opinion_list_10", 3),
					(create_text_overlay, reg0, "str_meeting_opinion_abstention", 32772),
					(overlay_set_color, reg0, 255),
				(else_try),
					(create_text_overlay, reg0, "str_empty_string", 32772),
				(try_end),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_rel_reg8", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_fief_reg9", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_lord_list_10", "str_empty_string"),
			(try_end),
			(assign, ":value", 5),
			(assign, ":value_2", 415),
			(faction_get_slot, ":wm_player_fac_prison_guard_troop", "$wm_player_fac", slot_faction_prison_guard_troop),
			(try_begin),
				(is_between, ":wm_player_fac_prison_guard_troop", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(neg|troop_slot_ge, ":wm_player_fac_prison_guard_troop", 12, 2),
				(str_store_troop_name, 21, ":wm_player_fac_prison_guard_troop"),
				(troop_get_slot, reg8, ":wm_player_fac_prison_guard_troop", slot_troop_occupation),
				(troop_get_slot, reg9, ":wm_player_fac_prison_guard_troop", slot_troop_betrothed),
				(try_begin),
					(eq, "$meeting_face_model_on", 1),
					(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", ":wm_player_fac_prison_guard_troop"),
					(overlay_set_size, reg0, 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
				(try_end),
				(create_image_button_overlay, "$kingdom_meeting_lord_list_11", "mesh_white_plane", "mesh_white_plane"),
				(try_begin),
					(eq, "$opinion_suggester", ":wm_player_fac_prison_guard_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_11", ":var_7"),
				(else_try),
					(eq, ":wm_player_fac_1", ":wm_player_fac_prison_guard_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_11", ":var_6"),
				(else_try),
					(overlay_set_color, "$kingdom_meeting_lord_list_11", ":var_5"),
				(try_end),
				(overlay_set_alpha, "$kingdom_meeting_lord_list_11", 191),
				(overlay_set_size, "$kingdom_meeting_lord_list_11", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_lord_list_11", 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_glob_s21", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(eq, "$opinion_list_11", 1),
					(create_text_overlay, reg0, "str_meeting_opinion_agree", 32772),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$opinion_list_11", 2),
					(create_text_overlay, reg0, "str_meeting_opinion_disagree", 32772),
					(overlay_set_color, reg0, 16711680),
				(else_try),
					(eq, "$opinion_list_11", 3),
					(create_text_overlay, reg0, "str_meeting_opinion_abstention", 32772),
					(overlay_set_color, reg0, 255),
				(else_try),
					(create_text_overlay, reg0, "str_empty_string", 32772),
				(try_end),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_rel_reg8", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_fief_reg9", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_lord_list_11", "str_empty_string"),
			(try_end),
			(val_add, ":value", ":var_3"),
			(faction_get_slot, ":wm_player_fac_castle_guard_troop", "$wm_player_fac", slot_faction_castle_guard_troop),
			(try_begin),
				(is_between, ":wm_player_fac_castle_guard_troop", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(neg|troop_slot_ge, ":wm_player_fac_castle_guard_troop", 12, 2),
				(str_store_troop_name, 22, ":wm_player_fac_castle_guard_troop"),
				(troop_get_slot, reg8, ":wm_player_fac_castle_guard_troop", slot_troop_occupation),
				(troop_get_slot, reg9, ":wm_player_fac_castle_guard_troop", slot_troop_betrothed),
				(try_begin),
					(eq, "$meeting_face_model_on", 1),
					(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", ":wm_player_fac_castle_guard_troop"),
					(overlay_set_size, reg0, 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
				(try_end),
				(create_image_button_overlay, "$kingdom_meeting_lord_list_12", "mesh_white_plane", "mesh_white_plane"),
				(try_begin),
					(eq, "$opinion_suggester", ":wm_player_fac_castle_guard_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_12", ":var_7"),
				(else_try),
					(eq, ":wm_player_fac_1", ":wm_player_fac_castle_guard_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_12", ":var_6"),
				(else_try),
					(overlay_set_color, "$kingdom_meeting_lord_list_12", ":var_5"),
				(try_end),
				(overlay_set_alpha, "$kingdom_meeting_lord_list_12", 191),
				(overlay_set_size, "$kingdom_meeting_lord_list_12", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_lord_list_12", 1),
				(val_sub, ":value_2", ":value_3"),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_glob_s22", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(eq, "$opinion_list_12", 1),
					(create_text_overlay, reg0, "str_meeting_opinion_agree", 32772),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$opinion_list_12", 2),
					(create_text_overlay, reg0, "str_meeting_opinion_disagree", 32772),
					(overlay_set_color, reg0, 16711680),
				(else_try),
					(eq, "$opinion_list_12", 3),
					(create_text_overlay, reg0, "str_meeting_opinion_abstention", 32772),
					(overlay_set_color, reg0, 255),
				(else_try),
					(create_text_overlay, reg0, "str_empty_string", 32772),
				(try_end),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_rel_reg8", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_fief_reg9", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_lord_list_12", "str_empty_string"),
			(try_end),
			(val_add, ":value", ":var_3"),
			(faction_get_slot, ":wm_player_fac_town_walker_male_troop", "$wm_player_fac", slot_faction_town_walker_male_troop),
			(try_begin),
				(is_between, ":wm_player_fac_town_walker_male_troop", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(neg|troop_slot_ge, ":wm_player_fac_town_walker_male_troop", 12, 2),
				(str_store_troop_name, 23, ":wm_player_fac_town_walker_male_troop"),
				(troop_get_slot, reg8, ":wm_player_fac_town_walker_male_troop", slot_troop_occupation),
				(troop_get_slot, reg9, ":wm_player_fac_town_walker_male_troop", slot_troop_betrothed),
				(try_begin),
					(eq, "$meeting_face_model_on", 1),
					(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", ":wm_player_fac_town_walker_male_troop"),
					(overlay_set_size, reg0, 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
				(try_end),
				(create_image_button_overlay, "$kingdom_meeting_lord_list_13", "mesh_white_plane", "mesh_white_plane"),
				(try_begin),
					(eq, "$opinion_suggester", ":wm_player_fac_town_walker_male_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_13", ":var_7"),
				(else_try),
					(eq, ":wm_player_fac_1", ":wm_player_fac_town_walker_male_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_13", ":var_6"),
				(else_try),
					(overlay_set_color, "$kingdom_meeting_lord_list_13", ":var_5"),
				(try_end),
				(overlay_set_alpha, "$kingdom_meeting_lord_list_13", 191),
				(overlay_set_size, "$kingdom_meeting_lord_list_13", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_lord_list_13", 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_glob_s23", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(eq, "$opinion_list_13", 1),
					(create_text_overlay, reg0, "str_meeting_opinion_agree", 32772),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$opinion_list_13", 2),
					(create_text_overlay, reg0, "str_meeting_opinion_disagree", 32772),
					(overlay_set_color, reg0, 16711680),
				(else_try),
					(eq, "$opinion_list_13", 3),
					(create_text_overlay, reg0, "str_meeting_opinion_abstention", 32772),
					(overlay_set_color, reg0, 255),
				(else_try),
					(create_text_overlay, reg0, "str_empty_string", 32772),
				(try_end),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_rel_reg8", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_fief_reg9", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_lord_list_13", "str_empty_string"),
			(try_end),
			(val_add, ":value", ":var_3"),
			(faction_get_slot, ":wm_player_fac_town_walker_female_troop", "$wm_player_fac", slot_faction_town_walker_female_troop),
			(try_begin),
				(is_between, ":wm_player_fac_town_walker_female_troop", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(neg|troop_slot_ge, ":wm_player_fac_town_walker_female_troop", 12, 2),
				(str_store_troop_name, 24, ":wm_player_fac_town_walker_female_troop"),
				(troop_get_slot, reg8, ":wm_player_fac_town_walker_female_troop", slot_troop_occupation),
				(troop_get_slot, reg9, ":wm_player_fac_town_walker_female_troop", slot_troop_betrothed),
				(try_begin),
					(eq, "$meeting_face_model_on", 1),
					(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", ":wm_player_fac_town_walker_female_troop"),
					(overlay_set_size, reg0, 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
				(try_end),
				(create_image_button_overlay, "$kingdom_meeting_lord_list_14", "mesh_white_plane", "mesh_white_plane"),
				(try_begin),
					(eq, "$opinion_suggester", ":wm_player_fac_town_walker_female_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_14", ":var_7"),
				(else_try),
					(eq, ":wm_player_fac_1", ":wm_player_fac_town_walker_female_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_14", ":var_6"),
				(else_try),
					(overlay_set_color, "$kingdom_meeting_lord_list_14", ":var_5"),
				(try_end),
				(overlay_set_alpha, "$kingdom_meeting_lord_list_14", 191),
				(overlay_set_size, "$kingdom_meeting_lord_list_14", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_lord_list_14", 1),
				(val_sub, ":value_2", ":value_3"),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_glob_s24", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(eq, "$opinion_list_14", 1),
					(create_text_overlay, reg0, "str_meeting_opinion_agree", 32772),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$opinion_list_14", 2),
					(create_text_overlay, reg0, "str_meeting_opinion_disagree", 32772),
					(overlay_set_color, reg0, 16711680),
				(else_try),
					(eq, "$opinion_list_14", 3),
					(create_text_overlay, reg0, "str_meeting_opinion_abstention", 32772),
					(overlay_set_color, reg0, 255),
				(else_try),
					(create_text_overlay, reg0, "str_empty_string", 32772),
				(try_end),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_rel_reg8", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_fief_reg9", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_lord_list_14", "str_empty_string"),
			(try_end),
			(val_add, ":value", ":var_3"),
			(faction_get_slot, ":wm_player_fac_village_walker_male_troop", "$wm_player_fac", slot_faction_village_walker_male_troop),
			(try_begin),
				(is_between, ":wm_player_fac_village_walker_male_troop", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(neg|troop_slot_ge, ":wm_player_fac_village_walker_male_troop", 12, 2),
				(str_store_troop_name, 25, ":wm_player_fac_village_walker_male_troop"),
				(troop_get_slot, reg8, ":wm_player_fac_village_walker_male_troop", slot_troop_occupation),
				(troop_get_slot, reg9, ":wm_player_fac_town_walker_female_troop", slot_troop_betrothed),
				(try_begin),
					(eq, "$meeting_face_model_on", 1),
					(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", ":wm_player_fac_village_walker_male_troop"),
					(overlay_set_size, reg0, 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
				(try_end),
				(create_image_button_overlay, "$kingdom_meeting_lord_list_15", "mesh_white_plane", "mesh_white_plane"),
				(try_begin),
					(eq, "$opinion_suggester", ":wm_player_fac_village_walker_male_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_15", ":var_7"),
				(else_try),
					(eq, ":wm_player_fac_1", ":wm_player_fac_village_walker_male_troop"),
					(overlay_set_color, "$kingdom_meeting_lord_list_15", ":var_6"),
				(else_try),
					(overlay_set_color, "$kingdom_meeting_lord_list_15", ":var_5"),
				(try_end),
				(overlay_set_alpha, "$kingdom_meeting_lord_list_15", 191),
				(overlay_set_size, "$kingdom_meeting_lord_list_15", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_lord_list_15", 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_glob_s25", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(eq, "$opinion_list_15", 1),
					(create_text_overlay, reg0, "str_meeting_opinion_agree", 32772),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$opinion_list_15", 2),
					(create_text_overlay, reg0, "str_meeting_opinion_disagree", 32772),
					(overlay_set_color, reg0, 16711680),
				(else_try),
					(eq, "$opinion_list_15", 3),
					(create_text_overlay, reg0, "str_meeting_opinion_abstention", 32772),
					(overlay_set_color, reg0, 255),
				(else_try),
					(create_text_overlay, reg0, "str_empty_string", 32772),
				(try_end),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_rel_reg8", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_meet_fief_reg9", 32772),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
				(val_add, ":value_2", ":value_3"),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_lord_list_15", "str_empty_string"),
			(try_end),
			(assign, ":value", 520),
			(assign, ":value_2", 495),
			(position_set_x, 3, 1200),
			(position_set_y, 3, 1200),
			(position_set_x, 5, 23000),
			(position_set_y, 5, 1550),
			(create_text_overlay, reg0, "str_titless", 32772),
			(overlay_set_size, reg0, 3),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 12779458),
			(overlay_set_alpha, reg0, 191),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 5),
			(val_sub, ":value_2", 30),
			(try_begin),
				(this_or_next|eq, "$meeting_title_choose", 1),
				(this_or_next|eq, "$meeting_title_choose", 2),
				(this_or_next|eq, "$meeting_title_choose", 3),
				(eq, "$meeting_title_choose", 4),
				(this_or_next|is_between, "$meeting_target_number", "fac_pioneers", "fac_undeads"),
				(is_between, "$meeting_target_number", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 27, "$meeting_target_number"),
			(else_try),
				(eq, "$meeting_title_choose", 5),
				(is_between, "$meeting_target_number", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 27, "$meeting_target_number"),
			(else_try),
				(eq, "$meeting_title_choose", 6),
				(is_between, "$meeting_target_number", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 27, "$meeting_target_number"),
			(else_try),
				(eq, "$meeting_title_choose", 7),
				(try_begin),
					(eq, "$meeting_target_number", 1),
					(str_store_string, 27, "str_text_policy_1"),
				(else_try),
					(eq, "$meeting_target_number", 2),
					(str_store_string, 27, "str_text_policy_2"),
				(else_try),
					(eq, "$meeting_target_number", 3),
					(str_store_string, 27, "str_text_policy_3"),
				(else_try),
					(eq, "$meeting_target_number", 4),
					(str_store_string, 27, "str_text_policy_4"),
				(else_try),
					(eq, "$meeting_target_number", 5),
					(str_store_string, 27, "str_text_policy_5"),
				(else_try),
					(eq, "$meeting_target_number", 6),
					(str_store_string, 27, "str_text_policy_6"),
				(else_try),
					(eq, "$meeting_target_number", 7),
					(str_store_string, 27, "str_text_policy_7"),
				(try_end),
			(else_try),
				(eq, "$meeting_title_choose", 8),
				(str_store_string, 27, "str_empty_string"),
			(try_end),
			(create_text_overlay, reg0, "str_targetss", 32772),
			(overlay_set_size, reg0, 3),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 12779458),
			(overlay_set_alpha, reg0, 191),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 5),
			(val_sub, ":value_2", 30),
			(str_store_troop_name, 28, "$opinion_suggester"),
			(create_text_overlay, reg0, "str_suggesterss", 32772),
			(overlay_set_size, reg0, 3),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 12779458),
			(overlay_set_alpha, reg0, 191),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 5),
			(assign, ":value", 25),
			(assign, ":value_2", 150),
			(create_text_overlay, reg0, "str_glob_s29", 2052),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 12183423),
			(overlay_set_alpha, reg0, 191),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 23000),
			(position_set_y, 1, 5500),
			(overlay_set_size, reg0, 1),
			(assign, ":value", 780),
			(assign, ":value_2", 390),
			(position_set_x, 3, 1000),
			(position_set_y, 3, 1000),
			(position_set_x, 5, 10000),
			(position_set_y, 5, 1250),
			(position_set_x, 4, 1200),
			(position_set_y, 4, 1200),
			(position_set_x, 6, 10000),
			(position_set_y, 6, 1700),
			(assign, ":value_3", 25),
			(try_begin),
				(neq, "$meeting_suggest_already", 1),
				(create_text_overlay, reg0, "str_title_list", 32772),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 15395169),
				(overlay_set_alpha, reg0, 191),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 6),
				(val_sub, ":value_2", 40),
				(create_button_overlay, "$kingdom_meeting_title_war", "str_meeting_title_war"),
				(overlay_set_size, "$kingdom_meeting_title_war", 3),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_title_war", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 13092807),
				(overlay_set_alpha, reg0, 191),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 5),
				(val_sub, ":value_2", ":value_3"),
				(create_button_overlay, "$kingdom_meeting_title_peace", "str_meeting_title_peace"),
				(overlay_set_size, "$kingdom_meeting_title_peace", 3),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_title_peace", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 13092807),
				(overlay_set_alpha, reg0, 191),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 5),
				(val_sub, ":value_2", ":value_3"),
				(create_button_overlay, "$kingdom_meeting_title_nonagg", "str_meeting_title_nonagg"),
				(overlay_set_size, "$kingdom_meeting_title_nonagg", 3),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_title_nonagg", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 13092807),
				(overlay_set_alpha, reg0, 191),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 5),
				(val_sub, ":value_2", ":value_3"),
				(create_button_overlay, "$kingdom_meeting_title_alliance", "str_meeting_title_alliance"),
				(overlay_set_size, "$kingdom_meeting_title_alliance", 3),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_title_alliance", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 13092807),
				(overlay_set_alpha, reg0, 191),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 5),
				(val_sub, ":value_2", ":value_3"),
				(create_button_overlay, "$kingdom_meeting_title_fief", "str_meeting_title_fief"),
				(overlay_set_size, "$kingdom_meeting_title_fief", 3),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_title_fief", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 13092807),
				(overlay_set_alpha, reg0, 191),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 5),
				(val_sub, ":value_2", ":value_3"),
				(create_button_overlay, "$kingdom_meeting_title_banishment", "str_meeting_title_banishment"),
				(overlay_set_size, "$kingdom_meeting_title_banishment", 3),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_title_banishment", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 13092807),
				(overlay_set_alpha, reg0, 191),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 5),
				(val_sub, ":value_2", ":value_3"),
				(create_button_overlay, "$kingdom_meeting_title_formulate", "str_meeting_title_formulate"),
				(overlay_set_size, "$kingdom_meeting_title_formulate", 3),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_title_formulate", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 13092807),
				(overlay_set_alpha, reg0, 191),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 5),
				(val_sub, ":value_2", ":value_3"),
				(create_button_overlay, "$kingdom_meeting_title_attack", "str_meeting_title_attack"),
				(overlay_set_size, "$kingdom_meeting_title_attack", 3),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_title_attack", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 13092807),
				(overlay_set_alpha, reg0, 191),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 5),
				(assign, ":value", 520),
				(assign, ":value_2", 390),
				(position_set_x, 3, 1000),
				(position_set_y, 3, 1000),
				(position_set_x, 5, 12500),
				(position_set_y, 5, 1250),
				(position_set_x, 4, 1200),
				(position_set_y, 4, 1200),
				(position_set_x, 6, 12500),
				(position_set_y, 6, 1700),
				(assign, ":value_3", 25),
				(create_text_overlay, reg0, "str_targetlist", 32772),
				(overlay_set_size, reg0, 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 16719704),
				(overlay_set_alpha, reg0, 191),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 6),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(is_between, "$meeting_title_choose", 1, 7),
					(neq, "$temp_save_number11_1", -1),
					(try_begin),
						(this_or_next|eq, "$meeting_title_choose", 1),
						(this_or_next|eq, "$meeting_title_choose", 2),
						(this_or_next|eq, "$meeting_title_choose", 3),
						(eq, "$meeting_title_choose", 4),
						(str_store_faction_name, 31, "$temp_save_number11_1"),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(str_store_party_name, 31, "$temp_save_number11_1"),
					(else_try),
						(eq, "$meeting_title_choose", 6),
						(str_store_troop_name, 31, "$temp_save_number11_1"),
					(try_end),
					(create_button_overlay, "$kingdom_meeting_target_1", "str_glob_s31"),
					(overlay_set_size, "$kingdom_meeting_target_1", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_target_1", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_target_1", "str_empty_string"),
				(try_end),
				(try_begin),
					(eq, "$meeting_title_choose", 7),
					(try_begin),
						(eq, "$meeting_title_choose", 7),
						(faction_slot_eq, "$wm_player_fac", slot_faction_ai_rationale, 0),
						(create_button_overlay, "$kingdom_meeting_policy_slave_free", "str_text_policy_12"),
					(else_try),
						(eq, "$meeting_title_choose", 7),
						(faction_slot_eq, "$wm_player_fac", slot_faction_ai_rationale, 1),
						(create_button_overlay, "$kingdom_meeting_policy_slave_free", "str_text_policy_11"),
					(try_end),
					(overlay_set_size, "$kingdom_meeting_policy_slave_free", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_policy_slave_free", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_policy_slave_free", "str_empty_string"),
				(try_end),
				(try_begin),
					(eq, "$meeting_title_choose", 8),
					(is_between, "$rt_marked_target", "p_pyongyang", "p_place_end"),
					(store_faction_of_party, ":faction_of_party_rt_marked_target", "$rt_marked_target"),
					(neq, ":faction_of_party_rt_marked_target", "$wm_player_fac"),
					(store_relation, ":relation_faction_of_party_rt_marked_target_wm_player_fac", ":faction_of_party_rt_marked_target", "$wm_player_fac"),
					(lt, ":relation_faction_of_party_rt_marked_target_wm_player_fac", 0),
					(str_store_party_name, 3, "$rt_marked_target"),
					(create_button_overlay, "$kingdom_meeting_siege_attack", "str_siege_targett"),
					(overlay_set_size, "$kingdom_meeting_siege_attack", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_siege_attack", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_siege_attack", "str_empty_string"),
				(try_end),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(is_between, "$meeting_title_choose", 1, 7),
					(neq, "$temp_save_number11_2", -1),
					(try_begin),
						(this_or_next|eq, "$meeting_title_choose", 1),
						(this_or_next|eq, "$meeting_title_choose", 2),
						(this_or_next|eq, "$meeting_title_choose", 3),
						(eq, "$meeting_title_choose", 4),
						(str_store_faction_name, 32, "$temp_save_number11_2"),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(str_store_party_name, 32, "$temp_save_number11_2"),
					(else_try),
						(eq, "$meeting_title_choose", 6),
						(str_store_troop_name, 32, "$temp_save_number11_2"),
					(try_end),
					(create_button_overlay, "$kingdom_meeting_target_2", "str_glob_s32"),
					(overlay_set_size, "$kingdom_meeting_target_2", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_target_2", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_target_2", "str_empty_string"),
				(try_end),
				(try_begin),
					(eq, "$meeting_title_choose", 7),
					(try_begin),
						(eq, "$meeting_title_choose", 7),
						(faction_slot_eq, "$wm_player_fac", 7, 0),
						(create_button_overlay, "$kingdom_meeting_policy_economy", "str_text_policy_22"),
					(else_try),
						(eq, "$meeting_title_choose", 7),
						(faction_slot_eq, "$wm_player_fac", 7, 1),
						(create_button_overlay, "$kingdom_meeting_policy_economy", "str_text_policy_21"),
					(try_end),
					(overlay_set_size, "$kingdom_meeting_policy_economy", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_policy_economy", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_policy_economy", "str_empty_string"),
				(try_end),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(is_between, "$meeting_title_choose", 1, 7),
					(neq, "$temp_save_number11_3", -1),
					(try_begin),
						(this_or_next|eq, "$meeting_title_choose", 1),
						(this_or_next|eq, "$meeting_title_choose", 2),
						(this_or_next|eq, "$meeting_title_choose", 3),
						(eq, "$meeting_title_choose", 4),
						(str_store_faction_name, 33, "$temp_save_number11_3"),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(str_store_party_name, 33, "$temp_save_number11_3"),
					(else_try),
						(eq, "$meeting_title_choose", 6),
						(str_store_troop_name, 33, "$temp_save_number11_3"),
					(try_end),
					(create_button_overlay, "$kingdom_meeting_target_3", "str_glob_s33"),
					(overlay_set_size, "$kingdom_meeting_target_3", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_target_3", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_target_3", "str_empty_string"),
				(try_end),
				(try_begin),
					(eq, "$meeting_title_choose", 7),
					(try_begin),
						(eq, "$meeting_title_choose", 7),
						(faction_slot_eq, "$wm_player_fac", slot_faction_marshall, 0),
						(create_button_overlay, "$kingdom_meeting_policy_military", "str_text_policy_32"),
					(else_try),
						(eq, "$meeting_title_choose", 7),
						(faction_slot_eq, "$wm_player_fac", slot_faction_marshall, 1),
						(create_button_overlay, "$kingdom_meeting_policy_military", "str_text_policy_31"),
					(try_end),
					(overlay_set_size, "$kingdom_meeting_policy_military", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_policy_military", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_policy_military", "str_empty_string"),
				(try_end),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(is_between, "$meeting_title_choose", 1, 7),
					(neq, "$temp_save_number11_4", -1),
					(try_begin),
						(this_or_next|eq, "$meeting_title_choose", 1),
						(this_or_next|eq, "$meeting_title_choose", 2),
						(this_or_next|eq, "$meeting_title_choose", 3),
						(eq, "$meeting_title_choose", 4),
						(str_store_faction_name, 34, "$temp_save_number11_4"),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(str_store_party_name, 34, "$temp_save_number11_4"),
					(else_try),
						(eq, "$meeting_title_choose", 6),
						(str_store_troop_name, 34, "$temp_save_number11_4"),
					(try_end),
					(create_button_overlay, "$kingdom_meeting_target_4", "str_glob_s34"),
					(overlay_set_size, "$kingdom_meeting_target_4", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_target_4", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_target_4", "str_empty_string"),
				(try_end),
				(try_begin),
					(eq, "$meeting_title_choose", 7),
					(create_button_overlay, "$kingdom_meeting_special_tax", "str_text_policy_4"),
					(overlay_set_size, "$kingdom_meeting_special_tax", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_special_tax", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_special_tax", "str_empty_string"),
				(try_end),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(is_between, "$meeting_title_choose", 1, 7),
					(neq, "$temp_save_number11_5", -1),
					(try_begin),
						(this_or_next|eq, "$meeting_title_choose", 1),
						(this_or_next|eq, "$meeting_title_choose", 2),
						(this_or_next|eq, "$meeting_title_choose", 3),
						(eq, "$meeting_title_choose", 4),
						(str_store_faction_name, 35, "$temp_save_number11_5"),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(str_store_party_name, 35, "$temp_save_number11_5"),
					(else_try),
						(eq, "$meeting_title_choose", 6),
						(str_store_troop_name, 35, "$temp_save_number11_5"),
					(try_end),
					(create_button_overlay, "$kingdom_meeting_target_5", "str_glob_s35"),
					(overlay_set_size, "$kingdom_meeting_target_5", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_target_5", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_target_5", "str_empty_string"),
				(try_end),
				(try_begin),
					(eq, "$meeting_title_choose", 7),
					(create_button_overlay, "$kingdom_meeting_special_conscription", "str_text_policy_5"),
					(overlay_set_size, "$kingdom_meeting_special_conscription", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_special_conscription", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_special_conscription", "str_empty_string"),
				(try_end),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(is_between, "$meeting_title_choose", 1, 7),
					(neq, "$temp_save_number11_6", -1),
					(try_begin),
						(this_or_next|eq, "$meeting_title_choose", 1),
						(this_or_next|eq, "$meeting_title_choose", 2),
						(this_or_next|eq, "$meeting_title_choose", 3),
						(eq, "$meeting_title_choose", 4),
						(str_store_faction_name, 36, "$temp_save_number11_6"),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(str_store_party_name, 36, "$temp_save_number11_6"),
					(else_try),
						(eq, "$meeting_title_choose", 6),
						(str_store_troop_name, 36, "$temp_save_number11_6"),
					(try_end),
					(create_button_overlay, "$kingdom_meeting_target_6", "str_glob_s36"),
					(overlay_set_size, "$kingdom_meeting_target_6", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_target_6", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_target_6", "str_empty_string"),
				(try_end),
				(try_begin),
					(eq, "$meeting_title_choose", 7),
					(create_button_overlay, "$kingdom_meeting_festival", "str_text_policy_6"),
					(overlay_set_size, "$kingdom_meeting_festival", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_festival", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_festival", "str_empty_string"),
				(try_end),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(is_between, "$meeting_title_choose", 1, 7),
					(neq, "$temp_save_number11_7", -1),
					(try_begin),
						(this_or_next|eq, "$meeting_title_choose", 1),
						(this_or_next|eq, "$meeting_title_choose", 2),
						(this_or_next|eq, "$meeting_title_choose", 3),
						(eq, "$meeting_title_choose", 4),
						(str_store_faction_name, 37, "$temp_save_number11_7"),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(str_store_party_name, 37, "$temp_save_number11_7"),
					(else_try),
						(eq, "$meeting_title_choose", 6),
						(str_store_troop_name, 37, "$temp_save_number11_7"),
					(try_end),
					(create_button_overlay, "$kingdom_meeting_target_7", "str_glob_s37"),
					(overlay_set_size, "$kingdom_meeting_target_7", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_target_7", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_target_7", "str_empty_string"),
				(try_end),
				(try_begin),
					(eq, "$meeting_title_choose", 7),
					(is_between, "$rt_marked_target", "p_pyongyang", "p_place_end"),
					(store_faction_of_party, ":faction_of_party_rt_marked_target", "$rt_marked_target"),
					(eq, ":faction_of_party_rt_marked_target", "$wm_player_fac"),
					(faction_get_slot, ":wm_player_fac_29", "$wm_player_fac", 29),
					(neq, ":wm_player_fac_29", "$rt_marked_target"),
					(create_button_overlay, "$kingdom_meeting_capital_move", "str_text_policy_7"),
					(overlay_set_size, "$kingdom_meeting_capital_move", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_capital_move", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_capital_move", "str_empty_string"),
				(try_end),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(is_between, "$meeting_title_choose", 1, 7),
					(neq, "$temp_save_number11_8", -1),
					(try_begin),
						(this_or_next|eq, "$meeting_title_choose", 1),
						(this_or_next|eq, "$meeting_title_choose", 2),
						(this_or_next|eq, "$meeting_title_choose", 3),
						(eq, "$meeting_title_choose", 4),
						(str_store_faction_name, 38, "$temp_save_number11_8"),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(str_store_party_name, 38, "$temp_save_number11_8"),
					(else_try),
						(eq, "$meeting_title_choose", 6),
						(str_store_troop_name, 38, "$temp_save_number11_8"),
					(try_end),
					(create_button_overlay, "$kingdom_meeting_target_8", "str_glob_s38"),
					(overlay_set_size, "$kingdom_meeting_target_8", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_target_8", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_target_8", "str_empty_string"),
				(try_end),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(is_between, "$meeting_title_choose", 1, 7),
					(neq, "$temp_save_number11_9", -1),
					(try_begin),
						(this_or_next|eq, "$meeting_title_choose", 1),
						(this_or_next|eq, "$meeting_title_choose", 2),
						(this_or_next|eq, "$meeting_title_choose", 3),
						(eq, "$meeting_title_choose", 4),
						(str_store_faction_name, 39, "$temp_save_number11_9"),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(str_store_party_name, 39, "$temp_save_number11_9"),
					(else_try),
						(eq, "$meeting_title_choose", 6),
						(str_store_troop_name, 39, "$temp_save_number11_9"),
					(try_end),
					(create_button_overlay, "$kingdom_meeting_target_9", "str_glob_s39"),
					(overlay_set_size, "$kingdom_meeting_target_9", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_target_9", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_target_9", "str_empty_string"),
				(try_end),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(is_between, "$meeting_title_choose", 1, 7),
					(neq, "$temp_save_number11_10", -1),
					(try_begin),
						(this_or_next|eq, "$meeting_title_choose", 1),
						(this_or_next|eq, "$meeting_title_choose", 2),
						(this_or_next|eq, "$meeting_title_choose", 3),
						(eq, "$meeting_title_choose", 4),
						(str_store_faction_name, 40, "$temp_save_number11_10"),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(str_store_party_name, 40, "$temp_save_number11_10"),
					(else_try),
						(eq, "$meeting_title_choose", 6),
						(str_store_troop_name, 40, "$temp_save_number11_10"),
					(try_end),
					(create_button_overlay, "$kingdom_meeting_target_10", "str_glob_s40"),
					(overlay_set_size, "$kingdom_meeting_target_10", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_target_10", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_target_10", "str_empty_string"),
				(try_end),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(is_between, "$meeting_title_choose", 1, 7),
					(neq, "$temp_save_number11_11", -1),
					(try_begin),
						(this_or_next|eq, "$meeting_title_choose", 1),
						(this_or_next|eq, "$meeting_title_choose", 2),
						(this_or_next|eq, "$meeting_title_choose", 3),
						(eq, "$meeting_title_choose", 4),
						(str_store_faction_name, 41, "$temp_save_number11_11"),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(str_store_party_name, 41, "$temp_save_number11_11"),
					(else_try),
						(eq, "$meeting_title_choose", 6),
						(str_store_troop_name, 41, "$temp_save_number11_11"),
					(try_end),
					(create_button_overlay, "$kingdom_meeting_target_11", "str_glob_s41"),
					(overlay_set_size, "$kingdom_meeting_target_11", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_target_11", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_target_11", "str_empty_string"),
				(try_end),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(is_between, "$meeting_title_choose", 1, 7),
					(neq, "$temp_save_number11_12", -1),
					(try_begin),
						(this_or_next|eq, "$meeting_title_choose", 1),
						(this_or_next|eq, "$meeting_title_choose", 2),
						(this_or_next|eq, "$meeting_title_choose", 3),
						(eq, "$meeting_title_choose", 4),
						(str_store_faction_name, 42, "$temp_save_number11_12"),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(str_store_party_name, 42, "$temp_save_number11_12"),
					(else_try),
						(eq, "$meeting_title_choose", 6),
						(str_store_troop_name, 42, "$temp_save_number11_12"),
					(try_end),
					(create_button_overlay, "$kingdom_meeting_target_12", "str_glob_s42"),
					(overlay_set_size, "$kingdom_meeting_target_12", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_target_12", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_target_12", "str_empty_string"),
				(try_end),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(is_between, "$meeting_title_choose", 1, 7),
					(neq, "$temp_save_number11_13", -1),
					(try_begin),
						(this_or_next|eq, "$meeting_title_choose", 1),
						(this_or_next|eq, "$meeting_title_choose", 2),
						(this_or_next|eq, "$meeting_title_choose", 3),
						(eq, "$meeting_title_choose", 4),
						(str_store_faction_name, 43, "$temp_save_number11_13"),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(str_store_party_name, 43, "$temp_save_number11_13"),
					(else_try),
						(eq, "$meeting_title_choose", 6),
						(str_store_troop_name, 43, "$temp_save_number11_13"),
					(try_end),
					(create_button_overlay, "$kingdom_meeting_target_13", "str_glob_s43"),
					(overlay_set_size, "$kingdom_meeting_target_13", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_target_13", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_target_13", "str_empty_string"),
				(try_end),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(is_between, "$meeting_title_choose", 1, 7),
					(neq, "$temp_save_number11_14", -1),
					(try_begin),
						(this_or_next|eq, "$meeting_title_choose", 1),
						(this_or_next|eq, "$meeting_title_choose", 2),
						(this_or_next|eq, "$meeting_title_choose", 3),
						(eq, "$meeting_title_choose", 4),
						(str_store_faction_name, 44, "$temp_save_number11_14"),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(str_store_party_name, 44, "$temp_save_number11_14"),
					(else_try),
						(eq, "$meeting_title_choose", 6),
						(str_store_troop_name, 44, "$temp_save_number11_14"),
					(try_end),
					(create_button_overlay, "$kingdom_meeting_target_14", "str_glob_s44"),
					(overlay_set_size, "$kingdom_meeting_target_14", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_target_14", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_target_14", "str_empty_string"),
				(try_end),
				(val_sub, ":value_2", ":value_3"),
				(try_begin),
					(is_between, "$meeting_title_choose", 1, 7),
					(neq, "$temp_save_number11_15", -1),
					(try_begin),
						(this_or_next|eq, "$meeting_title_choose", 1),
						(this_or_next|eq, "$meeting_title_choose", 2),
						(this_or_next|eq, "$meeting_title_choose", 3),
						(eq, "$meeting_title_choose", 4),
						(str_store_faction_name, 45, "$temp_save_number11_15"),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(str_store_party_name, 45, "$temp_save_number11_15"),
					(else_try),
						(eq, "$meeting_title_choose", 6),
						(str_store_troop_name, 45, "$temp_save_number11_15"),
					(try_end),
					(create_button_overlay, "$kingdom_meeting_target_15", "str_glob_s45"),
					(overlay_set_size, "$kingdom_meeting_target_15", 3),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, "$kingdom_meeting_target_15", 1),
					(create_mesh_overlay, reg0, "mesh_white_plane"),
					(overlay_set_color, reg0, 13092807),
					(overlay_set_alpha, reg0, 191),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 5),
				(else_try),
					(create_text_overlay, "$kingdom_meeting_target_15", "str_empty_string"),
				(try_end),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_title_war", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_title_peace", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_title_nonagg", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_title_alliance", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_title_fief", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_title_banishment", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_title_formulate", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_title_attack", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_policy_slave_free", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_siege_attack", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_policy_economy", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_policy_military", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_special_tax", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_special_conscription", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_festival", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_target_1", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_target_2", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_target_3", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_target_4", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_target_5", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_target_6", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_target_7", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_target_8", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_target_9", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_target_10", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_target_11", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_target_12", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_target_13", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_target_14", "str_empty_string"),
				(create_text_overlay, "$kingdom_meeting_target_15", "str_empty_string"),
			(try_end),
			(assign, ":value", 850),
			(assign, ":value_2", 90),
			(try_begin),
				(eq, "$opinion_conclude_result", 2),
				(assign, ":value_4", "str_meeting_denied"),
				(assign, ":value_5", 16711680),
			(else_try),
				(assign, ":value_4", "str_return_butt"),
				(assign, ":value_5", 16777215),
			(try_end),
			(try_begin),
				(neq, "$opinion_conclude_result", 1),
				(create_in_game_button_overlay, "$kingdom_meeting_exit", ":value_4"),
				(overlay_set_color, "$kingdom_meeting_exit", ":value_5"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_exit", 1),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_exit", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$opinion_conclude_result", 1),
				(create_in_game_button_overlay, "$kingdom_meeting_execute", "str_executee"),
				(overlay_set_color, "$kingdom_meeting_execute", 16776960),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_execute", 1),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_execute", "str_empty_string"),
			(try_end),
			(val_sub, ":value", 190),
			(try_begin),
				(neq, "$meeting_target_number", -1),
				(neq, "$meeting_suggest_already", 1),
				(create_in_game_button_overlay, "$kingdom_meeting_suggest", "str_suggestt"),
				(overlay_set_color, "$kingdom_meeting_suggest", 16777215),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_suggest", 1),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_suggest", "str_empty_string"),
			(try_end),
			(val_sub, ":value_2", 37),
			(try_begin),
				(eq, "$opinion_conclude_result", 2),
				(faction_slot_eq, "$wm_player_fac", slot_faction_ai_object, 0),
				(faction_slot_eq, "$wm_player_fac", 1, "trp_player"),
				(create_in_game_button_overlay, "$kingdom_meeting_enforcement", "str_enforcementt"),
				(overlay_set_color, "$kingdom_meeting_enforcement", 16777215),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$kingdom_meeting_enforcement", 1),
			(else_try),
				(create_text_overlay, "$kingdom_meeting_enforcement", "str_empty_string"),
			(try_end),
			(assign, ":value", 130),
			(try_begin),
				(eq, "$persuasion_or_bribe", 1),
				(create_in_game_button_overlay, "$kingdom_meeting_persuasion_or_bribe", "str_persuasionn"),
			(else_try),
				(create_in_game_button_overlay, "$kingdom_meeting_persuasion_or_bribe", "str_bribee"),
			(try_end),
			(overlay_set_color, "$kingdom_meeting_persuasion_or_bribe", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$kingdom_meeting_persuasion_or_bribe", 1),
			(val_add, ":value_2", 37),
			(troop_get_slot, reg8, "trp_player", slot_troop_age_appearance),
			(create_in_game_button_overlay, "$kingdom_meeting_contribution", "str_meet_contribution"),
			(overlay_set_color, "$kingdom_meeting_contribution", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$kingdom_meeting_contribution", 1),
			(val_sub, ":value_2", 37),
			(val_sub, ":value_2", 37),
			(try_begin),
				(eq, "$meeting_face_model_on", 1),
				(create_in_game_button_overlay, "$kingdom_meeting_face_model", "str_model_on"),
			(else_try),
				(create_in_game_button_overlay, "$kingdom_meeting_face_model", "str_model_off"),
			(try_end),
			(overlay_set_color, "$kingdom_meeting_face_model", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$kingdom_meeting_face_model", 1),
			(val_add, ":value", 190),
			(try_begin),
				(eq, "$meeting_popup_auto", 1),
				(create_in_game_button_overlay, "$kingdom_meeting_auto_popup", "str_autopopup_on"),
			(else_try),
				(create_in_game_button_overlay, "$kingdom_meeting_auto_popup", "str_autopopup_off"),
			(try_end),
			(overlay_set_color, "$kingdom_meeting_auto_popup", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$kingdom_meeting_auto_popup", 1),
			(val_add, ":value_2", 37),
			(faction_get_slot, reg8, "$wm_player_fac", slot_faction_ai_offensive_max_followers),
			(create_in_game_button_overlay, "$kingdom_meeting_culture_point", "str_meet_culture_point"),
			(overlay_set_color, "$kingdom_meeting_culture_point", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$kingdom_meeting_culture_point", 1),
			(val_add, ":value_2", 37),
			(create_in_game_button_overlay, "$faction_info_donate", "str_contribute_money"),
			(overlay_set_color, "$faction_info_donate", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$faction_info_donate", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$kingdom_meeting_exit"),
				(str_clear, 20),
				(str_clear, 21),
				(str_clear, 22),
				(str_clear, 23),
				(str_clear, 24),
				(str_clear, 25),
				(str_clear, 26),
				(str_clear, 27),
				(str_clear, 28),
				(str_clear, 29),
				(str_clear, 30),
				(str_clear, 31),
				(str_clear, 32),
				(str_clear, 33),
				(str_clear, 34),
				(try_begin),
					(eq, "$opinion_list_1", 1),
					(is_between, "$opinion_suggester", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(call_script, "script_change_player_relation_with_troop", "$opinion_suggester", 10),
				(else_try),
					(eq, "$opinion_list_1", 2),
					(is_between, "$opinion_suggester", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(store_mul, ":value", 10, -1),
					(call_script, "script_change_player_relation_with_troop", "$opinion_suggester", ":value"),
				(try_end),
				(call_script, "script_opinion_list_glob_reset"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_title_war"),
				(assign, "$meeting_title_choose", 1),
				(assign, "$meeting_target_number", -1),
				(call_script, "script_opinion_list_glob_reset"),
				(str_store_string, 26, "str_dip_text_war"),
				(call_script, "script_check_faction_army_power_and_food"),
				(call_script, "script_check_faction_border_faction"),
				(call_script, "script_temp_save_number11_initialize"),
				(try_for_range, ":number", 31, 40),
					(faction_get_slot, ":wm_player_fac_number", "$wm_player_fac", ":number"),
					(this_or_next|is_between, ":wm_player_fac_number", "fac_pioneers", "fac_undeads"),
					(is_between, ":wm_player_fac_number", "fac_kingdom_1", "fac_kingdoms_end"),
					(neq, ":wm_player_fac_number", "$wm_player_fac"),
					(store_relation, ":relation_wm_player_fac_number_wm_player_fac", ":wm_player_fac_number", "$wm_player_fac"),
					(is_between, ":relation_wm_player_fac_number_wm_player_fac", 0, 5),
					(call_script, "script_temp_save_number11_inject", ":wm_player_fac_number"),
				(try_end),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_title_peace"),
				(assign, "$meeting_title_choose", 2),
				(assign, "$meeting_target_number", -1),
				(call_script, "script_opinion_list_glob_reset"),
				(str_store_string, 26, "str_dip_text_peace"),
				(call_script, "script_check_faction_army_power_and_food"),
				(call_script, "script_check_faction_border_faction"),
				(call_script, "script_temp_save_number11_initialize"),
				(try_for_range, ":number", 31, 40),
					(faction_get_slot, ":wm_player_fac_number", "$wm_player_fac", ":number"),
					(this_or_next|is_between, ":wm_player_fac_number", "fac_pioneers", "fac_undeads"),
					(is_between, ":wm_player_fac_number", "fac_kingdom_1", "fac_kingdoms_end"),
					(neq, ":wm_player_fac_number", "$wm_player_fac"),
					(store_relation, ":relation_wm_player_fac_number_wm_player_fac", ":wm_player_fac_number", "$wm_player_fac"),
					(lt, ":relation_wm_player_fac_number_wm_player_fac", 0),
					(call_script, "script_temp_save_number11_inject", ":wm_player_fac_number"),
				(try_end),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_title_nonagg"),
				(assign, "$meeting_title_choose", 3),
				(assign, "$meeting_target_number", -1),
				(call_script, "script_opinion_list_glob_reset"),
				(str_store_string, 26, "str_dip_text_nonag"),
				(call_script, "script_check_faction_army_power_and_food"),
				(call_script, "script_check_faction_border_faction"),
				(call_script, "script_temp_save_number11_initialize"),
				(try_for_range, ":number", 31, 40),
					(faction_get_slot, ":wm_player_fac_number", "$wm_player_fac", ":number"),
					(this_or_next|is_between, ":wm_player_fac_number", "fac_pioneers", "fac_undeads"),
					(is_between, ":wm_player_fac_number", "fac_kingdom_1", "fac_kingdoms_end"),
					(neq, ":wm_player_fac_number", "$wm_player_fac"),
					(store_relation, ":relation_wm_player_fac_number_wm_player_fac", ":wm_player_fac_number", "$wm_player_fac"),
					(is_between, ":relation_wm_player_fac_number_wm_player_fac", 0, 5),
					(call_script, "script_temp_save_number11_inject", ":wm_player_fac_number"),
				(try_end),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_title_alliance"),
				(assign, "$meeting_title_choose", 4),
				(assign, "$meeting_target_number", -1),
				(call_script, "script_opinion_list_glob_reset"),
				(str_store_string, 26, "str_dip_text_alli"),
				(call_script, "script_check_faction_army_power_and_food"),
				(call_script, "script_check_faction_border_faction"),
				(call_script, "script_temp_save_number11_initialize"),
				(try_for_range, ":number", 31, 40),
					(faction_get_slot, ":wm_player_fac_number", "$wm_player_fac", ":number"),
					(this_or_next|is_between, ":wm_player_fac_number", "fac_pioneers", "fac_undeads"),
					(is_between, ":wm_player_fac_number", "fac_kingdom_1", "fac_kingdoms_end"),
					(neq, ":wm_player_fac_number", "$wm_player_fac"),
					(store_relation, ":relation_wm_player_fac_number_wm_player_fac", ":wm_player_fac_number", "$wm_player_fac"),
					(is_between, ":relation_wm_player_fac_number_wm_player_fac", 0, 31),
					(call_script, "script_temp_save_number11_inject", ":wm_player_fac_number"),
				(try_end),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_title_fief"),
				(assign, "$meeting_title_choose", 5),
				(assign, "$meeting_target_number", -1),
				(call_script, "script_opinion_list_glob_reset"),
				(str_store_string, 26, "str_meeting_title_fief"),
				(call_script, "script_temp_save_number11_initialize"),
				(call_script, "script_wm_lord_count_own_place"),
				(try_for_range, ":party", "p_pyongyang", "p_place_end"),
					(store_faction_of_party, ":faction_of_party_party", ":party"),
					(eq, ":faction_of_party_party", "$wm_player_fac"),
					(party_get_slot, ":party_town_tavern", ":party", slot_town_tavern),
					(store_faction_of_troop, ":faction_of_troop_party_town_tavern", ":party_town_tavern"),
					(troop_get_slot, ":party_town_tavern_wealth", ":party_town_tavern", slot_troop_wealth),
					(assign, ":value_2", 0),
					(try_begin),
						(neg|is_between, ":party_town_tavern", "trp_tt_lord_01_00", "trp_tt_lord_end"),
						(assign, ":value_2", 1),
					(try_end),
					(try_begin),
						(eq, ":party_town_tavern", "trp_player"),
						(eq, ":party_town_tavern_wealth", "p_main_party"),
						(assign, ":value_2", 0),
					(try_end),
					(try_begin),
						(neq, ":faction_of_troop_party_town_tavern", ":faction_of_party_party"),
						(assign, ":value_2", 1),
					(try_end),
					(try_begin),
						(eq, ":value_2", 1),
						(call_script, "script_temp_save_number11_inject", ":party"),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_title_banishment"),
				(assign, "$meeting_title_choose", 6),
				(assign, "$meeting_target_number", -1),
				(call_script, "script_opinion_list_glob_reset"),
				(str_store_string, 26, "str_banishmentt"),
				(call_script, "script_temp_save_number11_initialize"),
				(try_for_range, ":number", 41, 56),
					(faction_get_slot, ":wm_player_fac_number_2", "$wm_player_fac", ":number"),
					(is_between, ":wm_player_fac_number_2", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(store_faction_of_troop, ":faction_of_troop_wm_player_fac_number_2", ":wm_player_fac_number_2"),
					(eq, ":faction_of_troop_wm_player_fac_number_2", "$wm_player_fac"),
					(neg|faction_slot_eq, "$wm_player_fac", 1, ":wm_player_fac_number_2"),
					(call_script, "script_temp_save_number11_inject", ":wm_player_fac_number_2"),
				(try_end),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_title_formulate"),
				(assign, "$meeting_title_choose", 7),
				(assign, "$meeting_target_number", -1),
				(call_script, "script_opinion_list_glob_reset"),
				(str_store_string, 26, "str_formulate_policy"),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_title_attack"),
				(assign, "$meeting_title_choose", 8),
				(assign, "$meeting_target_number", -1),
				(call_script, "script_opinion_list_glob_reset"),
				(str_store_string, 26, "str_attackkkk"),
				(try_begin),
					(is_between, "$rt_marked_target", "p_pyongyang", "p_place_end"),
					(store_faction_of_party, ":faction_of_party_rt_marked_target", "$rt_marked_target"),
					(neq, ":faction_of_party_rt_marked_target", "$wm_player_fac"),
					(store_relation, ":relation_faction_of_party_rt_marked_target_wm_player_fac", ":faction_of_party_rt_marked_target", "$wm_player_fac"),
					(lt, ":relation_faction_of_party_rt_marked_target_wm_player_fac", 0),
				(else_try),
					(display_message, "str_need_mapmarker"),
				(try_end),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_target_1"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_target_2"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_target_3"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_target_4"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_target_5"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_target_6"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_target_7"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_target_8"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_target_9"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_target_10"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_target_11"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_target_12"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_target_13"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_target_14"),
				(eq, ":trigger_param_1", "$kingdom_meeting_target_15"),
				(try_begin),
					(eq, ":trigger_param_1", "$kingdom_meeting_target_1"),
					(assign, "$meeting_target_number", "$temp_save_number11_1"),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_target_2"),
					(assign, "$meeting_target_number", "$temp_save_number11_2"),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_target_3"),
					(assign, "$meeting_target_number", "$temp_save_number11_3"),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_target_4"),
					(assign, "$meeting_target_number", "$temp_save_number11_4"),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_target_5"),
					(assign, "$meeting_target_number", "$temp_save_number11_5"),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_target_6"),
					(assign, "$meeting_target_number", "$temp_save_number11_6"),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_target_7"),
					(assign, "$meeting_target_number", "$temp_save_number11_7"),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_target_8"),
					(assign, "$meeting_target_number", "$temp_save_number11_8"),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_target_9"),
					(assign, "$meeting_target_number", "$temp_save_number11_9"),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_target_10"),
					(assign, "$meeting_target_number", "$temp_save_number11_10"),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_target_11"),
					(assign, "$meeting_target_number", "$temp_save_number11_11"),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_target_12"),
					(assign, "$meeting_target_number", "$temp_save_number11_12"),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_target_13"),
					(assign, "$meeting_target_number", "$temp_save_number11_13"),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_target_14"),
					(assign, "$meeting_target_number", "$temp_save_number11_14"),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_target_15"),
					(assign, "$meeting_target_number", "$temp_save_number11_15"),
				(try_end),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_01"),
				(try_begin),
					(eq, "$meeting_suggest_already", 0),
					(display_message, "str_need_suggestt", 0x00ff0000),
				(else_try),
					(assign, "$opinion_list_1", 1),
					(display_message, "str_agree_agenda", 0x00ffff00),
					(call_script, "script_opinion_sum"),
					(try_begin),
						(gt, "$opinion_conclude_agree", "$opinion_conclude_disagree"),
						(assign, "$opinion_conclude_result", 1),
						(display_message, "str_suggest_succ", 0x00ffff00),
					(else_try),
						(assign, "$opinion_conclude_result", 2),
						(display_message, "str_suggest_fail", 0x00ff0000),
					(try_end),
					(start_presentation, "prsnt_wm_kingdom_meeting"),
				(try_end),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_02"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_03"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_04"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_05"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_06"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_07"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_08"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_09"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_10"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_11"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_12"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_13"),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_14"),
				(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_15"),
				(try_begin),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_02"),
					(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_quick_battle_tier_2_infantry),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_03"),
					(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_quick_battle_tier_1_archer),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_04"),
					(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_quick_battle_tier_2_archer),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_05"),
					(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_quick_battle_tier_1_cavalry),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_06"),
					(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_quick_battle_tier_2_cavalry),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_07"),
					(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", 47),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_08"),
					(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_deserter_troop),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_09"),
					(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_guard_troop),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_10"),
					(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_messenger_troop),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_11"),
					(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_prison_guard_troop),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_12"),
					(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_castle_guard_troop),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_13"),
					(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_town_walker_male_troop),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_14"),
					(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_town_walker_female_troop),
				(else_try),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_15"),
					(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_village_walker_male_troop),
				(try_end),
				(assign, "$wm_mo_continue", 1),
				(try_begin),
					(eq, "$persuasion_or_bribe", 2),
					(call_script, "script_party_money_level_ge", "p_main_party", 500),
				(try_end),
				(try_begin),
					(neq, "$wm_mo_continue", 1),
					(display_message, "str_nomoney", 0x00ff0000),
				(else_try),
					(eq, "$meeting_target_number", ":wm_player_fac_quick_battle_tier_2_infantry"),
					(display_message, "str_himselff", 0x00ff0000),
				(else_try),
					(eq, "$opinion_suggester", ":wm_player_fac_quick_battle_tier_2_infantry"),
					(display_message, "str_suggesterr", 0x00ff0000),
				(else_try),
					(neg|troop_slot_eq, ":wm_player_fac_quick_battle_tier_2_infantry", slot_troop_love_interest_2, 0),
					(display_message, "str_already_tried", 0x00ff0000),
				(else_try),
					(le, "$possi_persuasion_num", 0),
					(display_message, "str_you_ca_anymore", 0x00ff0000),
				(else_try),
					(eq, "$meeting_suggest_already", 0),
					(display_message, "str_need_suggestt", 0x00ff0000),
				(else_try),
					(try_begin),
						(eq, "$persuasion_or_bribe", 2),
						(call_script, "script_party_money_level_diff", "p_main_party", 500, 34),
					(try_end),
					(val_sub, "$possi_persuasion_num", 1),
					(call_script, "script_lord_deter_persuasion_or_bribe", ":wm_player_fac_quick_battle_tier_2_infantry", "$persuasion_or_bribe"),
					(try_begin),
						(eq, "$wm_stp_continue", 1),
						(display_message, "str_persuasion_success", 0x00ffff00),
						(try_begin),
							(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_02"),
							(try_begin),
								(eq, "$opinion_list_2", 3),
								(assign, "$opinion_list_2", 1),
							(else_try),
								(eq, "$opinion_list_2", 2),
								(assign, "$opinion_list_2", 3),
							(try_end),
						(else_try),
							(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_03"),
							(try_begin),
								(eq, "$opinion_list_3", 3),
								(assign, "$opinion_list_3", 1),
							(else_try),
								(eq, "$opinion_list_3", 2),
								(assign, "$opinion_list_3", 3),
							(try_end),
						(else_try),
							(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_04"),
							(try_begin),
								(eq, "$opinion_list_4", 3),
								(assign, "$opinion_list_4", 1),
							(else_try),
								(eq, "$opinion_list_4", 2),
								(assign, "$opinion_list_4", 3),
							(try_end),
						(else_try),
							(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_05"),
							(try_begin),
								(eq, "$opinion_list_5", 3),
								(assign, "$opinion_list_5", 1),
							(else_try),
								(eq, "$opinion_list_5", 2),
								(assign, "$opinion_list_5", 3),
							(try_end),
						(else_try),
							(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_06"),
							(try_begin),
								(eq, "$opinion_list_6", 3),
								(assign, "$opinion_list_6", 1),
							(else_try),
								(eq, "$opinion_list_6", 2),
								(assign, "$opinion_list_6", 3),
							(try_end),
						(else_try),
							(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_07"),
							(try_begin),
								(eq, "$opinion_list_7", 3),
								(assign, "$opinion_list_7", 1),
							(else_try),
								(eq, "$opinion_list_7", 2),
								(assign, "$opinion_list_7", 3),
							(try_end),
						(else_try),
							(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_08"),
							(try_begin),
								(eq, "$opinion_list_8", 3),
								(assign, "$opinion_list_8", 1),
							(else_try),
								(eq, "$opinion_list_8", 2),
								(assign, "$opinion_list_8", 3),
							(try_end),
						(else_try),
							(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_09"),
							(try_begin),
								(eq, "$opinion_list_9", 3),
								(assign, "$opinion_list_9", 1),
							(else_try),
								(eq, "$opinion_list_9", 2),
								(assign, "$opinion_list_9", 3),
							(try_end),
						(else_try),
							(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_10"),
							(try_begin),
								(eq, "$opinion_list_10", 3),
								(assign, "$opinion_list_10", 1),
							(else_try),
								(eq, "$opinion_list_10", 2),
								(assign, "$opinion_list_10", 3),
							(try_end),
						(else_try),
							(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_11"),
							(try_begin),
								(eq, "$opinion_list_11", 3),
								(assign, "$opinion_list_11", 1),
							(else_try),
								(eq, "$opinion_list_11", 2),
								(assign, "$opinion_list_11", 3),
							(try_end),
						(else_try),
							(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_12"),
							(try_begin),
								(eq, "$opinion_list_12", 3),
								(assign, "$opinion_list_12", 1),
							(else_try),
								(eq, "$opinion_list_12", 2),
								(assign, "$opinion_list_12", 3),
							(try_end),
						(else_try),
							(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_13"),
							(try_begin),
								(eq, "$opinion_list_13", 3),
								(assign, "$opinion_list_13", 1),
							(else_try),
								(eq, "$opinion_list_13", 2),
								(assign, "$opinion_list_13", 3),
							(try_end),
						(else_try),
							(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_14"),
							(try_begin),
								(eq, "$opinion_list_14", 3),
								(assign, "$opinion_list_14", 1),
							(else_try),
								(eq, "$opinion_list_14", 2),
								(assign, "$opinion_list_14", 3),
							(try_end),
						(else_try),
							(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_15"),
							(try_begin),
								(eq, "$opinion_list_15", 3),
								(assign, "$opinion_list_15", 1),
							(else_try),
								(eq, "$opinion_list_15", 2),
								(assign, "$opinion_list_15", 3),
							(try_end),
						(try_end),
						(call_script, "script_opinion_sum"),
						(try_begin),
							(gt, "$opinion_conclude_agree", "$opinion_conclude_disagree"),
							(assign, "$opinion_conclude_result", 1),
							(display_message, "str_suggest_succ", 0x00ffff00),
						(else_try),
							(assign, "$opinion_conclude_result", 2),
							(display_message, "str_suggest_fail", 0x00ff0000),
						(try_end),
						(start_presentation, "prsnt_wm_kingdom_meeting"),
					(else_try),
						(display_message, "str_persuasion_fail", 0x00ff0000),
					(try_end),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_siege_attack"),
				(assign, "$meeting_target_number", "$rt_marked_target"),
				(str_store_party_name, 29, "$meeting_target_number"),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_policy_slave_free"),
				(assign, "$meeting_target_number", 1),
				(str_store_string, 29, "str_text_slave"),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_policy_economy"),
				(assign, "$meeting_target_number", 2),
				(str_store_string, 29, "str_text_economy"),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_policy_military"),
				(assign, "$meeting_target_number", 3),
				(str_store_string, 29, "str_text_military"),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_special_tax"),
				(assign, "$meeting_target_number", 4),
				(str_store_string, 29, "str_text_confiscate_money"),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_special_conscription"),
				(assign, "$meeting_target_number", 5),
				(str_store_string, 29, "str_text_confiscate_conscription"),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_festival"),
				(assign, "$meeting_target_number", 6),
				(str_store_string, 29, "str_text_festival"),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_capital_move"),
				(assign, "$meeting_target_number", 7),
				(str_store_party_name, 8, "$rt_marked_target"),
				(str_store_string, 29, "str_text_capita_move"),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(else_try),
				(eq, ":trigger_param_1", "$kingdom_meeting_suggest"),
				(try_begin),
					(this_or_next|eq, "$meeting_title_choose", 1),
					(this_or_next|eq, "$meeting_title_choose", 2),
					(this_or_next|eq, "$meeting_title_choose", 3),
					(this_or_next|eq, "$meeting_title_choose", 4),
					(this_or_next|eq, "$meeting_title_choose", 5),
					(this_or_next|eq, "$meeting_title_choose", 6),
					(eq, "$meeting_title_choose", 8),
					(faction_get_slot, ":wm_player_fac_1", "$wm_player_fac", 1),
					(troop_get_slot, ":player_does_not_give_quest", "trp_player", slot_troop_does_not_give_quest),
					(set_show_messages, 0),
					(val_div, ":player_does_not_give_quest", 23),
					(set_show_messages, 1),
					(assign, ":value_3", 50),
					(try_begin),
						(eq, "$meeting_title_choose", 8),
						(eq, ":wm_player_fac_1", "trp_player"),
						(assign, ":value_3", 0),
					(else_try),
						(eq, "$meeting_title_choose", 8),
						(assign, ":value_3", 10),
					(else_try),
						(eq, "$meeting_title_choose", 5),
						(assign, ":value_3", 100),
					(else_try),
						(eq, ":wm_player_fac_1", "trp_player"),
						(assign, ":value_3", 20),
					(try_end),
					(try_begin),
						(lt, ":player_does_not_give_quest", ":value_3"),
						(assign, reg4, ":value_3"),
						(display_message, "str_need_contr"),
					(else_try),
						(call_script, "script_troop_contribution_diff", "trp_player", ":value_3", 34),
						(call_script, "script_opinion_list_glob_reset"),
						(call_script, "script_opinion_set_for_meeting", "$wm_player_fac", "$meeting_title_choose"),
						(assign, "$meeting_suggest_already", 1),
						(try_begin),
							(eq, "$meeting_title_choose", 6),
							(call_script, "script_change_player_relation_with_troop", "$meeting_target_number", -99),
						(try_end),
						(call_script, "script_opinion_sum"),
						(try_begin),
							(gt, "$opinion_conclude_agree", "$opinion_conclude_disagree"),
							(assign, "$opinion_conclude_result", 1),
							(display_message, "str_suggest_succ", 0x00ffff00),
						(else_try),
							(assign, "$opinion_conclude_result", 2),
							(display_message, "str_suggest_fail", 0x00ff0000),
						(try_end),
						(try_begin),
							(eq, "$opinion_conclude_result", 2),
							(neg|faction_slot_eq, "$wm_player_fac", 1, "trp_player"),
							(faction_slot_eq, "$wm_player_fac", slot_faction_ai_object, 0),
							(faction_get_slot, ":wm_player_fac_1_2", "$wm_player_fac", 1),
							(troop_get_slot, ":wm_player_fac_1_2_occupation", ":wm_player_fac_1_2", slot_troop_occupation),
							(store_random_in_range, ":random_in_range_0_160", 0, 160),
							(val_add, ":random_in_range_0_160", ":wm_player_fac_1_2_occupation"),
							(ge, ":random_in_range_0_160", 150),
							(display_message, "str_suggest_succ_king", 0x00ffff00),
							(assign, "$opinion_conclude_result", 1),
						(try_end),
						(start_presentation, "prsnt_wm_kingdom_meeting"),
					(try_end),
				(else_try),
					(eq, "$meeting_title_choose", 7),
					(set_show_messages, 0),
					(faction_get_slot, ":value", "$wm_player_fac", slot_faction_culture),
					(val_div, ":value", 23),
					(set_show_messages, 1),
					(assign, ":value_4", 0),
					(try_begin),
						(this_or_next|eq, "$meeting_target_number", 7),
						(this_or_next|eq, "$meeting_target_number", 1),
						(this_or_next|eq, "$meeting_target_number", 2),
						(eq, "$meeting_target_number", 3),
						(assign, ":value_4", 15000),
					(else_try),
						(assign, ":value_4", 10000),
					(try_end),
					(faction_get_slot, ":wm_player_fac_1", "$wm_player_fac", 1),
					(troop_get_slot, ":player_does_not_give_quest", "trp_player", slot_troop_does_not_give_quest),
					(set_show_messages, 0),
					(val_div, ":player_does_not_give_quest", 23),
					(set_show_messages, 1),
					(assign, ":value_3", 50),
					(try_begin),
						(eq, ":wm_player_fac_1", "trp_player"),
						(assign, ":value_3", 25),
					(try_end),
					(try_begin),
						(lt, ":player_does_not_give_quest", ":value_3"),
						(assign, reg4, ":value_3"),
						(display_message, "str_need_contr"),
					(else_try),
						(lt, ":value", ":value_4"),
						(assign, reg4, ":value_4"),
						(display_message, "str_faction_culture_point_is_low", 0x00ff0000),
					(else_try),
						(call_script, "script_troop_contribution_diff", "trp_player", ":value_3", 34),
						(call_script, "script_opinion_list_glob_reset"),
						(call_script, "script_opinion_set_for_meeting", "$wm_player_fac", "$meeting_title_choose"),
						(assign, "$meeting_suggest_already", 1),
						(call_script, "script_opinion_sum"),
						(try_begin),
							(gt, "$opinion_conclude_agree", "$opinion_conclude_disagree"),
							(assign, "$opinion_conclude_result", 1),
							(display_message, "str_suggest_succ", 0x00ffff00),
						(else_try),
							(assign, "$opinion_conclude_result", 2),
							(display_message, "str_suggest_fail", 0x00ff0000),
						(try_end),
						(try_begin),
							(eq, "$opinion_conclude_result", 2),
							(neg|faction_slot_eq, "$wm_player_fac", 1, "trp_player"),
							(faction_slot_eq, "$wm_player_fac", slot_faction_ai_object, 0),
							(faction_get_slot, ":wm_player_fac_1_2", "$wm_player_fac", 1),
							(troop_get_slot, ":wm_player_fac_1_2_occupation", ":wm_player_fac_1_2", slot_troop_occupation),
							(store_random_in_range, ":random_in_range_0_160", 0, 160),
							(val_add, ":random_in_range_0_160", ":wm_player_fac_1_2_occupation"),
							(ge, ":random_in_range_0_160", 150),
							(display_message, "str_suggest_succ_king", 0x00ffff00),
							(assign, "$opinion_conclude_result", 1),
						(try_end),
						(start_presentation, "prsnt_wm_kingdom_meeting"),
					(try_end),
				(try_end),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_enforcement"),
				(eq, ":trigger_param_1", "$kingdom_meeting_execute"),
				(try_begin),
					(eq, "$meeting_title_choose", 1),
					(this_or_next|is_between, "$meeting_target_number", "fac_pioneers", "fac_undeads"),
					(is_between, "$meeting_target_number", "fac_kingdom_1", "fac_kingdoms_end"),
					(call_script, "script_wm_fac_relation_set", "$wm_player_fac", "$meeting_target_number", -10),
					(faction_set_slot, "$wm_player_fac", slot_faction_ai_state, "$declare_war_term"),
					(display_message, "str_execute_mess", 0x0000ff00),
					(play_sound, "snd_holywar"),
				(else_try),
					(this_or_next|eq, "$meeting_title_choose", 2),
					(this_or_next|eq, "$meeting_title_choose", 3),
					(eq, "$meeting_title_choose", 4),
					(this_or_next|is_between, "$meeting_target_number", "fac_pioneers", "fac_undeads"),
					(is_between, "$meeting_target_number", "fac_kingdom_1", "fac_kingdoms_end"),
					(assign, ":var_24", "$meeting_target_number"),
					(try_begin),
						(faction_slot_eq, ":var_24", 26, 2),
						(assign, ":value_5", 50),
					(else_try),
						(faction_slot_eq, ":var_24", 26, 1),
						(assign, ":value_5", 25),
					(else_try),
						(faction_slot_eq, ":var_24", 26, 3),
						(assign, ":value_5", -25),
					(else_try),
						(faction_slot_eq, ":var_24", 26, 4),
						(assign, ":value_5", -50),
					(else_try),
						(assign, ":value_5", 0),
					(try_end),
					(store_random_in_range, ":random_in_range_0_160", 0, 100),
					(val_add, ":random_in_range_0_160", ":value_5"),
					(try_begin),
						(eq, "$opinion_suggester", 4),
						(assign, ":random_in_range_0_160", 100),
					(try_end),
					(try_begin),
						(ge, ":random_in_range_0_160", 60),
						(eq, "$meeting_title_choose", 2),
						(call_script, "script_wm_fac_relation_set", "$wm_player_fac", "$meeting_target_number", 10),
						(display_message, "str_execute_mess", 0x0000ff00),
						(play_sound, "snd_experience_gained"),
					(else_try),
						(ge, ":random_in_range_0_160", 60),
						(eq, "$meeting_title_choose", 3),
						(call_script, "script_wm_fac_relation_set", "$wm_player_fac", "$meeting_target_number", 30),
						(display_message, "str_execute_mess", 0x0000ff00),
						(play_sound, "snd_experience_gained"),
					(else_try),
						(ge, ":random_in_range_0_160", 60),
						(eq, "$meeting_title_choose", 4),
						(call_script, "script_wm_fac_relation_set", "$wm_player_fac", "$meeting_target_number", 90),
						(display_message, "str_execute_mess", 0x0000ff00),
						(play_sound, "snd_experience_gained"),
					(else_try),
						(display_message, "str_execute_mess", 0x0000ff00),
						(display_message, "str_execute_mess_howe", 0x00ff0000),
						(play_sound, "snd_holywar"),
					(try_end),
				(else_try),
					(eq, "$meeting_title_choose", 5),
					(is_between, "$meeting_target_number", "p_pyongyang", "p_place_end"),
					(party_set_slot, "$meeting_target_number", slot_town_tavern, "trp_player"),
					(try_for_range, ":troop", "trp_tt_lord_01_00", "trp_tt_lord_end"),
						(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
						(eq, ":faction_of_troop_troop", "$wm_player_fac"),
						(neg|troop_slot_eq, ":troop", slot_troop_player_order_object, 5),
						(neg|troop_slot_eq, ":troop", slot_troop_player_order_object, 1),
						(troop_set_slot, ":troop", slot_troop_last_persuasion_time, 7),
						(troop_set_slot, ":troop", slot_troop_last_quest, 120),
					(try_end),
					(party_set_faction, "$meeting_target_number", "$wm_player_fac"),
					(faction_get_slot, ":wm_player_fac_19", "$wm_player_fac", 19),
					(party_set_slot, "$meeting_target_number", slot_town_horse_merchant, ":wm_player_fac_19"),
					(call_script, "script_party_extra_text_for_town", "$meeting_target_number"),
					(display_message, "str_execute_mess", 0x0000ff00),
					(play_sound, "snd_experience_gained"),
				(else_try),
					(eq, "$meeting_title_choose", 6),
					(is_between, "$meeting_target_number", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(call_script, "script_lord_change_faction", "$meeting_target_number"),
					(display_message, "str_execute_mess", 0x0000ff00),
					(play_sound, "snd_holywar"),
				(else_try),
					(eq, "$meeting_title_choose", 7),
					(try_begin),
						(this_or_next|eq, "$meeting_target_number", 7),
						(this_or_next|eq, "$meeting_target_number", 1),
						(this_or_next|eq, "$meeting_target_number", 2),
						(eq, "$meeting_target_number", 3),
						(call_script, "script_culture_point_diff", "$wm_player_fac", 15000, 34),
					(else_try),
						(call_script, "script_culture_point_diff", "$wm_player_fac", 10000, 34),
					(try_end),
					(try_begin),
						(eq, "$meeting_target_number", 1),
						(faction_slot_eq, "$wm_player_fac", slot_faction_ai_rationale, 0),
						(faction_set_slot, "$wm_player_fac", slot_faction_ai_rationale, 1),
						(display_message, "str_execute_mess", 0x0000ff00),
					(else_try),
						(eq, "$meeting_target_number", 1),
						(faction_slot_eq, "$wm_player_fac", slot_faction_ai_rationale, 1),
						(faction_set_slot, "$wm_player_fac", slot_faction_ai_rationale, 0),
						(display_message, "str_execute_mess", 0x0000ff00),
					(else_try),
						(eq, "$meeting_target_number", 2),
						(faction_slot_eq, "$wm_player_fac", 7, 0),
						(faction_set_slot, "$wm_player_fac", 7, 1),
						(display_message, "str_execute_mess", 0x0000ff00),
					(else_try),
						(eq, "$meeting_target_number", 2),
						(faction_slot_eq, "$wm_player_fac", 7, 1),
						(faction_set_slot, "$wm_player_fac", 7, 0),
						(display_message, "str_execute_mess", 0x0000ff00),
					(else_try),
						(eq, "$meeting_target_number", 3),
						(faction_slot_eq, "$wm_player_fac", slot_faction_marshall, 1),
						(faction_set_slot, "$wm_player_fac", slot_faction_marshall, 0),
						(display_message, "str_execute_mess", 0x0000ff00),
					(else_try),
						(eq, "$meeting_target_number", 3),
						(faction_slot_eq, "$wm_player_fac", slot_faction_marshall, 0),
						(faction_set_slot, "$wm_player_fac", slot_faction_marshall, 1),
						(display_message, "str_execute_mess", 0x0000ff00),
					(else_try),
						(eq, "$meeting_target_number", 4),
						(call_script, "script_temporary_policy_excute", 1, "$wm_player_fac"),
						(display_message, "str_execute_mess", 0x0000ff00),
					(else_try),
						(eq, "$meeting_target_number", 5),
						(call_script, "script_temporary_policy_excute", 2, "$wm_player_fac"),
						(display_message, "str_execute_mess", 0x0000ff00),
					(else_try),
						(eq, "$meeting_target_number", 6),
						(call_script, "script_temporary_policy_excute", 3, "$wm_player_fac"),
						(display_message, "str_execute_mess", 0x0000ff00),
					(else_try),
						(eq, "$meeting_target_number", 7),
						(faction_get_slot, ":wm_player_fac_29", "$wm_player_fac", 29),
						(faction_set_slot, "$wm_player_fac", 29, "$rt_marked_target"),
						(call_script, "script_party_extra_text_for_town", ":wm_player_fac_29"),
						(call_script, "script_party_extra_text_for_town", "$rt_marked_target"),
						(display_message, "str_execute_mess", 0x0000ff00),
					(try_end),
					(play_sound, "snd_experience_gained"),
				(else_try),
					(eq, "$meeting_title_choose", 8),
					(faction_set_slot, "$wm_player_fac", slot_faction_number_of_parties, "$rt_marked_target"),
					(try_begin),
						(str_store_party_name, 1, "$rt_marked_target"),
						(display_message, "str_attack_targett", 0x00ff0000),
						(party_relocate_near_party, "p_attack_target", "$rt_marked_target", 0),
						(party_set_flags, "p_attack_target", 256, 0),
					(try_end),
					(play_sound, "snd_holywar"),
				(try_end),
				(try_begin),
					(eq, ":trigger_param_1", "$kingdom_meeting_enforcement"),
					(try_for_range, ":troop_2", "trp_tt_lord_01_00", "trp_tt_lord_end"),
						(store_faction_of_troop, ":var_24", ":troop_2"),
						(eq, ":var_24", "$wm_player_fac"),
						(store_mul, ":value", 3, -1),
						(call_script, "script_change_player_relation_with_troop", ":troop_2", ":value"),
					(try_end),
				(try_end),
				(try_begin),
					(eq, "$opinion_list_1", 1),
					(is_between, "$opinion_suggester", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(call_script, "script_change_player_relation_with_troop", "$opinion_suggester", 10),
				(else_try),
					(eq, "$opinion_list_1", 2),
					(is_between, "$opinion_suggester", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(store_mul, ":value", 10, -1),
					(call_script, "script_change_player_relation_with_troop", "$opinion_suggester", ":value"),
				(try_end),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_mouse_press,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_2", 0),
				(eq, ":trigger_param_1", "$kingdom_meeting_persuasion_or_bribe"),
				(try_begin),
					(eq, "$persuasion_or_bribe", 1),
					(assign, "$persuasion_or_bribe", 2),
				(else_try),
					(eq, "$persuasion_or_bribe", 2),
					(assign, "$persuasion_or_bribe", 1),
				(try_end),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(try_end),
			(try_begin),
				(eq, ":trigger_param_2", 0),
				(eq, ":trigger_param_1", "$kingdom_meeting_face_model"),
				(try_begin),
					(eq, "$meeting_face_model_on", 0),
					(assign, "$meeting_face_model_on", 1),
					(display_message, "str_face_model_err", 0x00ffff00),
				(else_try),
					(eq, "$meeting_face_model_on", 1),
					(assign, "$meeting_face_model_on", 0),
					(display_message, "str_face_model_off", 0x00ffff00),
				(try_end),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(try_end),
			(try_begin),
				(eq, ":trigger_param_2", 0),
				(eq, ":trigger_param_1", "$kingdom_meeting_auto_popup"),
				(try_begin),
					(eq, "$meeting_popup_auto", 0),
					(assign, "$meeting_popup_auto", 1),
					(display_message, "str_autopopup_on", 0x00ffff00),
				(else_try),
					(eq, "$meeting_popup_auto", 1),
					(assign, "$meeting_popup_auto", 0),
					(display_message, "str_autopopup_off", 0x00ffff00),
				(try_end),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(try_end),
			(try_begin),
				(eq, ":trigger_param_2", 0),
				(eq, ":trigger_param_1", "$faction_info_donate"),
				(call_script, "script_party_money_level_ge", "p_main_party", 1000),
				(try_begin),
					(neq, "$wm_mo_continue", 1),
					(display_message, "str_nomoney", 0x00ff0000),
				(else_try),
					(call_script, "script_party_money_level_diff", "p_main_party", 1000, 34),
					(call_script, "script_troop_contribution_diff", "trp_player", 5, 87),
				(try_end),
				(start_presentation, "prsnt_wm_kingdom_meeting"),
			(try_end),
			(try_begin),
				(eq, ":trigger_param_2", 1),
				(try_begin),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_01"),
					(try_begin),
						(eq, "$meeting_suggest_already", 0),
						(display_message, "str_need_suggestt", 0x00ff0000),
					(else_try),
						(assign, "$opinion_list_1", 2),
						(display_message, "str_disagree_agenda", 0x00ffff00),
						(call_script, "script_opinion_sum"),
						(try_begin),
							(gt, "$opinion_conclude_agree", "$opinion_conclude_disagree"),
							(assign, "$opinion_conclude_result", 1),
							(display_message, "str_suggest_succ", 0x00ffff00),
						(else_try),
							(assign, "$opinion_conclude_result", 2),
							(display_message, "str_suggest_fail", 0x00ff0000),
						(try_end),
						(start_presentation, "prsnt_wm_kingdom_meeting"),
					(try_end),
				(else_try),
					(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_02"),
					(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_03"),
					(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_04"),
					(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_05"),
					(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_06"),
					(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_07"),
					(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_08"),
					(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_09"),
					(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_10"),
					(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_11"),
					(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_12"),
					(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_13"),
					(this_or_next|eq, ":trigger_param_1", "$kingdom_meeting_lord_list_14"),
					(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_15"),
					(try_begin),
						(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_02"),
						(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_quick_battle_tier_2_infantry),
					(else_try),
						(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_03"),
						(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_quick_battle_tier_1_archer),
					(else_try),
						(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_04"),
						(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_quick_battle_tier_2_archer),
					(else_try),
						(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_05"),
						(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_quick_battle_tier_1_cavalry),
					(else_try),
						(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_06"),
						(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_quick_battle_tier_2_cavalry),
					(else_try),
						(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_07"),
						(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", 47),
					(else_try),
						(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_08"),
						(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_deserter_troop),
					(else_try),
						(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_09"),
						(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_guard_troop),
					(else_try),
						(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_10"),
						(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_messenger_troop),
					(else_try),
						(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_11"),
						(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_prison_guard_troop),
					(else_try),
						(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_12"),
						(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_castle_guard_troop),
					(else_try),
						(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_13"),
						(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_town_walker_male_troop),
					(else_try),
						(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_14"),
						(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_town_walker_female_troop),
					(else_try),
						(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_15"),
						(faction_get_slot, ":wm_player_fac_quick_battle_tier_2_infantry", "$wm_player_fac", slot_faction_village_walker_male_troop),
					(try_end),
					(assign, "$wm_mo_continue", 1),
					(try_begin),
						(eq, "$persuasion_or_bribe", 2),
						(call_script, "script_party_money_level_ge", "p_main_party", 500),
					(try_end),
					(try_begin),
						(neq, "$wm_mo_continue", 1),
						(display_message, "str_nomoney", 0x00ff0000),
					(else_try),
						(eq, "$meeting_target_number", ":wm_player_fac_quick_battle_tier_2_infantry"),
						(display_message, "str_himselff", 0x00ff0000),
					(else_try),
						(eq, "$opinion_suggester", ":wm_player_fac_quick_battle_tier_2_infantry"),
						(display_message, "str_suggesterr", 0x00ff0000),
					(else_try),
						(neg|troop_slot_eq, ":wm_player_fac_quick_battle_tier_2_infantry", slot_troop_love_interest_2, 0),
						(display_message, "str_already_tried", 0x00ff0000),
					(else_try),
						(le, "$possi_persuasion_num", 0),
						(display_message, "str_you_ca_anymore", 0x00ff0000),
					(else_try),
						(eq, "$meeting_suggest_already", 0),
						(display_message, "str_need_suggestt", 0x00ff0000),
					(else_try),
						(try_begin),
							(eq, "$persuasion_or_bribe", 2),
							(call_script, "script_party_money_level_diff", "p_main_party", 500, 34),
						(try_end),
						(val_sub, "$possi_persuasion_num", 1),
						(call_script, "script_lord_deter_persuasion_or_bribe", ":wm_player_fac_quick_battle_tier_2_infantry", "$persuasion_or_bribe"),
						(try_begin),
							(eq, "$wm_stp_continue", 1),
							(display_message, "str_persuasion_success", 0x00ffff00),
							(try_begin),
								(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_02"),
								(try_begin),
									(eq, "$opinion_list_2", 3),
									(assign, "$opinion_list_2", 2),
								(else_try),
									(eq, "$opinion_list_2", 1),
									(assign, "$opinion_list_2", 3),
								(try_end),
							(else_try),
								(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_03"),
								(try_begin),
									(eq, "$opinion_list_3", 3),
									(assign, "$opinion_list_3", 2),
								(else_try),
									(eq, "$opinion_list_3", 1),
									(assign, "$opinion_list_3", 3),
								(try_end),
							(else_try),
								(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_04"),
								(try_begin),
									(eq, "$opinion_list_4", 3),
									(assign, "$opinion_list_4", 2),
								(else_try),
									(eq, "$opinion_list_4", 1),
									(assign, "$opinion_list_4", 3),
								(try_end),
							(else_try),
								(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_05"),
								(try_begin),
									(eq, "$opinion_list_5", 3),
									(assign, "$opinion_list_5", 2),
								(else_try),
									(eq, "$opinion_list_5", 1),
									(assign, "$opinion_list_5", 3),
								(try_end),
							(else_try),
								(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_06"),
								(try_begin),
									(eq, "$opinion_list_6", 3),
									(assign, "$opinion_list_6", 2),
								(else_try),
									(eq, "$opinion_list_6", 1),
									(assign, "$opinion_list_6", 3),
								(try_end),
							(else_try),
								(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_07"),
								(try_begin),
									(eq, "$opinion_list_7", 3),
									(assign, "$opinion_list_7", 2),
								(else_try),
									(eq, "$opinion_list_7", 1),
									(assign, "$opinion_list_7", 3),
								(try_end),
							(else_try),
								(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_08"),
								(try_begin),
									(eq, "$opinion_list_8", 3),
									(assign, "$opinion_list_8", 2),
								(else_try),
									(eq, "$opinion_list_8", 1),
									(assign, "$opinion_list_8", 3),
								(try_end),
							(else_try),
								(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_09"),
								(try_begin),
									(eq, "$opinion_list_9", 3),
									(assign, "$opinion_list_9", 2),
								(else_try),
									(eq, "$opinion_list_9", 1),
									(assign, "$opinion_list_9", 3),
								(try_end),
							(else_try),
								(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_10"),
								(try_begin),
									(eq, "$opinion_list_10", 3),
									(assign, "$opinion_list_10", 2),
								(else_try),
									(eq, "$opinion_list_10", 1),
									(assign, "$opinion_list_10", 3),
								(try_end),
							(else_try),
								(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_11"),
								(try_begin),
									(eq, "$opinion_list_11", 3),
									(assign, "$opinion_list_11", 2),
								(else_try),
									(eq, "$opinion_list_11", 1),
									(assign, "$opinion_list_11", 3),
								(try_end),
							(else_try),
								(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_12"),
								(try_begin),
									(eq, "$opinion_list_12", 3),
									(assign, "$opinion_list_12", 2),
								(else_try),
									(eq, "$opinion_list_12", 1),
									(assign, "$opinion_list_12", 3),
								(try_end),
							(else_try),
								(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_13"),
								(try_begin),
									(eq, "$opinion_list_13", 3),
									(assign, "$opinion_list_13", 2),
								(else_try),
									(eq, "$opinion_list_13", 1),
									(assign, "$opinion_list_13", 3),
								(try_end),
							(else_try),
								(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_14"),
								(try_begin),
									(eq, "$opinion_list_14", 3),
									(assign, "$opinion_list_14", 2),
								(else_try),
									(eq, "$opinion_list_14", 1),
									(assign, "$opinion_list_14", 3),
								(try_end),
							(else_try),
								(eq, ":trigger_param_1", "$kingdom_meeting_lord_list_15"),
								(try_begin),
									(eq, "$opinion_list_15", 3),
									(assign, "$opinion_list_15", 2),
								(else_try),
									(eq, "$opinion_list_15", 1),
									(assign, "$opinion_list_15", 3),
								(try_end),
							(try_end),
							(call_script, "script_opinion_sum"),
							(try_begin),
								(gt, "$opinion_conclude_agree", "$opinion_conclude_disagree"),
								(assign, "$opinion_conclude_result", 1),
								(display_message, "str_suggest_succ", 0x00ffff00),
							(else_try),
								(assign, "$opinion_conclude_result", 2),
								(display_message, "str_suggest_fail", 0x00ff0000),
							(try_end),
							(start_presentation, "prsnt_wm_kingdom_meeting"),
						(else_try),
							(display_message, "str_persuasion_fail", 0x00ff0000),
						(try_end),
					(try_end),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("pst_faction_info", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(assign, ":value", 495),
			(assign, ":value_2", 675),
			(position_set_x, 3, 2800),
			(position_set_y, 3, 2800),
			(position_set_x, 4, 1200),
			(position_set_y, 4, 1200),
			(position_set_x, 5, 1000),
			(position_set_y, 5, 1000),
			(store_faction_of_party, ":faction_of_party_pst_target_no", "$pst_target_no"),
			(str_store_faction_name, 11, ":faction_of_party_pst_target_no"),
			(create_text_overlay, reg0, "str_finfo_fname", 16),
			(overlay_set_size, reg0, 3),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 80),
			(faction_get_slot, ":faction_of_party_pst_target_no_ai_object", ":faction_of_party_pst_target_no", slot_faction_ai_object),
			(try_begin),
				(eq, ":faction_of_party_pst_target_no_ai_object", 1),
				(create_text_overlay, reg0, "str_finfo_rep1", 16),
			(else_try),
				(create_text_overlay, reg0, "str_finfo_rep0", 16),
			(try_end),
			(overlay_set_size, reg0, 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 40),
			(faction_get_slot, ":faction_of_party_pst_target_no_1", ":faction_of_party_pst_target_no", 1),
			(str_store_troop_name, 12, ":faction_of_party_pst_target_no_1"),
			(create_text_overlay, reg0, "str_finfo_kingname", 16),
			(overlay_set_size, reg0, 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(assign, ":value", 810),
			(assign, ":value_2", 595),
			(faction_get_slot, ":faction_of_party_pst_target_no_27", ":faction_of_party_pst_target_no", 27),
			(store_add, ":value_3", ":faction_of_party_pst_target_no_27", "str_religion_title_0"),
			(create_text_overlay, reg0, ":value_3", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(store_add, ":value_4", ":faction_of_party_pst_target_no_27", "mesh_pic_religion_symbol_0"),
			(val_sub, ":value", 21),
			(val_add, ":value_2", 30),
			(create_mesh_overlay, reg0, ":value_4"),
			(overlay_set_color, reg0, 14548991),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 2400),
			(position_set_y, 1, 2400),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 21),
			(val_sub, ":value_2", 30),
			(val_sub, ":value_2", 35),
			(faction_get_slot, ":faction_of_party_pst_target_no_26", ":faction_of_party_pst_target_no", 26),
			(try_begin),
				(eq, ":faction_of_party_pst_target_no_26", 0),
				(create_text_overlay, reg0, "str_finfo_po_0", 16),
			(else_try),
				(eq, ":faction_of_party_pst_target_no_26", 1),
				(create_text_overlay, reg0, "str_finfo_po_1", 16),
			(else_try),
				(eq, ":faction_of_party_pst_target_no_26", 2),
				(create_text_overlay, reg0, "str_finfo_po_2", 16),
			(else_try),
				(eq, ":faction_of_party_pst_target_no_26", 3),
				(create_text_overlay, reg0, "str_finfo_po_3", 16),
			(else_try),
				(eq, ":faction_of_party_pst_target_no_26", 4),
				(create_text_overlay, reg0, "str_finfo_po_4", 16),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(assign, ":value", 495),
			(assign, ":value_2", 485),
			(assign, ":var_10", 0),
			(try_for_parties, ":value_5"),
				(party_slot_eq, ":value_5", slot_party_type, 1),
				(store_faction_of_party, ":faction_of_party_value_5", ":value_5"),
				(eq, ":faction_of_party_value_5", ":faction_of_party_pst_target_no"),
				(store_party_size_wo_prisoners, ":party_size_wo_prisoners_value_5", ":value_5"),
				(val_add, ":var_10", ":party_size_wo_prisoners_value_5"),
			(try_end),
			(assign, reg12, ":var_10"),
			(create_text_overlay, reg0, "str_finfo_attsize", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 35),
			(assign, ":var_14", 0),
			(try_for_range, ":value_5", "p_pyongyang", "p_place_end"),
				(store_faction_of_party, ":faction_of_party_value_5", ":value_5"),
				(eq, ":faction_of_party_value_5", ":faction_of_party_pst_target_no"),
				(store_party_size_wo_prisoners, ":party_size_wo_prisoners_value_5", ":value_5"),
				(val_add, ":var_14", ":party_size_wo_prisoners_value_5"),
			(try_end),
			(assign, reg11, ":var_14"),
			(create_text_overlay, reg0, "str_finfo_defsize", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(assign, ":value", 810),
			(assign, ":value_2", 485),
			(create_text_overlay, reg0, "str_strategic_res", 16),
			(overlay_set_size, reg0, 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(try_begin),
				(faction_slot_eq, ":faction_of_party_pst_target_no", slot_faction_adjective, 1),
				(create_text_overlay, reg0, "str_has_horse", 16),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string", 16),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(try_begin),
				(faction_slot_eq, ":faction_of_party_pst_target_no", 24, 1),
				(create_text_overlay, reg0, "str_has_iron", 16),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string", 16),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(try_begin),
				(faction_slot_eq, ":faction_of_party_pst_target_no", 23, 1),
				(create_text_overlay, reg0, "str_has_finewood", 16),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string", 16),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(call_script, "script_temp_save_number11_initialize"),
			(try_for_range, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
				(store_relation, ":relation_faction_of_party_pst_target_no_faction", ":faction_of_party_pst_target_no", ":faction"),
				(neq, ":faction_of_party_pst_target_no", ":faction"),
				(lt, ":relation_faction_of_party_pst_target_no_faction", 0),
				(call_script, "script_temp_save_number11_inject", ":faction"),
			(try_end),
			(try_for_range, ":faction", "fac_pioneers", "fac_undeads"),
				(store_relation, ":relation_faction_of_party_pst_target_no_faction", ":faction_of_party_pst_target_no", ":faction"),
				(neq, ":faction_of_party_pst_target_no", ":faction"),
				(lt, ":relation_faction_of_party_pst_target_no_faction", 0),
				(call_script, "script_temp_save_number11_inject", ":faction"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_1", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_1", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 21, "$temp_save_number11_1"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_2", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_2", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 22, "$temp_save_number11_2"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_3", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_3", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 23, "$temp_save_number11_3"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_4", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_4", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 24, "$temp_save_number11_4"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_5", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_5", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 25, "$temp_save_number11_5"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_6", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_6", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 26, "$temp_save_number11_6"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_7", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_7", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 27, "$temp_save_number11_7"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_8", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_8", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 28, "$temp_save_number11_8"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_9", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_9", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 29, "$temp_save_number11_9"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_10", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_10", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 30, "$temp_save_number11_10"),
			(try_end),
			(assign, ":value", 125),
			(assign, ":value_2", 340),
			(create_text_overlay, reg0, "str_war_d", 16),
			(overlay_set_size, reg0, 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 35),
			(create_text_overlay, reg0, "str_glob_s21", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s22", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s23", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s24", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s25", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s26", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s27", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s28", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s29", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s30", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(call_script, "script_temp_save_number11_initialize"),
			(try_for_range, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
				(store_relation, ":relation_faction_of_party_pst_target_no_faction", ":faction_of_party_pst_target_no", ":faction"),
				(neq, ":faction_of_party_pst_target_no", ":faction"),
				(is_between, ":relation_faction_of_party_pst_target_no_faction", 4, 31),
				(call_script, "script_temp_save_number11_inject", ":faction"),
			(try_end),
			(try_for_range, ":faction", "fac_pioneers", "fac_undeads"),
				(store_relation, ":relation_faction_of_party_pst_target_no_faction", ":faction_of_party_pst_target_no", ":faction"),
				(neq, ":faction_of_party_pst_target_no", ":faction"),
				(is_between, ":relation_faction_of_party_pst_target_no_faction", 4, 31),
				(call_script, "script_temp_save_number11_inject", ":faction"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_1", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_1", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 31, "$temp_save_number11_1"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_2", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_2", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 32, "$temp_save_number11_2"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_3", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_3", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 33, "$temp_save_number11_3"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_4", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_4", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 34, "$temp_save_number11_4"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_5", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_5", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 35, "$temp_save_number11_5"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_6", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_6", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 36, "$temp_save_number11_6"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_7", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_7", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 37, "$temp_save_number11_7"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_8", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_8", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 38, "$temp_save_number11_8"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_9", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_9", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 39, "$temp_save_number11_9"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_10", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_10", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 40, "$temp_save_number11_10"),
			(try_end),
			(assign, ":value", 320),
			(assign, ":value_2", 340),
			(create_text_overlay, reg0, "str_non_aggression", 16),
			(overlay_set_size, reg0, 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 35),
			(create_text_overlay, reg0, "str_glob_s31", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s32", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s33", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s34", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s35", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s36", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s37", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s38", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s39", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s40", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(call_script, "script_temp_save_number11_initialize"),
			(try_for_range, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
				(store_relation, ":relation_faction_of_party_pst_target_no_faction", ":faction_of_party_pst_target_no", ":faction"),
				(neq, ":faction_of_party_pst_target_no", ":faction"),
				(gt, ":relation_faction_of_party_pst_target_no_faction", 30),
				(call_script, "script_temp_save_number11_inject", ":faction"),
			(try_end),
			(try_for_range, ":faction", "fac_pioneers", "fac_undeads"),
				(store_relation, ":relation_faction_of_party_pst_target_no_faction", ":faction_of_party_pst_target_no", ":faction"),
				(neq, ":faction_of_party_pst_target_no", ":faction"),
				(gt, ":relation_faction_of_party_pst_target_no_faction", 30),
				(call_script, "script_temp_save_number11_inject", ":faction"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_1", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_1", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 41, "$temp_save_number11_1"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_2", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_2", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 42, "$temp_save_number11_2"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_3", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_3", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 43, "$temp_save_number11_3"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_4", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_4", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 44, "$temp_save_number11_4"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_5", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_5", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 45, "$temp_save_number11_5"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_6", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_6", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 46, "$temp_save_number11_6"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_7", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_7", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 47, "$temp_save_number11_7"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_8", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_8", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 48, "$temp_save_number11_8"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_9", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_9", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 49, "$temp_save_number11_9"),
			(try_end),
			(try_begin),
				(this_or_next|is_between, "$temp_save_number11_10", "fac_pioneers", "fac_undeads"),
				(is_between, "$temp_save_number11_10", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 50, "$temp_save_number11_10"),
			(try_end),
			(assign, ":value", 515),
			(assign, ":value_2", 340),
			(create_text_overlay, reg0, "str_alliance_d", 16),
			(overlay_set_size, reg0, 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 35),
			(create_text_overlay, reg0, "str_glob_s41", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s42", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s43", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s44", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s45", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s46", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s47", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s48", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s49", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_glob_s50", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(assign, ":value", 810),
			(assign, ":value_2", 340),
			(faction_get_slot, ":faction_of_party_pst_target_no_17", ":faction_of_party_pst_target_no", 17),
			(try_begin),
				(eq, ":faction_of_party_pst_target_no_17", 20),
				(create_text_overlay, reg0, "str_mdiv_3", 16),
			(else_try),
				(eq, ":faction_of_party_pst_target_no_17", 10),
				(create_text_overlay, reg0, "str_mdiv_2", 16),
			(else_try),
				(create_text_overlay, reg0, "str_mdiv_1", 16),
			(try_end),
			(overlay_set_size, reg0, 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 30),
			(faction_get_slot, ":faction_of_party_pst_target_no_18", ":faction_of_party_pst_target_no", 18),
			(try_begin),
				(eq, ":faction_of_party_pst_target_no_18", 20),
				(create_text_overlay, reg0, "str_fdiv_3", 16),
			(else_try),
				(eq, ":faction_of_party_pst_target_no_18", 10),
				(create_text_overlay, reg0, "str_fdiv_2", 16),
			(else_try),
				(create_text_overlay, reg0, "str_fdiv_1", 16),
			(try_end),
			(overlay_set_size, reg0, 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 50),
			(faction_get_slot, reg13, ":faction_of_party_pst_target_no", slot_faction_ai_offensive_max_followers),
			(create_text_overlay, reg0, "str_faction_culturer", 16),
			(overlay_set_size, reg0, 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 30),
			(faction_get_slot, ":faction_of_party_pst_target_no_ai_rationale", ":faction_of_party_pst_target_no", slot_faction_ai_rationale),
			(try_begin),
				(eq, ":faction_of_party_pst_target_no_ai_rationale", 1),
				(create_text_overlay, reg0, "str_text_policy_12", 16),
			(else_try),
				(create_text_overlay, reg0, "str_text_policy_11", 16),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 30),
			(faction_get_slot, ":faction_of_party_pst_target_no_7", ":faction_of_party_pst_target_no", 7),
			(try_begin),
				(eq, ":faction_of_party_pst_target_no_7", 1),
				(create_text_overlay, reg0, "str_text_policy_22", 16),
			(else_try),
				(create_text_overlay, reg0, "str_text_policy_21", 16),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 30),
			(faction_get_slot, ":faction_of_party_pst_target_no_marshall", ":faction_of_party_pst_target_no", slot_faction_marshall),
			(try_begin),
				(eq, ":faction_of_party_pst_target_no_marshall", 1),
				(create_text_overlay, reg0, "str_text_policy_32", 16),
			(else_try),
				(create_text_overlay, reg0, "str_text_policy_31", 16),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(assign, ":value", 890),
			(assign, ":value_2", 15),
			(create_in_game_button_overlay, "$faction_info_exit", "str_return_butt", 4),
			(overlay_set_color, "$faction_info_exit", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$faction_info_exit", 1),
			(try_begin),
				(eq, ":faction_of_party_pst_target_no", "$wm_player_fac"),
				(troop_slot_ge, "trp_player", 18, 11),
				(val_sub, ":value", 220),
				(create_in_game_button_overlay, "$faction_info_donate", "str_contribute_money", 4),
				(overlay_set_color, "$faction_info_donate", 16777215),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$faction_info_donate", 1),
			(try_end),
			(position_set_x, 6, 150),
			(position_set_y, 6, 150),
			(faction_get_slot, ":faction_of_party_pst_target_no_2", ":faction_of_party_pst_target_no", 2),
			(create_mesh_overlay, reg0, ":faction_of_party_pst_target_no_2"),
			(overlay_set_alpha, reg0, 191),
			(position_set_x, 1, 125),
			(position_set_y, 1, 710),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 6)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$faction_info_exit"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
			(else_try),
				(eq, ":trigger_param_1", "$faction_info_donate"),
				(call_script, "script_party_money_level_ge", "p_main_party", 1000),
				(try_begin),
					(neq, "$wm_mo_continue", 1),
					(display_message, "str_nomoney", 0x00ff0000),
				(else_try),
					(call_script, "script_party_money_level_diff", "p_main_party", 1000, 34),
					(call_script, "script_troop_contribution_diff", "trp_player", 5, 87),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
			(try_end)
		])
	]),

	("pst_lord_info", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(assign, ":value", 670),
			(assign, ":value_2", 635),
			(position_set_x, 3, 2800),
			(position_set_y, 3, 2800),
			(position_set_x, 4, 1200),
			(position_set_y, 4, 1200),
			(position_set_x, 5, 1000),
			(position_set_y, 5, 1000),
			(str_store_troop_name, 12, "$pst_target_no"),
			(create_text_overlay, reg0, "str_glob_s12", 16),
			(overlay_set_size, reg0, 3),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 40),
			(store_faction_of_troop, ":faction_of_troop_pst_target_no", "$pst_target_no"),
			(str_store_faction_name, 11, ":faction_of_troop_pst_target_no"),
			(create_text_overlay, reg0, "str_glob_s11", 16),
			(overlay_set_size, reg0, 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 40),
			(troop_get_slot, ":pst_target_no_23", "$pst_target_no", 23),
			(store_add, ":value_3", ":pst_target_no_23", "str_religion_title_0"),
			(create_text_overlay, reg0, ":value_3", 16),
			(overlay_set_size, reg0, 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(store_attribute_level, reg13, "$pst_target_no", 0),
			(store_attribute_level, reg14, "$pst_target_no", 1),
			(store_attribute_level, reg15, "$pst_target_no", 2),
			(store_attribute_level, reg16, "$pst_target_no", 3),
			(val_sub, ":value", 70),
			(val_sub, ":value_2", 40),
			(create_text_overlay, reg0, "str_linfo_attri_st", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_add, ":value", 140),
			(create_text_overlay, reg0, "str_linfo_attri_ag", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value", 140),
			(val_sub, ":value_2", 25),
			(create_text_overlay, reg0, "str_linfo_attri_in", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_add, ":value", 140),
			(create_text_overlay, reg0, "str_linfo_attri_ca", 16),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value", 140),
			(try_begin),
				(this_or_next|eq, "$pst_target_no", "trp_player"),
				(is_between, "$pst_target_no", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(troop_get_slot, reg17, "$pst_target_no", slot_troop_spawned_before),
				(troop_get_slot, reg18, "$pst_target_no", slot_troop_last_comment_slot),
				(troop_get_slot, reg19, "$pst_target_no", slot_troop_spouse),
				(troop_get_slot, reg20, "$pst_target_no", slot_troop_father),
				(val_sub, ":value_2", 25),
				(create_text_overlay, reg0, "str_linfo_attri_ta", 16),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", 140),
				(create_text_overlay, reg0, "str_linfo_attri_le", 16),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value", 140),
				(val_sub, ":value_2", 25),
				(create_text_overlay, reg0, "str_linfo_attri_sr", 16),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", 140),
				(create_text_overlay, reg0, "str_linfo_attri_na", 16),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value", 140),
			(try_end),
			(assign, ":value", 40),
			(assign, ":value_2", 380),
			(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", "$pst_target_no"),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(assign, ":value", 785),
			(assign, ":value_2", 340),
			(try_begin),
				(this_or_next|eq, "$pst_target_no", "trp_player"),
				(is_between, "$pst_target_no", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(troop_get_slot, reg11, "$pst_target_no", slot_troop_player_debt),
				(troop_get_slot, reg12, "$pst_target_no", slot_troop_player_relation),
				(create_text_overlay, reg0, "str_num_won", 16),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", 35),
				(create_text_overlay, reg0, "str_num_lose", 16),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
			(try_end),
			(call_script, "script_temp_save_number11_initialize"),
			(try_begin),
				(eq, "$pst_target_no", "trp_player"),
				(try_for_range, ":troop", "trp_npc1", "trp_tt_lady_end"),
					(troop_slot_eq, "$pst_target_no", slot_troop_state, ":troop"),
					(troop_slot_eq, ":troop", slot_troop_state, "$pst_target_no"),
					(call_script, "script_temp_save_number11_inject", ":troop"),
				(try_end),
			(try_end),
			(try_begin),
				(neq, "$pst_target_no", "trp_player"),
				(troop_slot_eq, "$pst_target_no", slot_troop_state, "trp_player"),
				(troop_slot_eq, "trp_player", slot_troop_state, "$pst_target_no"),
				(call_script, "script_temp_save_number11_inject", "trp_player"),
			(try_end),
			(try_begin),
				(neq, "$pst_target_no", "trp_player"),
				(try_for_range, ":troop", "trp_npc1", "trp_tt_lady_end"),
					(troop_slot_eq, "$pst_target_no", slot_troop_state, ":troop"),
					(troop_slot_eq, ":troop", slot_troop_state, "$pst_target_no"),
					(call_script, "script_temp_save_number11_inject", ":troop"),
				(try_end),
				(try_for_range, ":troop", "trp_npc1", "trp_tt_lady_end"),
					(troop_slot_eq, ":troop", slot_troop_last_talk_time, "$pst_target_no"),
					(call_script, "script_temp_save_number11_inject", ":troop"),
				(try_end),
				(try_for_range, ":troop", "trp_npc1", "trp_tt_lady_end"),
					(troop_slot_eq, "$pst_target_no", slot_troop_last_talk_time, ":troop"),
					(call_script, "script_temp_save_number11_inject", ":troop"),
				(try_end),
				(try_for_range, ":troop", "trp_npc1", "trp_tt_lady_end"),
					(troop_slot_eq, ":troop", slot_troop_met, "$pst_target_no"),
					(call_script, "script_temp_save_number11_inject", ":troop"),
				(try_end),
				(try_for_range, ":troop", "trp_npc1", "trp_tt_lady_end"),
					(troop_slot_eq, "$pst_target_no", slot_troop_met, ":troop"),
					(call_script, "script_temp_save_number11_inject", ":troop"),
				(try_end),
				(try_for_range, ":troop", "trp_npc1", "trp_tt_lady_end"),
					(troop_slot_eq, ":troop", slot_troop_party_template, "$pst_target_no"),
					(call_script, "script_temp_save_number11_inject", ":troop"),
				(try_end),
				(try_for_range, ":troop", "trp_npc1", "trp_tt_lady_end"),
					(troop_slot_eq, "$pst_target_no", slot_troop_party_template, ":troop"),
					(call_script, "script_temp_save_number11_inject", ":troop"),
				(try_end),
			(try_end),
			(try_begin),
				(neq, "$temp_save_number11_1", -1),
				(str_store_troop_name, 36, "$temp_save_number11_1"),
				(assign, "$lord_fam_troop_01", "$temp_save_number11_1"),
			(try_end),
			(try_begin),
				(neq, "$temp_save_number11_2", -1),
				(str_store_troop_name, 37, "$temp_save_number11_2"),
				(assign, "$lord_fam_troop_02", "$temp_save_number11_2"),
			(try_end),
			(try_begin),
				(neq, "$temp_save_number11_3", -1),
				(str_store_troop_name, 38, "$temp_save_number11_3"),
				(assign, "$lord_fam_troop_03", "$temp_save_number11_3"),
			(try_end),
			(try_begin),
				(neq, "$temp_save_number11_4", -1),
				(str_store_troop_name, 39, "$temp_save_number11_4"),
				(assign, "$lord_fam_troop_04", "$temp_save_number11_4"),
			(try_end),
			(try_begin),
				(neq, "$temp_save_number11_5", -1),
				(str_store_troop_name, 40, "$temp_save_number11_5"),
				(assign, "$lord_fam_troop_05", "$temp_save_number11_5"),
			(try_end),
			(assign, ":value", 485),
			(assign, ":value_2", 340),
			(create_text_overlay, reg0, "str_family_d", 16),
			(overlay_set_size, reg0, 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 35),
			(try_begin),
				(neq, "$temp_save_number11_1", -1),
				(create_button_overlay, "$lord_info_fam_01", "str_glob_s36", 16),
			(else_try),
				(create_text_overlay, "$lord_info_fam_01", "str_empty_string", 16),
			(try_end),
			(overlay_set_size, "$lord_info_fam_01", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$lord_info_fam_01", 1),
			(val_sub, ":value_2", 25),
			(try_begin),
				(neq, "$temp_save_number11_2", -1),
				(create_button_overlay, "$lord_info_fam_02", "str_glob_s37", 16),
			(else_try),
				(create_text_overlay, "$lord_info_fam_02", "str_empty_string", 16),
			(try_end),
			(overlay_set_size, "$lord_info_fam_02", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$lord_info_fam_02", 1),
			(val_sub, ":value_2", 25),
			(try_begin),
				(neq, "$temp_save_number11_3", -1),
				(create_button_overlay, "$lord_info_fam_03", "str_glob_s38", 16),
			(else_try),
				(create_text_overlay, "$lord_info_fam_03", "str_empty_string", 16),
			(try_end),
			(overlay_set_size, "$lord_info_fam_03", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$lord_info_fam_03", 1),
			(val_sub, ":value_2", 25),
			(try_begin),
				(neq, "$temp_save_number11_4", -1),
				(create_button_overlay, "$lord_info_fam_04", "str_glob_s39", 16),
			(else_try),
				(create_text_overlay, "$lord_info_fam_04", "str_empty_string", 16),
			(try_end),
			(overlay_set_size, "$lord_info_fam_04", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$lord_info_fam_04", 1),
			(val_sub, ":value_2", 25),
			(try_begin),
				(neq, "$temp_save_number11_5", -1),
				(create_button_overlay, "$lord_info_fam_05", "str_glob_s40", 16),
			(else_try),
				(create_text_overlay, "$lord_info_fam_05", "str_empty_string", 16),
			(try_end),
			(overlay_set_size, "$lord_info_fam_05", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$lord_info_fam_05", 1),
			(call_script, "script_temp_save_number11_initialize"),
			(try_for_range, ":party", "p_pyongyang", "p_place_end"),
				(store_faction_of_party, ":faction_of_party_party", ":party"),
				(eq, ":faction_of_party_party", ":faction_of_troop_pst_target_no"),
				(party_slot_eq, ":party", slot_town_tavern, "$pst_target_no"),
				(call_script, "script_temp_save_number11_inject", ":party"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_1", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 21, "$temp_save_number11_1"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_2", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 22, "$temp_save_number11_2"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_3", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 23, "$temp_save_number11_3"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_4", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 24, "$temp_save_number11_4"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_5", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 25, "$temp_save_number11_5"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_6", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 26, "$temp_save_number11_6"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_7", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 27, "$temp_save_number11_7"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_8", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 28, "$temp_save_number11_8"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_9", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 29, "$temp_save_number11_9"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_10", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 30, "$temp_save_number11_10"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_11", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 31, "$temp_save_number11_11"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_12", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 32, "$temp_save_number11_12"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_13", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 33, "$temp_save_number11_13"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_14", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 34, "$temp_save_number11_14"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_15", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 35, "$temp_save_number11_15"),
			(try_end),
			(assign, ":value", 155),
			(assign, ":value_2", 340),
			(create_text_overlay, reg0, "str_owned_castle", 16),
			(overlay_set_size, reg0, 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 25),
			(create_button_overlay, "$loc_button_01", "str_glob_s21", 16),
			(overlay_set_size, "$loc_button_01", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$loc_button_01", 1),
			(val_sub, ":value_2", 25),
			(create_button_overlay, "$loc_button_02", "str_glob_s22", 16),
			(overlay_set_size, "$loc_button_02", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$loc_button_02", 1),
			(val_sub, ":value_2", 25),
			(create_button_overlay, "$loc_button_03", "str_glob_s23", 16),
			(overlay_set_size, "$loc_button_03", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$loc_button_03", 1),
			(val_sub, ":value_2", 25),
			(create_button_overlay, "$loc_button_04", "str_glob_s24", 16),
			(overlay_set_size, "$loc_button_04", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$loc_button_04", 1),
			(val_sub, ":value_2", 25),
			(create_button_overlay, "$loc_button_05", "str_glob_s25", 16),
			(overlay_set_size, "$loc_button_05", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$loc_button_05", 1),
			(val_sub, ":value_2", 25),
			(create_button_overlay, "$loc_button_06", "str_glob_s26", 16),
			(overlay_set_size, "$loc_button_06", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$loc_button_06", 1),
			(val_sub, ":value_2", 25),
			(create_button_overlay, "$loc_button_07", "str_glob_s27", 16),
			(overlay_set_size, "$loc_button_07", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$loc_button_07", 1),
			(val_sub, ":value_2", 25),
			(create_button_overlay, "$loc_button_08", "str_glob_s28", 16),
			(overlay_set_size, "$loc_button_08", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$loc_button_08", 1),
			(val_sub, ":value_2", 25),
			(create_button_overlay, "$loc_button_09", "str_glob_s29", 16),
			(overlay_set_size, "$loc_button_09", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$loc_button_09", 1),
			(val_sub, ":value_2", 25),
			(create_button_overlay, "$loc_button_10", "str_glob_s30", 16),
			(overlay_set_size, "$loc_button_10", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$loc_button_10", 1),
			(val_sub, ":value_2", 25),
			(create_button_overlay, "$loc_button_11", "str_glob_s31", 16),
			(overlay_set_size, "$loc_button_11", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$loc_button_11", 1),
			(val_sub, ":value_2", 25),
			(create_button_overlay, "$loc_button_12", "str_glob_s32", 16),
			(overlay_set_size, "$loc_button_12", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$loc_button_12", 1),
			(val_sub, ":value_2", 25),
			(create_button_overlay, "$loc_button_13", "str_glob_s33", 16),
			(overlay_set_size, "$loc_button_13", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$loc_button_13", 1),
			(val_sub, ":value_2", 25),
			(create_button_overlay, "$loc_button_14", "str_glob_s34", 16),
			(overlay_set_size, "$loc_button_14", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$loc_button_14", 1),
			(val_sub, ":value_2", 25),
			(create_button_overlay, "$loc_button_15", "str_glob_s35", 16),
			(overlay_set_size, "$loc_button_15", 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$loc_button_15", 1),
			(assign, ":value", 890),
			(assign, ":value_2", 15),
			(create_in_game_button_overlay, "$lord_info_exit", "str_return_butt", 4),
			(overlay_set_color, "$lord_info_exit", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$lord_info_exit", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$lord_info_exit"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_01"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_02"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_03"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_04"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_05"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_06"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_07"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_08"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_09"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_10"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_11"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_12"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_13"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_14"),
				(eq, ":trigger_param_1", "$loc_button_15"),
				(try_begin),
					(eq, ":trigger_param_1", "$loc_button_01"),
					(assign, ":value", "$temp_save_number11_1"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_02"),
					(assign, ":value", "$temp_save_number11_2"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_03"),
					(assign, ":value", "$temp_save_number11_3"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_04"),
					(assign, ":value", "$temp_save_number11_4"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_05"),
					(assign, ":value", "$temp_save_number11_5"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_06"),
					(assign, ":value", "$temp_save_number11_6"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_07"),
					(assign, ":value", "$temp_save_number11_7"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_08"),
					(assign, ":value", "$temp_save_number11_8"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_09"),
					(assign, ":value", "$temp_save_number11_9"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_10"),
					(assign, ":value", "$temp_save_number11_10"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_11"),
					(assign, ":value", "$temp_save_number11_11"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_12"),
					(assign, ":value", "$temp_save_number11_12"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_13"),
					(assign, ":value", "$temp_save_number11_13"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_14"),
					(assign, ":value", "$temp_save_number11_14"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_15"),
					(assign, ":value", "$temp_save_number11_15"),
				(try_end),
				(is_between, ":value", "p_pyongyang", "p_place_end"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
				(assign, "$camera_focus_on", 1),
				(set_camera_follow_party, ":value"),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$lord_info_fam_01"),
				(this_or_next|eq, ":trigger_param_1", "$lord_info_fam_02"),
				(this_or_next|eq, ":trigger_param_1", "$lord_info_fam_03"),
				(this_or_next|eq, ":trigger_param_1", "$lord_info_fam_04"),
				(eq, ":trigger_param_1", "$lord_info_fam_05"),
				(try_begin),
					(eq, ":trigger_param_1", "$lord_info_fam_01"),
					(assign, ":value", "$lord_fam_troop_01"),
				(else_try),
					(eq, ":trigger_param_1", "$lord_info_fam_02"),
					(assign, ":value", "$lord_fam_troop_02"),
				(else_try),
					(eq, ":trigger_param_1", "$lord_info_fam_03"),
					(assign, ":value", "$lord_fam_troop_03"),
				(else_try),
					(eq, ":trigger_param_1", "$lord_info_fam_04"),
					(assign, ":value", "$lord_fam_troop_04"),
				(else_try),
					(eq, ":trigger_param_1", "$lord_info_fam_05"),
					(assign, ":value", "$lord_fam_troop_05"),
				(try_end),
				(try_begin),
					(this_or_next|is_between, ":value", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(is_between, ":value", "trp_tt_lady_01_01", "trp_tt_lady_end"),
					(assign, "$pst_target_no", ":value"),
					(jump_to_menu, "mnu_pst_lord_info"),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
			(try_end)
		])
	]),

	("manage_troops", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(position_set_x, 3, 800),
			(position_set_y, 3, 800),
			(position_set_x, 4, 15500),
			(position_set_y, 4, 1000),
			(assign, ":value", 495),
			(assign, ":value_2", 700),
			(create_text_overlay, reg0, "str_manage_troopss", 16),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(assign, ":var_3", 12171679),
			(assign, ":var_4", 16741749),
			(assign, ":var_5", 13286399),
			(assign, ":var_6", 191),
			(assign, ":value", 738),
			(assign, ":value_2", 685),
			(create_text_overlay, reg0, "str_bcompanion", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(assign, ":value", 5),
			(assign, ":value_2", 660),
			(assign, ":var_7", 320),
			(assign, ":value_3", 27),
			(val_add, ":value", ":var_7"),
			(val_add, ":value", ":var_7"),
			(assign, ":value_4", 0),
			(try_begin),
				(gt, "$wm_comp_id_1", 0),
				(str_store_troop_name, 8, "$wm_comp_id_1"),
				(assign, reg8, ":value_4"),
				(call_script, "script_troop_attribute_export", "$wm_comp_id_1"),
				(create_button_overlay, "$manage_troops_comp_1", "str_elite_name_card", 4),
			(else_try),
				(create_text_overlay, "$manage_troops_comp_1", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_comp_1", 1),
			(overlay_set_size, "$manage_troops_comp_1", 3),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(try_begin),
				(gt, "$wm_comp_id_1", 0),
				(overlay_set_color, reg0, ":var_3"),
			(else_try),
				(gt, "$wm_comp_id_1", 0),
				(troop_slot_ge, "$wm_comp_id_1", 16, 2),
				(overlay_set_color, reg0, ":var_4"),
			(else_try),
				(overlay_set_color, reg0, ":var_5"),
			(try_end),
			(overlay_set_alpha, reg0, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", ":value_3"),
			(assign, ":value_4", 0),
			(try_begin),
				(gt, "$wm_comp_id_2", 0),
				(str_store_troop_name, 8, "$wm_comp_id_2"),
				(assign, reg8, ":value_4"),
				(call_script, "script_troop_attribute_export", "$wm_comp_id_2"),
				(create_button_overlay, "$manage_troops_comp_2", "str_elite_name_card", 4),
			(else_try),
				(create_text_overlay, "$manage_troops_comp_2", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_comp_2", 1),
			(overlay_set_size, "$manage_troops_comp_2", 3),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(try_begin),
				(gt, "$wm_comp_id_2", 0),
				(overlay_set_color, reg0, ":var_3"),
			(else_try),
				(gt, "$wm_comp_id_2", 0),
				(troop_slot_ge, "$wm_comp_id_2", 16, 2),
				(overlay_set_color, reg0, ":var_4"),
			(else_try),
				(overlay_set_color, reg0, ":var_5"),
			(try_end),
			(overlay_set_alpha, reg0, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", ":value_3"),
			(assign, ":value_4", 0),
			(try_begin),
				(gt, "$wm_comp_id_3", 0),
				(str_store_troop_name, 8, "$wm_comp_id_3"),
				(assign, reg8, ":value_4"),
				(call_script, "script_troop_attribute_export", "$wm_comp_id_3"),
				(create_button_overlay, "$manage_troops_comp_3", "str_elite_name_card", 4),
			(else_try),
				(create_text_overlay, "$manage_troops_comp_3", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_comp_3", 1),
			(overlay_set_size, "$manage_troops_comp_3", 3),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(try_begin),
				(gt, "$wm_comp_id_3", 0),
				(overlay_set_color, reg0, ":var_3"),
			(else_try),
				(gt, "$wm_comp_id_3", 0),
				(troop_slot_ge, "$wm_comp_id_3", 16, 2),
				(overlay_set_color, reg0, ":var_4"),
			(else_try),
				(overlay_set_color, reg0, ":var_5"),
			(try_end),
			(overlay_set_alpha, reg0, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", ":value_3"),
			(assign, ":value_4", 0),
			(try_begin),
				(gt, "$wm_comp_id_4", 0),
				(str_store_troop_name, 8, "$wm_comp_id_4"),
				(assign, reg8, ":value_4"),
				(call_script, "script_troop_attribute_export", "$wm_comp_id_4"),
				(create_button_overlay, "$manage_troops_comp_4", "str_elite_name_card", 4),
			(else_try),
				(create_text_overlay, "$manage_troops_comp_4", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_comp_4", 1),
			(overlay_set_size, "$manage_troops_comp_4", 3),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(try_begin),
				(gt, "$wm_comp_id_4", 0),
				(overlay_set_color, reg0, ":var_3"),
			(else_try),
				(gt, "$wm_comp_id_4", 0),
				(troop_slot_ge, "$wm_comp_id_4", 16, 2),
				(overlay_set_color, reg0, ":var_4"),
			(else_try),
				(overlay_set_color, reg0, ":var_5"),
			(try_end),
			(overlay_set_alpha, reg0, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", ":value_3"),
			(assign, ":value_4", 0),
			(try_begin),
				(gt, "$wm_comp_id_5", 0),
				(str_store_troop_name, 8, "$wm_comp_id_5"),
				(assign, reg8, ":value_4"),
				(call_script, "script_troop_attribute_export", "$wm_comp_id_5"),
				(create_button_overlay, "$manage_troops_comp_5", "str_elite_name_card", 4),
			(else_try),
				(create_text_overlay, "$manage_troops_comp_5", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_comp_5", 1),
			(overlay_set_size, "$manage_troops_comp_5", 3),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(try_begin),
				(gt, "$wm_comp_id_5", 0),
				(overlay_set_color, reg0, ":var_3"),
			(else_try),
				(gt, "$wm_comp_id_5", 0),
				(troop_slot_ge, "$wm_comp_id_5", 16, 2),
				(overlay_set_color, reg0, ":var_4"),
			(else_try),
				(overlay_set_color, reg0, ":var_5"),
			(try_end),
			(overlay_set_alpha, reg0, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(assign, ":value", 320),
			(assign, ":value_2", 660),
			(assign, ":var_10", "trp_elite_troops_01"),
			(assign, ":value_4", 1),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 1),
				(str_store_troop_name, 8, ":var_10"),
				(assign, reg8, ":value_4"),
				(call_script, "script_troop_attribute_export", ":var_10"),
				(create_button_overlay, "$manage_troops_01", "str_elite_name_card", 4),
			(else_try),
				(create_button_overlay, "$manage_troops_01", "str_not_hired"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_01", 1),
			(overlay_set_size, "$manage_troops_01", 3),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 0),
				(overlay_set_color, reg0, ":var_3"),
			(else_try),
				(troop_slot_ge, ":var_10", 16, 2),
				(overlay_set_color, reg0, ":var_4"),
			(else_try),
				(overlay_set_color, reg0, ":var_5"),
			(try_end),
			(overlay_set_alpha, reg0, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_add, ":var_10", 1),
			(val_add, ":value_4", 1),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 1),
				(str_store_troop_name, 8, ":var_10"),
				(assign, reg8, ":value_4"),
				(call_script, "script_troop_attribute_export", ":var_10"),
				(create_button_overlay, "$manage_troops_02", "str_elite_name_card", 4),
			(else_try),
				(create_button_overlay, "$manage_troops_02", "str_not_hired"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_02", 1),
			(overlay_set_size, "$manage_troops_02", 3),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 0),
				(overlay_set_color, reg0, ":var_3"),
			(else_try),
				(troop_slot_ge, ":var_10", 16, 2),
				(overlay_set_color, reg0, ":var_4"),
			(else_try),
				(overlay_set_color, reg0, ":var_5"),
			(try_end),
			(overlay_set_alpha, reg0, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_add, ":var_10", 1),
			(val_add, ":value_4", 1),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 1),
				(str_store_troop_name, 8, ":var_10"),
				(assign, reg8, ":value_4"),
				(call_script, "script_troop_attribute_export", ":var_10"),
				(create_button_overlay, "$manage_troops_03", "str_elite_name_card", 4),
			(else_try),
				(create_button_overlay, "$manage_troops_03", "str_not_hired"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_03", 1),
			(overlay_set_size, "$manage_troops_03", 3),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 0),
				(overlay_set_color, reg0, ":var_3"),
			(else_try),
				(troop_slot_ge, ":var_10", 16, 2),
				(overlay_set_color, reg0, ":var_4"),
			(else_try),
				(overlay_set_color, reg0, ":var_5"),
			(try_end),
			(overlay_set_alpha, reg0, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_add, ":var_10", 1),
			(val_add, ":value_4", 1),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 1),
				(str_store_troop_name, 8, ":var_10"),
				(assign, reg8, ":value_4"),
				(call_script, "script_troop_attribute_export", ":var_10"),
				(create_button_overlay, "$manage_troops_04", "str_elite_name_card", 4),
			(else_try),
				(create_button_overlay, "$manage_troops_04", "str_not_hired"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_04", 1),
			(overlay_set_size, "$manage_troops_04", 3),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 0),
				(overlay_set_color, reg0, ":var_3"),
			(else_try),
				(troop_slot_ge, ":var_10", 16, 2),
				(overlay_set_color, reg0, ":var_4"),
			(else_try),
				(overlay_set_color, reg0, ":var_5"),
			(try_end),
			(overlay_set_alpha, reg0, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_add, ":var_10", 1),
			(val_add, ":value_4", 1),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 1),
				(str_store_troop_name, 8, ":var_10"),
				(assign, reg8, ":value_4"),
				(call_script, "script_troop_attribute_export", ":var_10"),
				(create_button_overlay, "$manage_troops_05", "str_elite_name_card", 4),
			(else_try),
				(create_button_overlay, "$manage_troops_05", "str_not_hired"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_05", 1),
			(overlay_set_size, "$manage_troops_05", 3),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 0),
				(overlay_set_color, reg0, ":var_3"),
			(else_try),
				(troop_slot_ge, ":var_10", 16, 2),
				(overlay_set_color, reg0, ":var_4"),
			(else_try),
				(overlay_set_color, reg0, ":var_5"),
			(try_end),
			(overlay_set_alpha, reg0, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_add, ":var_10", 1),
			(val_add, ":value_4", 1),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 1),
				(str_store_troop_name, 8, ":var_10"),
				(assign, reg8, ":value_4"),
				(call_script, "script_troop_attribute_export", ":var_10"),
				(create_button_overlay, "$manage_troops_06", "str_elite_name_card", 4),
			(else_try),
				(create_button_overlay, "$manage_troops_06", "str_not_hired"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_06", 1),
			(overlay_set_size, "$manage_troops_06", 3),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 0),
				(overlay_set_color, reg0, ":var_3"),
			(else_try),
				(troop_slot_ge, ":var_10", 16, 2),
				(overlay_set_color, reg0, ":var_4"),
			(else_try),
				(overlay_set_color, reg0, ":var_5"),
			(try_end),
			(overlay_set_alpha, reg0, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_add, ":var_10", 1),
			(val_add, ":value_4", 1),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 1),
				(str_store_troop_name, 8, ":var_10"),
				(assign, reg8, ":value_4"),
				(call_script, "script_troop_attribute_export", ":var_10"),
				(create_button_overlay, "$manage_troops_07", "str_elite_name_card", 4),
			(else_try),
				(create_button_overlay, "$manage_troops_07", "str_not_hired"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_07", 1),
			(overlay_set_size, "$manage_troops_07", 3),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 0),
				(overlay_set_color, reg0, ":var_3"),
			(else_try),
				(troop_slot_ge, ":var_10", 16, 2),
				(overlay_set_color, reg0, ":var_4"),
			(else_try),
				(overlay_set_color, reg0, ":var_5"),
			(try_end),
			(overlay_set_alpha, reg0, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_add, ":var_10", 1),
			(val_add, ":value_4", 1),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 1),
				(str_store_troop_name, 8, ":var_10"),
				(assign, reg8, ":value_4"),
				(call_script, "script_troop_attribute_export", ":var_10"),
				(create_button_overlay, "$manage_troops_08", "str_elite_name_card", 4),
			(else_try),
				(create_button_overlay, "$manage_troops_08", "str_not_hired"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_08", 1),
			(overlay_set_size, "$manage_troops_08", 3),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 0),
				(overlay_set_color, reg0, ":var_3"),
			(else_try),
				(troop_slot_ge, ":var_10", 16, 2),
				(overlay_set_color, reg0, ":var_4"),
			(else_try),
				(overlay_set_color, reg0, ":var_5"),
			(try_end),
			(overlay_set_alpha, reg0, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_add, ":var_10", 1),
			(val_add, ":value_4", 1),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 1),
				(str_store_troop_name, 8, ":var_10"),
				(assign, reg8, ":value_4"),
				(call_script, "script_troop_attribute_export", ":var_10"),
				(create_button_overlay, "$manage_troops_09", "str_elite_name_card", 4),
			(else_try),
				(create_button_overlay, "$manage_troops_09", "str_not_hired"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_09", 1),
			(overlay_set_size, "$manage_troops_09", 3),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 0),
				(overlay_set_color, reg0, ":var_3"),
			(else_try),
				(troop_slot_ge, ":var_10", 16, 2),
				(overlay_set_color, reg0, ":var_4"),
			(else_try),
				(overlay_set_color, reg0, ":var_5"),
			(try_end),
			(overlay_set_alpha, reg0, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_add, ":var_10", 1),
			(val_add, ":value_4", 1),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 1),
				(str_store_troop_name, 8, ":var_10"),
				(assign, reg8, ":value_4"),
				(call_script, "script_troop_attribute_export", ":var_10"),
				(create_button_overlay, "$manage_troops_10", "str_elite_name_card", 4),
			(else_try),
				(create_button_overlay, "$manage_troops_10", "str_not_hired"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_10", 1),
			(overlay_set_size, "$manage_troops_10", 3),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(try_begin),
				(troop_slot_eq, ":var_10", slot_troop_love_interest_1, 0),
				(overlay_set_color, reg0, ":var_3"),
			(else_try),
				(troop_slot_ge, ":var_10", 16, 2),
				(overlay_set_color, reg0, ":var_4"),
			(else_try),
				(overlay_set_color, reg0, ":var_5"),
			(try_end),
			(overlay_set_alpha, reg0, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(assign, ":value", 320),
			(assign, ":value_2", 380),
			(assign, ":value_3", 22),
			(create_text_overlay, reg0, "str_bstatistics", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", 10),
			(val_sub, ":value_2", ":value_3"),
			(create_text_overlay, reg0, "str_bclass", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(assign, ":var_11", 0),
			(assign, ":var_12", 0),
			(assign, ":var_13", 0),
			(assign, ":var_14", 0),
			(assign, ":var_15", 0),
			(assign, ":var_16", 0),
			(assign, ":var_17", 0),
			(assign, ":var_18", 0),
			(assign, ":var_19", 0),
			(assign, ":var_20", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range, ":localvariable", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_localvariable", "p_main_party", ":localvariable"),
				(gt, ":party_stack_troop_id_main_party_localvariable", "trp_army_size_troop"),
				(neg|troop_is_hero, ":party_stack_troop_id_main_party_localvariable"),
				(party_stack_get_size, ":party_stack_size_main_party_localvariable", "p_main_party", ":localvariable"),
				(try_begin),
					(gt, ":party_stack_size_main_party_localvariable", 0),
					(try_begin),
						(troop_is_guarantee_horse, ":party_stack_troop_id_main_party_localvariable"),
						(neg|troop_is_guarantee_ranged, ":party_stack_troop_id_main_party_localvariable"),
						(val_add, ":var_13", ":party_stack_size_main_party_localvariable"),
					(else_try),
						(troop_is_guarantee_horse, ":party_stack_troop_id_main_party_localvariable"),
						(troop_is_guarantee_ranged, ":party_stack_troop_id_main_party_localvariable"),
						(val_add, ":var_14", ":party_stack_size_main_party_localvariable"),
					(else_try),
						(neg|troop_is_guarantee_horse, ":party_stack_troop_id_main_party_localvariable"),
						(troop_is_guarantee_ranged, ":party_stack_troop_id_main_party_localvariable"),
						(val_add, ":var_12", ":party_stack_size_main_party_localvariable"),
					(else_try),
						(val_add, ":var_11", ":party_stack_size_main_party_localvariable"),
					(try_end),
					(store_character_level, ":character_level_party_stack_troop_id_main_party_localvariable", ":party_stack_troop_id_main_party_localvariable"),
					(try_begin),
						(gt, ":character_level_party_stack_troop_id_main_party_localvariable", 28),
						(val_add, ":var_20", ":party_stack_size_main_party_localvariable"),
					(else_try),
						(gt, ":character_level_party_stack_troop_id_main_party_localvariable", 25),
						(val_add, ":var_19", ":party_stack_size_main_party_localvariable"),
					(else_try),
						(gt, ":character_level_party_stack_troop_id_main_party_localvariable", 21),
						(val_add, ":var_18", ":party_stack_size_main_party_localvariable"),
					(else_try),
						(gt, ":character_level_party_stack_troop_id_main_party_localvariable", 18),
						(val_add, ":var_17", ":party_stack_size_main_party_localvariable"),
					(else_try),
						(gt, ":character_level_party_stack_troop_id_main_party_localvariable", 15),
						(val_add, ":var_16", ":party_stack_size_main_party_localvariable"),
					(else_try),
						(val_add, ":var_15", ":party_stack_size_main_party_localvariable"),
					(try_end),
				(try_end),
			(try_end),
			(set_show_messages, 0),
			(val_mul, ":var_11", 125),
			(val_mul, ":var_12", 125),
			(val_mul, ":var_13", 125),
			(val_mul, ":var_14", 125),
			(val_mul, ":var_15", 125),
			(val_mul, ":var_16", 125),
			(val_mul, ":var_17", 125),
			(val_mul, ":var_18", 125),
			(val_mul, ":var_19", 125),
			(val_mul, ":var_20", 125),
			(set_show_messages, 1),
			(val_sub, ":value_2", ":value_3"),
			(assign, reg8, ":var_11"),
			(create_text_overlay, reg0, "str_infr", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(assign, reg8, ":var_12"),
			(create_text_overlay, reg0, "str_arcr", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(assign, reg8, ":var_13"),
			(create_text_overlay, reg0, "str_cavr", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(assign, reg8, ":var_14"),
			(create_text_overlay, reg0, "str_harr", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(val_sub, ":value_2", ":value_3"),
			(create_text_overlay, reg0, "str_btier", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(assign, reg8, ":var_15"),
			(create_text_overlay, reg0, "str_1reg8", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(assign, reg8, ":var_16"),
			(create_text_overlay, reg0, "str_2reg8", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(assign, reg8, ":var_17"),
			(create_text_overlay, reg0, "str_3reg8", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(assign, reg8, ":var_18"),
			(create_text_overlay, reg0, "str_4reg8", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(assign, reg8, ":var_19"),
			(create_text_overlay, reg0, "str_5reg8", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(assign, reg8, ":var_20"),
			(create_text_overlay, reg0, "str_6reg8", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(assign, ":value", 15),
			(assign, ":value_2", 660),
			(create_text_overlay, reg0, "str_latest_battlek", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", 10),
			(val_sub, ":value_2", ":value_3"),
			(assign, reg8, "$bt_kill_count_player"),
			(str_store_troop_name, 8, "trp_player"),
			(create_text_overlay, reg0, "str_bt_kill_count_text", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
				(troop_slot_ge, ":troop", 21, 1),
				(troop_get_slot, reg8, ":troop", slot_troop_player_debt),
				(str_store_troop_name, 8, ":troop"),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_bt_kill_count_text", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(try_end),
			(try_for_range, ":troop", "trp_elite_troops_01", "trp_elite_troops_end"),
				(troop_slot_ge, ":troop", 21, 1),
				(troop_get_slot, reg8, ":troop", slot_troop_player_debt),
				(str_store_troop_name, 8, ":troop"),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_bt_kill_count_text", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(try_end),
			(try_for_range, ":troop", "trp_townsman", "trp_tournament_master"),
				(troop_slot_ge, ":troop", 21, 1),
				(troop_get_slot, reg8, ":troop", slot_troop_player_debt),
				(str_store_troop_name, 8, ":troop"),
				(val_sub, ":value_2", ":value_3"),
				(create_text_overlay, reg0, "str_bt_kill_count_text", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(try_end),
			(assign, ":value", 670),
			(assign, ":value_2", 510),
			(store_sub, ":value_5", "$manage_troop_selected", "trp_elite_troops_01"),
			(val_add, ":value_5", 1),
			(try_begin),
				(lt, "$manage_troop_selected", "trp_elite_troops_01"),
				(assign, ":value_5", 0),
			(try_end),
			(try_begin),
				(gt, "$manage_troop_selected", 0),
				(str_store_troop_name, 8, "$manage_troop_selected"),
				(assign, reg8, ":value_5"),
				(create_text_overlay, reg0, "str_elite_number", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1250),
			(position_set_y, 1, 1250),
			(overlay_set_size, reg0, 1),
			(assign, ":value", 670),
			(assign, ":value_2", 430),
			(assign, ":value_3", 33),
			(position_set_x, 5, 1100),
			(position_set_y, 5, 1100),
			(assign, ":value_6", 0),
			(try_begin),
				(is_between, "$manage_troop_selected", "trp_elite_troops_01", "trp_elite_troops_end"),
				(assign, ":value_6", 1),
			(else_try),
				(call_script, "script_wm_main_party_has_troop_sc", "$manage_troop_selected"),
				(eq, "$wm_comp_continue", 1),
				(assign, ":value_6", 1),
			(try_end),
			(try_begin),
				(eq, ":value_6", 1),
				(neq, "$manage_troop_selected", "trp_npc2"),
				(neq, "$manage_troop_selected", "trp_npc3"),
				(neq, "$manage_troop_selected", "trp_npc4"),
				(neq, "$manage_troop_selected", "trp_npc6"),
				(neq, "$manage_troop_selected", "trp_npc7"),
				(neq, "$manage_troop_selected", "trp_npc9"),
				(neq, "$manage_troop_selected", "trp_npc13"),
				(create_button_overlay, "$manage_troops_inven", "str_dequipment", 4),
			(else_try),
				(create_text_overlay, "$manage_troops_inven", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_inven", 1),
			(overlay_set_size, "$manage_troops_inven", 5),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(eq, ":value_6", 1),
				(create_button_overlay, "$manage_troops_stat", "str_dstatus", 4),
			(else_try),
				(create_text_overlay, "$manage_troops_stat", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_stat", 1),
			(overlay_set_size, "$manage_troops_stat", 5),
			(val_sub, ":value_2", ":value_3"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, "$manage_troop_selected", "trp_elite_troops_01", "trp_elite_troops_end"),
				(troop_slot_eq, "$manage_troop_selected", slot_troop_love_interest_1, 1),
				(create_button_overlay, "$manage_troops_dismissal", "str_ddismissal", 4),
			(else_try),
				(is_between, "$manage_troop_selected", "trp_elite_troops_01", "trp_elite_troops_end"),
				(create_button_overlay, "$manage_troops_dismissal", "str_dhire", 4),
			(else_try),
				(create_text_overlay, "$manage_troops_dismissal", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_dismissal", 1),
			(overlay_set_size, "$manage_troops_dismissal", 5),
			(val_sub, ":value_2", ":value_3"),
			(val_sub, ":value_2", ":value_3"),
			(assign, ":var_29", 0),
			(assign, ":var_30", 0),
			(party_get_num_prisoner_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range, ":localvariable", 0, ":num_companion_stacks_main_party"),
				(party_prisoner_stack_get_troop_id, ":party_stack_troop_id_main_party_localvariable", "p_main_party", ":localvariable"),
				(party_prisoner_stack_get_size, ":party_stack_size_main_party_localvariable", "p_main_party", ":localvariable"),
				(gt, ":party_stack_size_main_party_localvariable", 0),
				(val_add, ":var_29", ":party_stack_size_main_party_localvariable"),
				(try_begin),
					(neg|troop_is_hero, ":party_stack_troop_id_main_party_localvariable"),
					(val_add, ":var_30", ":party_stack_size_main_party_localvariable"),
				(try_end),
			(try_end),
			(try_begin),
				(gt, ":var_30", 0),
				(create_button_overlay, "$manage_troops_prisoner", "str_try_prisoner_convert", 4),
			(else_try),
				(create_text_overlay, "$manage_troops_prisoner", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_prisoner", 1),
			(overlay_set_size, "$manage_troops_prisoner", 5),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(gt, ":var_29", 0),
				(create_button_overlay, "$manage_troops_prison_open", "str_release_all_prisoners", 4),
			(else_try),
				(create_text_overlay, "$manage_troops_prison_open", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$manage_troops_prison_open", 1),
			(overlay_set_size, "$manage_troops_prison_open", 5),
			(create_in_game_button_overlay, "$manage_troops_exit", "str_return_butt"),
			(position_set_x, 1, 880),
			(position_set_y, 1, 35),
			(overlay_set_position, "$manage_troops_exit", 1),
			(overlay_set_color, "$manage_troops_exit", 16777215),
			(try_begin),
				(gt, "$manage_troop_selected", 0),
				(store_mul, ":value_7", "$manage_troop_selected", 2),
				(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_game_party_window", ":value_7"),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 720),
				(position_set_y, 1, 255),
				(overlay_set_position, reg0, 1),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$manage_troops_exit"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_inven"),
				(troop_get_slot, ":player_state", "trp_player", slot_troop_state),
				(call_script, "script_troop_get_player_relation", "$manage_troop_selected"),
				(assign, ":var_3", reg0),
				(try_begin),
					(eq, "$manage_troop_selected", "$orphan_girl_troop_id"),
					(assign, ":value", -50),
				(else_try),
					(gt, ":player_state", 0),
					(eq, "$manage_troop_selected", ":player_state"),
					(store_mul, ":value", 50, -1),
				(else_try),
					(is_between, "$manage_troop_selected", "trp_tt_lady_01_01", "trp_tt_lady_end"),
					(store_mul, ":value", 10, 1),
				(else_try),
					(assign, ":value", 0),
				(try_end),
				(try_begin),
					(lt, ":var_3", ":value"),
					(display_message, "str_equip_reject"),
				(else_try),
					(assign, "$manage_troop_pst_restart", 1),
					(set_show_messages, 0),
					(troop_get_inventory_capacity, ":inventory_capacity_l_manage_troop_selected", "$manage_troop_selected"),
					(try_for_range, ":localvariable", 0, ":inventory_capacity_l_manage_troop_selected"),
						(troop_get_inventory_slot, ":inventory_slot_manage_troop_selected_localvariable", "$manage_troop_selected", ":localvariable"),
						(is_between, ":inventory_slot_manage_troop_selected_localvariable", 92, 117),
						(troop_inventory_slot_get_item_amount, ":troop_inventory_slot_item_amount_manage_troop_selected_localvariable", "$manage_troop_selected", ":localvariable"),
						(val_add, ":troop_inventory_slot_item_amount_manage_troop_selected_localvariable", 1),
						(troop_remove_items, "$manage_troop_selected", ":inventory_slot_manage_troop_selected_localvariable", ":troop_inventory_slot_item_amount_manage_troop_selected_localvariable"),
					(try_end),
					(set_show_messages, 1),
					(change_screen_equip_other, "$manage_troop_selected"),
					(start_presentation, "prsnt_manage_troops"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_stat"),
				(assign, "$manage_troop_pst_restart", 1),
				(change_screen_view_character, "$manage_troop_selected"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_dismissal"),
				(try_begin),
					(is_between, "$manage_troop_selected", "trp_elite_troops_01", "trp_elite_troops_end"),
					(call_script, "script_party_money_level_ge", "p_main_party", 200),
					(try_begin),
						(troop_slot_eq, "$manage_troop_selected", slot_troop_love_interest_1, 1),
						(troop_set_slot, "$manage_troop_selected", slot_troop_love_interest_1, 0),
					(else_try),
						(neg|troop_slot_eq, "$manage_troop_selected", slot_troop_love_interest_1, 1),
						(eq, "$wm_mo_continue", 1),
						(troop_set_slot, "$manage_troop_selected", slot_troop_love_interest_1, 1),
						(call_script, "script_party_money_level_diff", "p_main_party", 200, 34),
					(else_try),
						(neg|troop_slot_eq, "$manage_troop_selected", slot_troop_love_interest_1, 1),
						(neq, "$wm_mo_continue", 1),
						(display_message, "str_nomoney", 0x00ff0000),
					(try_end),
					(assign, "$manage_troop_selected", 0),
				(try_end),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_prisoner"),
				(call_script, "script_party_money_level_ge", "p_main_party", 300),
				(try_begin),
					(eq, "$wm_mo_continue", 1),
					(call_script, "script_party_money_level_diff", "p_main_party", 300, 34),
					(assign, ":value_2", 0),
					(assign, ":value_3", 0),
					(party_get_num_prisoner_stacks, ":num_prisoner_stacks_main_party", "p_main_party"),
					(try_for_range, ":localvariable_2", 0, ":num_prisoner_stacks_main_party"),
						(party_prisoner_stack_get_troop_id, ":party_prisoner_stack_troop_id_main_party_localvariable_2", "p_main_party", ":localvariable_2"),
						(neg|troop_is_hero, ":party_prisoner_stack_troop_id_main_party_localvariable_2"),
						(party_prisoner_stack_get_size, ":party_prisoner_stack_size_main_party_localvariable_2", "p_main_party", ":localvariable_2"),
						(gt, ":party_prisoner_stack_size_main_party_localvariable_2", 0),
						(store_character_level, ":character_level_party_prisoner_stack_troop_id_main_party_localvariable_2", ":party_prisoner_stack_troop_id_main_party_localvariable_2"),
						(gt, ":character_level_party_prisoner_stack_troop_id_main_party_localvariable_2", 5),
						(val_div, ":character_level_party_prisoner_stack_troop_id_main_party_localvariable_2", 3),
						(store_random_in_range, ":random_in_range_0_character_level_party_prisoner_stack_troop_id_main_party_localvariable_2", 0, ":character_level_party_prisoner_stack_troop_id_main_party_localvariable_2"),
						(try_begin),
							(eq, ":random_in_range_0_character_level_party_prisoner_stack_troop_id_main_party_localvariable_2", 0),
							(assign, ":value_2", ":party_prisoner_stack_troop_id_main_party_localvariable_2"),
							(assign, ":value_3", ":party_prisoner_stack_size_main_party_localvariable_2"),
						(try_end),
					(try_end),
					(try_begin),
						(gt, ":value_2", 0),
						(gt, ":value_3", 0),
						(store_random_in_range, ":random_in_range_1_value_3", 1, ":value_3"),
						(try_begin),
							(gt, ":random_in_range_1_value_3", 5),
							(assign, ":random_in_range_1_value_3", 5),
						(try_end),
						(party_remove_prisoners, "p_main_party", ":value_2", ":random_in_range_1_value_3"),
						(call_script, "script_new_troop_add_sc", ":value_2", ":random_in_range_1_value_3"),
						(str_store_troop_name, 8, ":value_2"),
						(assign, reg8, ":random_in_range_1_value_3"),
						(display_message, "str_prisoner_offer_text"),
						(display_message, "str_prisoner_offer_yes"),
					(else_try),
						(display_message, "str_prisoner_offer_text"),
						(display_message, "str_prisoner_offer_no"),
					(try_end),
				(else_try),
					(display_message, "str_nomoney", 0x00ff0000),
				(try_end),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_prison_open"),
				(call_script, "script_remove_all_prisoners"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_comp_1"),
				(assign, "$manage_troop_selected", "$wm_comp_id_1"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_comp_2"),
				(assign, "$manage_troop_selected", "$wm_comp_id_2"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_comp_3"),
				(assign, "$manage_troop_selected", "$wm_comp_id_3"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_comp_4"),
				(assign, "$manage_troop_selected", "$wm_comp_id_4"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_comp_5"),
				(assign, "$manage_troop_selected", "$wm_comp_id_5"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_01"),
				(assign, "$manage_troop_selected", "trp_elite_troops_01"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_02"),
				(assign, "$manage_troop_selected", "trp_elite_troops_02"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_03"),
				(assign, "$manage_troop_selected", "trp_elite_troops_03"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_04"),
				(assign, "$manage_troop_selected", "trp_elite_troops_04"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_05"),
				(assign, "$manage_troop_selected", "trp_elite_troops_05"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_06"),
				(assign, "$manage_troop_selected", "trp_elite_troops_06"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_07"),
				(assign, "$manage_troop_selected", "trp_elite_troops_07"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_08"),
				(assign, "$manage_troop_selected", "trp_elite_troops_08"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_09"),
				(assign, "$manage_troop_selected", "trp_elite_troops_09"),
				(start_presentation, "prsnt_manage_troops"),
			(else_try),
				(eq, ":trigger_param_1", "$manage_troops_10"),
				(assign, "$manage_troop_selected", "trp_elite_troops_10"),
				(start_presentation, "prsnt_manage_troops"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
			(try_end),
			(try_begin),
				(key_clicked, 44),
				(mouse_get_position, 7),
				(set_fixed_point_multiplier, 1000),
				(position_get_x, ":position_x_7", 7),
				(position_get_y, ":position_y_7", 7),
				(assign, reg54, ":position_x_7"),
				(assign, reg55, ":position_y_7"),
				(display_message, "str_pst_xy_0"),
				(display_message, "str_pst_xy_x", 0x00ff0000),
				(display_message, "str_pst_xy_y", 0x00ffff00),
			(try_end)
		])
	]),

	("pst_land_occupied", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_game_button_overlay, "$pst_goal_end", "str_return_butt", 16),
			(position_set_x, 1, 895),
			(position_set_y, 1, 675),
			(overlay_set_position, "$pst_goal_end", 1),
			(create_text_overlay, reg0, "str_acv_goal", 16),
			(position_set_x, 1, 490),
			(position_set_y, 1, 660),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 3000),
			(position_set_y, 1, 3000),
			(overlay_set_size, reg0, 1),
			(create_text_overlay, reg0, "str_acv_1t", 16),
			(position_set_x, 1, 130),
			(position_set_y, 1, 610),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(eq, "$player_last_goal", 1),
				(overlay_set_color, reg0, 65280),
			(else_try),
				(eq, "$achievements_complete_01", 1),
				(overlay_set_color, reg0, 34303),
			(try_end),
			(str_store_faction_name, 11, "$start_enemy_fac"),
			(create_text_overlay, reg0, "str_acv_1", 4),
			(position_set_x, 1, 22),
			(position_set_y, 1, 532),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(call_script, "script_fac_count_ori_faction_wall_center", "$start_enemy_fac", "$kingdom_pick_start_faction"),
			(assign, reg11, reg21),
			(assign, reg12, reg22),
			(assign, reg13, reg23),
			(create_text_overlay, reg0, "str_target_territory_1", 4),
			(position_set_x, 1, 57),
			(position_set_y, 1, 469),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(neq, "$start_age", 1184),
				(neq, "$start_age", 1573),
				(create_text_overlay, reg0, "str_acv_2t", 16),
				(position_set_x, 1, 375),
				(position_set_y, 1, 610),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1300),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
				(try_begin),
					(eq, "$player_last_goal", 2),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$achievements_complete_02", 1),
					(overlay_set_color, reg0, 34303),
				(try_end),
				(create_text_overlay, reg0, "str_acv_2", 4),
				(position_set_x, 1, 263),
				(position_set_y, 1, 532),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_2", "fac_kingdom_5"),
				(assign, ":value", reg21),
				(assign, ":value_2", reg22),
				(assign, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_3", "fac_kingdom_5"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_5", "fac_kingdom_5"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_8", "fac_kingdom_5"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_23", "fac_kingdom_5"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_24", "fac_kingdom_5"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_26", "fac_kingdom_5"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_40", "fac_kingdom_5"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_49", "fac_kingdom_5"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(assign, reg14, ":value"),
				(assign, reg15, ":value_2"),
				(assign, reg16, ":value_3"),
				(create_text_overlay, reg0, "str_target_territory_2", 4),
				(position_set_x, 1, 310),
				(position_set_y, 1, 469),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
			(try_end),
			(try_begin),
				(this_or_next|eq, "$start_age", 1573),
				(eq, "$start_age", 1184),
				(create_text_overlay, reg0, "str_acv_13t", 16),
				(position_set_x, 1, 375),
				(position_set_y, 1, 610),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1300),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
				(try_begin),
					(eq, "$player_last_goal", 2),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$achievements_complete_02", 1),
					(overlay_set_color, reg0, 34303),
				(try_end),
				(create_text_overlay, reg0, "str_acv_13", 4),
				(position_set_x, 1, 263),
				(position_set_y, 1, 532),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_20", "$wm_player_fac"),
				(assign, ":value", reg21),
				(assign, ":value_2", reg22),
				(assign, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_63", "$wm_player_fac"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_64", "$wm_player_fac"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_65", "$wm_player_fac"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_66", "$wm_player_fac"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_67", "$wm_player_fac"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(assign, reg14, ":value"),
				(assign, reg15, ":value_2"),
				(assign, reg16, ":value_3"),
				(create_text_overlay, reg0, "str_target_territory_13", 4),
				(position_set_x, 1, 310),
				(position_set_y, 1, 469),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1573),
				(create_text_overlay, reg0, "str_acv_3t", 16),
				(position_set_x, 1, 615),
				(position_set_y, 1, 610),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1300),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
				(try_begin),
					(eq, "$player_last_goal", 3),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$achievements_complete_03", 1),
					(overlay_set_color, reg0, 34303),
				(try_end),
				(create_text_overlay, reg0, "str_acv_3", 4),
				(position_set_x, 1, 522),
				(position_set_y, 1, 532),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_30", "fac_kingdom_30"),
				(assign, ":value", reg21),
				(assign, ":value_2", reg22),
				(assign, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_21", "fac_kingdom_30"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_22", "fac_kingdom_30"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_1", "fac_kingdom_30"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_29", "fac_kingdom_30"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_28", "fac_kingdom_30"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_31", "fac_kingdom_30"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_36", "fac_kingdom_30"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_41", "fac_kingdom_30"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_43", "fac_kingdom_30"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_44", "fac_kingdom_30"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_52", "fac_kingdom_30"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_39", "fac_kingdom_30"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_14", "fac_kingdom_30"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(assign, reg17, ":value"),
				(assign, reg18, ":value_2"),
				(assign, reg19, ":value_3"),
				(create_text_overlay, reg0, "str_target_territory_3", 4),
				(position_set_x, 1, 552),
				(position_set_y, 1, 469),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1573),
				(neq, "$start_age", 1184),
				(create_text_overlay, reg0, "str_acv_4t", 16),
				(position_set_x, 1, 865),
				(position_set_y, 1, 595),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1200),
				(position_set_y, 1, 1200),
				(overlay_set_size, reg0, 1),
				(try_begin),
					(eq, "$player_last_goal", 4),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$achievements_complete_04", 1),
					(overlay_set_color, reg0, 34303),
				(try_end),
				(create_text_overlay, reg0, "str_acv_4", 4),
				(position_set_x, 1, 775),
				(position_set_y, 1, 532),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_17", "$wm_player_fac"),
				(assign, ":value", reg21),
				(assign, ":value_2", reg22),
				(assign, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_19", "$wm_player_fac"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_28", "$wm_player_fac"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_31", "$wm_player_fac"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_35", "$wm_player_fac"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_36", "$wm_player_fac"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_37", "$wm_player_fac"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_38", "$wm_player_fac"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_39", "$wm_player_fac"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_42", "$wm_player_fac"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_43", "$wm_player_fac"),
				(val_add, ":value", reg21),
				(val_add, ":value_2", reg22),
				(val_add, ":value_3", reg23),
				(assign, reg20, ":value"),
				(assign, reg24, ":value_2"),
				(assign, reg25, ":value_3"),
				(create_text_overlay, reg0, "str_target_territory_4", 4),
				(position_set_x, 1, 805),
				(position_set_y, 1, 469),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
			(try_end),
			(create_text_overlay, reg0, "str_acv_5t", 16),
			(position_set_x, 1, 130),
			(position_set_y, 1, 395),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1250),
			(position_set_y, 1, 1250),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(eq, "$player_last_goal", 5),
				(overlay_set_color, reg0, 65280),
			(else_try),
				(eq, "$achievements_complete_05", 1),
				(overlay_set_color, reg0, 34303),
			(try_end),
			(create_text_overlay, reg0, "str_acv_5", 4),
			(position_set_x, 1, 20),
			(position_set_y, 1, 315),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_2", "$wm_player_fac"),
			(assign, ":value", reg21),
			(assign, ":value_2", reg22),
			(assign, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_5", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_8", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_11", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_15", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_18", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_23", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_24", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_25", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(assign, reg26, ":value"),
			(assign, reg27, ":value_2"),
			(assign, reg28, ":value_3"),
			(create_text_overlay, reg0, "str_target_territory_5", 4),
			(position_set_x, 1, 57),
			(position_set_y, 1, 252),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(create_text_overlay, reg0, "str_acv_6t", 16),
			(position_set_x, 1, 371),
			(position_set_y, 1, 395),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(eq, "$player_last_goal", 6),
				(overlay_set_color, reg0, 65280),
			(else_try),
				(eq, "$achievements_complete_06", 1),
				(overlay_set_color, reg0, 34303),
			(try_end),
			(create_text_overlay, reg0, "str_acv_6", 4),
			(position_set_x, 1, 266),
			(position_set_y, 1, 315),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_3", "$wm_player_fac"),
			(assign, ":value", reg21),
			(assign, ":value_2", reg22),
			(assign, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_4", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_6", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_9", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_13", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_14", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_26", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_40", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_49", "$wm_player_fac"),
			(val_add, ":value", reg21),
			(val_add, ":value_2", reg22),
			(val_add, ":value_3", reg23),
			(assign, reg29, ":value"),
			(assign, reg30, ":value_2"),
			(assign, reg31, ":value_3"),
			(create_text_overlay, reg0, "str_target_territory_6", 4),
			(position_set_x, 1, 311),
			(position_set_y, 1, 252),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(neq, "$start_age", 1184),
				(create_text_overlay, reg0, "str_acv_7t", 16),
				(position_set_x, 1, 621),
				(position_set_y, 1, 395),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1300),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
				(try_begin),
					(eq, "$player_last_goal", 7),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$achievements_complete_07", 1),
					(overlay_set_color, reg0, 34303),
				(try_end),
				(create_text_overlay, reg0, "str_acv_7", 4),
				(position_set_x, 1, 513),
				(position_set_y, 1, 315),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(call_script, "script_fac_count_ori_faction_wall_center", "fac_pioneers", "$wm_player_fac"),
				(assign, ":value", reg21),
				(assign, ":value_2", reg22),
				(assign, ":value_3", reg23),
				(assign, reg32, ":value"),
				(assign, reg33, ":value_2"),
				(assign, reg34, ":value_3"),
				(create_text_overlay, reg0, "str_target_territory_7", 4),
				(position_set_x, 1, 557),
				(position_set_y, 1, 252),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
			(try_end),
			(create_text_overlay, reg0, "str_acv_8t", 16),
			(position_set_x, 1, 862),
			(position_set_y, 1, 395),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(eq, "$player_last_goal", 8),
				(overlay_set_color, reg0, 65280),
			(else_try),
				(eq, "$achievements_complete_08", 1),
				(overlay_set_color, reg0, 34303),
			(try_end),
			(create_text_overlay, reg0, "str_acv_8", 4),
			(position_set_x, 1, 760),
			(position_set_y, 1, 315),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(assign, ":value", 0),
			(assign, ":value_2", 0),
			(assign, ":value_3", 0),
			(try_for_range, ":party", "p_pyongyang", "p_place_end"),
				(store_faction_of_party, ":faction_of_party_party", ":party"),
				(val_add, ":value_3", 1),
				(try_begin),
					(eq, ":faction_of_party_party", "$wm_player_fac"),
					(val_add, ":value", 1),
				(else_try),
					(val_add, ":value_2", 1),
				(try_end),
			(try_end),
			(assign, reg35, ":value"),
			(assign, reg36, ":value_2"),
			(assign, reg37, ":value_3"),
			(create_text_overlay, reg0, "str_target_territory_8", 4),
			(position_set_x, 1, 793),
			(position_set_y, 1, 252),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(neq, "$start_age", 1184),
				(create_text_overlay, reg0, "str_acv_9t", 16),
				(position_set_x, 1, 130),
				(position_set_y, 1, 180),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1300),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
				(try_begin),
					(eq, "$player_last_goal", 9),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$achievements_complete_09", 1),
					(overlay_set_color, reg0, 34303),
				(try_end),
				(create_text_overlay, reg0, "str_acv_9", 4),
				(position_set_x, 1, 18),
				(position_set_y, 1, 100),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(assign, ":value", 0),
				(try_for_range, ":party", "p_tradeport1", "p_tradeport_end"),
					(try_begin),
						(party_slot_eq, ":party", slot_town_prosperity, 1),
						(val_add, ":value", 1),
					(try_end),
				(try_end),
				(assign, reg38, ":value"),
				(create_text_overlay, reg0, "str_target_territory_9", 4),
				(position_set_x, 1, 57),
				(position_set_y, 1, 50),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1184),
				(create_text_overlay, reg0, "str_acv_10t", 16),
				(position_set_x, 1, 371),
				(position_set_y, 1, 180),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1300),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
				(try_begin),
					(eq, "$player_last_goal", 10),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$achievements_complete_10", 1),
					(overlay_set_color, reg0, 34303),
				(try_end),
				(create_text_overlay, reg0, "str_acv_10", 4),
				(position_set_x, 1, 265),
				(position_set_y, 1, 100),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(assign, ":value", 0),
				(try_for_range, ":party", "p_ruin_1", "p_ruin_end"),
					(try_begin),
						(party_slot_eq, ":party", slot_party_ignore_player_until, 4),
						(val_add, ":value", 1),
					(try_end),
				(try_end),
				(assign, reg39, ":value"),
				(create_text_overlay, reg0, "str_target_territory_10", 4),
				(position_set_x, 1, 304),
				(position_set_y, 1, 50),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
			(try_end),
			(try_begin),
				(neq, "$start_age", 1184),
				(create_text_overlay, reg0, "str_acv_11t", 16),
				(position_set_x, 1, 617),
				(position_set_y, 1, 180),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1300),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
				(try_begin),
					(eq, "$player_last_goal", 11),
					(overlay_set_color, reg0, 65280),
				(else_try),
					(eq, "$achievements_complete_11", 1),
					(overlay_set_color, reg0, 34303),
				(try_end),
				(create_text_overlay, reg0, "str_acv_11", 4),
				(position_set_x, 1, 510),
				(position_set_y, 1, 84),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(assign, reg40, "$pirate_king"),
				(create_text_overlay, reg0, "str_target_territory_11", 4),
				(position_set_x, 1, 522),
				(position_set_y, 1, 50),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
			(try_end),
			(call_script, "script_troop_type_sett", "trp_player"),
			(try_begin),
				(gt, "$troop_gender_type", 10),
				(create_text_overlay, reg0, "str_acv_12t1", 16),
			(else_try),
				(create_text_overlay, reg0, "str_acv_12t2", 16),
			(try_end),
			(position_set_x, 1, 863),
			(position_set_y, 1, 180),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(eq, "$player_last_goal", 12),
				(overlay_set_color, reg0, 65280),
			(else_try),
				(eq, "$achievements_complete_12", 1),
				(overlay_set_color, reg0, 34303),
			(try_end),
			(create_text_overlay, reg0, "str_acv_12", 4),
			(position_set_x, 1, 775),
			(position_set_y, 1, 100),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(gt, "$troop_gender_type", 10),
				(assign, ":var_6", 0),
				(try_for_range, ":troop", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(troop_slot_eq, ":troop", slot_troop_last_comment_time, 74),
					(val_add, ":var_6", 1),
				(try_end),
				(assign, reg41, ":var_6"),
			(else_try),
				(assign, ":var_8", 0),
				(try_for_range, ":troop", "trp_tt_lady_01_01", "trp_tt_lady_end"),
					(troop_slot_eq, ":troop", slot_troop_last_comment_time, 74),
					(val_add, ":var_8", 1),
				(try_end),
				(assign, reg41, ":var_8"),
			(try_end),
			(try_begin),
				(gt, "$troop_gender_type", 10),
				(create_text_overlay, reg0, "str_target_territory_12_f", 4),
			(else_try),
				(create_text_overlay, reg0, "str_target_territory_12_m", 4),
			(try_end),
			(position_set_x, 1, 770),
			(position_set_y, 1, 50),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(assign, ":value_4", 18),
			(assign, ":value_5", 455),
			(assign, ":value_6", 11500),
			(assign, ":value_7", 9500),
			(assign, ":value_8", 245),
			(create_image_button_overlay, "$pst_last_goal_1", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_color, "$pst_last_goal_1", 14548991),
			(overlay_set_alpha, "$pst_last_goal_1", 191),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$pst_last_goal_1", 1),
			(position_set_x, 1, ":value_6"),
			(position_set_y, 1, ":value_7"),
			(overlay_set_size, "$pst_last_goal_1", 1),
			(val_add, ":value_4", ":value_8"),
			(try_begin),
				(create_image_button_overlay, "$pst_last_goal_2", "mesh_white_plane", "mesh_white_plane"),
			(try_end),
			(overlay_set_color, "$pst_last_goal_2", 16768511),
			(overlay_set_alpha, "$pst_last_goal_2", 191),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$pst_last_goal_2", 1),
			(position_set_x, 1, ":value_6"),
			(position_set_y, 1, ":value_7"),
			(overlay_set_size, "$pst_last_goal_2", 1),
			(val_add, ":value_4", ":value_8"),
			(create_image_button_overlay, "$pst_last_goal_3", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_color, "$pst_last_goal_3", 14540287),
			(overlay_set_alpha, "$pst_last_goal_3", 191),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$pst_last_goal_3", 1),
			(position_set_x, 1, ":value_6"),
			(position_set_y, 1, ":value_7"),
			(overlay_set_size, "$pst_last_goal_3", 1),
			(val_add, ":value_4", ":value_8"),
			(try_begin),
				(neq, "$start_age", 1184),
				(create_image_button_overlay, "$pst_last_goal_4", "mesh_white_plane", "mesh_white_plane"),
			(else_try),
				(create_text_overlay, "$pst_last_goal_4", "str_empty_string"),
			(try_end),
			(overlay_set_color, "$pst_last_goal_4", 16777181),
			(overlay_set_alpha, "$pst_last_goal_4", 191),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$pst_last_goal_4", 1),
			(position_set_x, 1, ":value_6"),
			(position_set_y, 1, ":value_7"),
			(overlay_set_size, "$pst_last_goal_4", 1),
			(assign, ":value_4", 18),
			(assign, ":value_5", 240),
			(assign, ":value_6", 11500),
			(assign, ":value_7", 9500),
			(assign, ":value_8", 245),
			(create_image_button_overlay, "$pst_last_goal_5", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_color, "$pst_last_goal_5", 12404540),
			(overlay_set_alpha, "$pst_last_goal_5", 191),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$pst_last_goal_5", 1),
			(position_set_x, 1, ":value_6"),
			(position_set_y, 1, ":value_7"),
			(overlay_set_size, "$pst_last_goal_5", 1),
			(val_add, ":value_4", ":value_8"),
			(create_image_button_overlay, "$pst_last_goal_6", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_color, "$pst_last_goal_6", 3259120),
			(overlay_set_alpha, "$pst_last_goal_6", 191),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$pst_last_goal_6", 1),
			(position_set_x, 1, ":value_6"),
			(position_set_y, 1, ":value_7"),
			(overlay_set_size, "$pst_last_goal_6", 1),
			(val_add, ":value_4", ":value_8"),
			(try_begin),
				(neq, "$start_age", 1184),
				(create_image_button_overlay, "$pst_last_goal_7", "mesh_white_plane", "mesh_white_plane"),
			(else_try),
				(create_text_overlay, "$pst_last_goal_7", "str_empty_string"),
			(try_end),
			(overlay_set_color, "$pst_last_goal_7", 14810972),
			(overlay_set_alpha, "$pst_last_goal_7", 191),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$pst_last_goal_7", 1),
			(position_set_x, 1, ":value_6"),
			(position_set_y, 1, ":value_7"),
			(overlay_set_size, "$pst_last_goal_7", 1),
			(val_add, ":value_4", ":value_8"),
			(create_image_button_overlay, "$pst_last_goal_8", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_color, "$pst_last_goal_8", 10984284),
			(overlay_set_alpha, "$pst_last_goal_8", 191),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$pst_last_goal_8", 1),
			(position_set_x, 1, ":value_6"),
			(position_set_y, 1, ":value_7"),
			(overlay_set_size, "$pst_last_goal_8", 1),
			(assign, ":value_4", 18),
			(assign, ":value_5", 24),
			(assign, ":value_6", 11500),
			(assign, ":value_7", 9500),
			(assign, ":value_8", 245),
			(try_begin),
				(neq, "$start_age", 1184),
				(create_image_button_overlay, "$pst_last_goal_9", "mesh_white_plane", "mesh_white_plane"),
			(else_try),
				(create_text_overlay, "$pst_last_goal_9", "str_empty_string"),
			(try_end),
			(overlay_set_color, "$pst_last_goal_9", 16777085),
			(overlay_set_alpha, "$pst_last_goal_9", 191),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$pst_last_goal_9", 1),
			(position_set_x, 1, ":value_6"),
			(position_set_y, 1, ":value_7"),
			(overlay_set_size, "$pst_last_goal_9", 1),
			(val_add, ":value_4", ":value_8"),
			(try_begin),
				(neq, "$start_age", 1184),
				(create_image_button_overlay, "$pst_last_goal_10", "mesh_white_plane", "mesh_white_plane"),
			(else_try),
				(create_text_overlay, "$pst_last_goal_10", "str_empty_string"),
			(try_end),
			(overlay_set_color, "$pst_last_goal_10", 7125391),
			(overlay_set_alpha, "$pst_last_goal_10", 191),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$pst_last_goal_10", 1),
			(position_set_x, 1, ":value_6"),
			(position_set_y, 1, ":value_7"),
			(overlay_set_size, "$pst_last_goal_10", 1),
			(val_add, ":value_4", ":value_8"),
			(try_begin),
				(neq, "$start_age", 1184),
				(create_image_button_overlay, "$pst_last_goal_11", "mesh_white_plane", "mesh_white_plane"),
			(else_try),
				(create_text_overlay, "$pst_last_goal_11", "str_empty_string"),
			(try_end),
			(overlay_set_color, "$pst_last_goal_11", 12281046),
			(overlay_set_alpha, "$pst_last_goal_11", 191),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$pst_last_goal_11", 1),
			(position_set_x, 1, ":value_6"),
			(position_set_y, 1, ":value_7"),
			(overlay_set_size, "$pst_last_goal_11", 1),
			(val_add, ":value_4", ":value_8"),
			(create_image_button_overlay, "$pst_last_goal_12", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_color, "$pst_last_goal_12", 12691607),
			(overlay_set_alpha, "$pst_last_goal_12", 191),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, "$pst_last_goal_12", 1),
			(position_set_x, 1, ":value_6"),
			(position_set_y, 1, ":value_7"),
			(overlay_set_size, "$pst_last_goal_12", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$pst_goal_end"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$pst_last_goal_1"),
				(assign, "$player_last_goal", 1),
				(call_script, "script_fac_count_ori_faction_name_print", "$start_enemy_fac", "$kingdom_pick_start_faction"),
				(try_begin),
					(neq, "$achievements_complete_01", 1),
					(call_script, "script_fac_count_ori_faction_wall_center", "$start_enemy_fac", "$kingdom_pick_start_faction"),
					(assign, ":value", reg21),
					(assign, ":value_2", reg23),
					(try_begin),
						(ge, ":value", ":value_2"),
						(assign, "$achievements_complete_01", 1),
						(play_sound, "snd_good_news_2"),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_pst_land_occupied"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_last_goal_2"),
				(assign, "$player_last_goal", 2),
				(try_begin),
					(this_or_next|eq, "$start_age", 1573),
					(eq, "$start_age", 1184),
					(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_20", "$wm_player_fac"),
					(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_63", "$wm_player_fac"),
					(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_64", "$wm_player_fac"),
					(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_65", "$wm_player_fac"),
					(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_66", "$wm_player_fac"),
					(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_67", "$wm_player_fac"),
					(try_begin),
						(neq, "$achievements_complete_02", 1),
						(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_20", "$wm_player_fac"),
						(assign, ":value", reg21),
						(assign, ":value_2", reg23),
						(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_63", "$wm_player_fac"),
						(val_add, ":value", reg21),
						(val_add, ":value_2", reg23),
						(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_64", "$wm_player_fac"),
						(val_add, ":value", reg21),
						(val_add, ":value_2", reg23),
						(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_65", "$wm_player_fac"),
						(val_add, ":value", reg21),
						(val_add, ":value_2", reg23),
						(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_66", "$wm_player_fac"),
						(val_add, ":value", reg21),
						(val_add, ":value_2", reg23),
						(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_67", "$wm_player_fac"),
						(val_add, ":value", reg21),
						(val_add, ":value_2", reg23),
						(try_begin),
							(ge, ":value", ":value_2"),
							(assign, "$achievements_complete_02", 1),
							(play_sound, "snd_good_news_2"),
						(try_end),
					(try_end),
				(else_try),
					(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_2", "fac_kingdom_5"),
					(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_3", "fac_kingdom_5"),
					(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_5", "fac_kingdom_5"),
					(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_8", "fac_kingdom_5"),
					(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_23", "fac_kingdom_5"),
					(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_24", "fac_kingdom_5"),
					(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_26", "fac_kingdom_5"),
					(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_40", "fac_kingdom_5"),
					(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_49", "fac_kingdom_5"),
					(try_begin),
						(neq, "$achievements_complete_02", 1),
						(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_2", "fac_kingdom_5"),
						(assign, ":value", reg21),
						(assign, ":value_2", reg23),
						(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_3", "fac_kingdom_5"),
						(val_add, ":value", reg21),
						(val_add, ":value_2", reg23),
						(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_5", "fac_kingdom_5"),
						(val_add, ":value", reg21),
						(val_add, ":value_2", reg23),
						(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_8", "fac_kingdom_5"),
						(val_add, ":value", reg21),
						(val_add, ":value_2", reg23),
						(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_23", "fac_kingdom_5"),
						(val_add, ":value", reg21),
						(val_add, ":value_2", reg23),
						(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_24", "fac_kingdom_5"),
						(val_add, ":value", reg21),
						(val_add, ":value_2", reg23),
						(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_26", "fac_kingdom_5"),
						(val_add, ":value", reg21),
						(val_add, ":value_2", reg23),
						(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_40", "fac_kingdom_5"),
						(val_add, ":value", reg21),
						(val_add, ":value_2", reg23),
						(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_49", "fac_kingdom_5"),
						(val_add, ":value", reg21),
						(val_add, ":value_2", reg23),
						(try_begin),
							(ge, ":value", ":value_2"),
							(assign, "$achievements_complete_02", 1),
							(play_sound, "snd_good_news_2"),
						(try_end),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_pst_land_occupied"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_last_goal_3"),
				(assign, "$player_last_goal", 3),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_30", "fac_kingdom_30"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_21", "fac_kingdom_30"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_22", "fac_kingdom_30"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_1", "fac_kingdom_30"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_29", "fac_kingdom_30"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_28", "fac_kingdom_30"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_31", "fac_kingdom_30"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_36", "fac_kingdom_30"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_41", "fac_kingdom_30"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_43", "fac_kingdom_30"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_44", "fac_kingdom_30"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_52", "fac_kingdom_30"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_39", "fac_kingdom_30"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_14", "fac_kingdom_30"),
				(try_begin),
					(neq, "$achievements_complete_03", 1),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_30", "fac_kingdom_30"),
					(assign, ":value", reg21),
					(assign, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_21", "fac_kingdom_30"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_22", "fac_kingdom_30"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_1", "fac_kingdom_30"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_29", "fac_kingdom_30"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_28", "fac_kingdom_30"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_31", "fac_kingdom_30"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_36", "fac_kingdom_30"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_41", "fac_kingdom_30"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_43", "fac_kingdom_30"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_44", "fac_kingdom_30"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_52", "fac_kingdom_30"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_39", "fac_kingdom_30"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_14", "fac_kingdom_30"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(try_begin),
						(ge, ":value", ":value_2"),
						(assign, "$achievements_complete_03", 1),
						(play_sound, "snd_good_news_2"),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_pst_land_occupied"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_last_goal_4"),
				(assign, "$player_last_goal", 4),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_17", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_19", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_28", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_31", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_35", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_36", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_37", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_38", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_39", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_42", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_43", "$wm_player_fac"),
				(try_begin),
					(neq, "$achievements_complete_04", 1),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_17", "$wm_player_fac"),
					(assign, ":value", reg21),
					(assign, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_19", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_28", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_31", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_35", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_36", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_37", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_38", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_39", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_42", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_43", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(try_begin),
						(ge, ":value", ":value_2"),
						(assign, "$achievements_complete_04", 1),
						(play_sound, "snd_good_news_2"),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_pst_land_occupied"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_last_goal_5"),
				(assign, "$player_last_goal", 5),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_2", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_5", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_8", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_11", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_15", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_18", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_23", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_24", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_25", "$wm_player_fac"),
				(try_begin),
					(neq, "$achievements_complete_05", 1),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_2", "$wm_player_fac"),
					(assign, ":value", reg21),
					(assign, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_5", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_8", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_11", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_15", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_18", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_23", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_24", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_25", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(try_begin),
						(ge, ":value", ":value_2"),
						(assign, "$achievements_complete_05", 1),
						(play_sound, "snd_good_news_2"),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_pst_land_occupied"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_last_goal_6"),
				(assign, "$player_last_goal", 6),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_3", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_4", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_6", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_9", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_13", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_14", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_26", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_40", "$wm_player_fac"),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_kingdom_49", "$wm_player_fac"),
				(try_begin),
					(neq, "$achievements_complete_06", 1),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_3", "$wm_player_fac"),
					(assign, ":value", reg21),
					(assign, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_4", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_6", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_9", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_13", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_14", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_26", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_40", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_kingdom_49", "$wm_player_fac"),
					(val_add, ":value", reg21),
					(val_add, ":value_2", reg23),
					(try_begin),
						(ge, ":value", ":value_2"),
						(assign, "$achievements_complete_06", 1),
						(play_sound, "snd_good_news_2"),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_pst_land_occupied"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_last_goal_7"),
				(assign, "$player_last_goal", 7),
				(call_script, "script_fac_count_ori_faction_name_print", "fac_pioneers", "$wm_player_fac"),
				(try_begin),
					(neq, "$achievements_complete_07", 1),
					(call_script, "script_fac_count_ori_faction_wall_center", "fac_pioneers", "$wm_player_fac"),
					(assign, ":value", reg21),
					(assign, ":value_2", reg23),
					(try_begin),
						(ge, ":value", ":value_2"),
						(assign, "$achievements_complete_07", 1),
						(play_sound, "snd_good_news_2"),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_pst_land_occupied"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_last_goal_8"),
				(assign, "$player_last_goal", 8),
				(try_begin),
					(neq, "$achievements_complete_08", 1),
					(assign, ":value", 0),
					(assign, ":value_2", 0),
					(try_for_range, ":party", "p_pyongyang", "p_place_end"),
						(store_faction_of_party, ":faction_of_party_party", ":party"),
						(val_add, ":value_2", 1),
						(try_begin),
							(eq, ":faction_of_party_party", "$wm_player_fac"),
							(faction_slot_eq, "$wm_player_fac", 1, "trp_player"),
							(val_add, ":value", 1),
						(try_end),
					(try_end),
					(try_begin),
						(ge, ":value", ":value_2"),
						(assign, "$achievements_complete_08", 1),
						(play_sound, "snd_good_news_2"),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_pst_land_occupied"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_last_goal_9"),
				(assign, "$player_last_goal", 9),
				(try_begin),
					(neq, "$achievements_complete_09", 1),
					(assign, ":value", 0),
					(try_for_range, ":party", "p_tradeport1", "p_tradeport_end"),
						(try_begin),
							(party_slot_eq, ":party", slot_town_prosperity, 1),
							(val_add, ":value", 1),
						(try_end),
					(try_end),
					(try_begin),
						(ge, ":value", 109),
						(assign, "$achievements_complete_09", 1),
						(play_sound, "snd_good_news_2"),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_pst_land_occupied"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_last_goal_10"),
				(assign, "$player_last_goal", 10),
				(try_begin),
					(neq, "$achievements_complete_10", 1),
					(assign, ":value", 0),
					(try_for_range, ":party", "p_ruin_1", "p_ruin_end"),
						(try_begin),
							(party_slot_eq, ":party", slot_party_ignore_player_until, 4),
							(val_add, ":value", 1),
						(try_end),
					(try_end),
					(try_begin),
						(ge, ":value", 160),
						(assign, "$achievements_complete_10", 1),
						(play_sound, "snd_good_news_2"),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_pst_land_occupied"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_last_goal_11"),
				(assign, "$player_last_goal", 11),
				(try_begin),
					(neq, "$achievements_complete_11", 1),
					(try_begin),
						(eq, "$pirate_king", 1),
						(assign, "$achievements_complete_11", 1),
						(play_sound, "snd_good_news_2"),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_pst_land_occupied"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_last_goal_12"),
				(assign, "$player_last_goal", 12),
				(try_begin),
					(neq, "$achievements_complete_12", 1),
					(call_script, "script_troop_type_sett", "trp_player"),
					(assign, ":var_6", 0),
					(assign, ":var_7", 0),
					(try_begin),
						(gt, "$troop_gender_type", 10),
						(try_for_range, ":troop", "trp_tt_lord_01_00", "trp_tt_lord_end"),
							(troop_slot_eq, ":troop", slot_troop_last_comment_time, 74),
							(val_add, ":var_6", 1),
						(try_end),
					(else_try),
						(try_for_range, ":troop", "trp_tt_lady_01_01", "trp_tt_lady_end"),
							(troop_slot_eq, ":troop", slot_troop_last_comment_time, 74),
							(val_add, ":var_7", 1),
						(try_end),
					(try_end),
					(try_begin),
						(gt, "$troop_gender_type", 10),
						(ge, ":var_6", 300),
						(assign, "$achievements_complete_12", 1),
						(play_sound, "snd_good_news_2"),
					(else_try),
						(ge, ":var_7", 220),
						(assign, "$achievements_complete_12", 1),
						(play_sound, "snd_good_news_2"),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_pst_land_occupied"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("tradeguild", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(call_script, "script_wm_trade_price_export", "$pst_target_no", 0),
			(position_set_x, 3, 2800),
			(position_set_y, 3, 2800),
			(assign, ":value", 495),
			(assign, ":value_2", 650),
			(str_store_party_name, 8, "$pst_target_no"),
			(create_text_overlay, reg0, "str_glob_s8", 16),
			(overlay_set_size, reg0, 3),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 3, 1200),
			(position_set_y, 3, 1200),
			(assign, ":var_3", 50),
			(assign, ":var_4", 330),
			(assign, ":var_5", 550),
			(assign, ":var_6", 1673052),
			(assign, ":var_7", 4915297),
			(assign, ":var_8", 2845891),
			(assign, ":value", 35),
			(assign, ":value_2", ":var_5"),
			(assign, ":var_9", "mesh_pic_wm_horse"),
			(assign, reg8, "$goods_sell_Horse"),
			(call_script, "script_item_stat_type_dive", 92),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 92),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_ahorse"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Fine_wood"),
			(call_script, "script_item_stat_type_dive", 93),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 93),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_afine_wood"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Iron"),
			(call_script, "script_item_stat_type_dive", 94),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 94),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_iron"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Elephant"),
			(call_script, "script_item_stat_type_dive", 95),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 95),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_elephant"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Whale"),
			(call_script, "script_item_stat_type_dive", 96),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 96),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_whale"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Fish"),
			(call_script, "script_item_stat_type_dive", 97),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 97),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_fish"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Maize"),
			(call_script, "script_item_stat_type_dive", 98),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 98),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_maize"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Copper"),
			(call_script, "script_item_stat_type_dive", 99),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 99),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_copper"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Marble"),
			(call_script, "script_item_stat_type_dive", 100),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 100),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_marble"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(assign, ":value_2", ":var_5"),
			(val_add, ":value", ":var_4"),
			(assign, reg8, "$goods_sell_Pearl"),
			(call_script, "script_item_stat_type_dive", 101),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 101),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_pearl"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Gem"),
			(call_script, "script_item_stat_type_dive", 102),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 102),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_gem"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Ceramic"),
			(call_script, "script_item_stat_type_dive", 103),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 103),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_ceramic"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Gold"),
			(call_script, "script_item_stat_type_dive", 104),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 104),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_gold"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Silver"),
			(call_script, "script_item_stat_type_dive", 105),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 105),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_silver"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Ivory"),
			(call_script, "script_item_stat_type_dive", 106),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 106),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_ivory"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Coffee"),
			(call_script, "script_item_stat_type_dive", 107),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 107),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_coffee"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Cacao"),
			(call_script, "script_item_stat_type_dive", 108),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 108),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_cacao"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Silk"),
			(call_script, "script_item_stat_type_dive", 109),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 109),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_silk"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(assign, ":value_2", ":var_5"),
			(val_add, ":value", ":var_4"),
			(assign, reg8, "$goods_sell_Nutmeg"),
			(call_script, "script_item_stat_type_dive", 110),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 110),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_nutmeg"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Allspice"),
			(call_script, "script_item_stat_type_dive", 111),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 111),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_allspice"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Cinnamon"),
			(call_script, "script_item_stat_type_dive", 112),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 112),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_cinnamon"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Clove"),
			(call_script, "script_item_stat_type_dive", 113),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 113),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_clove"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Pepper"),
			(call_script, "script_item_stat_type_dive", 114),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 114),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_pepper"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Tabaco"),
			(call_script, "script_item_stat_type_dive", 115),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 115),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_tabaco"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$goods_sell_Tea"),
			(call_script, "script_item_stat_type_dive", 116),
			(assign, reg9, "$dive_itm_price"),
			(call_script, "script_wm_item_count", "trp_player", 116),
			(assign, reg7, reg23),
			(create_text_overlay, reg0, "str_a_tea"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(gt, reg7, 0),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_8"),
			(else_try),
				(gt, reg7, 0),
				(overlay_set_color, reg0, ":var_7"),
			(else_try),
				(gt, reg8, reg9),
				(overlay_set_color, reg0, ":var_6"),
			(try_end),
			(val_add, ":var_9", 1),
			(val_sub, ":value", 23),
			(create_mesh_overlay, reg0, ":var_9"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(val_add, ":value", 23),
			(create_in_game_button_overlay, "$tradeguild_exit", "str_exittt"),
			(overlay_set_color, "$tradeguild_exit", 16777215),
			(position_set_x, 1, 500),
			(position_set_y, 1, 25),
			(overlay_set_position, "$tradeguild_exit", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$tradeguild_exit"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("pst_workshop", 0, mesh_pic_xex12, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(position_set_x, 3, 2800),
			(position_set_y, 3, 2800),
			(assign, ":value", 495),
			(assign, ":value_2", 650),
			(str_store_party_name, 8, "$pst_target_no"),
			(create_text_overlay, reg0, "str_glob_s8", 16),
			(overlay_set_size, reg0, 3),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 3, 1200),
			(position_set_y, 3, 1200),
			(assign, ":value", 235),
			(assign, ":value_2", 550),
			(party_get_slot, ":pst_target_no_town_castle", "$pst_target_no", slot_town_castle),
			(try_begin),
				(eq, ":pst_target_no_town_castle", 1),
				(assign, ":value_3", "str_wsr_text_1"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 2),
				(assign, ":value_3", "str_wsr_text_2"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 3),
				(assign, ":value_3", "str_wsr_text_3"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 4),
				(assign, ":value_3", "str_wsr_text_4"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 5),
				(assign, ":value_3", "str_wsr_text_5"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 10),
				(assign, ":value_3", "str_wsr_text_6"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 6),
				(assign, ":value_3", "str_wsr_text_7"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 11),
				(assign, ":value_3", "str_wsr_text_8"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 9),
				(assign, ":value_3", "str_wsr_text_9"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 7),
				(assign, ":value_3", "str_wsr_text_10"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 12),
				(assign, ":value_3", "str_wsr_text_11"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 13),
				(assign, ":value_3", "str_wsr_text_12"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 14),
				(assign, ":value_3", "str_wsr_text_13"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 8),
				(assign, ":value_3", "str_wsr_text_14"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 15),
				(assign, ":value_3", "str_wsr_text_15"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 16),
				(assign, ":value_3", "str_wsr_text_16"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 17),
				(assign, ":value_3", "str_wsr_text_17"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 18),
				(assign, ":value_3", "str_wsr_text_18"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 19),
				(assign, ":value_3", "str_wsr_text_19"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 20),
				(assign, ":value_3", "str_wsr_text_20"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 21),
				(assign, ":value_3", "str_wsr_text_21"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 22),
				(assign, ":value_3", "str_wsr_text_22"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 23),
				(assign, ":value_3", "str_wsr_text_23"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 24),
				(assign, ":value_3", "str_wsr_text_24"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 25),
				(assign, ":value_3", "str_wsr_text_25"),
			(else_try),
				(assign, ":value_3", "str_wsr_text_0"),
			(try_end),
			(str_store_string, 8, ":value_3"),
			(create_text_overlay, reg0, "str_current_resource"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", 60),
			(try_begin),
				(eq, ":pst_target_no_town_castle", 1),
				(assign, ":value_3", "str_wsrb_text_1"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 2),
				(assign, ":value_3", "str_wsrb_text_2"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 3),
				(assign, ":value_3", "str_wsrb_text_3"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 4),
				(assign, ":value_3", "str_wsrb_text_4"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 5),
				(assign, ":value_3", "str_wsrb_text_5"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 10),
				(assign, ":value_3", "str_wsrb_text_6"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 6),
				(assign, ":value_3", "str_wsrb_text_7"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 11),
				(assign, ":value_3", "str_wsrb_text_8"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 9),
				(assign, ":value_3", "str_wsrb_text_9"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 7),
				(assign, ":value_3", "str_wsrb_text_10"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 12),
				(assign, ":value_3", "str_wsrb_text_11"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 13),
				(assign, ":value_3", "str_wsrb_text_12"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 14),
				(assign, ":value_3", "str_wsrb_text_13"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 8),
				(assign, ":value_3", "str_wsrb_text_14"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 15),
				(assign, ":value_3", "str_wsrb_text_15"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 16),
				(assign, ":value_3", "str_wsrb_text_16"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 17),
				(assign, ":value_3", "str_wsrb_text_17"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 18),
				(assign, ":value_3", "str_wsrb_text_18"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 19),
				(assign, ":value_3", "str_wsrb_text_19"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 20),
				(assign, ":value_3", "str_wsrb_text_20"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 21),
				(assign, ":value_3", "str_wsrb_text_21"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 22),
				(assign, ":value_3", "str_wsrb_text_22"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 23),
				(assign, ":value_3", "str_wsrb_text_23"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 24),
				(assign, ":value_3", "str_wsrb_text_24"),
			(else_try),
				(eq, ":pst_target_no_town_castle", 25),
				(assign, ":value_3", "str_wsrb_text_25"),
			(else_try),
				(assign, ":value_3", "str_wsrb_text_0"),
			(try_end),
			(str_store_string, 8, ":value_3"),
			(try_begin),
				(eq, "$workshop_target_party", 0),
				(create_button_overlay, "$workshop_build", "str_build_s8_n"),
			(else_try),
				(create_text_overlay, "$workshop_build", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$workshop_build", 1),
			(overlay_set_size, "$workshop_build", 3),
			(val_sub, ":value_2", 60),
			(try_begin),
				(eq, "$hidout_target_party", 0),
				(create_button_overlay, "$workshop_hideout", "str_build_secret_m"),
			(else_try),
				(create_text_overlay, "$workshop_hideout", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$workshop_hideout", 1),
			(overlay_set_size, "$workshop_hideout", 3),
			(val_sub, ":value_2", 60),
			(try_begin),
				(eq, "$adult_content", 1),
				(eq, "$brothel_target_party", 0),
				(create_button_overlay, "$workshop_brothel", "str_build_brothel_n"),
			(else_try),
				(create_text_overlay, "$workshop_brothel", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$workshop_brothel", 1),
			(overlay_set_size, "$workshop_brothel", 3),
			(val_sub, ":value_2", 60),
			(try_begin),
				(eq, "$adult_content", 1),
				(eq, "$nakepit_target_party", 0),
				(create_button_overlay, "$workshop_nakepit", "str_build_fight_pit"),
			(else_try),
				(create_text_overlay, "$workshop_nakepit", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$workshop_nakepit", 1),
			(overlay_set_size, "$workshop_nakepit", 3),
			(assign, ":value", 495),
			(assign, ":value_2", 25),
			(create_in_game_button_overlay, "$workshop_exit", "str_return_butt", 4),
			(overlay_set_color, "$workshop_exit", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$workshop_exit", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$workshop_exit"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
			(else_try),
				(eq, ":trigger_param_1", "$workshop_build"),
				(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_main_party_pst_target_no", "p_main_party", "$pst_target_no"),
				(party_get_slot, ":pst_target_no_town_castle", "$pst_target_no", slot_town_castle),
				(assign, ":value", 0),
				(try_begin),
					(this_or_next|eq, ":pst_target_no_town_castle", 5),
					(this_or_next|eq, ":pst_target_no_town_castle", 10),
					(eq, ":pst_target_no_town_castle", 6),
					(assign, ":value", 1),
				(try_end),
				(store_faction_of_party, ":faction_of_party_pst_target_no", "$pst_target_no"),
				(store_relation, ":relation_faction_of_party_pst_target_no_wm_player_fac", ":faction_of_party_pst_target_no", "$wm_player_fac"),
				(store_mul, ":value_2", 100, 100),
				(call_script, "script_party_money_level_ge", "p_main_party", ":value_2"),
				(try_begin),
					(neg|party_slot_ge, "$pst_target_no", 12, 0),
					(display_message, "str_rellow", 0x00ff0000),
				(else_try),
					(lt, ":relation_faction_of_party_pst_target_no_wm_player_fac", 0),
					(display_message, "str_is_enemy", 0x00ff0000),
				(else_try),
					(neq, "$wm_mo_continue", 1),
					(display_message, "str_nomoney", 0x00ff0000),
				(else_try),
					(eq, ":pst_target_no_town_castle", 0),
					(display_message, "str_req_resource", 0x00ff0000),
				(else_try),
					(le, ":distance_to_party_from_party_main_party_pst_target_no", 1),
					(display_message, "str_ws_tooclose", 0x00ff0000),
				(else_try),
					(gt, ":distance_to_party_from_party_main_party_pst_target_no", 2),
					(display_message, "str_ws_toofar", 0x00ff0000),
				(else_try),
					(eq, ":value", 1),
					(neq, ":current_terrain_main_party", 2),
					(neq, ":current_terrain_main_party", 7),
					(display_message, "str_need_sea", 0x00ff0000),
				(else_try),
					(eq, ":value", 0),
					(this_or_next|eq, ":current_terrain_main_party", 2),
					(eq, ":current_terrain_main_party", 7),
					(display_message, "str_ws_needground", 0x00ff0000),
				(else_try),
					(call_script, "script_party_money_level_diff", "p_main_party", ":value_2", 34),
					(try_begin),
						(this_or_next|eq, ":pst_target_no_town_castle", 3),
						(this_or_next|eq, ":pst_target_no_town_castle", 11),
						(this_or_next|eq, ":pst_target_no_town_castle", 13),
						(this_or_next|eq, ":pst_target_no_town_castle", 14),
						(eq, ":pst_target_no_town_castle", 8),
						(assign, ":value_3", "icon_cave_exn"),
					(else_try),
						(this_or_next|eq, ":pst_target_no_town_castle", 1),
						(this_or_next|eq, ":pst_target_no_town_castle", 2),
						(this_or_next|eq, ":pst_target_no_town_castle", 4),
						(eq, ":pst_target_no_town_castle", 15),
						(assign, ":value_3", "icon_wm_town_barb_3"),
					(else_try),
						(this_or_next|eq, ":pst_target_no_town_castle", 5),
						(this_or_next|eq, ":pst_target_no_town_castle", 10),
						(eq, ":pst_target_no_town_castle", 6),
						(assign, ":value_3", "icon_ship"),
					(else_try),
						(this_or_next|eq, ":pst_target_no_town_castle", 12),
						(eq, ":pst_target_no_town_castle", 18),
						(assign, ":value_3", "icon_house_exn"),
					(else_try),
						(assign, ":value_3", "icon_wm_plantation"),
					(try_end),
					(call_script, "script_export_goods_res_slot_to_item_num", ":pst_target_no_town_castle"),
					(assign, ":var_10", reg23),
					(assign, ":var_11", reg24),
					(val_add, ":var_11", 26),
					(str_store_string, 8, ":var_11"),
					(str_store_party_name, 9, "$pst_target_no"),
					(str_store_string, 45, "str_workshop_rename"),
					(party_relocate_near_party, "p_workshop_party", "p_main_party", 0),
					(party_set_icon, "p_workshop_party", ":value_3"),
					(party_set_flags, "p_workshop_party", 256, 0),
					(party_set_name, "p_workshop_party", 45),
					(assign, "$workshop_target_party", "$pst_target_no"),
					(assign, "$workshop_target_res_slot", ":pst_target_no_town_castle"),
					(assign, "$workshop_target_product", ":var_10"),
					(call_script, "script_item_stat_type_dive", ":var_10"),
					(store_sub, ":value_4", "$dive_itm_price", 700),
					(assign, "$workshop_target_price", ":value_4"),
					(assign, "$workshop_work_level", 100),
					(assign, "$workshop_product_stock", 0),
					(assign, "$workshop_product_cur", 0),
					(assign, "$workshop_slave", 0),
					(display_message, "str_workshop_built"),
					(play_sound, "snd_wood_cuttt"),
					(presentation_set_duration, 0),
					(jump_to_menu, "mnu_wm_pst_map_return"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$workshop_brothel"),
				(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_main_party_pst_target_no", "p_main_party", "$pst_target_no"),
				(store_faction_of_party, ":faction_of_party_pst_target_no", "$pst_target_no"),
				(store_relation, ":relation_faction_of_party_pst_target_no_wm_player_fac", ":faction_of_party_pst_target_no", "$wm_player_fac"),
				(store_mul, ":value_2", 100, 100),
				(call_script, "script_party_money_level_ge", "p_main_party", ":value_2"),
				(try_begin),
					(neg|party_slot_ge, "$pst_target_no", 12, 0),
					(display_message, "str_rellow", 0x00ff0000),
				(else_try),
					(lt, ":relation_faction_of_party_pst_target_no_wm_player_fac", 0),
					(display_message, "str_is_enemy", 0x00ff0000),
				(else_try),
					(neq, "$wm_mo_continue", 1),
					(display_message, "str_nomoney", 0x00ff0000),
				(else_try),
					(le, ":distance_to_party_from_party_main_party_pst_target_no", 1),
					(display_message, "str_ws_tooclose", 0x00ff0000),
				(else_try),
					(gt, ":distance_to_party_from_party_main_party_pst_target_no", 2),
					(display_message, "str_ws_toofar", 0x00ff0000),
				(else_try),
					(this_or_next|eq, ":current_terrain_main_party", 2),
					(eq, ":current_terrain_main_party", 7),
					(display_message, "str_ws_needground", 0x00ff0000),
				(else_try),
					(call_script, "script_party_money_level_diff", "p_main_party", ":value_2", 34),
					(str_store_party_name, 9, "$pst_target_no"),
					(str_store_string, 45, "str_brothel_name"),
					(party_relocate_near_party, "p_brothel_party", "p_main_party", 0),
					(party_set_icon, "p_brothel_party", "icon_house_exn"),
					(party_set_flags, "p_brothel_party", 256, 0),
					(party_set_name, "p_brothel_party", 45),
					(assign, "$brothel_target_party", "$pst_target_no"),
					(assign, "$brothel_prev_income", 0),
					(display_message, "str_brothel_built"),
					(play_sound, "snd_wood_cuttt"),
					(presentation_set_duration, 0),
					(jump_to_menu, "mnu_wm_pst_map_return"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$workshop_nakepit"),
				(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_main_party_pst_target_no", "p_main_party", "$pst_target_no"),
				(store_faction_of_party, ":faction_of_party_pst_target_no", "$pst_target_no"),
				(store_relation, ":relation_faction_of_party_pst_target_no_wm_player_fac", ":faction_of_party_pst_target_no", "$wm_player_fac"),
				(store_mul, ":value_2", 100, 100),
				(call_script, "script_party_money_level_ge", "p_main_party", ":value_2"),
				(try_begin),
					(neg|party_slot_ge, "$pst_target_no", 12, 0),
					(display_message, "str_rellow", 0x00ff0000),
				(else_try),
					(lt, ":relation_faction_of_party_pst_target_no_wm_player_fac", 0),
					(display_message, "str_is_enemy", 0x00ff0000),
				(else_try),
					(neq, "$wm_mo_continue", 1),
					(display_message, "str_nomoney", 0x00ff0000),
				(else_try),
					(le, ":distance_to_party_from_party_main_party_pst_target_no", 1),
					(display_message, "str_ws_tooclose", 0x00ff0000),
				(else_try),
					(gt, ":distance_to_party_from_party_main_party_pst_target_no", 2),
					(display_message, "str_ws_toofar", 0x00ff0000),
				(else_try),
					(this_or_next|eq, ":current_terrain_main_party", 2),
					(eq, ":current_terrain_main_party", 7),
					(display_message, "str_ws_needground", 0x00ff0000),
				(else_try),
					(call_script, "script_party_money_level_diff", "p_main_party", ":value_2", 34),
					(str_store_party_name, 9, "$pst_target_no"),
					(str_store_string, 45, "str_nakepit_name"),
					(party_relocate_near_party, "p_nakepit_party", "p_main_party", 0),
					(party_set_icon, "p_nakepit_party", "icon_wm_town_barb_3"),
					(party_set_flags, "p_nakepit_party", 256, 0),
					(party_set_name, "p_nakepit_party", 45),
					(assign, "$nakepit_target_party", "$pst_target_no"),
					(assign, "$nakepit_prev_income", 0),
					(display_message, "str_nakepit_built"),
					(play_sound, "snd_wood_cuttt"),
					(presentation_set_duration, 0),
					(jump_to_menu, "mnu_wm_pst_map_return"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$workshop_hideout"),
				(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_main_party_pst_target_no", "p_main_party", "$pst_target_no"),
				(store_faction_of_party, ":faction_of_party_pst_target_no", "$pst_target_no"),
				(store_relation, ":relation_faction_of_party_pst_target_no_wm_player_fac", ":faction_of_party_pst_target_no", "$wm_player_fac"),
				(store_mul, ":value_2", 1000, 20),
				(call_script, "script_party_money_level_ge", "p_main_party", ":value_2"),
				(try_begin),
					(lt, ":relation_faction_of_party_pst_target_no_wm_player_fac", 0),
					(display_message, "str_is_enemy", 0x00ff0000),
				(else_try),
					(neq, "$wm_mo_continue", 1),
					(display_message, "str_nomoney", 0x00ff0000),
				(else_try),
					(le, ":distance_to_party_from_party_main_party_pst_target_no", 1),
					(display_message, "str_ws_tooclose", 0x00ff0000),
				(else_try),
					(gt, ":distance_to_party_from_party_main_party_pst_target_no", 2),
					(display_message, "str_ws_toofar", 0x00ff0000),
				(else_try),
					(this_or_next|eq, ":current_terrain_main_party", 2),
					(eq, ":current_terrain_main_party", 7),
					(display_message, "str_ws_needground", 0x00ff0000),
				(else_try),
					(call_script, "script_party_money_level_diff", "p_main_party", ":value_2", 34),
					(str_store_troop_name, 8, "trp_player"),
					(str_store_string, 45, "str_hideout_name"),
					(party_relocate_near_party, "p_ply_hideout", "p_main_party", 0),
					(party_set_icon, "p_ply_hideout", "icon_house_exn"),
					(party_set_flags, "p_ply_hideout", 256, 0),
					(party_set_name, "p_ply_hideout", 45),
					(assign, "$hidout_target_party", "$pst_target_no"),
					(assign, "$hideout_build_prison", 0),
					(assign, "$hideout_build_torture", 0),
					(display_message, "str_hideout_built"),
					(play_sound, "snd_wood_cuttt"),
					(presentation_set_duration, 0),
					(jump_to_menu, "mnu_wm_pst_map_return"),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
			(try_end)
		])
	]),

	("molda_start_class", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(assign, ":value", "str_cla_name_0"),
			(val_add, ":value", "$r_player_class"),
			(create_text_overlay, reg0, ":value", 16),
			(overlay_set_size, reg0, 3),
			(position_set_x, 1, 490),
			(position_set_y, 1, 250),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 2000),
			(position_set_y, 1, 2000),
			(overlay_set_size, reg0, 1),
			(assign, ":value", "str_cla_bonus_0"),
			(val_add, ":value", "$r_player_class"),
			(create_text_overlay, reg0, ":value", 16),
			(overlay_set_size, reg0, 3),
			(position_set_x, 1, 490),
			(position_set_y, 1, 150),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(assign, ":value", "mesh_pic_cla_mercernary"),
			(val_add, ":value", "$r_player_class"),
			(create_mesh_overlay, reg0, ":value"),
			(overlay_set_alpha, reg0, 191),
			(position_set_x, 1, 0),
			(position_set_y, 1, 0),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(create_in_game_button_overlay, "$g_choose_class_select", "str_select_butt", 16),
			(position_set_x, 1, 880),
			(position_set_y, 1, 40),
			(overlay_set_position, "$g_choose_class_select", 1),
			(overlay_set_color, "$g_choose_class_select", 16777215),
			(create_in_game_button_overlay, "$g_choose_class_next", "str_next_butt", 16),
			(position_set_x, 1, 590),
			(position_set_y, 1, 40),
			(overlay_set_position, "$g_choose_class_next", 1),
			(overlay_set_color, "$g_choose_class_next", 16777215),
			(create_in_game_button_overlay, "$g_choose_class_prev", "str_prev_butt", 16),
			(position_set_x, 1, 400),
			(position_set_y, 1, 40),
			(overlay_set_position, "$g_choose_class_prev", 1),
			(overlay_set_color, "$g_choose_class_prev", 16777215)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_choose_class_select"),
				(try_begin),
					(eq, "$r_player_class", 3),
					(assign, "$player_noble", 1),
					#(display_message, "@TestYOUPICKEDSOMETHING", 0x00ff9000),
					(display_message, "str_cla_notfit", 0x00ff9000),
				(else_try),
					(assign, "$player_noble", 0),
				(try_end),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_start_phase_x5"),
			(else_try),
				(eq, ":trigger_param_1", "$g_choose_class_next"),
				(val_add, "$r_player_class", 1),
				(val_clamp, "$r_player_class", 0, 6),
				(start_presentation, "prsnt_molda_start_class"),
			(else_try),
				(eq, ":trigger_param_1", "$g_choose_class_prev"),
				(val_sub, "$r_player_class", 1),
				(val_clamp, "$r_player_class", 0, 6),
				(start_presentation, "prsnt_molda_start_class"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("pst_fuck_process", 0, mesh_pic_fuck_back, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_text_overlay, reg0, 45),
			(position_set_x, 1, 445),
			(position_set_y, 1, 585),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1100),
			(position_set_y, 1, 1100),
			(overlay_set_size, reg0, 1),
			(assign, reg45, "$fuck_try_chance"),
			(create_text_overlay, reg0, "str_gbt_chance_num"),
			(position_set_x, 1, 45),
			(position_set_y, 1, 585),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1100),
			(position_set_y, 1, 1100),
			(overlay_set_size, reg0, 1),
			(assign, ":value", 595),
			(assign, ":value_2", 365),
			(try_begin),
				(eq, "$pst_fuck_chapter", 2),
				(create_text_overlay, reg0, "str_gbt_orgasm"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1100),
				(position_set_y, 1, 1100),
				(overlay_set_size, reg0, 1),
				(overlay_set_color, reg0, 65280),
			(try_end),
			(try_begin),
				(eq, "$pst_fuck_chapter", 2),
				(val_sub, ":value_2", 40),
				(create_button_overlay, "$pst_fuck_pose_01", "str_s_doggy"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_fuck_pose_01", 1),
				(position_set_x, 1, 1100),
				(position_set_y, 1, 1100),
				(overlay_set_size, "$pst_fuck_pose_01", 1),
				(overlay_set_color, "$pst_fuck_pose_01", 16776960),
			(else_try),
				(create_text_overlay, "$pst_fuck_pose_01", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$pst_fuck_chapter", 2),
				(val_sub, ":value_2", 40),
				(create_button_overlay, "$pst_fuck_pose_02", "str_s_above"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_fuck_pose_02", 1),
				(position_set_x, 1, 1100),
				(position_set_y, 1, 1100),
				(overlay_set_size, "$pst_fuck_pose_02", 1),
				(overlay_set_color, "$pst_fuck_pose_02", 16776960),
			(else_try),
				(create_text_overlay, "$pst_fuck_pose_02", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$pst_fuck_chapter", 2),
				(val_sub, ":value_2", 40),
				(create_button_overlay, "$pst_fuck_pose_03", "str_s_above_rub"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_fuck_pose_03", 1),
				(position_set_x, 1, 1100),
				(position_set_y, 1, 1100),
				(overlay_set_size, "$pst_fuck_pose_03", 1),
				(overlay_set_color, "$pst_fuck_pose_03", 16776960),
			(else_try),
				(create_text_overlay, "$pst_fuck_pose_03", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$pst_fuck_hide", 0),
				(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_fuck_troop"),
				(set_fixed_point_multiplier, 1000),
				(position_set_x, 1, -450),
				(position_set_y, 1, -100),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 3400),
				(position_set_y, 1, 4000),
				(overlay_set_size, reg0, 1),
			(try_end),
			(assign, ":value", 445),
			(assign, ":value_2", 645),
			(assign, ":value_3", 1800),
			(assign, ":value_4", 2000),
			(try_begin),
				(ge, "$pst_fuck_chapter", 1),
				(ge, "$pst_fuck_progress", 1),
				(create_mesh_overlay, reg0, "mesh_pic_gbt_love"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 3, ":value_3"),
				(position_set_y, 3, ":value_4"),
				(overlay_set_size, reg0, 3),
			(try_end),
			(try_begin),
				(ge, "$pst_fuck_chapter", 1),
				(ge, "$pst_fuck_progress", 2),
				(val_add, ":value", 55),
				(create_mesh_overlay, reg0, "mesh_pic_gbt_love"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 3, ":value_3"),
				(position_set_y, 3, ":value_4"),
				(overlay_set_size, reg0, 3),
			(try_end),
			(try_begin),
				(ge, "$pst_fuck_chapter", 1),
				(ge, "$pst_fuck_progress", 3),
				(val_add, ":value", 55),
				(create_mesh_overlay, reg0, "mesh_pic_gbt_love"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 3, ":value_3"),
				(position_set_y, 3, ":value_4"),
				(overlay_set_size, reg0, 3),
			(try_end),
			(try_begin),
				(ge, "$pst_fuck_chapter", 1),
				(ge, "$pst_fuck_progress", 4),
				(val_add, ":value", 55),
				(create_mesh_overlay, reg0, "mesh_pic_gbt_love"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 3, ":value_3"),
				(position_set_y, 3, ":value_4"),
				(overlay_set_size, reg0, 3),
			(try_end),
			(try_begin),
				(ge, "$pst_fuck_chapter", 1),
				(ge, "$pst_fuck_progress", 5),
				(val_add, ":value", 55),
				(create_mesh_overlay, reg0, "mesh_pic_gbt_love"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 3, ":value_3"),
				(position_set_y, 3, ":value_4"),
				(overlay_set_size, reg0, 3),
			(try_end),
			(assign, ":value", 480),
			(assign, ":value_2", 340),
			(try_begin),
				(eq, "$pst_fuck_chapter", 1),
				(create_image_button_overlay, "$pst_fuck_lick", "mesh_pic_gbt_lick", "mesh_pic_gbt_love"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_fuck_lick", 1),
				(position_set_x, 3, ":value_3"),
				(position_set_y, 3, ":value_4"),
				(overlay_set_size, "$pst_fuck_lick", 3),
			(else_try),
				(create_text_overlay, "$pst_fuck_lick", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$pst_fuck_chapter", 1),
				(val_sub, ":value_2", 55),
				(create_image_button_overlay, "$pst_fuck_finger", "mesh_pic_gbt_finger", "mesh_pic_gbt_love"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_fuck_finger", 1),
				(position_set_x, 3, ":value_3"),
				(position_set_y, 3, ":value_4"),
				(overlay_set_size, "$pst_fuck_finger", 3),
			(else_try),
				(create_text_overlay, "$pst_fuck_finger", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$pst_fuck_chapter", 1),
				(val_sub, ":value_2", 55),
				(create_image_button_overlay, "$pst_fuck_beat", "mesh_pic_gbt_punch", "mesh_pic_gbt_love"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_fuck_beat", 1),
				(position_set_x, 3, ":value_3"),
				(position_set_y, 3, ":value_4"),
				(overlay_set_size, "$pst_fuck_beat", 3),
			(else_try),
				(create_text_overlay, "$pst_fuck_beat", "str_empty_string"),
			(try_end),
			(assign, ":value", 840),
			(assign, ":value_2", 650),
			(val_sub, ":value_2", 40),
			(create_game_button_overlay, "$pst_fuck_show", "str_s_view", 16),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$pst_fuck_show", 1),
			(try_begin),
				(eq, "$pst_fuck_chapter", 0),
				(val_sub, ":value_2", 40),
				(create_game_button_overlay, "$pst_fuck_start", "str_s_start", 16),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_fuck_start", 1),
			(else_try),
				(create_text_overlay, "$pst_fuck_start", "str_empty_string"),
			(try_end),
			(val_sub, ":value_2", 40),
			(create_game_button_overlay, "$pst_fuck_end", "str_gbt_end", 16),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$pst_fuck_end", 1),
			(try_begin),
				(eq, "$pst_fuck_type", 1),
				(assign, ":value", 285),
				(assign, ":value_2", 590),
				(assign, ":value_3", 2000),
				(assign, ":value_4", 2000),
			(else_try),
			(try_end),
			(try_begin),
				(eq, "$pst_fuck_chapter", 1),
				(create_image_button_overlay, "$pst_fuck_click_lip", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_fuck_click_lip", 1),
				(position_set_x, 3, ":value_3"),
				(position_set_y, 3, ":value_4"),
				(overlay_set_size, "$pst_fuck_click_lip", 3),
				(overlay_set_alpha, "$pst_fuck_click_lip", 0),
				(try_begin),
					(eq, "$pst_fuck_hide", 1),
					(overlay_set_color, "$pst_fuck_click_lip", 9540095),
					(overlay_set_alpha, "$pst_fuck_click_lip", 102),
				(try_end),
			(else_try),
				(create_text_overlay, "$pst_fuck_click_lip", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$pst_fuck_type", 1),
				(assign, ":value", 255),
				(assign, ":value_2", 500),
				(assign, ":value_3", 5000),
				(assign, ":value_4", 3500),
			(else_try),
			(try_end),
			(try_begin),
				(eq, "$pst_fuck_chapter", 1),
				(create_image_button_overlay, "$pst_fuck_click_boobs", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_fuck_click_boobs", 1),
				(position_set_x, 3, ":value_3"),
				(position_set_y, 3, ":value_4"),
				(overlay_set_size, "$pst_fuck_click_boobs", 3),
				(overlay_set_alpha, "$pst_fuck_click_boobs", 0),
				(try_begin),
					(eq, "$pst_fuck_hide", 1),
					(overlay_set_color, "$pst_fuck_click_boobs", 12244736),
					(overlay_set_alpha, "$pst_fuck_click_boobs", 102),
				(try_end),
			(else_try),
				(create_text_overlay, "$pst_fuck_click_boobs", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$pst_fuck_type", 1),
				(assign, ":value", 250),
				(assign, ":value_2", 400),
				(assign, ":value_3", 5500),
				(assign, ":value_4", 4000),
			(else_try),
			(try_end),
			(try_begin),
				(eq, "$pst_fuck_chapter", 1),
				(create_image_button_overlay, "$pst_fuck_click_waist", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_fuck_click_waist", 1),
				(position_set_x, 3, ":value_3"),
				(position_set_y, 3, ":value_4"),
				(overlay_set_size, "$pst_fuck_click_waist", 3),
				(overlay_set_alpha, "$pst_fuck_click_waist", 0),
				(try_begin),
					(eq, "$pst_fuck_hide", 1),
					(overlay_set_color, "$pst_fuck_click_waist", 5439354),
					(overlay_set_alpha, "$pst_fuck_click_waist", 102),
				(try_end),
			(else_try),
				(create_text_overlay, "$pst_fuck_click_waist", "str_empty_string"),
			(try_end),
			(try_begin),
				(eq, "$pst_fuck_type", 1),
				(assign, ":value", 275),
				(assign, ":value_2", 320),
				(assign, ":value_3", 3000),
				(assign, ":value_4", 3000),
			(else_try),
			(try_end),
			(try_begin),
				(eq, "$pst_fuck_chapter", 1),
				(create_image_button_overlay, "$pst_fuck_click_pussy", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$pst_fuck_click_pussy", 1),
				(position_set_x, 3, ":value_3"),
				(position_set_y, 3, ":value_4"),
				(overlay_set_size, "$pst_fuck_click_pussy", 3),
				(overlay_set_alpha, "$pst_fuck_click_pussy", 0),
				(try_begin),
					(eq, "$pst_fuck_hide", 1),
					(overlay_set_color, "$pst_fuck_click_pussy", 16756735),
					(overlay_set_alpha, "$pst_fuck_click_pussy", 102),
				(try_end),
			(else_try),
				(create_text_overlay, "$pst_fuck_click_pussy", "str_empty_string"),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$pst_fuck_start"),
				(assign, "$pst_fuck_chapter", 1),
				(troop_get_slot, ":player_lady_used_tournament", "trp_player", slot_lady_used_tournament),
				(try_begin),
					(ge, ":player_lady_used_tournament", 3),
					(try_begin),
						(eq, ":player_lady_used_tournament", 5),
						(assign, ":value", 30),
					(else_try),
						(eq, ":player_lady_used_tournament", 3),
						(assign, ":value", 29),
					(try_end),
					(try_for_range, ":localvariable", 28, ":value"),
						(troop_get_slot, ":g_sex_troop_id_localvariable", "$g_sex_troop_id", ":localvariable"),
						(assign, ":var_6", "str_fascination_sence_1"),
						(val_sub, ":var_6", 1),
						(store_add, ":value_2", ":var_6", ":g_sex_troop_id_localvariable"),
						(display_message, ":value_2", 0x00ff9000),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_pst_fuck_process"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_fuck_end"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_fuck_show"),
				(try_begin),
					(eq, "$pst_fuck_hide", 0),
					(assign, "$pst_fuck_hide", 1),
				(else_try),
					(assign, "$pst_fuck_hide", 0),
				(try_end),
				(start_presentation, "prsnt_pst_fuck_process"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_fuck_lick"),
				(assign, "$pst_fuck_sense", 1),
				(assign, "$gbt_act_sound", "snd_gbt_lick"),
				(assign, "$gbt_succes_sound", "snd_gbt_orga_up"),
				(assign, "$gbt_fail_sound", "snd_gbt_orga_fail"),
				(str_store_string, 45, "str_s_lick"),
				(start_presentation, "prsnt_pst_fuck_process"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_fuck_finger"),
				(assign, "$pst_fuck_sense", 2),
				(assign, "$gbt_act_sound", "snd_gbt_touch"),
				(assign, "$gbt_succes_sound", "snd_gbt_orga_up"),
				(assign, "$gbt_fail_sound", "snd_gbt_orga_fail"),
				(str_store_string, 45, "str_s_touch"),
				(start_presentation, "prsnt_pst_fuck_process"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_fuck_beat"),
				(assign, "$pst_fuck_sense", 3),
				(assign, "$gbt_act_sound", "snd_gbt_whip"),
				(assign, "$gbt_succes_sound", "snd_gbt_orga_up"),
				(assign, "$gbt_fail_sound", "snd_gbt_whip_hit"),
				(str_store_string, 45, "str_s_spanking"),
				(start_presentation, "prsnt_pst_fuck_process"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_fuck_click_lip"),
				(gt, "$pst_fuck_chapter", 0),
				(lt, "$pst_fuck_progress", 5),
				(try_begin),
					(eq, "$pst_fuck_progress", 0),
					(eq, "$pst_fuck_sense", 1),
					(gt, "$fuck_try_chance", 0),
					(val_add, "$pst_fuck_progress", 1),
					(play_sound, "$gbt_act_sound"),
					(play_sound, "$gbt_succes_sound"),
					(str_store_string, 45, "str_gbt_succ"),
				(else_try),
					(gt, "$fuck_try_chance", 0),
					(val_sub, "$fuck_try_chance", 1),
					(play_sound, "$gbt_act_sound"),
					(play_sound, "$gbt_fail_sound"),
					(str_store_string, 45, "str_gbt_fail"),
				(else_try),
					(str_store_string, 45, "str_gbt_nochance"),
				(try_end),
				(start_presentation, "prsnt_pst_fuck_process"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_fuck_click_boobs"),
				(gt, "$pst_fuck_chapter", 0),
				(gt, "$pst_fuck_progress", 0),
				(lt, "$pst_fuck_progress", 5),
				(assign, "$pst_fuck_part", 1),
				(call_script, "script_fuck_sense_progress_result"),
				(try_begin),
					(eq, "$pst_fuck_succes", 1),
					(gt, "$fuck_try_chance", 0),
					(play_sound, "$gbt_act_sound"),
					(play_sound, "$gbt_succes_sound"),
					(val_add, "$pst_fuck_progress", 1),
					(str_store_string, 45, "str_gbt_succ2"),
				(else_try),
					(gt, "$fuck_try_chance", 0),
					(val_sub, "$fuck_try_chance", 1),
					(play_sound, "$gbt_act_sound"),
					(play_sound, "$gbt_fail_sound"),
					(str_store_string, 45, "str_gbt_fail2"),
				(else_try),
					(str_store_string, 45, "str_gbt_nochance"),
				(try_end),
				(try_begin),
					(ge, "$pst_fuck_progress", 5),
					(play_sound, "snd_gbt_orgasm"),
					(assign, "$pst_fuck_chapter", 2),
				(try_end),
				(start_presentation, "prsnt_pst_fuck_process"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_fuck_click_waist"),
				(gt, "$pst_fuck_chapter", 0),
				(gt, "$pst_fuck_progress", 0),
				(lt, "$pst_fuck_progress", 5),
				(assign, "$pst_fuck_part", 2),
				(call_script, "script_fuck_sense_progress_result"),
				(try_begin),
					(eq, "$pst_fuck_succes", 1),
					(gt, "$fuck_try_chance", 0),
					(play_sound, "$gbt_act_sound"),
					(play_sound, "$gbt_succes_sound"),
					(val_add, "$pst_fuck_progress", 1),
					(str_store_string, 45, "str_gbt_succ3"),
				(else_try),
					(gt, "$fuck_try_chance", 0),
					(val_sub, "$fuck_try_chance", 1),
					(play_sound, "$gbt_act_sound"),
					(play_sound, "$gbt_fail_sound"),
					(str_store_string, 45, "str_gbt_fail3"),
				(else_try),
					(str_store_string, 45, "str_gbt_nochance"),
				(try_end),
				(try_begin),
					(ge, "$pst_fuck_progress", 5),
					(play_sound, "snd_gbt_orgasm"),
					(assign, "$pst_fuck_chapter", 2),
				(try_end),
				(start_presentation, "prsnt_pst_fuck_process"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_fuck_click_pussy"),
				(gt, "$pst_fuck_chapter", 0),
				(gt, "$pst_fuck_progress", 0),
				(lt, "$pst_fuck_progress", 5),
				(assign, "$pst_fuck_part", 3),
				(call_script, "script_fuck_sense_progress_result"),
				(try_begin),
					(eq, "$pst_fuck_succes", 1),
					(gt, "$fuck_try_chance", 0),
					(play_sound, "$gbt_act_sound"),
					(play_sound, "$gbt_succes_sound"),
					(val_add, "$pst_fuck_progress", 1),
					(str_store_string, 45, "str_gbt_succ4"),
				(else_try),
					(gt, "$fuck_try_chance", 0),
					(val_sub, "$fuck_try_chance", 1),
					(play_sound, "$gbt_act_sound"),
					(play_sound, "$gbt_fail_sound"),
					(str_store_string, 45, "str_gbt_fail4"),
				(else_try),
					(str_store_string, 45, "str_gbt_nochance"),
				(try_end),
				(try_begin),
					(ge, "$pst_fuck_progress", 5),
					(play_sound, "snd_gbt_orgasm"),
					(assign, "$pst_fuck_chapter", 2),
				(try_end),
				(start_presentation, "prsnt_pst_fuck_process"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_fuck_pose_01"),
				(assign, "$fuck_anim_girl", "anim_fuck_female_1"),
				(assign, "$fuck_anim_man", "anim_fuck_male"),
				(assign, "$is_three_some", 0),
				(assign, "$fuck_progress_end", 0),
				(set_jump_mission, "mt_fuck_mission"),
				(assign, "$current_mission_template", "mt_fuck_mission"),
				(modify_visitors_at_site, "scn_fuck_place"),
				(reset_visitors),
				(set_visitor, 21, "$g_sex_troop_id"),
				(set_jump_entry, 1),
				(jump_to_scene, "scn_fuck_place"),
				(change_screen_mission),
			(else_try),
				(eq, ":trigger_param_1", "$pst_fuck_pose_02"),
				(assign, "$fuck_anim_girl", "anim_female_fucker"),
				(assign, "$fuck_anim_man", "anim_male_fucked"),
				(assign, "$is_three_some", 0),
				(assign, "$fuck_progress_end", 0),
				(set_jump_mission, "mt_fuck_mission"),
				(assign, "$current_mission_template", "mt_fuck_mission"),
				(modify_visitors_at_site, "scn_fuck_place"),
				(reset_visitors),
				(set_visitor, 21, "$g_sex_troop_id"),
				(set_jump_entry, 2),
				(jump_to_scene, "scn_fuck_place"),
				(change_screen_mission),
			(else_try),
				(eq, ":trigger_param_1", "$pst_fuck_pose_03"),
				(assign, "$fuck_anim_girl", "anim_female_fucker_2"),
				(assign, "$fuck_anim_man", "anim_male_fucked"),
				(assign, "$is_three_some", 0),
				(assign, "$fuck_progress_end", 0),
				(set_jump_mission, "mt_fuck_mission"),
				(assign, "$current_mission_template", "mt_fuck_mission"),
				(modify_visitors_at_site, "scn_fuck_place"),
				(reset_visitors),
				(set_visitor, 21, "$g_sex_troop_id"),
				(set_jump_entry, 2),
				(jump_to_scene, "scn_fuck_place"),
				(change_screen_mission),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 2),
				(assign, "$pst_fuck_sense", 1),
				(assign, "$gbt_act_sound", "snd_gbt_lick"),
				(assign, "$gbt_succes_sound", "snd_gbt_orga_up"),
				(assign, "$gbt_fail_sound", "snd_gbt_orga_fail"),
				(str_store_string, 45, "str_s_lick"),
				(start_presentation, "prsnt_pst_fuck_process"),
			(try_end),
			(try_begin),
				(key_clicked, 3),
				(assign, "$pst_fuck_sense", 2),
				(assign, "$gbt_act_sound", "snd_gbt_touch"),
				(assign, "$gbt_succes_sound", "snd_gbt_orga_up"),
				(assign, "$gbt_fail_sound", "snd_gbt_orga_fail"),
				(str_store_string, 45, "str_s_touch"),
				(start_presentation, "prsnt_pst_fuck_process"),
			(try_end),
			(try_begin),
				(key_clicked, 4),
				(assign, "$pst_fuck_sense", 3),
				(assign, "$gbt_act_sound", "snd_gbt_whip"),
				(assign, "$gbt_succes_sound", "snd_gbt_orga_up"),
				(assign, "$gbt_fail_sound", "snd_gbt_whip_hit"),
				(str_store_string, 45, "str_s_spanking"),
				(start_presentation, "prsnt_pst_fuck_process"),
			(try_end)
		])
	]),

	("pst_fuck_cum", 0, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_text_overlay, reg0, "str_gbt_cum"),
			(position_set_x, 1, 700),
			(position_set_y, 1, 420),
			(overlay_set_position, reg0, 1),
			(position_set_x, 3, 2000),
			(position_set_y, 3, 2000),
			(overlay_set_size, reg0, 3),
			(overlay_set_color, reg0, 16711680),
			(assign, ":var_1", 780),
			(assign, ":var_2", 360),
			(create_text_overlay, reg0, "str_s_pussy", 16),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 3, 1300),
			(position_set_y, 3, 1300),
			(overlay_set_size, reg0, 3),
			(overlay_set_color, reg0, 16776960),
			(val_sub, ":var_2", 40),
			(create_text_overlay, reg0, "str_s_belly", 16),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 3, 1300),
			(position_set_y, 3, 1300),
			(overlay_set_size, reg0, 3),
			(overlay_set_color, reg0, 16776960),
			(val_sub, ":var_2", 40),
			(create_text_overlay, reg0, "str_s_breast", 16),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 3, 1300),
			(position_set_y, 3, 1300),
			(overlay_set_size, reg0, 3),
			(overlay_set_color, reg0, 16776960),
			(val_sub, ":var_2", 40),
			(create_text_overlay, reg0, "str_s_face", 16),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 3, 1300),
			(position_set_y, 3, 1300),
			(overlay_set_size, reg0, 3),
			(overlay_set_color, reg0, 16776960),
			(val_sub, ":var_2", 40),
			(create_text_overlay, reg0, "str_s_mouth", 16),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 3, 1300),
			(position_set_y, 3, 1300),
			(overlay_set_size, reg0, 3),
			(overlay_set_color, reg0, 16776960)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 2),
				(play_sound, "snd_gbt_orgasm"),
				(call_script, "script_molda_body_hand_set", "$g_sex_troop_id", 4, "$sex_troop_agent"),
				(try_begin),
					(troop_slot_eq, "$g_sex_troop_id", slot_troop_last_persuasion_time, 1),
					(call_script, "script_molda_body_hand_set", "$g_sex_troop_id", 7, "$sex_troop_agent"),
				(try_end),
				(call_script, "script_after_fuck_sett", "$sit_is_rape", 0),
				(assign, "$fuck_progress_end", 1),
				(play_sound, "snd_mansatis"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(store_random_in_range, ":random_in_range_0_9", 0, 9),
				(try_begin),
					(eq, ":random_in_range_0_9", 0),
					(call_script, "script_fuck_event_occur"),
				(try_end),
			(else_try),
				(key_clicked, 3),
				(play_sound, "snd_gbt_orgasm"),
				(call_script, "script_molda_body_hand_set", "$g_sex_troop_id", 5, "$sex_troop_agent"),
				(try_begin),
					(troop_slot_eq, "$g_sex_troop_id", slot_troop_last_persuasion_time, 1),
					(call_script, "script_molda_body_hand_set", "$g_sex_troop_id", 7, "$sex_troop_agent"),
				(try_end),
				(call_script, "script_after_fuck_sett", "$sit_is_rape", 0),
				(assign, "$fuck_progress_end", 1),
				(play_sound, "snd_mansatis"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(store_random_in_range, ":random_in_range_0_9", 0, 9),
				(try_begin),
					(eq, ":random_in_range_0_9", 0),
					(call_script, "script_fuck_event_occur"),
				(try_end),
			(else_try),
				(key_clicked, 4),
				(play_sound, "snd_gbt_orgasm"),
				(call_script, "script_molda_body_hand_set", "$g_sex_troop_id", 6, "$sex_troop_agent"),
				(try_begin),
					(troop_slot_eq, "$g_sex_troop_id", slot_troop_last_persuasion_time, 1),
					(call_script, "script_molda_body_hand_set", "$g_sex_troop_id", 7, "$sex_troop_agent"),
				(try_end),
				(call_script, "script_after_fuck_sett", "$sit_is_rape", 0),
				(assign, "$fuck_progress_end", 1),
				(play_sound, "snd_mansatis"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(store_random_in_range, ":random_in_range_0_9", 0, 9),
				(try_begin),
					(eq, ":random_in_range_0_9", 0),
					(call_script, "script_fuck_event_occur"),
				(try_end),
			(else_try),
				(key_clicked, 5),
				(play_sound, "snd_gbt_orgasm"),
				(call_script, "script_molda_s_scene", 412, 0),
				(try_begin),
					(troop_slot_eq, "$g_sex_troop_id", slot_troop_last_persuasion_time, 1),
					(call_script, "script_molda_body_hand_set", "$g_sex_troop_id", 7, "$sex_troop_agent"),
				(try_end),
				(call_script, "script_after_fuck_sett", "$sit_is_rape", 0),
				(assign, "$fuck_progress_end", 1),
				(play_sound, "snd_mansatis"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(store_random_in_range, ":random_in_range_0_9", 0, 9),
				(try_begin),
					(eq, ":random_in_range_0_9", 0),
					(call_script, "script_fuck_event_occur"),
				(try_end),
			(else_try),
				(key_clicked, 6),
				(play_sound, "snd_gbt_orgasm"),
				(call_script, "script_molda_s_scene", 413, 0),
				(try_begin),
					(troop_slot_eq, "$g_sex_troop_id", slot_troop_last_persuasion_time, 1),
					(call_script, "script_molda_body_hand_set", "$g_sex_troop_id", 7, "$sex_troop_agent"),
				(try_end),
				(assign, "$fuck_progress_end", 1),
				(call_script, "script_after_fuck_sett", "$sit_is_rape", 0),
				(play_sound, "snd_mansatis"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(store_random_in_range, ":random_in_range_0_9", 0, 9),
				(try_begin),
					(eq, ":random_in_range_0_9", 0),
					(call_script, "script_fuck_event_occur"),
				(try_end),
			(try_end)
		])
	]),

	("strategy_learn", 0, mesh_pic_xex13, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(position_set_x, 3, 1100),
			(position_set_y, 3, 1100),
			(position_set_x, 4, 750),
			(position_set_y, 4, 750),
			(assign, ":value", 590),
			(assign, ":value_2", 15),
			(create_in_game_button_overlay, "$strategy_learn_exit", "str_return_butt", 4),
			(overlay_set_color, "$strategy_learn_exit", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_exit", 1),
			(val_sub, ":value", 190),
			(assign, reg11, "$g_slot_troop_battle_exp"),
			(create_in_game_button_overlay, reg0, "str_battle_exp_reg11", 4),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(assign, ":value", 30),
			(assign, ":value_2", 710),
			(try_begin),
				(eq, "$bt_st_fallrock", 1),
				(create_text_overlay, "$strategy_learn_fallrock", "str_l_falling_rock", 4),
				(overlay_set_color, "$strategy_learn_fallrock", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_fallrock", "str_l_falling_rock", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_fallrock", 1),
			(overlay_set_size, "$strategy_learn_fallrock", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_learn_text_1", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(try_begin),
				(eq, "$bt_st_firework", 1),
				(create_text_overlay, "$strategy_learn_firework", "str_l_fire_work", 4),
				(overlay_set_color, "$strategy_learn_firework", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_firework", "str_l_fire_work", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_firework", 1),
			(overlay_set_size, "$strategy_learn_firework", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_learn_text_2", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(try_begin),
				(eq, "$bt_st_submerge", 1),
				(create_text_overlay, "$strategy_learn_submerge", "str_learn_submerge1", 4),
				(overlay_set_color, "$strategy_learn_submerge", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_submerge", "str_learn_submerge1", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_submerge", 1),
			(overlay_set_size, "$strategy_learn_submerge", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_learn_text_3", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(try_begin),
				(eq, "$bt_st_ambush", 1),
				(create_text_overlay, "$strategy_learn_ambush", "str_l_ambush", 4),
				(overlay_set_color, "$strategy_learn_ambush", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_ambush", "str_l_ambush", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_ambush", 1),
			(overlay_set_size, "$strategy_learn_ambush", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_learn_text_4", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(try_begin),
				(eq, "$bt_st_lure", 1),
				(create_text_overlay, "$strategy_learn_lure", "str_learn_lure1", 4),
				(overlay_set_color, "$strategy_learn_lure", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_lure", "str_learn_lure1", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_lure", 1),
			(overlay_set_size, "$strategy_learn_lure", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_learn_text_5", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(try_begin),
				(eq, "$bt_st_blocking_supply", 1),
				(create_text_overlay, "$strategy_learn_blocking_supply", "str_bt_st_bs", 4),
				(overlay_set_color, "$strategy_learn_blocking_supply", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_blocking_supply", "str_bt_st_bs", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_blocking_supply", 1),
			(overlay_set_size, "$strategy_learn_blocking_supply", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_learn_text_6", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(try_begin),
				(eq, "$bt_st_confuse", 1),
				(create_text_overlay, "$strategy_learn_confuse", "str_bt_st_confuse", 4),
				(overlay_set_color, "$strategy_learn_confuse", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_confuse", "str_bt_st_confuse", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_confuse", 1),
			(overlay_set_size, "$strategy_learn_confuse", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_learn_text_7", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(try_begin),
				(eq, "$bt_st_opengate", 1),
				(create_text_overlay, "$strategy_learn_opengate", "str_bt_st_opengate", 4),
				(overlay_set_color, "$strategy_learn_opengate", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_opengate", "str_bt_st_opengate", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_opengate", 1),
			(overlay_set_size, "$strategy_learn_opengate", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_learn_text_8", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(try_begin),
				(eq, "$bt_st_infiltration", 1),
				(create_text_overlay, "$strategy_learn_infiltration", "str_bt_st_infiltration", 4),
				(overlay_set_color, "$strategy_learn_infiltration", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_infiltration", "str_bt_st_infiltration", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_infiltration", 1),
			(overlay_set_size, "$strategy_learn_infiltration", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_learn_text_9", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(assign, ":value", 500),
			(assign, ":value_2", 710),
			(try_begin),
				(eq, "$bt_st_sideatt", 1),
				(create_text_overlay, "$strategy_learn_sideatt", "str_bt_st_sideatt", 4),
				(overlay_set_color, "$strategy_learn_sideatt", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_sideatt", "str_bt_st_sideatt", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_sideatt", 1),
			(overlay_set_size, "$strategy_learn_sideatt", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_form_text_1", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(try_begin),
				(eq, "$bt_st_backatt", 1),
				(create_text_overlay, "$strategy_learn_backatt", "str_bt_st_backatt", 4),
				(overlay_set_color, "$strategy_learn_backatt", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_backatt", "str_bt_st_backatt", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_backatt", 1),
			(overlay_set_size, "$strategy_learn_backatt", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_form_text_2", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(try_begin),
				(eq, "$bt_st_encamp", 1),
				(create_text_overlay, "$strategy_learn_encamp", "str_bt_st_encamp", 4),
				(overlay_set_color, "$strategy_learn_encamp", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_encamp", "str_bt_st_encamp", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_encamp", 1),
			(overlay_set_size, "$strategy_learn_encamp", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_form_text_3", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(try_begin),
				(eq, "$bt_st_lionheart", 1),
				(create_text_overlay, "$strategy_learn_lionheart", "str_bt_st_lion", 4),
				(overlay_set_color, "$strategy_learn_lionheart", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_lionheart", "str_bt_st_lion", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_lionheart", 1),
			(overlay_set_size, "$strategy_learn_lionheart", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_form_text_4", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(try_begin),
				(eq, "$bt_st_pincer", 1),
				(create_text_overlay, "$strategy_learn_pincer", "str_bt_st_pincer", 4),
				(overlay_set_color, "$strategy_learn_pincer", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_pincer", "str_bt_st_pincer", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_pincer", 1),
			(overlay_set_size, "$strategy_learn_pincer", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_form_text_5", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(try_begin),
				(eq, "$bt_st_mangudai", 1),
				(create_text_overlay, "$strategy_learn_mangudai", "str_bt_st_mangudai", 4),
				(overlay_set_color, "$strategy_learn_mangudai", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_mangudai", "str_bt_st_mangudai", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_mangudai", 1),
			(overlay_set_size, "$strategy_learn_mangudai", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_form_text_6", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(try_begin),
				(eq, "$bt_st_briver", 1),
				(create_text_overlay, "$strategy_learn_briver", "str_bt_st_briver", 4),
				(overlay_set_color, "$strategy_learn_briver", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_briver", "str_bt_st_briver", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_briver", 1),
			(overlay_set_size, "$strategy_learn_briver", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_form_text_7", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(try_begin),
				(eq, "$bt_st_8door", 1),
				(create_text_overlay, "$strategy_learn_8door", "str_bt_st_8door", 4),
				(overlay_set_color, "$strategy_learn_8door", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_8door", "str_bt_st_8door", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_8door", 1),
			(overlay_set_size, "$strategy_learn_8door", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_form_text_8", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$strategy_learn_exit"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_fallrock"),
				(call_script, "script_battle_exp_sett", 800),
				(eq, "$wm_btexp_continue", 1),
				(play_sound, "snd_good_news_2"),
				(assign, "$bt_st_fallrock", 1),
				(start_presentation, "prsnt_strategy_learn"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_firework"),
				(call_script, "script_battle_exp_sett", 800),
				(eq, "$wm_btexp_continue", 1),
				(play_sound, "snd_good_news_2"),
				(assign, "$bt_st_firework", 1),
				(start_presentation, "prsnt_strategy_learn"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_submerge"),
				(call_script, "script_battle_exp_sett", 800),
				(eq, "$wm_btexp_continue", 1),
				(play_sound, "snd_good_news_2"),
				(assign, "$bt_st_submerge", 1),
				(start_presentation, "prsnt_strategy_learn"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_ambush"),
				(call_script, "script_battle_exp_sett", 800),
				(eq, "$wm_btexp_continue", 1),
				(play_sound, "snd_good_news_2"),
				(assign, "$bt_st_ambush", 1),
				(start_presentation, "prsnt_strategy_learn"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_lure"),
				(call_script, "script_battle_exp_sett", 800),
				(eq, "$wm_btexp_continue", 1),
				(play_sound, "snd_good_news_2"),
				(assign, "$bt_st_lure", 1),
				(start_presentation, "prsnt_strategy_learn"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_blocking_supply"),
				(call_script, "script_battle_exp_sett", 800),
				(eq, "$wm_btexp_continue", 1),
				(play_sound, "snd_good_news_2"),
				(assign, "$bt_st_blocking_supply", 1),
				(start_presentation, "prsnt_strategy_learn"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_confuse"),
				(call_script, "script_battle_exp_sett", 800),
				(eq, "$wm_btexp_continue", 1),
				(play_sound, "snd_good_news_2"),
				(assign, "$bt_st_confuse", 1),
				(start_presentation, "prsnt_strategy_learn"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_opengate"),
				(call_script, "script_battle_exp_sett", 800),
				(eq, "$wm_btexp_continue", 1),
				(play_sound, "snd_good_news_2"),
				(assign, "$bt_st_opengate", 1),
				(start_presentation, "prsnt_strategy_learn"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_infiltration"),
				(call_script, "script_battle_exp_sett", 800),
				(eq, "$wm_btexp_continue", 1),
				(play_sound, "snd_good_news_2"),
				(assign, "$bt_st_infiltration", 1),
				(start_presentation, "prsnt_strategy_learn"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_sideatt"),
				(call_script, "script_battle_exp_sett", 800),
				(eq, "$wm_btexp_continue", 1),
				(play_sound, "snd_good_news_2"),
				(assign, "$bt_st_sideatt", 1),
				(start_presentation, "prsnt_strategy_learn"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_backatt"),
				(call_script, "script_battle_exp_sett", 800),
				(eq, "$wm_btexp_continue", 1),
				(play_sound, "snd_good_news_2"),
				(assign, "$bt_st_backatt", 1),
				(start_presentation, "prsnt_strategy_learn"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_encamp"),
				(call_script, "script_battle_exp_sett", 800),
				(eq, "$wm_btexp_continue", 1),
				(play_sound, "snd_good_news_2"),
				(assign, "$bt_st_encamp", 1),
				(start_presentation, "prsnt_strategy_learn"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_lionheart"),
				(display_message, "str_learn_sp_tact_person", 0x00ff9000),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_pincer"),
				(try_begin),
					(this_or_next|eq, "$wm_player_fac", "fac_kingdom_3"),
					(eq, "$wm_player_fac", "fac_kingdom_2"),
					(call_script, "script_battle_exp_sett", 800),
					(eq, "$wm_btexp_continue", 1),
					(play_sound, "snd_good_news_2"),
					(assign, "$bt_st_pincer", 1),
					(start_presentation, "prsnt_strategy_learn"),
				(else_try),
					(display_message, "str_learn_sp_tact_ancient", 0x00ff9000),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_mangudai"),
				(try_begin),
					(this_or_next|eq, "$wm_player_fac", "fac_kingdom_30"),
					(this_or_next|eq, "$wm_player_fac", "fac_kingdom_21"),
					(this_or_next|eq, "$wm_player_fac", "fac_kingdom_22"),
					(eq, "$wm_player_fac", "fac_kingdom_32"),
					(call_script, "script_battle_exp_sett", 800),
					(eq, "$wm_btexp_continue", 1),
					(play_sound, "snd_good_news_2"),
					(assign, "$bt_st_mangudai", 1),
					(start_presentation, "prsnt_strategy_learn"),
				(else_try),
					(display_message, "str_learn_sp_tact_nomad", 0x00ff9000),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_briver"),
				(display_message, "str_learn_sp_tact_person", 0x00ff9000),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_8door"),
				(call_script, "script_battle_exp_sett", 800),
				(eq, "$wm_btexp_continue", 1),
				(play_sound, "snd_good_news_2"),
				(assign, "$bt_st_8door", 1),
				(start_presentation, "prsnt_strategy_learn"),
			(else_try),
				(assign, reg8, 800),
				(display_message, "str_need_battle_exp", 0x00ff0000),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("game_escape", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(assign, ":var_1", 224),
			(assign, ":var_2", 715),
			(assign, ":var_3", 620),
			(assign, ":var_4", 295),
			(store_sub, ":value", ":var_2", 45),
			(store_sub, ":value_2", ":var_3", 275),
			(store_sub, ":value_3", ":var_4", 275),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 12176525),
			(overlay_set_alpha, reg0, ":var_1"),
			(position_set_x, 1, 15),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 7000),
			(position_set_y, 1, 15200),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 11580067),
			(overlay_set_alpha, reg0, ":var_1"),
			(position_set_x, 1, 15),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 7000),
			(position_set_y, 1, 15200),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 16777215),
			(overlay_set_alpha, reg0, ":var_1"),
			(position_set_x, 1, 15),
			(position_set_y, 1, ":value"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 48400),
			(position_set_y, 1, 3500),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 14548991),
			(overlay_set_alpha, reg0, ":var_1"),
			(position_set_x, 1, 470),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 12500),
			(position_set_y, 1, 15200),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 16768511),
			(overlay_set_alpha, reg0, ":var_1"),
			(position_set_x, 1, 735),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 12500),
			(position_set_y, 1, 15200),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 14540287),
			(overlay_set_alpha, reg0, ":var_1"),
			(position_set_x, 1, 470),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 12500),
			(position_set_y, 1, 15200),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 16777181),
			(overlay_set_alpha, reg0, ":var_1"),
			(position_set_x, 1, 735),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 12500),
			(position_set_y, 1, 15200),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 16777215),
			(overlay_set_alpha, reg0, ":var_1"),
			(position_set_x, 1, 171),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 13850),
			(position_set_y, 1, 5000),
			(overlay_set_size, reg0, 1),
			(position_set_x, 3, 1200),
			(position_set_y, 3, 1200),
			(store_sub, ":value_4", ":var_2", 33),
			(assign, ":value_5", 805),
			(assign, ":value_6", ":value_4"),
			(create_text_overlay, reg0, "str_main_screen_menu_line", 16),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(position_set_x, 3, 800),
			(position_set_y, 3, 800),
			(assign, ":var_11", 10),
			(assign, ":var_12", 20),
			(assign, ":var_13", 7),
			(assign, ":value_5", 475),
			(assign, ":value_6", ":var_3"),
			(create_text_overlay, reg0, "str_eplayer_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_add, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_12"),
			(troop_get_slot, ":player_banner_scene_prop", "trp_player", slot_troop_banner_scene_prop),
			(assign, reg8, ":player_banner_scene_prop"),
			(create_text_overlay, reg0, "str_ehonor_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(assign, reg8, "$adv_renown"),
			(create_text_overlay, reg0, "str_adventure_renown_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(assign, reg8, "$g_slot_troop_battle_exp"),
			(create_text_overlay, reg0, "str_battle_exp_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(assign, reg8, "$g_slot_troop_adv_exp"),
			(create_text_overlay, reg0, "str_adventure_exp_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(troop_get_slot, reg8, "trp_player", slot_troop_age_appearance),
			(create_text_overlay, reg0, "str_meet_contribution", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(troop_get_slot, ":player_23", "trp_player", 23),
			(store_add, ":value_7", ":player_23", "str_religion_title_0"),
			(str_store_string, 8, ":value_7"),
			(create_text_overlay, reg0, "str_ereligion_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(troop_slot_eq, "trp_player", slot_troop_player_order_state, 0),
				(str_store_string, 8, "str_wound_0"),
			(else_try),
				(troop_slot_eq, "trp_player", slot_troop_player_order_state, 1),
				(str_store_string, 8, "str_wound_1"),
			(else_try),
				(troop_slot_eq, "trp_player", slot_troop_player_order_state, 2),
				(str_store_string, 8, "str_wound_2"),
			(else_try),
				(troop_slot_eq, "trp_player", slot_troop_player_order_state, 3),
				(str_store_string, 8, "str_wound_3"),
			(else_try),
				(troop_slot_eq, "trp_player", slot_troop_player_order_state, 4),
				(str_store_string, 8, "str_wound_4"),
			(else_try),
				(troop_slot_eq, "trp_player", slot_troop_player_order_state, 5),
				(str_store_string, 8, "str_wound_5"),
			(else_try),
				(troop_slot_eq, "trp_player", slot_troop_player_order_state, 6),
				(str_store_string, 8, "str_wound_6"),
			(try_end),
			(create_text_overlay, reg0, "str_ehealth_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(assign, reg8, "$ply_kill_stack"),
			(create_text_overlay, reg0, "str_ekillstack_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_13"),
			(val_sub, ":value_6", ":var_12"),
			(create_text_overlay, reg0, "str_emercenary_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_add, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 8, "$contract_fac"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_text_overlay, reg0, "str_efaction_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(gt, "$contract_time", 0),
				(assign, reg8, "$contract_time"),
			(else_try),
				(assign, reg8, 0),
			(try_end),
			(create_text_overlay, reg0, "str_expirationday", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(assign, ":value_5", 740),
			(assign, ":value_6", ":var_3"),
			(try_begin),
				(eq, "$qquest_type", 24),
				(str_store_string, 8, "str_misdoubt_esc"),
			(else_try),
				(eq, "$qquest_type", 23),
				(str_store_string, 8, "str_punch_machine_esc"),
			(else_try),
				(eq, "$qquest_type", 22),
				(str_store_string, 8, "str_duel_for_lady_esc"),
			(else_try),
				(eq, "$qquest_type", 14),
				(str_store_string, 8, "str_provocation_esc"),
			(else_try),
				(eq, "$qquest_type", 13),
				(str_store_string, 8, "str_enemy_army_esc"),
			(else_try),
				(eq, "$qquest_type", 12),
				(str_store_string, 8, "str_love_letter_esc"),
			(else_try),
				(this_or_next|eq, "$qquest_type", 21),
				(eq, "$qquest_type", 11),
				(str_store_string, 8, "str_messenger_esc"),
			(else_try),
				(eq, "$qquest_type", 1),
				(str_store_string, 8, "str_alcohol_delivery_esc"),
			(else_try),
				(eq, "$qquest_type", 2),
				(str_store_string, 8, "str_wanted_esc"),
			(else_try),
				(str_store_string, 8, "str_quest_esc"),
			(try_end),
			(create_text_overlay, reg0, "str_glob_s8", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(eq, "$qquest_progress", 1),
				(overlay_set_color, reg0, 155),
			(else_try),
				(eq, "$qquest_progress", 2),
				(overlay_set_color, reg0, 10158080),
			(try_end),
			(val_add, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(is_between, "$qquest_report_party", "p_pyongyang", "p_place_end"),
				(party_slot_eq, "$qquest_report_party", slot_party_type, 7),
				(str_store_party_name, 8, "$qquest_report_party"),
			(else_try),
				(is_between, "$qquest_report_party", "p_tradeport1", "p_tradeport_end"),
				(party_slot_eq, "$qquest_report_party", slot_party_type, 6),
				(str_store_party_name, 8, "$qquest_report_party"),
			(else_try),
				(is_between, "$qquest_report_troop", "trp_tt_lord_01_00", "trp_tt_lady_end"),
				(str_store_troop_name, 8, "$qquest_report_troop"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_button_overlay, "$loc_button_30", "str_reports8", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_30", 1),
			(overlay_set_size, "$loc_button_30", 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(is_between, "$qquest_target_party", "p_pyongyang", "p_place_end"),
				(party_slot_eq, "$qquest_target_party", slot_party_type, 7),
				(str_store_party_name, 8, "$qquest_target_party"),
				(create_button_overlay, "$loc_button_29", "str_targets8", 4),
			(else_try),
				(is_between, "$qquest_target_troop", "trp_ex_npc_020", "trp_ex_npc_054"),
				(str_store_troop_name, 8, "$qquest_target_troop"),
				(create_text_overlay, "$loc_button_29", "str_targets8", 4),
			(else_try),
				(is_between, "$qquest_target_troop", "trp_tt_lord_01_00", "trp_tt_lady_end"),
				(str_store_troop_name, 8, "$qquest_target_troop"),
				(create_button_overlay, "$loc_button_29", "str_targets8", 4),
			(else_try),
				(is_between, "$qquest_target_faction", "fac_kingdom_1", "fac_kingdoms_end"),
				(str_store_faction_name, 8, "$qquest_target_faction"),
				(create_text_overlay, "$loc_button_29", "str_targets8", 4),
			(else_try),
				(str_store_troop_name, 8, "str_empty_string"),
				(create_text_overlay, "$loc_button_29", "str_targets8", 4),
			(try_end),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_29", 1),
			(overlay_set_size, "$loc_button_29", 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(gt, "$qquest_time_day", 0),
				(assign, reg8, "$qquest_time_day"),
			(else_try),
				(assign, reg8, 0),
			(try_end),
			(create_text_overlay, reg0, "str_remain_day_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_13"),
			(val_sub, ":value_6", ":var_12"),
			(create_text_overlay, reg0, "str_adventure_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_add, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(this_or_next|eq, "$main_q_step", 13),
				(this_or_next|eq, "$main_q_step", 14),
				(eq, "$main_q_step", 15),
				(str_store_string, 8, "str_mq_1_11t"),
			(else_try),
				(gt, "$ruin_qst_target_num", 0),
				(str_store_party_name, 8, "$ruin_qst_target_num"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_text_overlay, reg0, "str_targets8", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(this_or_next|eq, "$main_q_step", 13),
				(this_or_next|eq, "$main_q_step", 14),
				(eq, "$main_q_step", 15),
				(str_store_string, 8, "str_mq_1_11r"),
			(else_try),
				(gt, "$ruin_qst_target_num", 0),
				(store_sub, ":value_8", "$ruin_qst_target_num", "p_ruin_1"),
				(store_add, ":value_7", "str_r_clue_001", ":value_8"),
				(str_store_string, 8, ":value_7"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_text_overlay, reg0, "str_clue_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(this_or_next|eq, "$main_q_step", 13),
				(this_or_next|eq, "$main_q_step", 14),
				(eq, "$main_q_step", 15),
				(str_store_party_name, 8, "$main_q_party"),
			(else_try),
				(gt, "$ruin_qst_target_num", 0),
				(str_store_party_name, 8, "$ruin_qst_giver_loc"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_button_overlay, "$loc_button_09", "str_reports8", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_09", 1),
			(overlay_set_size, "$loc_button_09", 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(this_or_next|eq, "$main_q_step", 13),
				(this_or_next|eq, "$main_q_step", 14),
				(eq, "$main_q_step", 15),
				(assign, reg8, 99),
			(else_try),
				(gt, "$ruin_qst_target_num", 0),
				(assign, reg8, "$ruin_qst_remain_turn"),
			(else_try),
				(assign, reg8, 0),
			(try_end),
			(create_text_overlay, reg0, "str_expirationday", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_13"),
			(val_sub, ":value_6", ":var_12"),
			(create_text_overlay, reg0, "str_bard_quest_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_add, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(is_between, "$bard_quest_target", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 8, "$bard_quest_target"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_text_overlay, reg0, "str_target_lady_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(is_between, "$bard_quest_party", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 8, "$bard_quest_party"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_button_overlay, "$loc_button_28", "str_reports8", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_28", 1),
			(overlay_set_size, "$loc_button_28", 3),
			(assign, ":value_5", 475),
			(assign, ":value_6", ":var_4"),
			(create_text_overlay, reg0, "str_income_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_add, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_12"),
			(party_get_slot, reg8, "p_main_party", slot_center_last_taken_by_troop),
			(create_text_overlay, reg0, "str_emoney_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(assign, reg8, "$ply_account"),
			(val_mul, reg8, 5000),
			(create_text_overlay, reg0, "str_savings_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(assign, reg8, "$prev_turn_income_money"),
			(create_text_overlay, reg0, "str_income_from_fief_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_13"),
			(val_sub, ":value_6", ":var_12"),
			(create_text_overlay, reg0, "str_traders_revenue_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_add, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_12"),
			(troop_get_slot, ":player_42", "trp_player", 42),
			(try_begin),
				(party_is_active, ":player_42"),
				(party_slot_eq, ":player_42", slot_party_type, 5),
				(neq, ":player_42", "p_main_party"),
				(neg|is_between, ":player_42", "p_temp_party", "p_reserved_5"),
				(neq, ":player_42", "p_reserved_5"),
				(party_get_slot, reg8, ":player_42", slot_town_wealth),
			(else_try),
				(assign, reg8, 0),
			(try_end),
			(assign, reg9, "$prev_revenue_caravan_1"),
			(create_text_overlay, reg0, "str_a_revenue_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(eq, "$r_player_class", 1),
				(val_sub, ":value_6", ":var_12"),
				(troop_get_slot, ":player_42", "trp_player", 43),
				(try_begin),
					(party_is_active, ":player_42"),
					(party_slot_eq, ":player_42", slot_party_type, 5),
					(neq, ":player_42", "p_main_party"),
					(neg|is_between, ":player_42", "p_temp_party", "p_reserved_5"),
					(neq, ":player_42", "p_reserved_5"),
					(party_get_slot, reg8, ":player_42", slot_town_wealth),
				(else_try),
					(assign, reg8, 0),
				(try_end),
				(assign, reg9, "$prev_revenue_caravan_2"),
				(create_text_overlay, reg0, "str_b_revenue_esc", 4),
				(position_set_x, 1, ":value_5"),
				(position_set_y, 1, ":value_6"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(try_end),
			(val_sub, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_13"),
			(val_sub, ":value_6", ":var_12"),
			(create_text_overlay, reg0, "str_entertainment_revenue_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_add, ":value_5", ":var_11"),
			(try_begin),
				(eq, "$adult_content", 1),
				(val_sub, ":value_6", ":var_12"),
				(assign, reg8, "$brothel_prev_income"),
				(create_text_overlay, reg0, "str_brothel_prev_esc", 4),
				(position_set_x, 1, ":value_5"),
				(position_set_y, 1, ":value_6"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(try_end),
			(try_begin),
				(eq, "$adult_content", 1),
				(val_sub, ":value_6", ":var_12"),
				(assign, reg8, "$nakepit_prev_income"),
				(create_text_overlay, reg0, "str_fight_pit_prev_esc", 4),
				(position_set_x, 1, ":value_5"),
				(position_set_y, 1, ":value_6"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(try_end),
			(assign, ":value_5", 740),
			(assign, ":value_6", ":var_4"),
			(create_text_overlay, reg0, "str_outlay_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_add, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_12"),
			(assign, ":var_19", 0),
			(try_begin),
				(gt, "$wm_comp_id_1", 0),
				(store_character_level, ":character_level_wm_comp_id_1", "$wm_comp_id_1"),
				(val_add, ":var_19", ":character_level_wm_comp_id_1"),
			(try_end),
			(try_begin),
				(gt, "$wm_comp_id_2", 0),
				(store_character_level, ":character_level_wm_comp_id_1", "$wm_comp_id_2"),
				(val_add, ":var_19", ":character_level_wm_comp_id_1"),
			(try_end),
			(try_begin),
				(gt, "$wm_comp_id_3", 0),
				(store_character_level, ":character_level_wm_comp_id_1", "$wm_comp_id_3"),
				(val_add, ":var_19", ":character_level_wm_comp_id_1"),
			(try_end),
			(try_begin),
				(gt, "$wm_comp_id_4", 0),
				(store_character_level, ":character_level_wm_comp_id_1", "$wm_comp_id_4"),
				(val_add, ":var_19", ":character_level_wm_comp_id_1"),
			(try_end),
			(try_begin),
				(gt, "$wm_comp_id_5", 0),
				(store_character_level, ":character_level_wm_comp_id_1", "$wm_comp_id_5"),
				(val_add, ":var_19", ":character_level_wm_comp_id_1"),
			(try_end),
			(val_mul, ":var_19", 10),
			(assign, ":var_21", 0),
			(try_for_range, ":troop", "trp_elite_troops_01", "trp_elite_troops_end"),
				(troop_slot_eq, ":troop", slot_troop_love_interest_1, 1),
				(store_character_level, ":character_level_wm_comp_id_1", ":troop"),
				(val_mul, ":character_level_wm_comp_id_1", 7),
				(val_add, ":var_21", ":character_level_wm_comp_id_1"),
			(try_end),
			(val_add, ":var_19", ":var_21"),
			(assign, reg8, ":var_19"),
			(create_text_overlay, reg0, "str_companion_wage_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party", "p_main_party"),
			(val_sub, ":party_size_wo_prisoners_main_party", 1),
			(try_begin),
				(is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
				(eq, "$r_player_class", 0),
				(assign, ":party_size_wo_prisoners_main_party", 0),
			(else_try),
				(is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
				(ge, ":party_size_wo_prisoners_main_party", 500),
				(val_div, ":party_size_wo_prisoners_main_party", 4),
			(else_try),
				(lt, ":party_size_wo_prisoners_main_party", 500),
				(assign, ":party_size_wo_prisoners_main_party", 0),
			(else_try),
				(gt, ":party_size_wo_prisoners_main_party", 3),
				(val_div, ":party_size_wo_prisoners_main_party", 3),
			(try_end),
			(assign, ":value_9", 0),
			(try_begin),
				(is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
				(gt, "$ply_staying_army_size", 3),
				(store_div, ":value_9", "$ply_staying_army_size", 3),
			(try_end),
			(val_add, ":party_size_wo_prisoners_main_party", ":value_9"),
			(assign, ":value_10", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range, ":localvariable", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_localvariable", "p_main_party", ":localvariable"),
				(gt, ":party_stack_troop_id_main_party_localvariable", "trp_army_size_troop"),
				(neg|troop_is_hero, ":party_stack_troop_id_main_party_localvariable"),
				(party_stack_get_size, ":party_stack_size_main_party_localvariable", "p_main_party", ":localvariable"),
				(try_begin),
					(gt, ":party_stack_size_main_party_localvariable", 0),
					(store_character_level, ":character_level_wm_comp_id_1", ":party_stack_troop_id_main_party_localvariable"),
					(store_sub, ":value_11", ":character_level_wm_comp_id_1", 10),
					(try_begin),
						(ge, ":character_level_wm_comp_id_1", 25),
						(troop_is_guarantee_horse, ":party_stack_troop_id_main_party_localvariable"),
						(val_mul, ":value_11", 4),
					(try_end),
					(val_add, ":value_10", ":value_11"),
				(try_end),
			(try_end),
			(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party_2", "p_main_party"),
			(try_begin),
				(le, ":party_size_wo_prisoners_main_party_2", 300),
				(ge, ":value_10", 2),
				(val_div, ":value_10", 2),
			(try_end),
			(try_begin),
				(is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
				(eq, "$r_player_class", 0),
				(assign, ":value_10", 0),
			(else_try),
				(is_between, "$contract_fac", "fac_kingdom_1", "fac_kingdoms_end"),
				(ge, ":value_10", 2),
				(val_div, ":value_10", 2),
			(try_end),
			(val_add, ":party_size_wo_prisoners_main_party", ":value_10"),
			(assign, reg8, ":party_size_wo_prisoners_main_party"),
			(create_text_overlay, reg0, "str_army_wage_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(assign, ":var_32", 0),
			(try_begin),
				(call_script, "script_ship_wage_counting", "$m_ship_type_1"),
				(val_add, ":var_32", "$temp"),
				(call_script, "script_ship_wage_counting", "$m_ship_type_2"),
				(val_add, ":var_32", "$temp"),
				(call_script, "script_ship_wage_counting", "$m_ship_type_3"),
				(val_add, ":var_32", "$temp"),
				(call_script, "script_ship_wage_counting", "$m_ship_type_4"),
				(val_add, ":var_32", "$temp"),
				(call_script, "script_ship_wage_counting", "$m_ship_type_5"),
				(val_add, ":var_32", "$temp"),
			(try_end),
			(try_begin),
				(gt, ":var_32", 3),
				(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party_3", "p_main_party"),
				(lt, ":party_size_wo_prisoners_main_party_3", 200),
				(val_div, ":var_32", 3),
			(try_end),
			(try_begin),
				(eq, "$pirate_king", 1),
				(gt, ":var_32", 3),
				(val_div, ":var_32", 3),
			(try_end),
			(assign, reg8, ":var_32"),
			(create_text_overlay, reg0, "str_shipwage_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(assign, ":var_34", 0),
			(troop_get_slot, ":player_42", "trp_player", 42),
			(try_begin),
				(party_is_active, ":player_42"),
				(party_slot_eq, ":player_42", slot_party_type, 5),
				(neq, ":player_42", "p_main_party"),
				(neg|is_between, ":player_42", "p_temp_party", "p_reserved_5"),
				(neq, ":player_42", "p_reserved_5"),
				(val_add, ":var_34", 500),
			(try_end),
			(troop_get_slot, ":player_42", "trp_player", 43),
			(try_begin),
				(party_is_active, ":player_42"),
				(party_slot_eq, ":player_42", slot_party_type, 5),
				(neq, ":player_42", "p_main_party"),
				(neg|is_between, ":player_42", "p_temp_party", "p_reserved_5"),
				(neq, ":player_42", "p_reserved_5"),
				(val_add, ":var_34", 500),
			(try_end),
			(assign, reg8, ":var_34"),
			(create_text_overlay, reg0, "str_traders_wage_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(assign, reg8, "$workshop_slave"),
			(create_text_overlay, reg0, "str_workshop_slave_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(assign, reg8, 0),
			(try_begin),
				(is_between, "$hidout_target_party", "p_pyongyang", "p_place_end"),
				(assign, ":value_12", 0),
				(val_add, ":value_12", 1000),
				(val_add, ":value_12", 1000),
				(try_begin),
					(eq, "$hideout_build_prison", 1),
					(val_add, ":value_12", 500),
				(try_end),
				(try_begin),
					(eq, "$hideout_build_torture", 1),
					(val_add, ":value_12", 500),
				(try_end),
				(assign, reg8, ":value_12"),
			(try_end),
			(create_text_overlay, reg0, "str_mansion_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(assign, ":value_12", 0),
			(try_for_range, ":troop_2", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(troop_slot_eq, ":troop_2", slot_troop_leaded_party, 3),
				(val_add, ":value_12", 1),
			(try_end),
			(val_mul, ":value_12", 50),
			(assign, reg8, ":value_12"),
			(create_text_overlay, reg0, "str_prisoner_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_13"),
			(val_sub, ":value_6", ":var_12"),
			(create_text_overlay, reg0, "str_debt_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_add, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_12"),
			(assign, reg8, "$debt_date_month"),
			(create_text_overlay, reg0, "str_remaining_month_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(assign, reg8, "$ply_debt_per_month"),
			(create_text_overlay, reg0, "str_repayment_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(assign, ":value_5", 15),
			(assign, ":value_6", ":var_2"),
			(create_text_overlay, reg0, "str_tournament_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(party_slot_eq, "$tournament_place_1", slot_party_last_toll_paid_hours, 1),
				(str_store_party_name, 8, "$tournament_place_1"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_button_overlay, "$loc_button_01", "str_glob_s8", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_01", 1),
			(overlay_set_size, "$loc_button_01", 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(party_slot_eq, "$tournament_place_2", slot_party_last_toll_paid_hours, 1),
				(str_store_party_name, 8, "$tournament_place_2"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_button_overlay, "$loc_button_02", "str_glob_s8", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_02", 1),
			(overlay_set_size, "$loc_button_02", 3),
			(assign, ":value_5", 165),
			(assign, ":value_6", ":var_2"),
			(try_begin),
				(party_slot_eq, "$tournament_place_3", slot_party_last_toll_paid_hours, 1),
				(str_store_party_name, 8, "$tournament_place_3"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_button_overlay, "$loc_button_03", "str_glob_s8", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_03", 1),
			(overlay_set_size, "$loc_button_03", 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(party_slot_eq, "$tournament_place_4", slot_party_last_toll_paid_hours, 1),
				(str_store_party_name, 8, "$tournament_place_4"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_button_overlay, "$loc_button_04", "str_glob_s8", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_04", 1),
			(overlay_set_size, "$loc_button_04", 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(party_slot_eq, "$tournament_place_5", slot_party_last_toll_paid_hours, 1),
				(str_store_party_name, 8, "$tournament_place_5"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_button_overlay, "$loc_button_05", "str_glob_s8", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_05", 1),
			(overlay_set_size, "$loc_button_05", 3),
			(assign, ":value_5", 290),
			(assign, ":value_6", ":var_2"),
			(try_begin),
				(party_slot_eq, "$tournament_place_6", slot_party_last_toll_paid_hours, 1),
				(str_store_party_name, 8, "$tournament_place_6"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_button_overlay, "$loc_button_06", "str_glob_s8", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_06", 1),
			(overlay_set_size, "$loc_button_06", 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(party_slot_eq, "$tournament_place_7", slot_party_last_toll_paid_hours, 1),
				(str_store_party_name, 8, "$tournament_place_7"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_button_overlay, "$loc_button_07", "str_glob_s8", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_07", 1),
			(overlay_set_size, "$loc_button_07", 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(party_slot_eq, "$tournament_place_8", slot_party_last_toll_paid_hours, 1),
				(str_store_party_name, 8, "$tournament_place_8"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_button_overlay, "$loc_button_08", "str_glob_s8", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_08", 1),
			(overlay_set_size, "$loc_button_08", 3),
			(assign, ":value_5", 465),
			(assign, ":value_6", ":var_2"),
			(val_add, ":value_5", ":var_11"),
			(try_begin),
				(is_between, "$rt_target_set_a", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 8, "$rt_target_set_a"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_button_overlay, "$loc_button_10", "str_trade_a_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_10", 1),
			(overlay_set_size, "$loc_button_10", 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(is_between, "$rt_target_set_b", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 8, "$rt_target_set_b"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_button_overlay, "$loc_button_11", "str_trade_b_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_11", 1),
			(overlay_set_size, "$loc_button_11", 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(is_between, "$rt_marked_target", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 8, "$rt_marked_target"),
			(else_try),
				(str_store_string, 8, "str_empty_string"),
			(try_end),
			(create_button_overlay, "$loc_button_12", "str_mapmarker_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_12", 1),
			(overlay_set_size, "$loc_button_12", 3),
			(assign, ":value_5", 15),
			(assign, ":value_6", ":var_4"),
			(call_script, "script_temp_save_number11_initialize"),
			(try_for_range, ":party", "p_pyongyang", "p_place_end"),
				(store_faction_of_party, ":faction_of_party_party", ":party"),
				(eq, ":faction_of_party_party", "$wm_player_fac"),
				(party_slot_eq, ":party", slot_town_tavern, "trp_player"),
				(call_script, "script_temp_save_number11_inject", ":party"),
			(try_end),
			(str_clear, 21),
			(str_clear, 22),
			(str_clear, 23),
			(str_clear, 24),
			(str_clear, 25),
			(str_clear, 26),
			(str_clear, 27),
			(str_clear, 28),
			(str_clear, 29),
			(str_clear, 30),
			(str_clear, 31),
			(str_clear, 32),
			(str_clear, 33),
			(str_clear, 34),
			(str_clear, 35),
			(try_begin),
				(is_between, "$temp_save_number11_1", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 21, "$temp_save_number11_1"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_2", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 22, "$temp_save_number11_2"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_3", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 23, "$temp_save_number11_3"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_4", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 24, "$temp_save_number11_4"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_5", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 25, "$temp_save_number11_5"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_6", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 26, "$temp_save_number11_6"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_7", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 27, "$temp_save_number11_7"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_8", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 28, "$temp_save_number11_8"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_9", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 29, "$temp_save_number11_9"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_10", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 30, "$temp_save_number11_10"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_11", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 31, "$temp_save_number11_11"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_12", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 32, "$temp_save_number11_12"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_13", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 33, "$temp_save_number11_13"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_14", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 34, "$temp_save_number11_14"),
			(try_end),
			(create_text_overlay, reg0, "str_e_fief", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_add, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_12"),
			(create_button_overlay, "$loc_button_13", "str_glob_s21", 4),
			(overlay_set_size, "$loc_button_13", 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_13", 1),
			(val_sub, ":value_6", ":var_12"),
			(create_button_overlay, "$loc_button_14", "str_glob_s22", 4),
			(overlay_set_size, "$loc_button_14", 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_14", 1),
			(val_sub, ":value_6", ":var_12"),
			(create_button_overlay, "$loc_button_15", "str_glob_s23", 4),
			(overlay_set_size, "$loc_button_15", 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_15", 1),
			(val_sub, ":value_6", ":var_12"),
			(create_button_overlay, "$loc_button_16", "str_glob_s24", 4),
			(overlay_set_size, "$loc_button_16", 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_16", 1),
			(val_sub, ":value_6", ":var_12"),
			(create_button_overlay, "$loc_button_17", "str_glob_s25", 4),
			(overlay_set_size, "$loc_button_17", 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_17", 1),
			(val_sub, ":value_6", ":var_12"),
			(create_button_overlay, "$loc_button_18", "str_glob_s26", 4),
			(overlay_set_size, "$loc_button_18", 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_18", 1),
			(val_sub, ":value_6", ":var_12"),
			(create_button_overlay, "$loc_button_19", "str_glob_s27", 4),
			(overlay_set_size, "$loc_button_19", 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_19", 1),
			(val_sub, ":value_6", ":var_12"),
			(create_button_overlay, "$loc_button_20", "str_glob_s28", 4),
			(overlay_set_size, "$loc_button_20", 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_20", 1),
			(val_sub, ":value_6", ":var_12"),
			(create_button_overlay, "$loc_button_21", "str_glob_s29", 4),
			(overlay_set_size, "$loc_button_21", 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_21", 1),
			(val_sub, ":value_6", ":var_12"),
			(create_button_overlay, "$loc_button_22", "str_glob_s30", 4),
			(overlay_set_size, "$loc_button_22", 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_22", 1),
			(val_sub, ":value_6", ":var_12"),
			(create_button_overlay, "$loc_button_23", "str_glob_s31", 4),
			(overlay_set_size, "$loc_button_23", 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_23", 1),
			(val_sub, ":value_6", ":var_12"),
			(create_button_overlay, "$loc_button_24", "str_glob_s32", 4),
			(overlay_set_size, "$loc_button_24", 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_24", 1),
			(val_sub, ":value_6", ":var_12"),
			(create_button_overlay, "$loc_button_25", "str_glob_s33", 4),
			(overlay_set_size, "$loc_button_25", 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_25", 1),
			(val_sub, ":value_6", ":var_12"),
			(create_button_overlay, "$loc_button_26", "str_glob_s34", 4),
			(overlay_set_size, "$loc_button_26", 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_26", 1),
			(assign, ":value_5", 176),
			(assign, ":value_6", 75),
			(try_begin),
				(is_between, "$wm_player_fac", "fac_kingdom_1", "fac_kingdoms_end"),
				(faction_get_slot, ":value_11", "$wm_player_fac", slot_faction_state),
				(is_between, ":value_11", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 8, ":value_11"),
				(create_button_overlay, "$loc_button_32", "str_defence_esc", 4),
				(overlay_set_color, "$loc_button_32", 136),
			(else_try),
				(party_get_slot, reg8, "p_main_party", slot_center_player_relation),
				(party_get_slot, reg9, "p_main_party", slot_town_elder),
				(party_get_slot, ":main_party_center_siege_with_belfry", "p_main_party", slot_center_siege_with_belfry),
				(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party_4", "p_main_party"),
				(set_show_messages, 0),
				(val_div, ":party_size_wo_prisoners_main_party_4", 5),
				(val_div, ":main_party_center_siege_with_belfry", ":party_size_wo_prisoners_main_party_4"),
				(assign, reg10, ":main_party_center_siege_with_belfry"),
				(set_show_messages, 1),
				(create_text_overlay, "$loc_button_32", "str_moral_train_esc", 4),
			(try_end),
			(position_set_x, 1, 1400),
			(position_set_y, 1, 1400),
			(overlay_set_size, "$loc_button_32", 1),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_32", 1),
			(assign, ":value_6", 35),
			(try_begin),
				(is_between, "$wm_player_fac", "fac_kingdom_1", "fac_kingdoms_end"),
				(faction_get_slot, ":value_11", "$wm_player_fac", slot_faction_number_of_parties),
				(is_between, ":value_11", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 8, ":value_11"),
				(create_button_overlay, "$loc_button_31", "str_attack_esc", 4),
				(overlay_set_color, "$loc_button_31", 8912896),
			(else_try),
				(party_get_slot, reg8, "p_main_party", slot_center_last_taken_by_troop),
				(create_text_overlay, "$loc_button_31", "str_money_food_esc", 4),
			(try_end),
			(position_set_x, 1, 1400),
			(position_set_y, 1, 1400),
			(overlay_set_size, "$loc_button_31", 1),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_31", 1),
			(assign, ":value_5", 15),
			(assign, ":value_6", ":var_3"),
			(store_add, ":value_7", "$glob_weather", "str_weather_clean"),
			(create_text_overlay, reg0, ":value_7", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_begin),
				(eq, "$glob_weather", 2),
				(overlay_set_color, reg0, 47871),
			(else_try),
				(eq, "$glob_weather", 1),
				(overlay_set_color, reg0, 16711680),
			(else_try),
				(overlay_set_color, reg0, 0),
			(try_end),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(eq, "$attemp_commu", 0),
				(str_store_string, 8, "str_cool_o"),
			(else_try),
				(assign, reg8, "$attemp_commu"),
				(str_store_string, 8, "str_cool_hour"),
			(try_end),
			(create_text_overlay, reg0, "str_communication_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(eq, "$wm_buying_drink_for_army", 0),
				(str_store_string, 8, "str_cool_o"),
			(else_try),
				(assign, reg8, "$wm_buying_drink_for_army"),
				(str_store_string, 8, "str_cool_hour"),
			(try_end),
			(create_text_overlay, reg0, "str_buy_drink_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(eq, "$bet_already", 0),
				(str_store_string, 8, "str_cool_o"),
			(else_try),
				(assign, reg8, "$bet_already"),
				(str_store_string, 8, "str_cool_hour"),
			(try_end),
			(create_text_overlay, reg0, "str_fight_pit_bet_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(eq, "$innocent_pay", 0),
				(str_store_string, 8, "str_cool_o"),
			(else_try),
				(assign, reg8, "$innocent_pay"),
				(str_store_string, 8, "str_cool_hour"),
			(try_end),
			(create_text_overlay, reg0, "str_passing_fare_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(eq, "$adult_content", 1),
				(assign, reg8, "$Sexual_desire"),
				(create_text_overlay, reg0, "str_sexual_desire_esc", 4),
				(position_set_x, 1, ":value_5"),
				(position_set_y, 1, ":value_6"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(try_end),
			(val_sub, ":value_6", ":var_12"),
			(assign, reg8, "$player_bath_cooltime"),
			(create_text_overlay, reg0, "str_bath_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(eq, "$convert_possi", 0),
				(str_store_string, 8, "str_cool_o"),
			(else_try),
				(str_store_string, 8, "str_cool_x"),
			(try_end),
			(create_text_overlay, reg0, "str_conversion_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_6", 27),
			(try_begin),
				(this_or_next|eq, "$r_player_class", 2),
				(player_has_item, 1440),
				(create_text_overlay, reg0, "str_coordinates_esc", 4),
				(position_set_x, 1, ":value_5"),
				(position_set_y, 1, ":value_6"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(val_add, ":value_5", ":var_11"),
				(party_get_position, 10, "p_main_party"),
				(position_get_x, ":position_x_10", 10),
				(position_get_y, ":position_y_10", 10),
				(val_sub, ":value_6", ":var_12"),
				(assign, reg8, ":position_x_10"),
				(create_text_overlay, reg0, "str_coordinatesx_esc", 4),
				(position_set_x, 1, ":value_5"),
				(position_set_y, 1, ":value_6"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(val_sub, ":value_6", ":var_12"),
				(assign, reg8, ":position_y_10"),
				(create_text_overlay, reg0, "str_coordinatesy_esc", 4),
				(position_set_x, 1, ":value_5"),
				(position_set_y, 1, ":value_6"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(else_try),
				(val_add, ":value_5", ":var_11"),
				(val_sub, ":value_6", ":var_12"),
				(val_sub, ":value_6", ":var_12"),
			(try_end),
			(val_sub, ":value_6", 27),
			(val_sub, ":value_5", ":var_11"),
			(create_text_overlay, reg0, "str_t_armystay_esc", 4),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_add, ":value_5", ":var_11"),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
				(str_store_party_name, 8, "$ply_staying_party_no"),
				(create_button_overlay, "$loc_button_27", "str_glob_s8", 4),
			(else_try),
				(create_text_overlay, "$loc_button_27", "str_empty_string"),
			(try_end),
			(overlay_set_size, "$loc_button_27", 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$loc_button_27", 1),
			(val_sub, ":value_6", ":var_12"),
			(try_begin),
				(is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
				(gt, "$ply_staying_army_size", 0),
				(assign, reg8, "$ply_staying_army_size"),
				(create_text_overlay, reg0, "str_t_armystay_esc2", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 3),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_01"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_02"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_03"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_04"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_05"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_06"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_07"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_08"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_09"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_10"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_11"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_12"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_13"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_14"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_15"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_16"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_17"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_18"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_19"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_20"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_21"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_22"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_23"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_24"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_25"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_26"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_27"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_28"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_29"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_31"),
				(this_or_next|eq, ":trigger_param_1", "$loc_button_32"),
				(eq, ":trigger_param_1", "$loc_button_30"),
				(assign, ":value", 0),
				(try_begin),
					(eq, ":trigger_param_1", "$loc_button_01"),
					(assign, ":value", "$tournament_place_1"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_02"),
					(assign, ":value", "$tournament_place_2"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_03"),
					(assign, ":value", "$tournament_place_3"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_04"),
					(assign, ":value", "$tournament_place_4"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_05"),
					(assign, ":value", "$tournament_place_5"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_06"),
					(assign, ":value", "$tournament_place_6"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_07"),
					(assign, ":value", "$tournament_place_7"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_08"),
					(assign, ":value", "$tournament_place_8"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_09"),
					(this_or_next|eq, "$main_q_step", 13),
					(this_or_next|eq, "$main_q_step", 14),
					(eq, "$main_q_step", 15),
					(assign, ":value", "$main_q_party"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_09"),
					(assign, ":value", "$ruin_qst_giver_loc"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_10"),
					(assign, ":value", "$rt_target_set_a"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_11"),
					(assign, ":value", "$rt_target_set_b"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_12"),
					(assign, ":value", "$rt_marked_target"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_13"),
					(assign, ":value", "$temp_save_number11_1"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_14"),
					(assign, ":value", "$temp_save_number11_2"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_15"),
					(assign, ":value", "$temp_save_number11_3"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_16"),
					(assign, ":value", "$temp_save_number11_4"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_17"),
					(assign, ":value", "$temp_save_number11_5"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_18"),
					(assign, ":value", "$temp_save_number11_6"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_19"),
					(assign, ":value", "$temp_save_number11_7"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_20"),
					(assign, ":value", "$temp_save_number11_8"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_21"),
					(assign, ":value", "$temp_save_number11_9"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_22"),
					(assign, ":value", "$temp_save_number11_10"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_23"),
					(assign, ":value", "$temp_save_number11_11"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_24"),
					(assign, ":value", "$temp_save_number11_12"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_25"),
					(assign, ":value", "$temp_save_number11_13"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_26"),
					(assign, ":value", "$temp_save_number11_14"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_27"),
					(is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
					(assign, ":value", "$ply_staying_party_no"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_28"),
					(assign, ":value", "$bard_quest_party"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_29"),
					(is_between, "$qquest_target_party", "p_pyongyang", "p_place_end"),
					(party_slot_eq, "$qquest_target_party", slot_party_type, 7),
					(assign, ":value", "$qquest_target_party"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_29"),
					(is_between, "$qquest_target_troop", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(try_begin),
						(troop_slot_eq, "$qquest_target_troop", slot_troop_cur_center, 1),
						(troop_get_slot, ":qquest_target_troop_wealth", "$qquest_target_troop", slot_troop_wealth),
						(party_is_active, ":qquest_target_troop_wealth"),
						(neg|is_between, ":qquest_target_troop_wealth", "p_temp_party", "p_reserved_5"),
						(party_slot_eq, ":qquest_target_troop_wealth", slot_party_type, 1),
						(party_slot_eq, ":qquest_target_troop_wealth", slot_town_horse_merchant, "$qquest_target_troop"),
						(assign, ":value", ":qquest_target_troop_wealth"),
					(else_try),
						(troop_slot_eq, "$qquest_target_troop", slot_troop_cur_center, 0),
						(troop_get_slot, ":qquest_target_troop_love_interest_3", "$qquest_target_troop", slot_troop_love_interest_3),
						(assign, ":value", ":qquest_target_troop_love_interest_3"),
					(try_end),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_29"),
					(is_between, "$qquest_target_troop", "trp_tt_lady_01_01", "trp_tt_lady_end"),
					(troop_get_slot, ":qquest_target_troop_love_interest_3", "$qquest_target_troop", slot_troop_betrothed),
					(assign, ":value", ":qquest_target_troop_love_interest_3"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_30"),
					(is_between, "$qquest_report_party", "p_pyongyang", "p_place_end"),
					(party_slot_eq, "$qquest_report_party", slot_party_type, 7),
					(assign, ":value", "$qquest_report_party"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_30"),
					(is_between, "$qquest_report_party", "p_tradeport1", "p_tradeport_end"),
					(party_slot_eq, "$qquest_report_party", slot_party_type, 6),
					(assign, ":value", "$qquest_report_party"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_30"),
					(is_between, "$qquest_report_troop", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(try_begin),
						(troop_slot_eq, "$qquest_report_troop", slot_troop_cur_center, 1),
						(troop_get_slot, ":qquest_target_troop_wealth", "$qquest_report_troop", slot_troop_wealth),
						(party_is_active, ":qquest_target_troop_wealth"),
						(neg|is_between, ":qquest_target_troop_wealth", "p_temp_party", "p_reserved_5"),
						(party_slot_eq, ":qquest_target_troop_wealth", slot_party_type, 1),
						(party_slot_eq, ":qquest_target_troop_wealth", slot_town_horse_merchant, "$qquest_report_troop"),
						(assign, ":value", ":qquest_target_troop_wealth"),
					(else_try),
						(troop_slot_eq, "$qquest_report_troop", slot_troop_cur_center, 0),
						(troop_get_slot, ":qquest_target_troop_love_interest_3", "$qquest_report_troop", slot_troop_love_interest_3),
						(assign, ":value", ":qquest_target_troop_love_interest_3"),
					(try_end),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_30"),
					(is_between, "$qquest_report_troop", "trp_tt_lady_01_01", "trp_tt_lady_end"),
					(troop_get_slot, ":qquest_target_troop_love_interest_3", "$qquest_report_troop", slot_troop_betrothed),
					(assign, ":value", ":qquest_target_troop_love_interest_3"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_31"),
					(faction_get_slot, ":value", "$wm_player_fac", slot_faction_number_of_parties),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_32"),
					(faction_get_slot, ":value", "$wm_player_fac", slot_faction_state),
				(try_end),
				(this_or_next|party_slot_eq, ":value", slot_party_type, 1),
				(this_or_next|is_between, ":value", "p_tradeport1", "p_tradeport_end"),
				(is_between, ":value", "p_pyongyang", "p_place_end"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(assign, "$camera_focus_on", 1),
				(set_camera_follow_party, ":value"),
				(display_message, "str_ala_esc", 0x00ffff00),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 44),
				(mouse_get_position, 7),
				(set_fixed_point_multiplier, 1000),
				(position_get_x, ":position_x_7", 7),
				(position_get_y, ":position_y_7", 7),
				(assign, reg54, ":position_x_7"),
				(assign, reg55, ":position_y_7"),
				(display_message, "str_pst_xy_0"),
				(display_message, "str_pst_xy_x", 0x00ff0000),
				(display_message, "str_pst_xy_y", 0x00ffff00),
			(try_end)
		])
	]),

	("molda_credits", prsntf_read_only, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(assign, "$g_presentation_credits_obj_1", -1),
			(assign, "$g_presentation_credits_obj_2", -1),
			(assign, "$g_presentation_credits_obj_3", -1),
			(assign, "$g_presentation_credits_obj_4", -1),
			(assign, "$g_presentation_credits_obj_5", -1),
			(assign, "$g_presentation_credits_obj_6", -1),
			(assign, "$g_presentation_credits_obj_7", -1),
			(assign, "$g_presentation_credits_obj_8", -1),
			(assign, "$g_presentation_credits_obj_9", -1),
			(assign, "$g_presentation_credits_obj_10", -1),
			(assign, "$g_presentation_credits_obj_11", -1),
			(assign, "$g_presentation_credits_obj_12", -1),
			(assign, "$g_presentation_credits_obj_1_alpha", 0),
			(assign, "$g_presentation_credits_obj_2_alpha", 0),
			(assign, "$g_presentation_credits_obj_3_alpha", 0),
			(assign, "$g_presentation_credits_obj_4_alpha", 0),
			(assign, "$g_presentation_credits_obj_5_alpha", 0),
			(assign, "$g_presentation_credits_obj_6_alpha", 0),
			(assign, "$g_presentation_credits_obj_7_alpha", 0),
			(assign, "$g_presentation_credits_obj_8_alpha", 0),
			(assign, "$g_presentation_credits_obj_9_alpha", 0)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 1000000),
			(try_begin),
				(lt, "$g_presentation_credits_obj_1", 0),
				(str_store_string, 1, "str_mod_name_card"),
				(create_text_overlay, "$g_presentation_credits_obj_1", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_1", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_1", 0),
				(position_set_x, 1, 4000),
				(position_set_y, 1, 4000),
				(overlay_set_size, "$g_presentation_credits_obj_1", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_1", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_1", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 10000),
				(eq, "$g_presentation_credits_obj_1_alpha", 0),
				(assign, "$g_presentation_credits_obj_1_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_1", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 11500),
				(lt, "$g_presentation_credits_obj_2", 0),
				(str_store_string, 1, "str_main_screen_menu_line"),
				(create_text_overlay, "$g_presentation_credits_obj_2", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_2", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_2", 0),
				(position_set_x, 1, 2250),
				(position_set_y, 1, 2250),
				(overlay_set_size, "$g_presentation_credits_obj_2", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_2", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_2", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 21500),
				(eq, "$g_presentation_credits_obj_2_alpha", 0),
				(assign, "$g_presentation_credits_obj_2_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_2", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 23000),
				(lt, "$g_presentation_credits_obj_3", 0),
				(str_store_string, 1, "str_credits_3_adds"),
				(create_text_overlay, "$g_presentation_credits_obj_3", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_3", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_3", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_3", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_3", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_3", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 33000),
				(eq, "$g_presentation_credits_obj_3_alpha", 0),
				(assign, "$g_presentation_credits_obj_3_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_3", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 34500),
				(lt, "$g_presentation_credits_obj_4", 0),
				(str_store_string, 1, "str_credits_4_add"),
				(create_text_overlay, "$g_presentation_credits_obj_4", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_4", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_4", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_4", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_4", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_4", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 44500),
				(eq, "$g_presentation_credits_obj_4_alpha", 0),
				(assign, "$g_presentation_credits_obj_4_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_4", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 46000),
				(lt, "$g_presentation_credits_obj_5", 0),
				(str_store_string, 1, "str_credits_5_add"),
				(create_text_overlay, "$g_presentation_credits_obj_5", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_5", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_5", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_5", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_5", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_5", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 51000),
				(eq, "$g_presentation_credits_obj_5_alpha", 0),
				(assign, "$g_presentation_credits_obj_5_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_5", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 52500),
				(lt, "$g_presentation_credits_obj_6", 0),
				(str_store_string, 1, "str_credits_6_add"),
				(create_text_overlay, "$g_presentation_credits_obj_6", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_6", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_6", 0),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, "$g_presentation_credits_obj_6", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_6", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_6", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 67500),
				(eq, "$g_presentation_credits_obj_6_alpha", 0),
				(assign, "$g_presentation_credits_obj_6_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_6", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 69000),
				(lt, "$g_presentation_credits_obj_9", 0),
				(str_store_string, 1, "str_credits_10_add"),
				(create_text_overlay, "$g_presentation_credits_obj_9", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_9", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_9", 0),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, "$g_presentation_credits_obj_9", 1),
				(position_set_x, 1, 250),
				(position_set_y, 1, 485),
				(overlay_set_position, "$g_presentation_credits_obj_9", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_9", 1000, 255),
				(str_store_string, 1, "str_credits_11_add"),
				(create_text_overlay, "$g_presentation_credits_obj_10", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_10", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_10", 0),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, "$g_presentation_credits_obj_10", 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 470),
				(overlay_set_position, "$g_presentation_credits_obj_10", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_10", 1000, 255),
				(str_store_string, 1, "str_credits_12_add"),
				(create_text_overlay, "$g_presentation_credits_obj_11", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_11", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_11", 0),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, "$g_presentation_credits_obj_11", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 105),
				(overlay_set_position, "$g_presentation_credits_obj_11", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_11", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 79000),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("wm_item_trade", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_current_opened_item_details", -1),
			(create_in_game_button_overlay, "$wm_trade_exit", "str_done"),
			(overlay_set_color, "$wm_trade_exit", 16777215),
			(position_set_x, 1, 830),
			(position_set_y, 1, 15),
			(overlay_set_position, "$wm_trade_exit", 1),
			(party_get_slot, reg19, "p_main_party", slot_center_last_taken_by_troop),
			(create_text_overlay, reg1, "str_moneyr19", 16),
			(position_set_x, 1, 760),
			(position_set_y, 1, 90),
			(overlay_set_position, reg1, 1),
			(str_clear, 0),
			(create_text_overlay, reg1, 0, 8192),
			(position_set_x, 1, 50),
			(position_set_y, 1, 130),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 350),
			(position_set_y, 1, 560),
			(overlay_set_area_size, reg1, 1),
			(set_container_overlay, reg1),
			(assign, ":value", 0),
			(assign, ":value_2", 1840),
			(assign, ":value_3", 10),
			(try_for_range, ":unused", 0, 24),
				(try_for_range, ":unused_2", 0, 4),
					(try_begin),
						(create_image_button_overlay, reg1, "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
						(position_set_x, 1, 640),
						(position_set_y, 1, 640),
						(overlay_set_size, reg1, 1),
					(try_end),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg1, 1),
					(troop_set_slot, "trp_temp_array_a", ":value_3", reg1),
					(create_mesh_overlay, reg1, "mesh_mp_inventory_choose"),
					(position_set_x, 1, 640),
					(position_set_y, 1, 640),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg1, 1),
					(troop_get_inventory_slot, ":inventory_slot_town_1_merchant_value_3", "trp_town_1_merchant", ":value_3"),
					(try_begin),
						(gt, ":inventory_slot_town_1_merchant_value_3", -1),
						(create_mesh_overlay_with_item_id, reg1, ":inventory_slot_town_1_merchant_value_3"),
						(position_set_x, 1, 800),
						(position_set_y, 1, 800),
						(overlay_set_size, reg1, 1),
						(store_add, ":value_4", ":value", 40),
						(store_add, ":value_5", ":value_2", 40),
						(position_set_x, 1, ":value_4"),
						(position_set_y, 1, ":value_5"),
						(overlay_set_position, reg1, 1),
						(troop_set_slot, "trp_temp_array_b", ":value_3", reg1),
					(try_end),
					(val_add, ":value", 80),
					(val_add, ":value_3", 1),
				(try_end),
				(assign, ":value", 0),
				(val_sub, ":value_2", 80),
			(try_end),
			(set_container_overlay, -1),
			(str_clear, 0),
			(create_text_overlay, reg1, 0, 8192),
			(position_set_x, 1, 600),
			(position_set_y, 1, 130),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 350),
			(position_set_y, 1, 560),
			(overlay_set_area_size, reg1, 1),
			(set_container_overlay, reg1),
			(troop_get_inventory_capacity, ":inventory_capacity_player", "trp_player"),
			(store_add, ":value_6", ":inventory_capacity_player", 100),
			(assign, ":value", 0),
			(store_sub, ":value_7", ":inventory_capacity_player", 10),
			(store_div, ":value_8", ":value_7", 4),
			(store_mod, ":value_9", ":value_7", 4),
			(val_min, ":value_9", 1),
			(val_add, ":value_8", ":value_9"),
			(store_mul, ":value_2", ":value_8", 80),
			(val_sub, ":value_2", 80),
			(assign, ":value_3", 110),
			(try_for_range, ":unused", 0, ":value_8"),
				(try_for_range, ":unused_2", 0, 4),
					(lt, ":value_3", ":value_6"),
					(create_image_button_overlay, reg1, "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
					(position_set_x, 1, 640),
					(position_set_y, 1, 640),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg1, 1),
					(troop_set_slot, "trp_temp_array_a", ":value_3", reg1),
					(create_mesh_overlay, reg1, "mesh_mp_inventory_choose"),
					(position_set_x, 1, 640),
					(position_set_y, 1, 640),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg1, 1),
					(store_sub, ":value_10", ":value_3", 100),
					(troop_get_inventory_slot, ":inventory_slot_town_1_merchant_value_3", "trp_player", ":value_10"),
					(try_begin),
						(gt, ":inventory_slot_town_1_merchant_value_3", -1),
						(create_mesh_overlay_with_item_id, reg1, ":inventory_slot_town_1_merchant_value_3"),
						(position_set_x, 1, 800),
						(position_set_y, 1, 800),
						(overlay_set_size, reg1, 1),
						(store_add, ":value_4", ":value", 40),
						(store_add, ":value_5", ":value_2", 40),
						(position_set_x, 1, ":value_4"),
						(position_set_y, 1, ":value_5"),
						(overlay_set_position, reg1, 1),
						(troop_set_slot, "trp_temp_array_b", ":value_3", reg1),
					(try_end),
					(val_add, ":value", 80),
					(val_add, ":value_3", 1),
				(try_end),
				(assign, ":value", 0),
				(val_sub, ":value_2", 80),
			(try_end),
			(set_container_overlay, -1)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(troop_get_inventory_capacity, ":inventory_capacity_player", "trp_player"),
			(store_add, ":value", ":inventory_capacity_player", 100),
			(try_begin),
				(eq, ":trigger_param_2", 0),
				(try_begin),
					(eq, "$g_current_opened_item_details", -1),
					(close_item_details),
				(try_end),
				(try_for_range, ":localvariable", 10, ":value"),
					(troop_slot_eq, "trp_temp_array_a", ":localvariable", ":trigger_param_1"),
					(try_begin),
						(lt, ":localvariable", 110),
						(troop_get_inventory_slot, ":inventory_slot_town_1_merchant_localvariable", "trp_town_1_merchant", ":localvariable"),
						(try_begin),
							(gt, ":inventory_slot_town_1_merchant_localvariable", -1),
							(troop_get_slot, ":temp_array_b_localvariable", "trp_temp_array_b", ":localvariable"),
							(overlay_get_position, 0, ":temp_array_b_localvariable"),
							(show_item_details, ":inventory_slot_town_1_merchant_localvariable", 0, 0),
							(assign, "$g_current_opened_item_details", ":localvariable"),
						(try_end),
					(else_try),
						(store_sub, ":value_2", ":localvariable", 100),
						(troop_get_inventory_slot, ":inventory_slot_town_1_merchant_localvariable", "trp_player", ":value_2"),
						(try_begin),
							(gt, ":inventory_slot_town_1_merchant_localvariable", -1),
							(troop_get_slot, ":temp_array_b_localvariable", "trp_temp_array_b", ":localvariable"),
							(overlay_get_position, 0, ":temp_array_b_localvariable"),
							(troop_get_inventory_slot_modifier, ":inventory_slot_modifier_player_value_2", "trp_player", ":value_2"),
							(show_item_details_with_modifier, ":inventory_slot_town_1_merchant_localvariable", ":inventory_slot_modifier_player_value_2", 0, 0),
							(assign, "$g_current_opened_item_details", ":localvariable"),
						(try_end),
					(try_end),
				(try_end),
			(else_try),
				(try_for_range, ":localvariable", 10, ":value"),
					(troop_slot_eq, "trp_temp_array_a", ":localvariable", ":trigger_param_1"),
					(try_begin),
						(this_or_next|eq, "$g_current_opened_item_details", ":localvariable"),
						(eq, "$g_current_opened_item_details", -1),
						(close_item_details),
					(try_end),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$wm_trade_exit"),
				(presentation_set_duration, 0),
				(try_begin),
					(neg|party_slot_eq, "$g_encountered_party", slot_party_type, 7),
					(jump_to_menu, "mnu_wm_pst_map_return"),
				(try_end),
			(try_end),
			(troop_get_inventory_capacity, ":inventory_capacity_player", "trp_player"),
			(store_add, ":value", ":inventory_capacity_player", 100),
			(try_for_range, ":localvariable", 10, ":value"),
				(troop_slot_eq, "trp_temp_array_a", ":localvariable", ":trigger_param_1"),
				(try_begin),
					(try_begin),
						(lt, ":localvariable", 110),
						(troop_get_inventory_slot, ":inventory_slot_town_1_merchant_localvariable", "trp_town_1_merchant", ":localvariable"),
						(troop_get_inventory_slot_modifier, ":inventory_slot_modifier_town_1_merchant_localvariable", "trp_town_1_merchant", ":localvariable"),
						(try_begin),
							(gt, ":inventory_slot_town_1_merchant_localvariable", 0),
							(call_script, "script_item_stat_type_dive", ":inventory_slot_town_1_merchant_localvariable"),
							(assign, ":value_2", "$dive_itm_price"),
							(troop_get_slot, ":player_41", "trp_player", 41),
							(val_mul, ":player_41", 4),
							(store_sub, ":value_3", 100, ":player_41"),
							(val_mul, ":value_2", ":value_3"),
							(val_div, ":value_2", 100),
							(try_begin),
								(eq, "$r_player_class", 1),
								(val_mul, ":value_2", 90),
								(val_div, ":value_2", 100),
							(try_end),
							(call_script, "script_party_money_level_ge", "p_main_party", ":value_2"),
							(set_show_messages, 0),
							(assign, ":var_10", 0),
							(troop_get_inventory_capacity, ":inventory_capacity_player_2", "trp_player"),
							(try_for_range, ":localvariable_2", 0, ":inventory_capacity_player_2"),
								(troop_get_inventory_slot, ":inventory_slot_player_localvariable_2", "trp_player", ":localvariable_2"),
								(is_between, ":inventory_slot_player_localvariable_2", 92, 117),
								(troop_inventory_slot_get_item_amount, ":troop_inventory_slot_item_amount_player_localvariable_2", "trp_player", ":localvariable_2"),
								(val_add, ":troop_inventory_slot_item_amount_player_localvariable_2", 1),
								(val_add, ":var_10", ":troop_inventory_slot_item_amount_player_localvariable_2"),
							(try_end),
							(set_show_messages, 1),
							(try_begin),
								(neq, "$wm_mo_continue", 1),
								(display_message, "str_nomoney"),
							(else_try),
								(ge, ":var_10", 20),
								(is_between, ":inventory_slot_town_1_merchant_localvariable", 92, 117),
								(assign, reg8, ":var_10"),
								(display_message, "str_ginventoryfull"),
							(else_try),
								(store_free_inventory_capacity, ":free_inventory_capacity_player", "trp_player"),
								(le, ":free_inventory_capacity_player", 0),
								(display_message, "str_inventoryfull"),
							(else_try),
								(try_begin),
									(call_script, "script_wm_main_party_has_troop_sc", "trp_npc_21"),
									(eq, "$wm_comp_continue", 1),
									(val_mul, ":value_2", 90),
									(val_div, ":value_2", 100),
									(display_message, "str_heo_saeng_trade"),
								(else_try),
									(call_script, "script_wm_main_party_has_troop_sc", "trp_npc_23"),
									(eq, "$wm_comp_continue", 1),
									(val_mul, ":value_2", 90),
									(val_div, ":value_2", 100),
									(display_message, "str_al_vezas_trade"),
								(try_end),
								(assign, reg6, ":value_2"),
								(display_message, "str_buy_pricer6"),
								(call_script, "script_party_money_level_diff", "p_main_party", ":value_2", 34),
								(try_begin),
									(is_between, ":inventory_slot_town_1_merchant_localvariable", 92, 117),
									(party_get_slot, ":g_encountered_party_center_accumulated_rents", "$g_encountered_party", slot_center_accumulated_rents),
									(val_sub, ":g_encountered_party_center_accumulated_rents", 1),
									(party_set_slot, "$g_encountered_party", slot_center_accumulated_rents, ":g_encountered_party_center_accumulated_rents"),
								(try_end),
								(try_begin),
									(neg|is_between, ":inventory_slot_town_1_merchant_localvariable", 92, 117),
									(item_get_type, ":type_inventory_slot_town_1_merchant_localvariable", ":inventory_slot_town_1_merchant_localvariable"),
									(try_begin),
										(eq, ":type_inventory_slot_town_1_merchant_localvariable", 7),
										(store_random_in_range, ":random_in_range_0_3", 0, 3),
										(try_begin),
											(eq, ":random_in_range_0_3", 0),
											(assign, ":value_4", 1),
										(else_try),
											(eq, ":random_in_range_0_3", 1),
											(assign, ":value_4", 5),
										(else_try),
											(eq, ":random_in_range_0_3", 2),
											(assign, ":value_4", 25),
										(else_try),
											(assign, ":value_4", 27),
										(try_end),
									(else_try),
										(this_or_next|eq, ":type_inventory_slot_town_1_merchant_localvariable", 2),
										(this_or_next|eq, ":type_inventory_slot_town_1_merchant_localvariable", 3),
										(this_or_next|eq, ":type_inventory_slot_town_1_merchant_localvariable", 4),
										(this_or_next|eq, ":type_inventory_slot_town_1_merchant_localvariable", 8),
										(this_or_next|eq, ":type_inventory_slot_town_1_merchant_localvariable", 9),
										(this_or_next|eq, ":type_inventory_slot_town_1_merchant_localvariable", 10),
										(this_or_next|eq, ":type_inventory_slot_town_1_merchant_localvariable", 16),
										(eq, ":type_inventory_slot_town_1_merchant_localvariable", 17),
										(store_random_in_range, ":random_in_range_0_3", 0, 4),
										(try_begin),
											(eq, ":random_in_range_0_3", 0),
											(assign, ":value_4", 1),
										(else_try),
											(eq, ":random_in_range_0_3", 1),
											(assign, ":value_4", 3),
										(else_try),
											(eq, ":random_in_range_0_3", 2),
											(assign, ":value_4", 2),
										(else_try),
											(eq, ":random_in_range_0_3", 3),
											(assign, ":value_4", 4),
										(else_try),
											(eq, ":random_in_range_0_3", 4),
											(assign, ":value_4", 18),
										(else_try),
											(eq, ":random_in_range_0_3", 5),
											(assign, ":value_4", 13),
										(else_try),
											(eq, ":random_in_range_0_3", 6),
											(assign, ":value_4", 19),
										(else_try),
											(eq, ":random_in_range_0_3", 7),
											(assign, ":value_4", 14),
										(else_try),
											(assign, ":value_4", 17),
										(try_end),
									(else_try),
										(this_or_next|eq, ":type_inventory_slot_town_1_merchant_localvariable", 5),
										(this_or_next|eq, ":type_inventory_slot_town_1_merchant_localvariable", 6),
										(eq, ":type_inventory_slot_town_1_merchant_localvariable", 18),
										(store_random_in_range, ":random_in_range_0_3", 0, 1),
										(try_begin),
											(eq, ":random_in_range_0_3", 0),
											(assign, ":value_4", 3),
										(else_try),
											(assign, ":value_4", 42),
										(try_end),
									(else_try),
										(eq, ":type_inventory_slot_town_1_merchant_localvariable", 1),
										(store_random_in_range, ":random_in_range_0_3", 0, 2),
										(try_begin),
											(eq, ":random_in_range_0_3", 0),
											(assign, ":value_4", 30),
										(else_try),
											(eq, ":random_in_range_0_3", 1),
											(assign, ":value_4", 31),
										(else_try),
											(eq, ":random_in_range_0_3", 2),
											(assign, ":value_4", 32),
										(else_try),
											(eq, ":random_in_range_0_3", 3),
											(assign, ":value_4", 18),
										(else_try),
											(eq, ":random_in_range_0_3", 4),
											(assign, ":value_4", 35),
										(else_try),
											(assign, ":value_4", 36),
										(try_end),
									(else_try),
										(store_random_in_range, ":random_in_range_0_3", 0, 6),
										(try_begin),
											(eq, ":random_in_range_0_3", 0),
											(assign, ":value_4", 1),
										(else_try),
											(eq, ":random_in_range_0_3", 1),
											(assign, ":value_4", 21),
										(else_try),
											(eq, ":random_in_range_0_3", 2),
											(assign, ":value_4", 2),
										(else_try),
											(eq, ":random_in_range_0_3", 3),
											(assign, ":value_4", 22),
										(else_try),
											(eq, ":random_in_range_0_3", 4),
											(assign, ":value_4", 5),
										(else_try),
											(eq, ":random_in_range_0_3", 5),
											(assign, ":value_4", 7),
										(else_try),
											(eq, ":random_in_range_0_3", 6),
											(assign, ":value_4", 24),
										(else_try),
											(eq, ":random_in_range_0_3", 7),
											(assign, ":value_4", 25),
										(else_try),
											(eq, ":random_in_range_0_3", 8),
											(assign, ":value_4", 26),
										(else_try),
											(eq, ":random_in_range_0_3", 9),
											(assign, ":value_4", 27),
										(else_try),
											(assign, ":value_4", 29),
										(try_end),
									(try_end),
								(try_end),
								(assign, ":inventory_slot_modifier_town_1_merchant_localvariable", ":value_4"),
								(troop_set_inventory_slot, "trp_town_1_merchant", ":localvariable", -1),
								(set_show_messages, 0),
								(troop_add_item, "trp_player", ":inventory_slot_town_1_merchant_localvariable", ":inventory_slot_modifier_town_1_merchant_localvariable"),
								(set_show_messages, 1),
								(troop_set_slot, "trp_town_1_merchant", ":localvariable", 1),
								(start_presentation, "prsnt_wm_item_trade"),
							(try_end),
						(try_end),
					(else_try),
						(store_sub, ":value_5", ":localvariable", 100),
						(troop_get_inventory_slot, ":inventory_slot_town_1_merchant_localvariable", "trp_player", ":value_5"),
						(try_begin),
							(gt, ":inventory_slot_town_1_merchant_localvariable", 0),
							(call_script, "script_item_stat_type_dive", ":inventory_slot_town_1_merchant_localvariable"),
							(assign, ":value_2", "$dive_itm_price"),
							(try_begin),
								(store_free_inventory_capacity, ":free_inventory_capacity_player", "trp_town_1_merchant"),
								(le, ":free_inventory_capacity_player", 0),
							(else_try),
								(gt, "$dive_itm_type", 10),
								(call_script, "script_item_stat_type_dive", ":inventory_slot_town_1_merchant_localvariable"),
								(assign, ":value_2", "$dive_itm_sell"),
								(party_get_slot, ":g_encountered_party_center_accumulated_tariffs", "$g_encountered_party", slot_center_accumulated_tariffs),
								(val_mul, ":value_2", ":g_encountered_party_center_accumulated_tariffs"),
								(val_div, ":value_2", 100),
								(troop_get_slot, ":player_41", "trp_player", 41),
								(val_mul, ":player_41", 2),
								(store_add, ":value_3", 100, ":player_41"),
								(val_mul, ":value_2", ":value_3"),
								(val_div, ":value_2", 100),
								(try_begin),
									(call_script, "script_wm_main_party_has_troop_sc", "trp_npc_21"),
									(eq, "$wm_comp_continue", 1),
									(store_add, ":value_6", 10, 1),
									(val_mul, ":value_2", ":value_6"),
									(val_div, ":value_2", 10),
									(display_message, "str_heo_saeng_trade2"),
								(else_try),
									(call_script, "script_wm_main_party_has_troop_sc", "trp_npc_23"),
									(eq, "$wm_comp_continue", 1),
									(store_add, ":value_6", 10, 1),
									(val_mul, ":value_2", ":value_6"),
									(val_div, ":value_2", 10),
									(display_message, "str_al_vezas_trade2"),
								(try_end),
								(assign, reg6, ":value_2"),
								(display_message, "str_sell_pricer6"),
								(call_script, "script_party_money_level_diff", "p_main_party", ":value_2", 87),
								(troop_set_inventory_slot, "trp_player", ":value_5", -1),
								(try_begin),
									(party_slot_ge, "$g_encountered_party", 48, 40),
									(val_sub, ":g_encountered_party_center_accumulated_tariffs", 5),
									(party_set_slot, "$g_encountered_party", slot_center_accumulated_tariffs, ":g_encountered_party_center_accumulated_tariffs"),
								(try_end),
								(start_presentation, "prsnt_wm_item_trade"),
							(else_try),
								(val_div, ":value_2", 4),
								(assign, reg6, ":value_2"),
								(display_message, "str_sell_pricer6"),
								(call_script, "script_party_money_level_diff", "p_main_party", ":value_2", 87),
								(troop_set_inventory_slot, "trp_player", ":value_5", -1),
								(start_presentation, "prsnt_wm_item_trade"),
							(try_end),
						(try_end),
					(try_end),
				(try_end),
			(try_end)
		])
	]),

	("battle_tile_pst", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
	#####Terrain Detector Begin Range SP ALL.
	#####MUSICBOX
	(try_begin),
	(eq, "$additional_music", 1), #Obtained from Mod Options, affects mission templates, range: ALL SP Hostile music.
	(music_set_situation, 0x00200000),
	#(play_track, "track_silence", 1), #Stop module track.
	##(stop_all_sounds, 1), #Used to be value of 1
	(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
	(try_begin),
	(this_or_next|eq, ":current_terrain_main_party", 1),
	(this_or_next|eq, ":current_terrain_main_party", 2),
	(eq, ":current_terrain_main_party", 10),
	(store_random_in_range, ":random_steppe", 1, 6),
	(try_begin),
	(eq, ":random_steppe", 1),
	(play_track, "track_medm1", 1),
	(else_try),
	(eq, ":random_steppe", 2),
	(play_track, "track_medm2", 1),
	(else_try),
	(eq, ":random_steppe", 3),
	(play_track, "track_medm3", 1),
	(else_try),
	(eq, ":random_steppe", 4),
	(play_track, "track_medm4", 1),
	(else_try),
	(eq, ":random_steppe", 5),
	(play_track, "track_medm5", 1),
	(try_end),
	
	(else_try),
	(this_or_next|eq, ":current_terrain_main_party", 3),
	(this_or_next|eq, ":current_terrain_main_party", 11),
	(eq, ":current_terrain_main_party", 9),
	(store_random_in_range, ":random_euro", 1, 12),
	(try_begin),
		(eq, ":random_euro", 1),
	(play_track, "track_eurottt1", 1),
	(else_try),
		(eq, ":random_euro", 2),
	(play_track, "track_eurottt2", 1),
	(else_try),
		(eq, ":random_euro", 3),
	(play_track, "track_eurottt3", 1),
	(else_try),
		(eq, ":random_euro", 4),
	(play_track, "track_eurottt4", 1),
	(else_try),
	(eq, ":random_euro", 5),
	(play_track, "track_eurottt5", 1),
	(else_try),
		(eq, ":random_euro", 6),
	(play_track, "track_eurottt6", 1),
	(else_try),
		(eq, ":random_euro", 7),
	(play_track, "track_eurottt7", 1),
	(else_try),
		(eq, ":random_euro", 8),
	(play_track, "track_eurottt8", 1),
	(else_try),
	(eq, ":random_euro", 9),
	(play_track, "track_eurottt9", 1),
	(else_try),
		(eq, ":random_euro", 10),
	(play_track, "track_eurottt10", 1),
	(else_try),
		(eq, ":random_euro", 11),
	(play_track, "track_eurottt11", 1),
	(try_end),
	(else_try),
	(this_or_next|eq, ":current_terrain_main_party", 4),
	(this_or_next|eq, ":current_terrain_main_party", 12),
	(eq, ":current_terrain_main_party", 7), #No idea
	(store_random_in_range, ":random_euro", 1, 12),
	(try_begin),
		(eq, ":random_euro", 1),
	(play_track, "track_eurottt1", 1),
	(else_try),
		(eq, ":random_euro", 2),
	(play_track, "track_eurottt2", 1),
	(else_try),
		(eq, ":random_euro", 3),
	(play_track, "track_eurottt3", 1),
	(else_try),
		(eq, ":random_euro", 4),
	(play_track, "track_eurottt4", 1),
	(else_try),
	(eq, ":random_euro", 5),
	(play_track, "track_eurottt5", 1),
	(else_try),
		(eq, ":random_euro", 6),
	(play_track, "track_eurottt6", 1),
	(else_try),
		(eq, ":random_euro", 7),
	(play_track, "track_eurottt7", 1),
	(else_try),
		(eq, ":random_euro", 8),
	(play_track, "track_eurottt8", 1),
	(else_try),
	(eq, ":random_euro", 9),
	(play_track, "track_eurottt9", 1),
	(else_try),
		(eq, ":random_euro", 10),
	(play_track, "track_eurottt10", 1),
	(else_try),
		(eq, ":random_euro", 11),
	(play_track, "track_eurottt11", 1),
	(try_end),
	(else_try),
	(this_or_next|eq, ":current_terrain_main_party", 5),
	(eq, ":current_terrain_main_party", 13),
	(store_random_in_range, ":random_arab", 1, 7),
	(try_begin),
	(eq, ":random_arab", 1),
	(play_track, "track_arabt1", 1),
	(else_try),
		(eq, ":random_arab", 2),
	(play_track, "track_arabt2", 1),
	(else_try),
		(eq, ":random_arab", 3),
	(play_track, "track_arabt3", 1),
	(else_try),
		(eq, ":random_arab", 4),
	(play_track, "track_arabt4", 1),
	(else_try),
		(eq, ":random_arab", 5),
	(play_track, "track_arabt5", 1),
	(else_try),
		(eq, ":random_arab", 6),
	(play_track, "track_arabt6", 1),
	(try_end),
	(try_end),
	(try_end),
	
	#####Terrain Detector End Range SP ALL.
	#Musicbox
	#(display_message, "@Debug: Still reading code this should only show during a hostile encounter, confirm!"),
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(position_set_x, 3, 1000),
			(position_set_y, 3, 1000),
			(position_set_x, 4, 800),
			(position_set_y, 4, 800),
			(position_set_x, 5, 8250),
			(position_set_y, 5, 1750),
			(position_set_x, 6, 1000),
			(position_set_y, 6, 1000),
			(position_set_x, 7, 8250),
			(position_set_y, 7, 1250),
			(position_set_x, 8, 900),
			(position_set_y, 8, 900),
			(assign, ":value", 175),
			(assign, ":value_2", 180),
			(assign, ":value_3", 21),
			(assign, reg8, "$player_army_size"),
			(create_text_overlay, reg0, "str_bt_stat_army", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(assign, reg8, "$player_moral_level"),
			(create_text_overlay, reg0, "str_bt_stat_morale", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(assign, reg8, "$player_train_level"),
			(create_text_overlay, reg0, "str_bt_stat_train", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(troop_get_slot, reg8, "trp_player", slot_troop_spawned_before),
			(create_text_overlay, reg0, "str_bt_stat_tactics", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(troop_get_slot, reg8, "trp_player", slot_troop_last_comment_slot),
			(create_text_overlay, reg0, "str_bt_stat_leadership", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(troop_get_slot, reg8, "trp_player", slot_troop_spouse),
			(create_text_overlay, reg0, "str_bt_stat_strategy", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(troop_get_slot, reg8, "trp_player", slot_troop_father),
			(create_text_overlay, reg0, "str_bt_stat_naval", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(assign, ":value", 823),
			(assign, ":value_2", 180),
			(assign, reg8, "$enemy_army_size"),
			(create_text_overlay, reg0, "str_bt_stat_army", 8),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(assign, reg8, "$enemy_moral_level"),
			(create_text_overlay, reg0, "str_bt_stat_morale", 8),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(assign, reg8, "$enemy_train_level"),
			(create_text_overlay, reg0, "str_bt_stat_train", 8),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(troop_get_slot, reg8, "$enemy_commander", slot_troop_spawned_before),
			(create_text_overlay, reg0, "str_bt_stat_tactics", 8),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(troop_get_slot, reg8, "$enemy_commander", slot_troop_last_comment_slot),
			(create_text_overlay, reg0, "str_bt_stat_leadership", 8),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(troop_get_slot, reg8, "$enemy_commander", slot_troop_spouse),
			(create_text_overlay, reg0, "str_bt_stat_strategy", 8),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":value_3"),
			(troop_get_slot, reg8, "$enemy_commander", slot_troop_father),
			(create_text_overlay, reg0, "str_bt_stat_naval", 8),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(assign, ":value", 4),
			(assign, ":value_2", 665),
			(faction_get_color, ":color_l_wm_player_fac", "$wm_player_fac"),
			(str_store_troop_name, 3, "trp_player"),
			(create_text_overlay, reg0, "str_name_and_tactics", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, ":color_l_wm_player_fac"),
			(overlay_set_alpha, reg0, 191),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 5),
			(assign, ":value_2", 630),
			(assign, ":value_3", 22),
			(try_begin),
				(neq, "$battle_tile_type", 51),
				(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
				(try_for_range, ":localvariable", 0, ":num_companion_stacks_main_party"),
					(party_stack_get_troop_id, ":party_stack_troop_id_main_party_localvariable", "p_main_party", ":localvariable"),
					(gt, ":party_stack_troop_id_main_party_localvariable", "trp_army_size_troop"),
					(neg|troop_is_hero, ":party_stack_troop_id_main_party_localvariable"),
					(str_store_troop_name, 8, ":party_stack_troop_id_main_party_localvariable"),
					(create_text_overlay, reg0, "str_glob_s8"),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 4),
					(val_sub, ":value_2", ":value_3"),
				(try_end),
			(else_try),
				(eq, "$battle_tile_type", 51),
				(call_script, "script_wm_ship_count", "p_main_party", "$player_army_size"),
				(assign, ":var_8", "$temp_num_01"),
				(val_add, ":var_8", 1),
				(assign, reg8, ":var_8"),
				(create_text_overlay, reg0, "str_our_battleshipr"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(val_sub, ":value_2", ":value_3"),
				(store_sub, ":value_4", "trp_ship_00", 1400),
				(store_add, ":value_5", "$m_ship_type_1", ":value_4"),
				(str_store_troop_name, 8, ":value_5"),
				(create_text_overlay, reg0, "str_glob_s8"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(val_sub, ":value_2", ":value_3"),
				(store_add, ":value_5", "$m_ship_type_2", ":value_4"),
				(str_store_troop_name, 8, ":value_5"),
				(create_text_overlay, reg0, "str_glob_s8"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(val_sub, ":value_2", ":value_3"),
				(store_add, ":value_5", "$m_ship_type_3", ":value_4"),
				(str_store_troop_name, 8, ":value_5"),
				(create_text_overlay, reg0, "str_glob_s8"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(val_sub, ":value_2", ":value_3"),
				(store_add, ":value_5", "$m_ship_type_4", ":value_4"),
				(str_store_troop_name, 8, ":value_5"),
				(create_text_overlay, reg0, "str_glob_s8"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(val_sub, ":value_2", ":value_3"),
				(store_add, ":value_5", "$m_ship_type_5", ":value_4"),
				(str_store_troop_name, 8, ":value_5"),
				(create_text_overlay, reg0, "str_glob_s8"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(val_sub, ":value_2", ":value_3"),
			(try_end),
			(val_sub, ":value_2", ":value_3"),
			(val_sub, ":value_2", ":value_3"),
			(assign, ":value_6", 0),
			(store_add, ":value_7", 42, 1),
			(try_for_range, ":localvariable_2", 30, ":value_7"),
				(party_get_slot, ":main_party_localvariable_2", "p_main_party", ":localvariable_2"),
				(try_begin),
					(ge, ":main_party_localvariable_2", 100),
					(assign, reg8, ":main_party_localvariable_2"),
					(store_add, ":value_8", "str_bt_equip_1", ":value_6"),
					(create_text_overlay, reg0, ":value_8"),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 4),
					(val_sub, ":value_2", ":value_3"),
				(try_end),
				(val_add, ":value_6", 1),
			(try_end),
			(assign, ":value", 827),
			(assign, ":value_2", 665),
			(str_store_troop_name, 3, "$enemy_commander"),
			(store_faction_of_party, ":faction_of_party_wm_target_party", "$wm_target_party"),
			(faction_get_color, ":color_faction_of_party_wm_target_party", ":faction_of_party_wm_target_party"),
			(create_text_overlay, reg0, "str_name_and_tactics", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, ":color_faction_of_party_wm_target_party"),
			(overlay_set_alpha, reg0, 191),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 5),
			(assign, ":value_2", 630),
			(assign, ":value_3", 22),
			(try_begin),
				(neq, "$battle_tile_type", 51),
				(party_clear, "p_enemy_casualties"),
				(call_script, "script_wm_troop_type_depend_train", "$wm_target_party", 100),
				(store_random_in_range, ":random_in_range_5_16", 5, 16),
				(party_add_members, "p_enemy_casualties", "$temp_party_troop_03", ":random_in_range_5_16"),
				(store_sub, ":value_9", 20, ":random_in_range_5_16"),
				(party_add_members, "p_enemy_casualties", "$temp_party_troop_05", ":value_9"),
				(store_random_in_range, ":random_in_range_5_16", 5, 16),
				(party_add_members, "p_enemy_casualties", "$temp_party_troop_02", ":random_in_range_5_16"),
				(store_sub, ":value_9", 20, ":random_in_range_5_16"),
				(party_add_members, "p_enemy_casualties", "$temp_party_troop_04", ":value_9"),
				(store_random_in_range, ":random_in_range_5_16", 5, 16),
				(party_add_members, "p_enemy_casualties", "$temp_party_troop_06", ":random_in_range_5_16"),
				(store_sub, ":value_9", 20, ":random_in_range_5_16"),
				(party_add_members, "p_enemy_casualties", "$temp_party_troop_09", ":value_9"),
				(store_random_in_range, ":random_in_range_5_16", 5, 16),
				(party_add_members, "p_enemy_casualties", "$temp_party_troop_07", ":random_in_range_5_16"),
				(store_sub, ":value_9", 20, ":random_in_range_5_16"),
				(party_add_members, "p_enemy_casualties", "$temp_party_troop_08", ":value_9"),
				(party_add_members, "p_enemy_casualties", "$temp_party_troop_10", 10),
				(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_enemy_casualties"),
				(try_for_range, ":localvariable", 0, ":num_companion_stacks_main_party"),
					(party_stack_get_troop_id, ":party_stack_troop_id_main_party_localvariable", "p_enemy_casualties", ":localvariable"),
					(gt, ":party_stack_troop_id_main_party_localvariable", "trp_army_size_troop"),
					(neg|troop_is_hero, ":party_stack_troop_id_main_party_localvariable"),
					(str_store_troop_name, 8, ":party_stack_troop_id_main_party_localvariable"),
					(create_text_overlay, reg0, "str_glob_s8"),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 4),
					(val_sub, ":value_2", ":value_3"),
				(try_end),
			(else_try),
				(eq, "$battle_tile_type", 51),
				(call_script, "script_wm_ship_count", "$wm_target_party", "$enemy_army_size"),
				(assign, ":var_20", "$temp_num_01"),
				(val_add, ":var_20", 1),
				(assign, reg8, ":var_20"),
				(create_text_overlay, reg0, "str_enemy_battleshipr"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 4),
				(val_sub, ":value_2", ":value_3"),
				(try_for_range, ":unused", 0, 5),
					(call_script, "script_molda_ship_culture_sett", "$wm_target_party"),
					(assign, ":value_5", reg23),
					(str_store_troop_name, 8, ":value_5"),
					(create_text_overlay, reg0, "str_glob_s8"),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 4),
					(val_sub, ":value_2", ":value_3"),
				(try_end),
			(try_end),
			(val_sub, ":value_2", ":value_3"),
			(val_sub, ":value_2", ":value_3"),
			(assign, ":value_6", 0),
			(store_add, ":value_7", 42, 1),
			(try_for_range, ":localvariable_2", 30, ":value_7"),
				(party_get_slot, ":main_party_localvariable_2", "$wm_target_party", ":localvariable_2"),
				(try_begin),
					(ge, ":main_party_localvariable_2", 100),
					(assign, reg8, ":main_party_localvariable_2"),
					(store_add, ":value_8", "str_bt_equip_1", ":value_6"),
					(create_text_overlay, reg0, ":value_8"),
					(position_set_x, 1, ":value"),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 4),
					(val_sub, ":value_2", ":value_3"),
				(try_end),
				(val_add, ":value_6", 1),
			(try_end),
			(assign, ":value", 502),
			(assign, ":value_2", 700),
			(try_begin),
				(neq, "$low_encounter_battle", 1),
				(neq, "$battle_type_select_pre", 0),
				(neq, "$player_cant_fight", 1),
				(eq, "$battle_tile_type", 0),
				(eq, "$bt_terrain_strategy_state", 0),
				(store_add, ":value_8", "$battle_type_select_pre", "str_bt_st_sideatt"),
				(val_sub, ":value_8", 1),
				(str_store_string, 8, ":value_8"),
				(try_begin),
					(eq, "$battle_type_select_pre", 1),
					(store_mul, ":value_10", "$player_tactics_skill", 2),
				(else_try),
					(eq, "$battle_type_select_pre", 2),
					(store_mul, ":value_10", "$player_tactics_skill", 2),
				(else_try),
					(eq, "$battle_type_select_pre", 3),
					(store_mul, ":value_10", "$player_tactics_skill", 3),
					(val_add, ":value_10", 15),
				(else_try),
					(eq, "$battle_type_select_pre", 4),
					(store_mul, ":value_10", "$player_tactics_skill", 2),
					(val_add, ":value_10", 5),
				(else_try),
					(eq, "$battle_type_select_pre", 5),
					(store_mul, ":value_10", "$player_tactics_skill", 1),
					(val_add, ":value_10", 5),
				(else_try),
					(eq, "$battle_type_select_pre", 6),
					(store_mul, ":value_10", "$player_tactics_skill", 1),
					(val_add, ":value_10", 5),
				(else_try),
					(eq, "$battle_type_select_pre", 7),
					(store_mul, ":value_10", "$player_tactics_skill", 2),
					(val_add, ":value_10", 5),
				(else_try),
					(eq, "$battle_type_select_pre", 8),
					(store_mul, ":value_10", "$player_tactics_skill", 2),
					(val_add, ":value_10", 5),
				(try_end),
				(assign, reg8, ":value_10"),
				(create_in_game_button_overlay, "$battle_tile_tactics_apply", "str_s8reg8per"),
			(else_try),
				(create_text_overlay, "$battle_tile_tactics_apply", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$battle_tile_tactics_apply", 1),
			(overlay_set_color, "$battle_tile_tactics_apply", 16777215),
			(assign, ":value", 502),
			(assign, ":value_2", 650),
			(store_add, ":value_8", "$glob_weather", "str_weather_clean"),
			(create_in_game_button_overlay, "$battle_tile_weather", ":value_8"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$battle_tile_weather", 1),
			(try_begin),
				(eq, "$glob_weather", 2),
				(overlay_set_color, "$battle_tile_weather", 47871),
			(else_try),
				(eq, "$glob_weather", 1),
				(overlay_set_color, "$battle_tile_weather", 16711680),
			(else_try),
				(overlay_set_color, "$battle_tile_weather", 16776960),
			(try_end),
			(assign, ":value", 302),
			(assign, ":value_2", 700),
			(try_begin),
				(neq, "$low_encounter_battle", 1),
				(neq, "$player_cant_fight", 1),
				(eq, "$battle_tile_type", 0),
				(eq, "$bt_terrain_strategy_state", 0),
				(create_in_game_button_overlay, "$battle_tile_tactics_pre", "str_prev_butt"),
			(else_try),
				(create_text_overlay, "$battle_tile_tactics_pre", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$battle_tile_tactics_pre", 1),
			(overlay_set_color, "$battle_tile_tactics_pre", 16777215),
			(assign, ":value", 702),
			(assign, ":value_2", 700),
			(try_begin),
				(neq, "$low_encounter_battle", 1),
				(neq, "$player_cant_fight", 1),
				(eq, "$battle_tile_type", 0),
				(eq, "$bt_terrain_strategy_state", 0),
				(create_in_game_button_overlay, "$battle_tile_tactics_next", "str_next_butt"),
			(else_try),
				(create_text_overlay, "$battle_tile_tactics_next", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$battle_tile_tactics_next", 1),
			(overlay_set_color, "$battle_tile_tactics_next", 16777215),
			(assign, ":value", 930),
			(assign, ":value_2", 165),
			(assign, ":value_3", 40),
			(try_begin),
				(neq, "$low_encounter_battle", 1),
				(neq, "$player_cant_fight", 1),
				(lt, "$battle_tile_type", 100),
				(eq, "$bt_st_confuse", 1),
				(eq, "$bt_terrain_strategy_state", 0),
				(neq, "$battle_tile_type", 51),
				(store_mul, ":value_10", "$player_strategy_skill", 2),
				(val_add, ":value_10", 10),
				(assign, reg8, ":value_10"),
				(create_in_game_button_overlay, "$battle_tile_confuse", "str_confuseper"),
			(else_try),
				(create_text_overlay, "$battle_tile_confuse", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$battle_tile_confuse", 1),
			(overlay_set_color, "$battle_tile_confuse", 15952127),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(neq, "$low_encounter_battle", 1),
				(neq, "$player_cant_fight", 1),
				(lt, "$battle_tile_type", 100),
				(eq, "$bt_st_blocking_supply", 1),
				(eq, "$bt_terrain_strategy_state", 0),
				(neq, "$battle_tile_type", 51),
				(store_mul, ":value_10", "$player_strategy_skill", 3),
				(val_add, ":value_10", 10),
				(assign, reg8, ":value_10"),
				(create_in_game_button_overlay, "$battle_tile_blocking_supply", "str_blocking_supply_per"),
			(else_try),
				(create_text_overlay, "$battle_tile_blocking_supply", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$battle_tile_blocking_supply", 1),
			(overlay_set_color, "$battle_tile_blocking_supply", 15952127),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(neq, "$player_cant_fight", 1),
				(eq, "$bt_st_opengate", 1),
				(eq, "$battle_tile_type", 101),
				(eq, "$succed_siege_strategy", 0),
				(store_mul, ":value_10", "$player_strategy_skill", 1),
				(val_add, ":value_10", 5),
				(assign, reg8, ":value_10"),
				(create_in_game_button_overlay, "$battle_tile_opengate", "str_open_gateper"),
			(else_try),
				(create_text_overlay, "$battle_tile_opengate", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$battle_tile_opengate", 1),
			(overlay_set_color, "$battle_tile_opengate", 15952127),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(neq, "$player_cant_fight", 1),
				(eq, "$bt_st_infiltration", 1),
				(eq, "$battle_tile_type", 101),
				(eq, "$succed_siege_strategy", 0),
				(store_mul, ":value_10", "$player_strategy_skill", 1),
				(val_add, ":value_10", 5),
				(assign, reg8, ":value_10"),
				(create_in_game_button_overlay, "$battle_tile_infiltration", "str_infiltration_per"),
			(else_try),
				(create_text_overlay, "$battle_tile_infiltration", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$battle_tile_infiltration", 1),
			(overlay_set_color, "$battle_tile_infiltration", 15952127),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(neq, "$player_cant_fight", 1),
				(call_script, "script_wm_main_party_has_troop_sc", "trp_npc_19"),
				(eq, "$wm_comp_continue", 1),
				(this_or_next|eq, "$battle_tile_type", 105),
				(this_or_next|eq, "$battle_tile_type", 104),
				(this_or_next|eq, "$battle_tile_type", 103),
				(this_or_next|eq, "$battle_tile_type", 102),
				(eq, "$battle_tile_type", 101),
				(eq, "$succed_siege_strategy", 0),
				(assign, ":value_10", 50),
				(assign, reg8, ":value_10"),
				(create_in_game_button_overlay, "$battle_tile_archimedes", "str_archimedesper"),
			(else_try),
				(create_text_overlay, "$battle_tile_archimedes", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$battle_tile_archimedes", 1),
			(overlay_set_color, "$battle_tile_archimedes", 16776960),
			(assign, ":value", 71),
			(assign, ":value_2", 165),
			(assign, ":value_3", 40),
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(try_begin),
				(neq, "$low_encounter_battle", 1),
				(neq, "$player_cant_fight", 1),
				(lt, "$battle_tile_type", 100),
				(neq, "$battle_tile_type", 51),
				(eq, "$bt_terrain_strategy_state", 0),
				(store_mul, ":value_10", "$player_strategy_skill", 1),
				(val_add, ":value_10", 5),
				(assign, reg8, ":value_10"),
				(create_in_game_button_overlay, "$button_strategy_1", "str_falling_rock_per"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
			(else_try),
				(create_text_overlay, "$button_strategy_1", "str_empty_string"),
			(try_end),
			(overlay_set_position, "$button_strategy_1", 1),
			(overlay_set_color, "$button_strategy_1", 15952127),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(neq, "$low_encounter_battle", 1),
				(neq, ":current_terrain_main_party", 5),
				(neq, "$player_cant_fight", 1),
				(lt, "$battle_tile_type", 100),
				(neq, "$battle_tile_type", 51),
				(eq, "$bt_terrain_strategy_state", 0),
				(store_mul, ":value_10", "$player_strategy_skill", 1),
				(val_add, ":value_10", 5),
				(try_begin),
					(eq, "$glob_weather", 2),
					(val_add, ":value_10", 5),
				(try_end),
				(assign, reg8, ":value_10"),
				(create_in_game_button_overlay, "$button_strategy_2", "str_submergeper"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
			(else_try),
				(create_text_overlay, "$button_strategy_2", "str_empty_string"),
			(try_end),
			(overlay_set_position, "$button_strategy_2", 1),
			(overlay_set_color, "$button_strategy_2", 15952127),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(neq, "$low_encounter_battle", 1),
				(neq, ":current_terrain_main_party", 4),
				(neq, ":current_terrain_main_party", 5),
				(neq, "$player_cant_fight", 1),
				(lt, "$battle_tile_type", 100),
				(neq, "$battle_tile_type", 51),
				(eq, "$bt_terrain_strategy_state", 0),
				(store_mul, ":value_10", "$player_strategy_skill", 1),
				(val_add, ":value_10", 5),
				(try_begin),
					(eq, "$glob_weather", 2),
					(val_sub, ":value_10", 5),
				(try_end),
				(try_begin),
					(eq, "$glob_weather", 1),
					(val_add, ":value_10", 5),
				(try_end),
				(assign, reg8, ":value_10"),
				(create_in_game_button_overlay, "$button_strategy_3", "str_fireworkper"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
			(else_try),
				(create_text_overlay, "$button_strategy_3", "str_empty_string"),
			(try_end),
			(overlay_set_position, "$button_strategy_3", 1),
			(overlay_set_color, "$button_strategy_3", 15952127),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(neq, "$low_encounter_battle", 1),
				(neq, "$player_cant_fight", 1),
				(lt, "$battle_tile_type", 100),
				(neq, "$battle_tile_type", 51),
				(eq, "$bt_terrain_strategy_state", 0),
				(store_mul, ":value_10", "$player_strategy_skill", 1),
				(val_add, ":value_10", 5),
				(assign, reg8, ":value_10"),
				(create_in_game_button_overlay, "$button_strategy_4", "str_lureper"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
			(else_try),
				(create_text_overlay, "$button_strategy_4", "str_empty_string"),
			(try_end),
			(overlay_set_position, "$button_strategy_4", 1),
			(overlay_set_color, "$button_strategy_4", 15952127),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(neq, "$low_encounter_battle", 1),
				(neq, ":current_terrain_main_party", 5),
				(neq, "$player_cant_fight", 1),
				(lt, "$battle_tile_type", 100),
				(neq, "$battle_tile_type", 51),
				(eq, "$bt_terrain_strategy_state", 0),
				(store_mul, ":value_10", "$player_strategy_skill", 1),
				(try_begin),
					(is_currently_night),
					(val_add, ":value_10", 10),
				(try_end),
				(assign, reg8, ":value_10"),
				(create_in_game_button_overlay, "$button_strategy_5", "str_ambushper"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
			(else_try),
				(create_text_overlay, "$button_strategy_5", "str_empty_string"),
			(try_end),
			(overlay_set_position, "$button_strategy_5", 1),
			(overlay_set_color, "$button_strategy_5", 15952127),
			(try_begin),
				(is_between, "$enemy_commander", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(eq, "$succed_siege_strategy", 0),
				(eq, "$bt_terrain_strategy_state", 0),
				(neq, "$surrender_yes_or_no", 1),
				(neq, "$withdawal_yes_or_no", 1),
				(neq, "$ai_suggest_duel_yes_or_no", 1),
				(eq, "$wm_try_duel", 0),
				(create_in_game_button_overlay, "$battle_tile_duel", "str_bt_duel_butt"),
			(else_try),
				(create_text_overlay, "$battle_tile_duel", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 402),
			(position_set_y, 1, 145),
			(overlay_set_position, "$battle_tile_duel", 1),
			(overlay_set_color, "$battle_tile_duel", 16777215),
			(try_begin),
				(neq, "$low_encounter_battle", 1),
				(neq, "$surrender_yes_or_no", 1),
				(neq, "$withdawal_yes_or_no", 1),
				(neq, "$ai_suggest_duel_yes_or_no", 1),
				(neq, "$battle_tile_type", 51),
				(lt, "$battle_tile_type", 100),
				(assign, reg8, "$bt_scale_mult"),
				(create_in_game_button_overlay, "$battle_tile_scale", "str_bt_scale2"),
			(else_try),
				(neq, "$low_encounter_battle", 1),
				(neq, "$surrender_yes_or_no", 1),
				(neq, "$withdawal_yes_or_no", 1),
				(neq, "$ai_suggest_duel_yes_or_no", 1),
				(neq, "$battle_tile_type", 51),
				(store_mul, reg8, "$bt_army_scale", 2),
				(create_in_game_button_overlay, "$battle_tile_scale", "str_bt_scale"),
			(else_try),
				(create_text_overlay, "$battle_tile_scale", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 602),
			(position_set_y, 1, 145),
			(overlay_set_position, "$battle_tile_scale", 1),
			(overlay_set_color, "$battle_tile_scale", 16777215),
			(try_begin),
				(neq, "$surrender_yes_or_no", 1),
				(neq, "$withdawal_yes_or_no", 1),
				(neq, "$ai_suggest_duel_yes_or_no", 1),
				(create_in_game_button_overlay, "$battle_tile_surrender", "str_bt_surrender"),
			(else_try),
				(create_text_overlay, "$battle_tile_surrender", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 402),
			(position_set_y, 1, 85),
			(overlay_set_position, "$battle_tile_surrender", 1),
			(overlay_set_color, "$battle_tile_surrender", 16777215),
			(try_begin),
				(eq, "$succed_siege_strategy", 0),
				(eq, "$bt_terrain_strategy_state", 0),
				(eq, "$bt_cant_withdrawal", 0),
				(neq, "$surrender_yes_or_no", 1),
				(neq, "$withdawal_yes_or_no", 1),
				(neq, "$ai_suggest_duel_yes_or_no", 1),
				(eq, "$player_is_attack", 1),
				(assign, "$is_escape", 0),
				(create_in_game_button_overlay, "$battle_tile_withdrawal", "str_bt_withdrawal"),
			(else_try),
				(eq, "$succed_siege_strategy", 0),
				(eq, "$bt_terrain_strategy_state", 0),
				(eq, "$bt_cant_withdrawal", 0),
				(neq, "$surrender_yes_or_no", 1),
				(neq, "$withdawal_yes_or_no", 1),
				(neq, "$ai_suggest_duel_yes_or_no", 1),
				(eq, "$player_is_attack", 0),
				(eq, "$is_siege_defence", 0),
				(assign, "$is_escape", 1),
				(create_in_game_button_overlay, "$battle_tile_withdrawal", "str_bt_escape"),
			(else_try),
				(create_text_overlay, "$battle_tile_withdrawal", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 602),
			(position_set_y, 1, 85),
			(overlay_set_position, "$battle_tile_withdrawal", 1),
			(overlay_set_color, "$battle_tile_withdrawal", 16777215),
			(try_begin),
				(eq, "$surrender_yes_or_no", 1),
				(create_text_overlay, reg0, "str_bt_ys_text_surrender", 16),
			(else_try),
				(eq, "$withdawal_yes_or_no", 1),
				(create_text_overlay, reg0, "str_bt_ys_text_withdrawal", 16),
			(else_try),
				(eq, "$ai_suggest_duel_yes_or_no", 1),
				(create_text_overlay, reg0, "str_bt_ys_text_duel", 16),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(position_set_x, 1, 500),
			(position_set_y, 1, 140),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1300),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(this_or_next|eq, "$surrender_yes_or_no", 1),
				(this_or_next|eq, "$withdawal_yes_or_no", 1),
				(eq, "$ai_suggest_duel_yes_or_no", 1),
				(create_button_overlay, "$battle_tile_yess", "str_bt_accept", 16),
			(else_try),
				(create_text_overlay, "$battle_tile_yess", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 460),
			(position_set_y, 1, 100),
			(overlay_set_position, "$battle_tile_yess", 1),
			(position_set_x, 1, 1100),
			(position_set_y, 1, 1100),
			(overlay_set_size, "$battle_tile_yess", 1),
			(try_begin),
				(this_or_next|eq, "$surrender_yes_or_no", 1),
				(this_or_next|eq, "$withdawal_yes_or_no", 1),
				(eq, "$ai_suggest_duel_yes_or_no", 1),
				(create_button_overlay, "$battle_tile_noo", "str_bt_cancel", 16),
			(else_try),
				(create_text_overlay, "$battle_tile_noo", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 544),
			(position_set_y, 1, 100),
			(overlay_set_position, "$battle_tile_noo", 1),
			(position_set_x, 1, 1100),
			(position_set_y, 1, 1100),
			(overlay_set_size, "$battle_tile_noo", 1),
			(try_begin),
				(neq, "$player_cant_fight", 1),
				(lt, "$battle_tile_type", 100),
				(neq, "$battle_tile_type", 51),
				(create_in_game_button_overlay, "$battle_tile_start", "str_bt_start", 16),
			(else_try),
				(create_text_overlay, "$battle_tile_start", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 500),
			(position_set_y, 1, 208),
			(overlay_set_position, "$battle_tile_start", 1),
			(overlay_set_color, "$battle_tile_start", 16776960),
			(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party", "p_main_party"),
			(try_begin),
				(gt, ":party_size_wo_prisoners_main_party", 500),
				(neq, "$player_cant_fight", 1),
				(ge, "$battle_tile_type", 100),
				(create_in_game_button_overlay, "$battle_tile_siege", "str_bt_siege", 16),
			(else_try),
				(create_text_overlay, "$battle_tile_siege", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 500),
			(position_set_y, 1, 208),
			(overlay_set_position, "$battle_tile_siege", 1),
			(overlay_set_color, "$battle_tile_siege", 16776960),
			(try_begin),
				(neq, "$player_cant_fight", 1),
				(eq, "$battle_tile_type", 51),
				(create_in_game_button_overlay, "$battle_tile_seabattle", "str_bt_naval", 16),
			(else_try),
				(create_text_overlay, "$battle_tile_seabattle", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 500),
			(position_set_y, 1, 208),
			(overlay_set_position, "$battle_tile_seabattle", 1),
			(overlay_set_color, "$battle_tile_seabattle", 16776960),
			(try_begin),
				(eq, "$player_cant_fight", 1),
				(create_in_game_button_overlay, "$battle_tile_cant_fight", "str_bt_cantfight", 16),
			(else_try),
				(create_text_overlay, "$battle_tile_cant_fight", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 500),
			(position_set_y, 1, 208),
			(overlay_set_position, "$battle_tile_cant_fight", 1),
			(overlay_set_color, "$battle_tile_cant_fight", 16711680),
			(try_begin),
				(eq, "$battle_tile_type", 0),
				(eq, "$battle_type_select_pre", 0),
				(create_mesh_overlay, reg0, "mesh_pic_battle_formation_base"),
			(else_try),
				(eq, "$battle_tile_type", 0),
				(eq, "$battle_type_select_pre", 1),
				(create_mesh_overlay, reg0, "mesh_pic_battle_formation_sideattack"),
			(else_try),
				(eq, "$battle_tile_type", 0),
				(eq, "$battle_type_select_pre", 2),
				(create_mesh_overlay, reg0, "mesh_pic_battle_formation_backattack"),
			(else_try),
				(eq, "$battle_tile_type", 0),
				(eq, "$battle_type_select_pre", 3),
				(create_mesh_overlay, reg0, "mesh_pic_battle_formation_encampment"),
			(else_try),
				(eq, "$battle_tile_type", 0),
				(eq, "$battle_type_select_pre", 4),
				(create_mesh_overlay, reg0, "mesh_pic_battle_formation_lionheart"),
			(else_try),
				(eq, "$battle_tile_type", 0),
				(eq, "$battle_type_select_pre", 5),
				(create_mesh_overlay, reg0, "mesh_pic_battle_formation_pincer"),
			(else_try),
				(eq, "$battle_tile_type", 0),
				(eq, "$battle_type_select_pre", 6),
				(create_mesh_overlay, reg0, "mesh_pic_battle_formation_mangudai"),
			(else_try),
				(eq, "$battle_tile_type", 0),
				(eq, "$battle_type_select_pre", 7),
				(create_mesh_overlay, reg0, "mesh_pic_battle_formation_backriver"),
			(else_try),
				(eq, "$battle_tile_type", 0),
				(eq, "$battle_type_select_pre", 8),
				(create_mesh_overlay, reg0, "mesh_pic_battle_formation_8door"),
			(else_try),
				(eq, "$battle_tile_type", 0),
				(create_mesh_overlay, reg0, "mesh_pic_battle_formation_base"),
			(else_try),
				(eq, "$battle_tile_type", 2),
				(create_mesh_overlay, reg0, "mesh_pic_battle_tile_3"),
			(else_try),
				(eq, "$battle_tile_type", 3),
				(create_mesh_overlay, reg0, "mesh_pic_battle_tile_4"),
			(else_try),
				(eq, "$battle_tile_type", 4),
				(create_mesh_overlay, reg0, "mesh_pic_battle_tile_5"),
			(else_try),
				(eq, "$battle_tile_type", 5),
				(create_mesh_overlay, reg0, "mesh_pic_battle_tile_6"),
			(else_try),
				(eq, "$battle_tile_type", 6),
				(create_mesh_overlay, reg0, "mesh_pic_battle_tile_7"),
			(else_try),
				(eq, "$battle_tile_type", 7),
				(create_mesh_overlay, reg0, "mesh_pic_battle_tile_8"),
			(else_try),
				(eq, "$battle_tile_type", 8),
				(create_mesh_overlay, reg0, "mesh_pic_battle_tile_9"),
			(else_try),
				(eq, "$battle_tile_type", 9),
				(create_mesh_overlay, reg0, "mesh_pic_battle_tile_10"),
			(else_try),
				(eq, "$battle_tile_type", 10),
				(create_mesh_overlay, reg0, "mesh_pic_battle_tile_11"),
			(else_try),
				(eq, "$battle_tile_type", 51),
				(create_mesh_overlay, reg0, "mesh_pic_battle_tile_n1"),
			(else_try),
				(this_or_next|eq, "$battle_tile_type", 111),
				(this_or_next|eq, "$battle_tile_type", 112),
				(this_or_next|eq, "$battle_tile_type", 102),
				(eq, "$battle_tile_type", 101),
				(create_mesh_overlay, reg0, "mesh_pic_battle_tile_s1"),
			(else_try),
				(this_or_next|eq, "$battle_tile_type", 103),
				(eq, "$battle_tile_type", 113),
				(create_mesh_overlay, reg0, "mesh_pic_battle_tile_s2"),
			(else_try),
				(this_or_next|eq, "$battle_tile_type", 104),
				(eq, "$battle_tile_type", 114),
				(create_mesh_overlay, reg0, "mesh_pic_battle_tile_s3"),
			(else_try),
				(this_or_next|eq, "$battle_tile_type", 105),
				(eq, "$battle_tile_type", 115),
				(create_mesh_overlay, reg0, "mesh_pic_battle_tile_s4"),
			(else_try),
				(create_mesh_overlay, reg0, "mesh_pic_battle_tile_2"),
			(try_end),
			(position_set_x, 1, 500),
			(position_set_y, 1, 450),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|eq, ":trigger_param_1", "$button_strategy_1"),
				(this_or_next|eq, ":trigger_param_1", "$button_strategy_2"),
				(this_or_next|eq, ":trigger_param_1", "$button_strategy_3"),
				(this_or_next|eq, ":trigger_param_1", "$button_strategy_4"),
				(eq, ":trigger_param_1", "$button_strategy_5"),
				(play_sound, "snd_pst_click"),
				(assign, "$surrender_yes_or_no", 0),
				(assign, "$withdawal_yes_or_no", 0),
				(assign, "$ai_suggest_duel_yes_or_no", 0),
				(try_begin),
					(gt, "$bt_terrain_strategy_state", 0),
					(display_message, "str_bt_st_already", 0x00ffff00),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, ":trigger_param_1", "$button_strategy_1"),
					(neq, "$bt_st_fallrock", 1),
					(display_message, "str_bt_st_dontknow", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, ":trigger_param_1", "$button_strategy_2"),
					(neq, "$bt_st_submerge", 1),
					(display_message, "str_bt_st_dontknow", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, ":trigger_param_1", "$button_strategy_3"),
					(neq, "$bt_st_firework", 1),
					(display_message, "str_bt_st_dontknow", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, ":trigger_param_1", "$button_strategy_4"),
					(neq, "$bt_st_lure", 1),
					(display_message, "str_bt_st_dontknow", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, ":trigger_param_1", "$button_strategy_5"),
					(neq, "$bt_st_ambush", 1),
					(display_message, "str_bt_st_dontknow", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(try_begin),
						(eq, ":trigger_param_1", "$button_strategy_1"),
						(store_mul, ":value", "$player_strategy_skill", 1),
						(val_add, ":value", 5),
					(else_try),
						(eq, ":trigger_param_1", "$button_strategy_2"),
						(store_mul, ":value", "$player_strategy_skill", 1),
						(val_add, ":value", 5),
						(try_begin),
							(eq, "$glob_weather", 2),
							(val_add, ":value", 5),
						(try_end),
					(else_try),
						(eq, ":trigger_param_1", "$button_strategy_3"),
						(store_mul, ":value", "$player_strategy_skill", 1),
						(val_add, ":value", 5),
						(try_begin),
							(eq, "$glob_weather", 2),
							(val_sub, ":value", 5),
						(try_end),
						(try_begin),
							(eq, "$glob_weather", 1),
							(val_add, ":value", 5),
						(try_end),
					(else_try),
						(eq, ":trigger_param_1", "$button_strategy_4"),
						(store_mul, ":value", "$player_strategy_skill", 1),
						(val_add, ":value", 5),
					(else_try),
						(eq, ":trigger_param_1", "$button_strategy_5"),
						(store_mul, ":value", "$player_strategy_skill", 1),
						(try_begin),
							(is_currently_night),
							(val_add, ":value", 10),
						(try_end),
					(try_end),
					(try_begin),
						(ge, ":value", "$rand100_player_strategy"),
						(assign, "$bt_terrain_strategy_state", 1),
						(call_script, "script_rand_glob_dice"),
						(display_message, "str_bt_st_succ", 0x0000ff00),
						(play_sound, "snd_bad_drum"),
						(try_begin),
							(eq, ":trigger_param_1", "$button_strategy_5"),
							(assign, "$battle_tile_type", 6),
						(else_try),
							(eq, ":trigger_param_1", "$button_strategy_4"),
							(assign, "$battle_tile_type", 5),
						(else_try),
							(eq, ":trigger_param_1", "$button_strategy_3"),
							(assign, "$battle_tile_type", 4),
						(else_try),
							(eq, ":trigger_param_1", "$button_strategy_2"),
							(assign, "$battle_tile_type", 3),
						(else_try),
							(eq, ":trigger_param_1", "$button_strategy_1"),
							(assign, "$battle_tile_type", 2),
						(try_end),
						(assign, "$bt_cant_withdrawal", 1),
					(else_try),
						(assign, "$bt_terrain_strategy_state", 3),
						(display_message, "str_bt_st_fail", 0x00ff0000),
						(play_sound, "snd_tactfail"),
						(assign, "$bt_cant_withdrawal", 1),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_battle_tile_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_tactics_apply"),
				(try_begin),
					(this_or_next|eq, "$wm_player_fac", "fac_kingdom_30"),
					(this_or_next|eq, "$wm_player_fac", "fac_kingdom_21"),
					(this_or_next|eq, "$wm_player_fac", "fac_kingdom_22"),
					(eq, "$wm_player_fac", "fac_kingdom_32"),
					(assign, ":value_2", 1),
				(else_try),
					(assign, ":value_2", 0),
				(try_end),
				(store_mul, ":value_3", "$player_army_size", 150),
				(val_div, ":value_3", 100),
				(try_begin),
					(gt, "$bt_terrain_strategy_state", 0),
					(display_message, "str_bt_st_already", 0x00ffff00),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, "$battle_type_select_pre", 1),
					(neq, "$bt_st_sideatt", 1),
					(display_message, "str_bt_st_dontknow", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, "$battle_type_select_pre", 2),
					(neq, "$bt_st_backatt", 1),
					(display_message, "str_bt_st_dontknow", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, "$battle_type_select_pre", 3),
					(neq, "$bt_st_encamp", 1),
					(display_message, "str_bt_st_dontknow", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, "$battle_type_select_pre", 3),
					(eq, "$bt_st_encamp", 1),
					(gt, ":value_3", "$enemy_army_size"),
					(display_message, "str_defend_66pecent", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, "$battle_type_select_pre", 4),
					(neq, "$bt_st_lionheart", 1),
					(display_message, "str_bt_st_dontknow", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, "$battle_type_select_pre", 5),
					(neq, "$bt_st_pincer", 1),
					(display_message, "str_bt_st_dontknow", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, "$battle_type_select_pre", 6),
					(neq, "$bt_st_mangudai", 1),
					(display_message, "str_bt_st_dontknow", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, "$battle_type_select_pre", 6),
					(eq, "$bt_st_mangudai", 1),
					(eq, ":value_2", 0),
					(display_message, "str_tact_not_nomad", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, "$battle_type_select_pre", 7),
					(neq, "$bt_st_briver", 1),
					(display_message, "str_bt_st_dontknow", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, "$battle_type_select_pre", 8),
					(neq, "$bt_st_8door", 1),
					(display_message, "str_bt_st_dontknow", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(eq, "$battle_type_select_pre", 8),
					(eq, "$bt_st_8door", 1),
					(gt, ":value_3", "$enemy_army_size"),
					(display_message, "str_defend_66pecent", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(else_try),
					(try_begin),
						(eq, "$battle_type_select_pre", 1),
						(store_mul, ":value", "$player_tactics_skill", 2),
					(else_try),
						(eq, "$battle_type_select_pre", 2),
						(store_mul, ":value", "$player_tactics_skill", 1),
						(try_begin),
							(is_currently_night),
							(val_add, ":value", 15),
						(try_end),
					(else_try),
						(eq, "$battle_type_select_pre", 3),
						(store_mul, ":value", "$player_tactics_skill", 3),
						(val_add, ":value", 15),
					(else_try),
						(eq, "$battle_type_select_pre", 4),
						(store_mul, ":value", "$player_tactics_skill", 2),
						(val_add, ":value", 5),
					(else_try),
						(eq, "$battle_type_select_pre", 5),
						(store_mul, ":value", "$player_tactics_skill", 1),
						(val_add, ":value", 5),
					(else_try),
						(eq, "$battle_type_select_pre", 6),
						(store_mul, ":value", "$player_tactics_skill", 1),
						(val_add, ":value", 5),
					(else_try),
						(eq, "$battle_type_select_pre", 7),
						(store_mul, ":value", "$player_tactics_skill", 2),
						(val_add, ":value", 5),
					(else_try),
						(eq, "$battle_type_select_pre", 8),
						(store_mul, ":value", "$player_tactics_skill", 2),
						(val_add, ":value", 5),
					(try_end),
					(try_begin),
						(ge, ":value", "$rand100_player_tact"),
						(assign, "$bt_terrain_strategy_state", 1),
						(call_script, "script_rand_glob_dice"),
						(display_message, "str_bt_st_succ", 0x0000ff00),
						(play_sound, "snd_bad_drum"),
						(assign, "$battle_tactics_type", "$battle_type_select_pre"),
						(assign, "$bt_cant_withdrawal", 1),
					(else_try),
						(assign, "$bt_terrain_strategy_state", 3),
						(display_message, "str_bt_st_fail", 0x00ff0000),
						(play_sound, "snd_tactfail"),
						(assign, "$bt_cant_withdrawal", 1),
					(try_end),
					(start_presentation, "prsnt_battle_tile_pst"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_tactics_pre"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(gt, "$battle_type_select_pre", 0),
					(val_sub, "$battle_type_select_pre", 1),
				(try_end),
				(start_presentation, "prsnt_battle_tile_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_tactics_next"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(lt, "$battle_type_select_pre", 8),
					(val_add, "$battle_type_select_pre", 1),
				(try_end),
				(start_presentation, "prsnt_battle_tile_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_confuse"),
				(assign, "$bt_cant_withdrawal", 1),
				(assign, "$surrender_yes_or_no", 0),
				(assign, "$withdawal_yes_or_no", 0),
				(assign, "$ai_suggest_duel_yes_or_no", 0),
				(store_mul, ":value", "$player_strategy_skill", 2),
				(val_add, ":value", 10),
				(try_begin),
					(ge, ":value", "$rand100_player_strategy"),
					(assign, "$bt_terrain_strategy_state", 3),
					(val_sub, "$enemy_train_level", 30),
					(val_clamp, "$enemy_train_level", 30, 101),
					(call_script, "script_rand_glob_dice"),
					(display_message, "str_bt_st_succ", 0x0000ff00),
					(play_sound, "snd_bad_drum"),
				(else_try),
					(assign, "$bt_terrain_strategy_state", 3),
					(display_message, "str_bt_st_fail", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(try_end),
				(start_presentation, "prsnt_battle_tile_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_blocking_supply"),
				(assign, "$bt_cant_withdrawal", 1),
				(assign, "$surrender_yes_or_no", 0),
				(assign, "$withdawal_yes_or_no", 0),
				(assign, "$ai_suggest_duel_yes_or_no", 0),
				(store_mul, ":value", "$player_strategy_skill", 3),
				(val_add, ":value", 10),
				(try_begin),
					(ge, ":value", "$rand100_player_strategy"),
					(assign, "$bt_terrain_strategy_state", 3),
					(val_sub, "$enemy_moral_level", 40),
					(val_clamp, "$enemy_moral_level", 40, 101),
					(call_script, "script_rand_glob_dice"),
					(display_message, "str_bt_st_succ", 0x0000ff00),
					(play_sound, "snd_sabotagee"),
				(else_try),
					(assign, "$bt_terrain_strategy_state", 3),
					(display_message, "str_bt_st_fail", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(try_end),
				(start_presentation, "prsnt_battle_tile_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_opengate"),
				(assign, "$bt_cant_withdrawal", 1),
				(assign, "$surrender_yes_or_no", 0),
				(assign, "$withdawal_yes_or_no", 0),
				(assign, "$ai_suggest_duel_yes_or_no", 0),
				(store_mul, ":value", "$player_strategy_skill", 1),
				(val_add, ":value", 5),
				(try_begin),
					(call_script, "script_wm_main_party_has_troop_sc", "trp_npc14"),
					(eq, "$wm_comp_continue", 1),
					(val_add, ":value", 10),
				(try_end),
				(try_begin),
					(ge, ":value", "$rand100_player_strategy"),
					(assign, "$succed_siege_strategy", 5),
					(call_script, "script_rand_glob_dice"),
					(display_message, "str_bt_st_succ", 0x0000ff00),
					(play_sound, "snd_sabotagee"),
				(else_try),
					(assign, "$succed_siege_strategy", -1),
					(display_message, "str_bt_st_fail", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(try_end),
				(start_presentation, "prsnt_battle_tile_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_infiltration"),
				(assign, "$bt_cant_withdrawal", 1),
				(assign, "$surrender_yes_or_no", 0),
				(assign, "$withdawal_yes_or_no", 0),
				(assign, "$ai_suggest_duel_yes_or_no", 0),
				(store_mul, ":value", "$player_strategy_skill", 1),
				(val_add, ":value", 5),
				(try_begin),
					(ge, ":value", "$rand100_player_strategy"),
					(assign, "$succed_siege_strategy", 4),
					(call_script, "script_rand_glob_dice"),
					(display_message, "str_bt_st_succ", 0x0000ff00),
					(play_sound, "snd_sabotagee"),
				(else_try),
					(assign, "$succed_siege_strategy", -1),
					(display_message, "str_bt_st_fail", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(try_end),
				(start_presentation, "prsnt_battle_tile_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_archimedes"),
				(assign, "$bt_cant_withdrawal", 1),
				(assign, "$surrender_yes_or_no", 0),
				(assign, "$withdawal_yes_or_no", 0),
				(assign, "$ai_suggest_duel_yes_or_no", 0),
				(assign, ":value", 50),
				(try_begin),
					(ge, ":value", "$rand100_player_strategy"),
					(display_message, "str_enemy_fall_chaos", 0x00ff0000),
					(val_mul, "$enemy_army_size", 90),
					(val_div, "$enemy_army_size", 100),
					(assign, "$succed_siege_strategy", -1),
					(call_script, "script_rand_glob_dice"),
					(display_message, "str_bt_st_succ", 0x0000ff00),
					(play_sound, "snd_sabotagee"),
				(else_try),
					(assign, "$succed_siege_strategy", -1),
					(display_message, "str_bt_st_fail", 0x00ff0000),
					(play_sound, "snd_tactfail"),
				(try_end),
				(start_presentation, "prsnt_battle_tile_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_cant_fight"),
				(play_sound, "snd_pst_click"),
				(display_message, "str_cant_battle", 0x00ff0000),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_seabattle"),
				(assign, "$sea_battle_hud_on", 1),
				(assign, "$wm_allow_retreat", 1),
				(try_begin),
					(is_between, "$enemy_commander", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(call_script, "script_change_player_relation_with_troop", "$enemy_commander", -15),
				(try_end),
				(call_script, "script_sea_battle_setting"),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_siege"),
				(try_begin),
					(is_between, "$enemy_commander", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(call_script, "script_change_player_relation_with_troop", "$enemy_commander", -15),
				(try_end),
				(call_script, "script_cannon_use_sett"),
				(assign, "$wm_allow_retreat", 1),
				(try_begin),
					(this_or_next|eq, "$battle_tile_type", 101),
					(this_or_next|eq, "$battle_tile_type", 102),
					(this_or_next|eq, "$battle_tile_type", 103),
					(this_or_next|eq, "$battle_tile_type", 104),
					(eq, "$battle_tile_type", 105),
					(assign, "$wm_allow_retreat", 1),
				(else_try),
					(this_or_next|eq, "$battle_tile_type", 111),
					(this_or_next|eq, "$battle_tile_type", 112),
					(this_or_next|eq, "$battle_tile_type", 113),
					(this_or_next|eq, "$battle_tile_type", 114),
					(eq, "$battle_tile_type", 115),
					(assign, "$wm_allow_retreat", 0),
				(try_end),
				(troop_set_health, "trp_player", 100),
				(troop_set_health, "$enemy_commander", 100),
				(call_script, "script_assistant_lord_rand"),
				(try_begin),
					(eq, "$battle_tile_type", 102),
					(call_script, "script_molda_scene_culture", "$wm_target_party"),
					(assign, ":value_4", "$town_scene_type"),
					(call_script, "script_attack_or_defence_type", 1),
					(modify_visitors_at_site, ":value_4"),
					(reset_visitors),
					(try_begin),
						(eq, "$town_culture_type", 8),
						(set_jump_mission, "mt_castle_attack_walls_molda_jap"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_jap"),
						(set_visitor, 1, "trp_player"),
						(set_visitor, 2, "$enemy_commander"),
					(else_try),
						(eq, "$town_culture_type", 9),
						(set_jump_mission, "mt_castle_attack_walls_molda_uurt"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_uurt"),
						(set_visitor, 1, "trp_player"),
						(set_visitor, 2, "$enemy_commander"),
					(else_try),
						(eq, "$town_culture_type", 10),
						(set_jump_mission, "mt_castle_attack_walls_molda_teepee"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_teepee"),
						(set_visitor, 1, "trp_player"),
						(set_visitor, 2, "$enemy_commander"),
					(try_end),
					(assign, ":value_5", 120),
					(assign, ":value_6", 124),
				(else_try),
					(eq, "$battle_tile_type", 101),
					(call_script, "script_molda_scene_culture", "$wm_target_party"),
					(assign, ":value_4", "$town_scene_type"),
					(call_script, "script_attack_or_defence_type", 1),
					(modify_visitors_at_site, ":value_4"),
					(reset_visitors),
					(try_begin),
						(gt, "$succed_siege_strategy", 0),
						(assign, "$molda_siege_type", "$succed_siege_strategy"),
					(try_end),
					(try_begin),
						(eq, "$molda_siege_type", 1),
						(assign, "$catapult_attack_max", 20),
						(set_jump_mission, "mt_castle_attack_walls_molda_ram"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_ram"),
						(set_visitor, 1, "trp_player"),
						(set_visitor, 2, "$enemy_commander"),
						(assign, ":value_5", 120),
						(assign, ":value_6", 124),
					(else_try),
						(eq, "$molda_siege_type", 2),
						(set_jump_mission, "mt_castle_attack_walls_molda_ladder_belfry"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_ladder_belfry"),
						(set_visitor, 1, "trp_player"),
						(set_visitor, 2, "$enemy_commander"),
						(assign, ":value_5", 91),
						(assign, ":value_6", 92),
					(else_try),
						(eq, "$molda_siege_type", 3),
						(set_jump_mission, "mt_castle_attack_walls_molda_ladder_two"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_ladder_two"),
						(set_visitor, 1, "trp_player"),
						(set_visitor, 2, "$enemy_commander"),
						(assign, ":value_5", 80),
						(assign, ":value_6", 81),
					(else_try),
						(eq, "$molda_siege_type", 4),
						(set_jump_mission, "mt_castle_attack_walls_molda_infil_river"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_infil_river"),
						(set_visitor, 1, "trp_player"),
						(set_visitor, 2, "$enemy_commander"),
						(assign, ":value_5", 102),
						(assign, ":value_6", 103),
					(else_try),
						(eq, "$molda_siege_type", 5),
						(set_jump_mission, "mt_castle_attack_walls_molda_open_gate"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_open_gate"),
						(set_visitor, 1, "trp_player"),
						(set_visitor, 2, "$enemy_commander"),
						(assign, ":value_5", 120),
						(assign, ":value_6", 124),
					(try_end),
				(else_try),
					(this_or_next|eq, "$battle_tile_type", 105),
					(this_or_next|eq, "$battle_tile_type", 115),
					(this_or_next|eq, "$battle_tile_type", 104),
					(this_or_next|eq, "$battle_tile_type", 114),
					(this_or_next|eq, "$battle_tile_type", 113),
					(eq, "$battle_tile_type", 103),
					(call_script, "script_molda_scene_culture", "$wm_target_party"),
					(assign, ":value_4", "$town_scene_type"),
					(try_begin),
						(this_or_next|eq, "$battle_tile_type", 104),
						(eq, "$battle_tile_type", 114),
						(assign, "$catapult_attack_max", 3),
					(else_try),
						(this_or_next|eq, "$battle_tile_type", 113),
						(eq, "$battle_tile_type", 103),
						(assign, "$catapult_attack_max", 6),
					(else_try),
						(this_or_next|eq, "$battle_tile_type", 115),
						(eq, "$battle_tile_type", 105),
						(assign, "$catapult_attack_max", 8),
					(try_end),
					(assign, "$molda_siege_type", 6),
					(modify_visitors_at_site, ":value_4"),
					(reset_visitors),
					(set_jump_mission, "mt_castle_attack_walls_molda_catapult"),
					(assign, "$current_mission_template", "mt_castle_attack_walls_molda_catapult"),
					(try_begin),
						(eq, "$is_siege_defence", 0),
						(set_visitor, 1, "trp_player"),
						(set_visitor, 2, "$enemy_commander"),
						(assign, ":value_5", 120),
						(assign, ":value_6", 124),
					(else_try),
						(set_visitor, 2, "trp_player"),
						(set_visitor, 1, "$enemy_commander"),
						(assign, ":value_5", 124),
						(assign, ":value_6", 120),
					(try_end),
				(else_try),
					(eq, "$battle_tile_type", 111),
					(call_script, "script_molda_scene_culture", "$g_encountered_party"),
					(assign, ":value_4", "$town_scene_type"),
					(call_script, "script_attack_or_defence_type", 2),
					(modify_visitors_at_site, ":value_4"),
					(reset_visitors),
					(try_begin),
						(eq, "$molda_siege_type", 1),
						(assign, "$catapult_attack_max", 20),
						(set_jump_mission, "mt_castle_attack_walls_molda_ram"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_ram"),
						(set_visitor, 2, "trp_player"),
						(set_visitor, 1, "$enemy_commander"),
						(assign, ":value_5", 124),
						(assign, ":value_6", 120),
					(else_try),
						(eq, "$molda_siege_type", 2),
						(set_jump_mission, "mt_castle_attack_walls_molda_ladder_belfry"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_ladder_belfry"),
						(set_visitor, 2, "trp_player"),
						(set_visitor, 1, "$enemy_commander"),
						(assign, ":value_5", 92),
						(assign, ":value_6", 91),
					(else_try),
						(eq, "$molda_siege_type", 3),
						(set_jump_mission, "mt_castle_attack_walls_molda_ladder_two"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_ladder_two"),
						(set_visitor, 2, "trp_player"),
						(set_visitor, 1, "$enemy_commander"),
						(assign, ":value_5", 81),
						(assign, ":value_6", 80),
					(else_try),
						(eq, "$molda_siege_type", 4),
						(set_jump_mission, "mt_castle_attack_walls_molda_infil_river"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_infil_river"),
						(set_visitor, 2, "trp_player"),
						(set_visitor, 1, "$enemy_commander"),
						(assign, ":value_5", 103),
						(assign, ":value_6", 102),
					(else_try),
						(eq, "$molda_siege_type", 5),
						(set_jump_mission, "mt_castle_attack_walls_molda_open_gate"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_open_gate"),
						(set_visitor, 2, "trp_player"),
						(set_visitor, 1, "$enemy_commander"),
						(assign, ":value_5", 124),
						(assign, ":value_6", 120),
					(try_end),
				(else_try),
					(eq, "$battle_tile_type", 112),
					(call_script, "script_molda_scene_culture", "$g_encountered_party"),
					(assign, ":value_4", "$town_scene_type"),
					(call_script, "script_attack_or_defence_type", 2),
					(modify_visitors_at_site, ":value_4"),
					(reset_visitors),
					(try_begin),
						(eq, "$town_culture_type", 8),
						(set_jump_mission, "mt_castle_attack_walls_molda_jap"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_jap"),
						(set_visitor, 2, "trp_player"),
						(set_visitor, 1, "$enemy_commander"),
					(else_try),
						(eq, "$town_culture_type", 9),
						(set_jump_mission, "mt_castle_attack_walls_molda_uurt"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_uurt"),
						(set_visitor, 2, "trp_player"),
						(set_visitor, 1, "$enemy_commander"),
					(else_try),
						(eq, "$town_culture_type", 10),
						(set_jump_mission, "mt_castle_attack_walls_molda_teepee"),
						(assign, "$current_mission_template", "mt_castle_attack_walls_molda_teepee"),
						(set_visitor, 2, "trp_player"),
						(set_visitor, 1, "$enemy_commander"),
					(try_end),
					(assign, ":value_5", 124),
					(assign, ":value_6", 120),
				(try_end),
				(assign, "$bt_player_entry_1", ":value_5"),
				(assign, "$bt_player_entry_2", ":value_5"),
				(assign, "$bt_player_entry_3", ":value_5"),
				(assign, "$bt_player_entry_4", ":value_5"),
				(assign, "$bt_player_entry_5", ":value_5"),
				(assign, "$bt_player_entry_6", ":value_5"),
				(assign, "$bt_player_entry_7", ":value_5"),
				(assign, "$bt_player_entry_8", ":value_5"),
				(assign, "$bt_player_entry_9", ":value_5"),
				(assign, "$bt_enemy_entry_1", ":value_6"),
				(assign, "$bt_enemy_entry_2", ":value_6"),
				(assign, "$bt_enemy_entry_3", ":value_6"),
				(assign, "$bt_enemy_entry_4", ":value_6"),
				(assign, "$bt_enemy_entry_5", ":value_6"),
				(assign, "$bt_enemy_entry_6", ":value_6"),
				(assign, "$bt_enemy_entry_7", ":value_6"),
				(assign, "$bt_enemy_entry_8", ":value_6"),
				(assign, "$bt_enemy_entry_9", ":value_6"),
				(assign, "$player_start_entry", ":value_5"),
				(assign, "$enemy_start_entry", ":value_6"),
				(call_script, "script_rand_glob_dice"),
				(jump_to_scene, ":value_4"),
				(change_screen_mission),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_start"),
				(try_begin),
					(is_between, "$enemy_commander", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(call_script, "script_change_player_relation_with_troop", "$enemy_commander", -15),
				(try_end),
				(try_begin),
					(neq, "$low_encounter_battle", 1),
					(neq, "$bt_terrain_strategy_state", 1),
					(neq, "$bt_terrain_strategy_state", 2),
					(try_begin),
						(store_mul, ":value_7", "$enemy_army_size", 150),
						(val_div, ":value_7", 100),
						(store_faction_of_party, ":faction_of_party_wm_target_party", "$wm_target_party"),
						(store_random_in_range, ":random_in_range_0_2", 0, 2),
						(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
						(try_begin),
							(eq, "$enemy_commander", "trp_tt_lord_18_00"),
							(assign, ":value_8", 4),
							(assign, ":value", 70),
						(else_try),
							(this_or_next|eq, ":faction_of_party_wm_target_party", "fac_kingdom_2"),
							(eq, ":faction_of_party_wm_target_party", "fac_kingdom_3"),
							(assign, ":value_8", 5),
							(store_mul, ":value", "$enemy_tactics_skill", 1),
							(val_add, ":value", 10),
						(else_try),
							(this_or_next|eq, "$enemy_commander", "trp_tt_lord_02_00"),
							(eq, "$enemy_commander", "trp_tt_lord_03_01"),
							(assign, ":value_8", 5),
							(assign, ":value", 70),
						(else_try),
							(this_or_next|eq, "$enemy_commander", "trp_tt_lord_30_00"),
							(this_or_next|eq, "$enemy_commander", "trp_tt_lord_30_01"),
							(this_or_next|eq, "$enemy_commander", "trp_tt_lord_21_01"),
							(eq, "$enemy_commander", "trp_tt_lord_21_00"),
							(assign, ":value_8", 6),
							(assign, ":value", 50),
						(else_try),
							(this_or_next|eq, ":faction_of_party_wm_target_party", "fac_kingdom_30"),
							(this_or_next|eq, ":faction_of_party_wm_target_party", "fac_kingdom_21"),
							(this_or_next|eq, ":faction_of_party_wm_target_party", "fac_kingdom_22"),
							(eq, ":faction_of_party_wm_target_party", "fac_kingdom_32"),
							(assign, ":value_8", 6),
							(store_mul, ":value", "$enemy_tactics_skill", 1),
							(val_add, ":value", 10),
						(else_try),
							(eq, "$enemy_commander", "trp_tt_lord_01_08"),
							(assign, ":value_8", 7),
							(assign, ":value", 50),
						(else_try),
							(eq, "$enemy_commander", "trp_tt_ex_lord_01"),
							(eq, "$player_is_attack", 1),
							(assign, ":value_8", 8),
							(assign, ":value", 100),
						(else_try),
							(eq, "$player_is_attack", 1),
							(lt, ":value_7", "$player_army_size"),
							(eq, ":random_in_range_0_2", 0),
							(store_random_in_range, ":random_in_range_0_4", 0, 4),
							(try_begin),
								(eq, ":random_in_range_0_4", 0),
								(assign, ":value_8", 8),
								(store_mul, ":value", "$enemy_tactics_skill", 2),
							(else_try),
								(assign, ":value_8", 3),
								(store_mul, ":value", "$enemy_tactics_skill", 3),
								(val_add, ":value", 10),
							(try_end),
						(else_try),
							(eq, ":random_in_range_0_2_2", 0),
							(assign, ":value_8", 1),
							(store_mul, ":value", "$enemy_tactics_skill", 1),
							(try_begin),
								(is_currently_night),
								(val_add, ":value", 10),
							(try_end),
						(else_try),
							(assign, ":value_8", 0),
							(store_mul, ":value", "$enemy_tactics_skill", 2),
						(try_end),
						(try_begin),
							(ge, ":value", "$rand100_enemy_tact"),
							(assign, "$bt_terrain_strategy_state", 2),
							(assign, "$battle_tactics_type", ":value_8"),
							(call_script, "script_rand_glob_dice"),
						(try_end),
					(try_end),
				(try_end),
				(try_begin),
					(neq, "$low_encounter_battle", 1),
					(neq, "$bt_terrain_strategy_state", 1),
					(neq, "$bt_terrain_strategy_state", 2),
					(try_begin),
						(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
						(store_random_in_range, ":random_in_range_0_5", 0, 5),
						(try_begin),
							(eq, ":random_in_range_0_5", 0),
							(neq, ":current_terrain_main_party", 5),
							(assign, ":value_9", 3),
							(store_mul, ":value", "$enemy_strategy_skill", 1),
							(val_add, ":value", 2),
							(try_begin),
								(eq, "$glob_weather", 2),
								(val_add, ":value", 3),
							(try_end),
						(else_try),
							(neq, ":current_terrain_main_party", 5),
							(neq, ":current_terrain_main_party", 4),
							(eq, ":random_in_range_0_5", 1),
							(assign, ":value_9", 4),
							(store_mul, ":value", "$enemy_strategy_skill", 1),
							(val_add, ":value", 2),
							(try_begin),
								(eq, "$glob_weather", 2),
								(val_sub, ":value", 4),
							(try_end),
							(try_begin),
								(eq, "$glob_weather", 1),
								(val_add, ":value", 4),
							(try_end),
						(else_try),
							(eq, ":random_in_range_0_5", 2),
							(assign, ":value_9", 2),
							(store_mul, ":value", "$enemy_strategy_skill", 1),
							(val_add, ":value", 2),
						(else_try),
							(eq, ":random_in_range_0_5", 3),
							(neq, ":current_terrain_main_party", 5),
							(assign, ":value_9", 6),
							(store_mul, ":value", "$enemy_strategy_skill", 1),
							(val_add, ":value", 2),
							(try_begin),
								(is_currently_night),
								(val_add, ":value", 7),
							(try_end),
						(else_try),
							(assign, ":value_9", 5),
							(store_mul, ":value", "$enemy_strategy_skill", 1),
							(val_add, ":value", 2),
						(try_end),
						(try_begin),
							(ge, ":value", "$rand100_enemy_strategy"),
							(assign, "$bt_terrain_strategy_state", 2),
							(assign, "$battle_tile_type", ":value_9"),
							(call_script, "script_rand_glob_dice"),
						(try_end),
					(try_end),
				(try_end),
				(try_begin),
					(neq, "$low_encounter_battle", 1),
					(neq, "$bt_terrain_strategy_state", 1),
					(neq, "$bt_terrain_strategy_state", 2),
					(store_mul, ":value", "$enemy_strategy_skill", 2),
					(val_add, ":value", 3),
					(try_begin),
						(ge, ":value", "$rand100_enemy_strategy"),
						(assign, "$bt_terrain_strategy_state", 3),
						(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
						(try_begin),
							(eq, ":random_in_range_0_2_2", 0),
							(val_sub, "$player_moral_level", 40),
							(val_clamp, "$player_moral_level", 40, 101),
							(play_sound, "snd_sabotagee"),
							(display_message, "str_supply_attacked", 0x00ff0000),
						(else_try),
							(val_sub, "$player_train_level", 30),
							(val_clamp, "$player_train_level", 30, 101),
							(play_sound, "snd_bad_drum"),
							(display_message, "str_army_confused", 0x00ff0000),
						(try_end),
						(call_script, "script_rand_glob_dice"),
					(try_end),
				(try_end),
				(try_begin),
					(eq, "$battle_tile_type", 10),
					(assign, ":value_4", 120),
					(assign, ":value_10", "mt_formation_battle"),
				(else_try),
					(eq, "$battle_tile_type", 9),
					(assign, ":value_4", 119),
					(assign, ":value_10", "mt_formation_battle"),
				(else_try),
					(eq, "$battle_tile_type", 8),
					(assign, ":value_4", 118),
					(assign, ":value_10", "mt_formation_battle"),
				(else_try),
					(eq, "$battle_tile_type", 7),
					(assign, ":value_4", 117),
					(assign, ":value_10", "mt_formation_battle"),
					(call_script, "script_molda_scene_culture", "p_main_party"),
				(else_try),
					(eq, "$battle_tile_type", 6),
					(assign, ":value_4", 116),
					(assign, ":value_10", "mt_formation_battle"),
				(else_try),
					(eq, "$battle_tile_type", 5),
					(assign, ":value_4", 115),
					(assign, ":value_10", "mt_formation_battle"),
				(else_try),
					(eq, "$battle_tile_type", 4),
					(assign, ":value_4", 114),
					(assign, ":value_10", "mt_formation_battle"),
				(else_try),
					(eq, "$battle_tile_type", 3),
					(assign, ":value_4", 113),
					(assign, ":value_10", "mt_formation_battle"),
				(else_try),
					(eq, "$battle_tile_type", 2),
					(assign, ":value_4", 112),
					(assign, ":value_10", "mt_formation_battle"),
				(else_try),
					(eq, "$battle_tile_type", 1),
					(assign, ":value_4", 111),
					(assign, ":value_10", "mt_formation_battle"),
				(else_try),
					(eq, "$battle_tile_type", 0),
					(try_begin),
						(eq, "$battle_tactics_type", 1),
						(assign, ":value_4", 121),
					(else_try),
						(eq, "$battle_tactics_type", 2),
						(assign, ":value_4", 122),
					(else_try),
						(eq, "$battle_tactics_type", 3),
						(assign, ":value_4", 123),
					(else_try),
						(eq, "$battle_tactics_type", 4),
						(assign, ":value_4", 124),
					(else_try),
						(eq, "$battle_tactics_type", 5),
						(assign, ":value_4", 125),
					(else_try),
						(eq, "$battle_tactics_type", 6),
						(assign, ":value_4", 126),
					(else_try),
						(eq, "$battle_tactics_type", 7),
						(assign, ":value_4", 127),
					(else_try),
						(eq, "$battle_tactics_type", 8),
						(assign, ":value_4", 128),
						(assign, "$siege_horse_kill_need", 1),
					(else_try),
						(assign, ":value_4", 110),
					(try_end),
					(assign, ":value_10", "mt_formation_battle"),
				(try_end),
				(try_begin),
					(eq, "$battle_tile_type", 0),
					(gt, "$battle_tactics_type", 0),
					(try_begin),
						(eq, "$bt_terrain_strategy_state", 1),
						(assign, "$bt_player_entry_1", 1),
						(assign, "$bt_player_entry_2", 2),
						(assign, "$bt_player_entry_3", 3),
						(assign, "$bt_player_entry_4", 4),
						(assign, "$bt_player_entry_5", 5),
						(assign, "$bt_player_entry_6", 6),
						(assign, "$bt_player_entry_7", 7),
						(assign, "$bt_player_entry_8", 8),
						(assign, "$bt_player_entry_9", 9),
						(assign, "$bt_enemy_entry_1", 31),
						(assign, "$bt_enemy_entry_2", 32),
						(assign, "$bt_enemy_entry_3", 33),
						(assign, "$bt_enemy_entry_4", 34),
						(assign, "$bt_enemy_entry_5", 35),
						(assign, "$bt_enemy_entry_6", 36),
						(assign, "$bt_enemy_entry_7", 37),
						(assign, "$bt_enemy_entry_8", 38),
						(assign, "$bt_enemy_entry_9", 39),
						(assign, "$player_start_entry", 0),
						(assign, "$enemy_start_entry", 40),
						(assign, "$player_retreat_entry_begin", 112),
						(assign, "$player_retreat_entry_end", 116),
						(assign, "$enemy_retreat_entry_begin", 122),
						(assign, "$enemy_retreat_entry_end", 126),
						(assign, "$player_outer_entry_1", 111),
						(assign, "$player_outer_entry_2", 112),
						(assign, "$player_outer_entry_3", 113),
						(assign, "$player_outer_entry_4", 114),
						(assign, "$player_outer_entry_5", 115),
						(assign, "$player_outer_entry_6", 116),
						(assign, "$enemy_outer_entry_1", 121),
						(assign, "$enemy_outer_entry_2", 122),
						(assign, "$enemy_outer_entry_3", 123),
						(assign, "$enemy_outer_entry_4", 124),
						(assign, "$enemy_outer_entry_5", 125),
						(assign, "$enemy_outer_entry_6", 126),
					(else_try),
						(eq, "$bt_terrain_strategy_state", 2),
						(assign, "$bt_player_entry_1", 31),
						(assign, "$bt_player_entry_2", 32),
						(assign, "$bt_player_entry_3", 33),
						(assign, "$bt_player_entry_4", 34),
						(assign, "$bt_player_entry_5", 35),
						(assign, "$bt_player_entry_6", 36),
						(assign, "$bt_player_entry_7", 37),
						(assign, "$bt_player_entry_8", 38),
						(assign, "$bt_player_entry_9", 39),
						(assign, "$bt_enemy_entry_1", 1),
						(assign, "$bt_enemy_entry_2", 2),
						(assign, "$bt_enemy_entry_3", 3),
						(assign, "$bt_enemy_entry_4", 4),
						(assign, "$bt_enemy_entry_5", 5),
						(assign, "$bt_enemy_entry_6", 6),
						(assign, "$bt_enemy_entry_7", 7),
						(assign, "$bt_enemy_entry_8", 8),
						(assign, "$bt_enemy_entry_9", 9),
						(assign, "$player_start_entry", 40),
						(assign, "$enemy_start_entry", 0),
						(assign, "$player_retreat_entry_begin", 122),
						(assign, "$player_retreat_entry_end", 126),
						(assign, "$enemy_retreat_entry_begin", 112),
						(assign, "$enemy_retreat_entry_end", 116),
						(assign, "$player_outer_entry_1", 126),
						(assign, "$player_outer_entry_2", 125),
						(assign, "$player_outer_entry_3", 124),
						(assign, "$player_outer_entry_4", 123),
						(assign, "$player_outer_entry_5", 122),
						(assign, "$player_outer_entry_6", 121),
						(assign, "$enemy_outer_entry_1", 116),
						(assign, "$enemy_outer_entry_2", 115),
						(assign, "$enemy_outer_entry_3", 114),
						(assign, "$enemy_outer_entry_4", 113),
						(assign, "$enemy_outer_entry_5", 112),
						(assign, "$enemy_outer_entry_6", 111),
					(try_end),
				(else_try),
					(this_or_next|eq, "$battle_tile_type", 6),
					(this_or_next|eq, "$battle_tile_type", 5),
					(this_or_next|eq, "$battle_tile_type", 4),
					(this_or_next|eq, "$battle_tile_type", 2),
					(eq, "$battle_tile_type", 3),
					(try_begin),
						(eq, "$bt_terrain_strategy_state", 1),
						(assign, "$bt_enemy_entry_1", 41),
						(assign, "$bt_enemy_entry_2", 42),
						(assign, "$bt_enemy_entry_3", 43),
						(assign, "$bt_enemy_entry_4", 44),
						(assign, "$bt_enemy_entry_5", 45),
						(assign, "$bt_enemy_entry_6", 46),
						(assign, "$bt_enemy_entry_7", 47),
						(assign, "$bt_enemy_entry_8", 48),
						(assign, "$bt_enemy_entry_9", 49),
						(assign, "$bt_player_entry_1", 1),
						(assign, "$bt_player_entry_2", 2),
						(assign, "$bt_player_entry_3", 3),
						(assign, "$bt_player_entry_4", 4),
						(assign, "$bt_player_entry_5", 5),
						(assign, "$bt_player_entry_6", 6),
						(assign, "$bt_player_entry_7", 7),
						(assign, "$bt_player_entry_8", 8),
						(assign, "$bt_player_entry_9", 9),
						(assign, "$player_start_entry", 0),
						(assign, "$enemy_start_entry", 40),
						(assign, "$player_retreat_entry_begin", 1),
						(assign, "$player_retreat_entry_end", 9),
						(assign, "$enemy_retreat_entry_begin", 31),
						(assign, "$enemy_retreat_entry_end", 39),
						(assign, "$player_outer_entry_1", 1),
						(assign, "$player_outer_entry_2", 2),
						(assign, "$player_outer_entry_3", 3),
						(assign, "$player_outer_entry_4", 4),
						(assign, "$player_outer_entry_5", 5),
						(assign, "$player_outer_entry_6", 6),
						(assign, "$enemy_outer_entry_1", 31),
						(assign, "$enemy_outer_entry_2", 32),
						(assign, "$enemy_outer_entry_3", 33),
						(assign, "$enemy_outer_entry_4", 34),
						(assign, "$enemy_outer_entry_5", 35),
						(assign, "$enemy_outer_entry_6", 36),
					(else_try),
						(eq, "$bt_terrain_strategy_state", 2),
						(assign, "$bt_player_entry_1", 11),
						(assign, "$bt_player_entry_2", 12),
						(assign, "$bt_player_entry_3", 13),
						(assign, "$bt_player_entry_4", 14),
						(assign, "$bt_player_entry_5", 15),
						(assign, "$bt_player_entry_6", 16),
						(assign, "$bt_player_entry_7", 17),
						(assign, "$bt_player_entry_8", 18),
						(assign, "$bt_player_entry_9", 19),
						(assign, "$bt_enemy_entry_1", 31),
						(assign, "$bt_enemy_entry_2", 32),
						(assign, "$bt_enemy_entry_3", 33),
						(assign, "$bt_enemy_entry_4", 34),
						(assign, "$bt_enemy_entry_5", 35),
						(assign, "$bt_enemy_entry_6", 36),
						(assign, "$bt_enemy_entry_7", 37),
						(assign, "$bt_enemy_entry_8", 38),
						(assign, "$bt_enemy_entry_9", 39),
						(assign, "$player_start_entry", 0),
						(assign, "$enemy_start_entry", 40),
						(assign, "$player_retreat_entry_begin", 1),
						(assign, "$player_retreat_entry_end", 9),
						(assign, "$enemy_retreat_entry_begin", 31),
						(assign, "$enemy_retreat_entry_end", 39),
						(assign, "$player_outer_entry_1", 1),
						(assign, "$player_outer_entry_2", 2),
						(assign, "$player_outer_entry_3", 3),
						(assign, "$player_outer_entry_4", 4),
						(assign, "$player_outer_entry_5", 5),
						(assign, "$player_outer_entry_6", 6),
						(assign, "$enemy_outer_entry_1", 31),
						(assign, "$enemy_outer_entry_2", 32),
						(assign, "$enemy_outer_entry_3", 33),
						(assign, "$enemy_outer_entry_4", 34),
						(assign, "$enemy_outer_entry_5", 35),
						(assign, "$enemy_outer_entry_6", 36),
					(try_end),
				(try_end),
				(assign, "$bt_charge_only", 0),
				(try_begin),
					(this_or_next|eq, "$battle_tactics_type", 3),
					(this_or_next|eq, "$battle_tactics_type", 8),
					(this_or_next|eq, "$battle_tile_type", 10),
					(this_or_next|eq, "$battle_tile_type", 9),
					(eq, "$battle_tile_type", 2),
					(assign, "$bt_charge_only", 1),
				(else_try),
					(eq, "$low_encounter_battle", 1),
					(assign, "$bt_charge_only", 3),
				(else_try),
					(this_or_next|eq, "$battle_tile_type", 5),
					(eq, "$battle_tile_type", 6),
					(this_or_next|eq, "$bt_terrain_strategy_state", 1),
					(eq, "$bt_terrain_strategy_state", 2),
					(assign, "$bt_charge_only", 1),
				(else_try),
					(this_or_next|eq, "$battle_tactics_type", 5),
					(this_or_next|eq, "$battle_tactics_type", 2),
					(eq, "$battle_tactics_type", 1),
					(assign, "$bt_charge_only", 2),
				(try_end),
				(assign, "$bt_runaway_impossible", 0),
				(try_begin),
					(eq, "$battle_tactics_type", 7),
					(assign, "$bt_runaway_impossible", 2),
				(else_try),
					(this_or_next|eq, "$battle_tactics_type", 3),
					(this_or_next|eq, "$battle_tactics_type", 8),
					(this_or_next|eq, "$battle_tile_type", 2),
					(this_or_next|eq, "$battle_tile_type", 3),
					(this_or_next|eq, "$battle_tile_type", 5),
					(this_or_next|eq, "$battle_tile_type", 9),
					(this_or_next|eq, "$battle_tile_type", 10),
					(eq, "$low_encounter_battle", 1),
					(assign, "$bt_runaway_impossible", 1),
				(try_end),
				(assign, "$bt_just_battle", 0),
				(try_begin),
					(this_or_next|eq, "$battle_tile_type", 6),
					(this_or_next|eq, "$battle_tile_type", 5),
					(this_or_next|eq, "$battle_tile_type", 3),
					(this_or_next|eq, "$battle_tile_type", 2),
					(this_or_next|eq, "$battle_tactics_type", 8),
					(this_or_next|eq, "$battle_tactics_type", 6),
					(this_or_next|eq, "$battle_tactics_type", 5),
					(this_or_next|eq, "$battle_tactics_type", 3),
					(this_or_next|eq, "$battle_tactics_type", 2),
					(this_or_next|eq, "$battle_tactics_type", 1),
					(eq, "$low_encounter_battle", 1),
					(assign, "$bt_just_battle", 1),
				(try_end),
				(assign, "$bt_need_ai_fast_decision", 0),
				(try_begin),
					(this_or_next|eq, "$battle_tile_type", 2),
					(this_or_next|eq, "$battle_tile_type", 4),
					(eq, "$battle_tile_type", 3),
					(eq, "$bt_terrain_strategy_state", 1),
					(assign, "$bt_need_ai_fast_decision", 1),
				(else_try),
					(this_or_next|eq, "$low_encounter_battle", 1),
					(gt, "$battle_tactics_type", 0),
					(assign, "$bt_need_ai_fast_decision", 2),
				(try_end),
				(assign, "$wm_allow_retreat", 1),
				(try_begin),
					(eq, "$bt_terrain_strategy_state", 2),
					(assign, "$wm_allow_retreat", 0),
				(try_end),
				(set_jump_mission, ":value_10"),
				(assign, "$current_mission_template", ":value_10"),
				(assign, "$molda_battle_scn_vari", ":value_4"),
				(call_script, "script_setup_random_scene"),
				(call_script, "script_tact_modifier"),
				(troop_set_health, "trp_player", 100),
				(troop_set_health, "$enemy_commander", 100),
				(call_script, "script_assistant_lord_rand"),
				(call_script, "script_bt_fb_mission_pre"),
				(call_script, "script_bt_scale_sett"),
				(set_visitor, "$bt_player_entry_9", "trp_player"),
				(call_script, "script_rand_glob_dice"),
				(change_screen_mission),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_duel"),
				(assign, "$bt_cant_withdrawal", 1),
				(assign, "$surrender_yes_or_no", 0),
				(assign, "$withdawal_yes_or_no", 0),
				(assign, "$ai_suggest_duel_yes_or_no", 0),
				(assign, "$wm_try_duel", 1),
				(store_attribute_level, ":attribute_level_enemy_commander_0", "$enemy_commander", 0),
				(try_begin),
					(ge, ":attribute_level_enemy_commander_0", 225),
					(assign, ":value_11", 75),
				(else_try),
					(ge, ":attribute_level_enemy_commander_0", 175),
					(assign, ":value_11", 80),
				(else_try),
					(ge, ":attribute_level_enemy_commander_0", 125),
					(assign, ":value_11", 85),
				(else_try),
					(assign, ":value_11", 90),
				(try_end),
				(try_begin),
					(ge, "$random_duel_offer", ":value_11"),
					(assign, "$wm_duel_persnal", 0),
					(assign, "$wm_battle_result_state", 0),
					(assign, "$wm_duel_won", 0),
					(assign, "$wm_talk_state", 0),
					(assign, "$wm_quest_mission_anti_skip_menu", 0),
					(assign, "$molda_start_map_conversation", -1),
					(assign, "$bt_terrain_strategy_state", 3),
					(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
					(try_begin),
						(neq, ":current_terrain_main_party", 2),
						(neq, ":current_terrain_main_party", 7),
						(set_jump_mission, "mt_duel_mission"),
						(assign, "$current_mission_template", "mt_duel_mission"),
					(else_try),
						(set_jump_mission, "mt_duel_mission_sea"),
						(assign, "$current_mission_template", "mt_duel_mission_sea"),
					(try_end),
					(assign, "$molda_battle_scn_vari", 44),
					(call_script, "script_setup_random_scene"),
					(troop_set_health, "trp_player", 100),
					(troop_set_health, "$enemy_commander", 100),
					(set_visitor, 0, "trp_player"),
					(set_visitor, 1, "$enemy_commander"),
					(change_screen_mission),
					(display_message, "str_duel_accepted", 0x00ffff00),
				(else_try),
					(display_message, "str_duel_rejected", 0x00ff0000),
					(start_presentation, "prsnt_battle_tile_pst"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_scale"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(lt, "$battle_tile_type", 100),
					(lt, "$bt_scale_mult", 490),
					(val_add, "$bt_scale_mult", 10),
				(else_try),
					(store_add, ":value_12", 40, 1),
					(val_add, "$bt_army_scale_mul", 1),
					(val_mod, "$bt_army_scale_mul", ":value_12"),
					(val_clamp, "$bt_army_scale_mul", 7, ":value_12"),
					(store_mul, "$bt_army_scale", "$bt_army_scale_mul", 25),
				(try_end),
				(start_presentation, "prsnt_battle_tile_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_surrender"),
				(play_sound, "snd_pst_click"),
				(assign, "$surrender_yes_or_no", 1),
				(assign, "$withdawal_yes_or_no", 0),
				(assign, "$ai_suggest_duel_yes_or_no", 0),
				(start_presentation, "prsnt_battle_tile_pst"),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_withdrawal"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$is_escape", 1),
					(assign, ":var_21", "$random_succ_100_erand"),
					(try_begin),
						(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
						(neq, ":current_terrain_main_party", 2),
						(neq, ":current_terrain_main_party", 7),
						(troop_get_slot, ":player_love_interest_1", "trp_player", slot_troop_love_interest_1),
					(else_try),
						(troop_get_slot, ":player_love_interest_1", "trp_player", slot_troop_love_interest_2),
					(try_end),
					(val_mul, ":player_love_interest_1", 6),
					(val_add, ":var_21", ":player_love_interest_1"),
					(try_begin),
						(party_slot_eq, "$wm_target_party", slot_party_type, 1),
						(ge, "$enemy_army_size", 1000),
						(le, "$player_army_size", 200),
						(val_add, ":var_21", 34),
					(try_end),
					(try_begin),
						(ge, ":var_21", 70),
						(display_message, "str_escape_succ", 0x0000ff00),
						(call_script, "script_remove_all_prisoners"),
						(call_script, "script_main_party_escape_pos_set"),
						(presentation_set_duration, 0),
						(jump_to_menu, "mnu_wm_pst_map_return"),
								#####MUSICBOX
				(play_track, "track_reset_silence", 1), #Enforces new tracks to play ASAP.
		(music_set_situation, 0x00010000),
		#Debug
		#(display_message, "@Debug: Initializing travel music, this should only show if withdrawing from the battle during the confrontation.", 0x0000ff00),
					(else_try),
						(assign, "$bt_terrain_strategy_state", 3),
						(assign, "$bt_cant_withdrawal", 0),
						(display_message, "str_escape_fail", 0x00ffff00),
						(start_presentation, "prsnt_battle_tile_pst"),
					(try_end),
					(call_script, "script_rand_glob_dice"),
				(else_try),
					(assign, "$surrender_yes_or_no", 0),
					(assign, "$withdawal_yes_or_no", 1),
					(assign, "$ai_suggest_duel_yes_or_no", 0),
					(start_presentation, "prsnt_battle_tile_pst"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_yess"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(eq, "$surrender_yes_or_no", 1),
					(call_script, "script_wm_honor_change_diff", "trp_player", 2, 34),
					(call_script, "script_remove_all_prisoners"),
					(call_script, "script_stack_kill_sc", 40, 0, 0, 0),
					(assign, "$is_prisoner", 1),
					(assign, ":value_13", 0),
					(assign, "$meeting_add_troop_no", 0),
					(store_random_in_range, ":random_in_range_0_2", 0, 3),
					(try_begin),
						(eq, "$adult_content", 1),
						(eq, "$is_prisoner", 1),
						(eq, ":random_in_range_0_2", 0),
						(call_script, "script_troop_type_sett", "trp_player"),
						(lt, "$troop_gender_type", 10),
						(is_between, "$enemy_commander", "trp_tt_lord_01_00", "trp_tt_lord_end"),
						(call_script, "script_troop_type_sett", "$enemy_commander"),
						(lt, "$troop_gender_type", 10),
						(neg|troop_slot_ge, "$enemy_commander", 2, -50),
						(troop_get_slot, ":enemy_commander_player_order_object", "$enemy_commander", slot_troop_player_order_object),
						(this_or_next|eq, ":enemy_commander_player_order_object", 1),
						(eq, ":enemy_commander_player_order_object", 5),
						(try_for_range, ":troop", "trp_tt_lady_01_01", "trp_tt_lady_end"),
							(troop_slot_eq, "trp_player", slot_troop_state, ":troop"),
							(troop_slot_eq, ":troop", slot_troop_state, "trp_player"),
							(call_script, "script_wm_main_party_has_troop_sc", ":troop"),
							(eq, "$wm_comp_continue", 1),
							(neg|troop_slot_eq, ":troop", slot_troop_party_template, "$enemy_commander"),
							(neg|troop_slot_eq, ":troop", slot_troop_met, "$enemy_commander"),
							(assign, "$meeting_add_troop_no", ":troop"),
							(assign, ":value_13", 1),
						(try_end),
					(try_end),
					(assign, ":value_14", 0),
					(store_random_in_range, ":random_in_range_0_3", 0, 3),
					(try_begin),
						(eq, "$adult_content", 1),
						(eq, "$is_prisoner", 1),
						(eq, ":random_in_range_0_3", 0),
						(eq, ":value_13", 0),
						(call_script, "script_troop_type_sett", "trp_player"),
						(gt, "$troop_gender_type", 10),
						(call_script, "script_troop_type_sett", "$enemy_commander"),
						(lt, "$troop_gender_type", 10),
						(try_begin),
							(is_between, "$enemy_commander", "trp_tt_lord_01_00", "trp_tt_lord_end"),
							(neg|troop_slot_ge, "$enemy_commander", 2, -50),
							(troop_get_slot, ":enemy_commander_player_order_object", "$enemy_commander", slot_troop_player_order_object),
							(this_or_next|eq, ":enemy_commander_player_order_object", 1),
							(eq, ":enemy_commander_player_order_object", 5),
							(assign, ":value_14", 1),
							(assign, ":value_13", 1),
						(try_end),
					(try_end),
					(try_begin),
						(eq, "$is_prisoner", 1),
						(is_between, "$enemy_commander", "trp_tt_lord_01_00", "trp_tt_lord_end"),
						(troop_slot_eq, "$enemy_commander", 41, 3),
						(assign, "$molda_start_map_conversation", -1),
						(jump_to_menu, "mnu_wm_game_over"),
						(display_message, "str_ply_taken_pri", 0x00ff0000),
					(else_try),
						(eq, "$is_prisoner", 1),
						(eq, ":value_14", 1),
						(is_between, "$enemy_commander", "trp_tt_lord_01_00", "trp_tt_lord_end"),
						(le, "$molda_start_map_conversation", 0),
						(assign, "$molda_start_map_conversation", "$enemy_commander"),
						(assign, "$wm_talk_state", 14),
						(jump_to_menu, "mnu_molda_map_talk"),
						(display_message, "str_ply_taken_pri", 0x00ff0000),
						(call_script, "script_initialize_main_party"),
					(else_try),
						(eq, "$is_prisoner", 1),
						(is_between, "$meeting_add_troop_no", "trp_tt_lady_01_01", "trp_tt_lady_end"),
						(troop_slot_eq, "trp_player", slot_troop_state, "$meeting_add_troop_no"),
						(troop_slot_eq, "$meeting_add_troop_no", slot_troop_state, "trp_player"),
						(is_between, "$enemy_commander", "trp_tt_lord_01_00", "trp_tt_lord_end"),
						(le, "$molda_start_map_conversation", 0),
						(assign, "$molda_start_map_conversation", "$enemy_commander"),
						(assign, "$wm_talk_state", 8),
						(jump_to_menu, "mnu_molda_map_talk"),
						(display_message, "str_ply_taken_pri", 0x00ff0000),
						(call_script, "script_initialize_main_party"),
					(else_try),
						(eq, "$is_prisoner", 1),
						(assign, "$molda_start_map_conversation", -1),
						(jump_to_menu, "mnu_wm_player_prisoner"),
						(display_message, "str_ply_taken_pri", 0x00ff0000),
					(try_end),
				(else_try),
					(eq, "$withdawal_yes_or_no", 1),
					(assign, "$molda_start_map_conversation", -1),
					(jump_to_menu, "mnu_wm_pst_map_return"),
				(else_try),
					(eq, "$ai_suggest_duel_yes_or_no", 1),
					(assign, "$wm_duel_persnal", 0),
					(assign, "$wm_battle_result_state", 0),
					(assign, "$wm_duel_won", 0),
					(assign, "$wm_talk_state", 0),
					(assign, "$wm_quest_mission_anti_skip_menu", 0),
					(assign, "$molda_start_map_conversation", -1),
					(assign, "$bt_terrain_strategy_state", 3),
					(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
					(try_begin),
						(neq, ":current_terrain_main_party", 2),
						(neq, ":current_terrain_main_party", 7),
						(set_jump_mission, "mt_duel_mission"),
						(assign, "$current_mission_template", "mt_duel_mission"),
					(else_try),
						(set_jump_mission, "mt_duel_mission_sea"),
						(assign, "$current_mission_template", "mt_duel_mission_sea"),
					(try_end),
					(assign, "$molda_battle_scn_vari", 44),
					(call_script, "script_setup_random_scene"),
					(troop_set_health, "trp_player", 100),
					(troop_set_health, "$enemy_commander", 100),
					(set_visitor, 0, "trp_player"),
					(set_visitor, 1, "$enemy_commander"),
					(change_screen_mission),
				(try_end),
				(assign, "$surrender_yes_or_no", 0),
				(assign, "$withdawal_yes_or_no", 0),
				(assign, "$ai_suggest_duel_yes_or_no", 0),
			(else_try),
				(eq, ":trigger_param_1", "$battle_tile_noo"),
				(play_sound, "snd_pst_click"),
				(assign, "$surrender_yes_or_no", 0),
				(assign, "$withdawal_yes_or_no", 0),
				(assign, "$ai_suggest_duel_yes_or_no", 0),
				(start_presentation, "prsnt_battle_tile_pst"),
			(try_end)
		]),

		(ti_on_presentation_mouse_press,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(eq, ":trigger_param_2", 1),
			(try_begin),
				(eq, ":trigger_param_1", "$battle_tile_scale"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(lt, "$battle_tile_type", 100),
					(gt, "$bt_scale_mult", 30),
					(val_sub, "$bt_scale_mult", 10),
				(else_try),
					(store_add, ":value", 40, 1),
					(val_sub, "$bt_army_scale_mul", 1),
					(val_mod, "$bt_army_scale_mul", ":value"),
					(val_clamp, "$bt_army_scale_mul", 7, ":value"),
					(store_mul, "$bt_army_scale", "$bt_army_scale_mul", 25),
				(try_end),
				(start_presentation, "prsnt_battle_tile_pst"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("town_encounter", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(call_script, "script_set_town_picture_for_pst"),
			(assign, ":var_1", "$temp_num_01"),
			(create_mesh_overlay, reg0, ":var_1"),
			(position_set_x, 1, 0),
			(position_set_y, 1, 0),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(create_button_overlay, "$pst_town_save", "str_save_and_exitt", 16),
			(position_set_x, 1, 450),
			(position_set_y, 1, 55),
			(overlay_set_position, "$pst_town_save", 1),
			(overlay_set_color, "$pst_town_save", 16776960),
			(create_mesh_overlay, reg0, "mesh_white_plane_center"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 450),
			(position_set_y, 1, 55),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 6000),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(create_button_overlay, "$pst_town_exit", "str_exittt", 16),
			(position_set_x, 1, 450),
			(position_set_y, 1, 105),
			(overlay_set_position, "$pst_town_exit", 1),
			(overlay_set_color, "$pst_town_exit", 16777215),
			(create_mesh_overlay, reg0, "mesh_white_plane_center"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 450),
			(position_set_y, 1, 105),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 6000),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(store_faction_of_party, ":faction_of_party_g_encountered_party", "$g_encountered_party"),
			(assign, ":value", 0),
			(try_begin),
				(eq, "$g_encountered_party", "p_rome"),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_palace", "str_t_palace", 16),
			(else_try),
				(eq, "$g_encountered_party", "p_kyoto"),
				(faction_slot_eq, ":faction_of_party_g_encountered_party", 27, 15),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_palace", "str_t_palace", 16),
			(else_try),
				(create_text_overlay, "$pst_town_palace", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 499),
			(position_set_y, 1, 667),
			(overlay_set_position, "$pst_town_palace", 1),
			(overlay_set_color, "$pst_town_palace", 16777215),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 499),
				(position_set_y, 1, 667),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 9000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(str_store_party_name, 8, "$g_encountered_party"),
			(create_button_overlay, "$pst_town_hall", "str_glob_s8", 16),
			(position_set_x, 1, 499),
			(position_set_y, 1, 627),
			(overlay_set_position, "$pst_town_hall", 1),
			(overlay_set_color, "$pst_town_hall", 16777215),
			(create_mesh_overlay, reg0, "mesh_white_plane_center"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 499),
			(position_set_y, 1, 627),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 9000),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(assign, ":value", 0),
			(try_begin),
				(is_between, "$wm_player_fac", "fac_kingdom_1", "fac_kingdoms_end"),
				(faction_get_slot, ":wm_player_fac_29", "$wm_player_fac", 29),
				(eq, "$g_encountered_party", ":wm_player_fac_29"),
				(assign, ":value", 1),
				(neq, "$disable_coups", 1),
				(create_button_overlay, "$pst_town_coup", "str_t_coup", 16),
			(else_try),
				(create_text_overlay, "$pst_town_coup", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 499),
			(position_set_y, 1, 558),
			(overlay_set_position, "$pst_town_coup", 1),
			(overlay_set_color, "$pst_town_coup", 16711680),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 499),
				(position_set_y, 1, 558),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 7500),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(create_button_overlay, "$pst_town_tavern", "str_t_tavern", 16),
			(position_set_x, 1, 102),
			(position_set_y, 1, 450),
			(overlay_set_position, "$pst_town_tavern", 1),
			(try_begin),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_merchant, 1),
				(party_slot_eq, "$g_encountered_party", slot_town_merchant, 2),
				(overlay_set_color, "$pst_town_tavern", 16776960),
			(else_try),
				(overlay_set_color, "$pst_town_tavern", 16777215),
			(try_end),
			(create_mesh_overlay, reg0, "mesh_white_plane_center"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 102),
			(position_set_y, 1, 450),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 6000),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(create_button_overlay, "$pst_town_fightpit", "str_t_fight_pit", 16),
			(position_set_x, 1, 102),
			(position_set_y, 1, 500),
			(overlay_set_position, "$pst_town_fightpit", 1),
			(overlay_set_color, "$pst_town_fightpit", 16777215),
			(create_mesh_overlay, reg0, "mesh_white_plane_center"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 102),
			(position_set_y, 1, 500),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 6000),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(create_button_overlay, "$pst_town_street", "str_t_street", 16),
			(position_set_x, 1, 905),
			(position_set_y, 1, 495),
			(overlay_set_position, "$pst_town_street", 1),
			(try_begin),
				(this_or_next|eq, "$qquest_type", 24),
				(eq, "$qquest_type", 2),
				(eq, "$qquest_target_party", "$g_encountered_party"),
				(overlay_set_color, "$pst_town_street", 16776960),
			(else_try),
				(overlay_set_color, "$pst_town_street", 16777215),
			(try_end),
			(create_mesh_overlay, reg0, "mesh_white_plane_center"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 905),
			(position_set_y, 1, 495),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 7000),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(assign, ":value", 0),
			(try_begin),
				(party_slot_ge, "$g_encountered_party", 21, 20),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_bath", "str_t_public_bath", 16),
			(else_try),
				(create_text_overlay, "$pst_town_bath", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 905),
			(position_set_y, 1, 445),
			(overlay_set_position, "$pst_town_bath", 1),
			(overlay_set_color, "$pst_town_bath", 16777215),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 905),
				(position_set_y, 1, 445),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 7000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(try_begin),
				(this_or_next|eq, "$hourr_count", 19),
				(eq, "$hourr_count", 20),
				(create_button_overlay, "$pst_town_market", "str_t_night_market", 16),
			(else_try),
				(create_button_overlay, "$pst_town_market", "str_t_market", 16),
			(try_end),
			(position_set_x, 1, 375),
			(position_set_y, 1, 500),
			(overlay_set_position, "$pst_town_market", 1),
			(overlay_set_color, "$pst_town_market", 16777215),
			(create_mesh_overlay, reg0, "mesh_white_plane_center"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 375),
			(position_set_y, 1, 500),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 6000),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(assign, ":value", 0),
			(try_begin),
				(party_slot_ge, "$g_encountered_party", 19, 20),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_tradep", "str_t_tradepost", 16),
			(else_try),
				(create_text_overlay, "$pst_town_tradep", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 375),
			(position_set_y, 1, 450),
			(overlay_set_position, "$pst_town_tradep", 1),
			(overlay_set_color, "$pst_town_tradep", 16777215),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 375),
				(position_set_y, 1, 450),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 6000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(assign, ":value", 0),
			(try_begin),
				(party_slot_ge, "$g_encountered_party", 19, 30),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_bank", "str_t_bank", 16),
			(else_try),
				(create_text_overlay, "$pst_town_bank", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 375),
			(position_set_y, 1, 400),
			(overlay_set_position, "$pst_town_bank", 1),
			(overlay_set_color, "$pst_town_bank", 16777215),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 375),
				(position_set_y, 1, 400),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 6000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(create_button_overlay, "$pst_town_library", "str_t_library", 16),
			(position_set_x, 1, 661),
			(position_set_y, 1, 465),
			(overlay_set_position, "$pst_town_library", 1),
			(overlay_set_color, "$pst_town_library", 16777215),
			(create_mesh_overlay, reg0, "mesh_white_plane_center"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 661),
			(position_set_y, 1, 465),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 7000),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(assign, ":value", 0),
			(try_begin),
				(party_slot_ge, "$g_encountered_party", 20, 20),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_bstore", "str_t_book_store", 16),
			(else_try),
				(create_text_overlay, "$pst_town_bstore", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 661),
			(position_set_y, 1, 415),
			(overlay_set_position, "$pst_town_bstore", 1),
			(overlay_set_color, "$pst_town_bstore", 16777215),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 661),
				(position_set_y, 1, 415),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 7000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(assign, ":value", 0),
			(try_begin),
				(eq, "$main_q_party", "$g_encountered_party"),
				(create_button_overlay, "$pst_town_academy", "str_t_academy", 16),
				(assign, ":value", 1),
			(else_try),
				(party_slot_ge, "$g_encountered_party", 20, 30),
				(create_button_overlay, "$pst_town_academy", "str_t_academy", 16),
				(assign, ":value", 1),
			(else_try),
				(create_text_overlay, "$pst_town_academy", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 661),
			(position_set_y, 1, 365),
			(overlay_set_position, "$pst_town_academy", 1),
			(overlay_set_color, "$pst_town_academy", 16777215),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 661),
				(position_set_y, 1, 365),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 7000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(assign, ":value", 0),
			(try_begin),
				(party_slot_ge, "$g_encountered_party", 22, 14000),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_cpost", "str_t_command_post", 16),
			(else_try),
				(create_text_overlay, "$pst_town_cpost", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 905),
			(position_set_y, 1, 395),
			(overlay_set_position, "$pst_town_cpost", 1),
			(overlay_set_color, "$pst_town_cpost", 16777215),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 905),
				(position_set_y, 1, 395),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 8000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party", "p_main_party"),
			(assign, ":value", 0),
			(try_begin),
				(gt, ":party_size_wo_prisoners_main_party", 300),
				(store_faction_of_party, ":faction_of_party_g_encountered_party_2", "$g_encountered_party"),
				(store_relation, ":relation_wm_player_fac_faction_of_party_g_encountered_party_2", "$wm_player_fac", ":faction_of_party_g_encountered_party_2"),
				(ge, ":relation_wm_player_fac_faction_of_party_g_encountered_party_2", 0),
				(neg|is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_army_stay", "str_t_armystay_1", 16),
			(else_try),
				(le, ":party_size_wo_prisoners_main_party", 300),
				(store_faction_of_party, ":faction_of_party_g_encountered_party_2", "$g_encountered_party"),
				(store_relation, ":relation_wm_player_fac_faction_of_party_g_encountered_party_2", "$wm_player_fac", ":faction_of_party_g_encountered_party_2"),
				(ge, ":relation_wm_player_fac_faction_of_party_g_encountered_party_2", 0),
				(is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
				(eq, "$ply_staying_party_no", "$g_encountered_party"),
				(assign, ":value", 1),
				(assign, reg8, "$ply_staying_army_size"),
				(create_button_overlay, "$pst_town_army_stay", "str_t_armystay_2", 16),
			(else_try),
				(create_text_overlay, "$pst_town_army_stay", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 663),
			(position_set_y, 1, 225),
			(overlay_set_position, "$pst_town_army_stay", 1),
			(overlay_set_color, "$pst_town_army_stay", 16777215),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 663),
				(position_set_y, 1, 225),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 7000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party", "p_main_party"),
			(assign, ":value", 0),
			(try_begin),
				(is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
				(neq, "$ply_staying_party_no", "$g_encountered_party"),
				(le, ":party_size_wo_prisoners_main_party", 300),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_recruit", "str_t_preparation", 16),
			(else_try),
				(is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
				(eq, "$ply_staying_party_no", "$g_encountered_party"),
				(eq, "$ply_staying_army_recruit_on", 0),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_recruit", "str_t_armystay_rec_off", 16),
			(else_try),
				(is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
				(eq, "$ply_staying_party_no", "$g_encountered_party"),
				(eq, "$ply_staying_army_recruit_on", 1),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_recruit", "str_t_armystay_rec_on", 16),
			(else_try),
				(gt, ":party_size_wo_prisoners_main_party", 300),
				(store_faction_of_party, ":faction_of_party_g_encountered_party_2", "$g_encountered_party"),
				(store_relation, ":relation_wm_player_fac_faction_of_party_g_encountered_party_2", "$wm_player_fac", ":faction_of_party_g_encountered_party_2"),
				(ge, ":relation_wm_player_fac_faction_of_party_g_encountered_party_2", 0),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_recruit", "str_t_recruit", 16),
			(else_try),
				(store_faction_of_party, ":faction_of_party_g_encountered_party_2", "$g_encountered_party"),
				(store_relation, ":relation_wm_player_fac_faction_of_party_g_encountered_party_2", "$wm_player_fac", ":faction_of_party_g_encountered_party_2"),
				(ge, ":relation_wm_player_fac_faction_of_party_g_encountered_party_2", 0),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_recruit", "str_t_preparation", 16),
			(else_try),
				(create_text_overlay, "$pst_town_recruit", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 663),
			(position_set_y, 1, 175),
			(overlay_set_position, "$pst_town_recruit", 1),
			(overlay_set_color, "$pst_town_recruit", 16777215),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 663),
				(position_set_y, 1, 175),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 7000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(call_script, "script_wm_troop_type_depend_train", "$g_encountered_party", 50),
			(str_store_troop_name, 8, "$temp_party_troop_01"),
			(try_begin),
				(gt, ":party_size_wo_prisoners_main_party", 300),
				(create_button_overlay, "$pst_town_hire", "str_t_select", 16),
			(else_try),
				(create_button_overlay, "$pst_town_hire", "str_t_hire", 16),
			(try_end),
			(position_set_x, 1, 663),
			(position_set_y, 1, 125),
			(overlay_set_position, "$pst_town_hire", 1),
			(overlay_set_color, "$pst_town_hire", 16777215),
			(create_mesh_overlay, reg0, "mesh_white_plane_center"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 663),
			(position_set_y, 1, 125),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 7000),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(assign, ":value", 0),
			(try_begin),
				(store_faction_of_party, ":faction_of_party_g_encountered_party_2", "$g_encountered_party"),
				(store_relation, ":relation_wm_player_fac_faction_of_party_g_encountered_party_2", "$wm_player_fac", ":faction_of_party_g_encountered_party_2"),
				(ge, ":relation_wm_player_fac_faction_of_party_g_encountered_party_2", 0),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_train", "str_t_training", 16),
			(else_try),
				(create_text_overlay, "$pst_town_train", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 663),
			(position_set_y, 1, 75),
			(overlay_set_position, "$pst_town_train", 1),
			(overlay_set_color, "$pst_town_train", 16777215),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 663),
				(position_set_y, 1, 75),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 7000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(assign, ":value", 0),
			(try_begin),
				(store_faction_of_party, ":faction_of_party_g_encountered_party_2", "$g_encountered_party"),
				(store_relation, ":relation_wm_player_fac_faction_of_party_g_encountered_party_2", "$wm_player_fac", ":faction_of_party_g_encountered_party_2"),
				(ge, ":relation_wm_player_fac_faction_of_party_g_encountered_party_2", 0),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_rest", "str_t_waiting", 16),
			(else_try),
				(create_text_overlay, "$pst_town_rest", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 663),
			(position_set_y, 1, 25),
			(overlay_set_position, "$pst_town_rest", 1),
			(overlay_set_color, "$pst_town_rest", 16777215),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 663),
				(position_set_y, 1, 25),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 7000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(assign, ":value", 0),
			(try_begin),
				(neg|is_currently_night),
				(party_slot_eq, "$g_encountered_party", slot_party_last_toll_paid_hours, 1),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_tournament", "str_t_tournament", 16),
				(overlay_set_color, "$pst_town_tournament", 16776960),
			(else_try),
				(neg|is_currently_night),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_tournament", "str_t_arena", 16),
				(overlay_set_color, "$pst_town_tournament", 16777215),
			(else_try),
				(create_text_overlay, "$pst_town_tournament", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 704),
			(position_set_y, 1, 615),
			(overlay_set_position, "$pst_town_tournament", 1),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 704),
				(position_set_y, 1, 615),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 7000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(create_button_overlay, "$pst_town_mansion", "str_t_noble", 16),
			(overlay_set_color, "$pst_town_mansion", 16777215),
			(position_set_x, 1, 265),
			(position_set_y, 1, 600),
			(overlay_set_position, "$pst_town_mansion", 1),
			(create_mesh_overlay, reg0, "mesh_white_plane_center"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 265),
			(position_set_y, 1, 600),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 8000),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(assign, ":value", 0),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_town_tavern, "trp_player"),
				(party_slot_eq, "$g_encountered_party", slot_town_lord, 1),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_auto", "str_automation_on", 16),
			(else_try),
				(party_slot_eq, "$g_encountered_party", slot_town_tavern, "trp_player"),
				(party_slot_eq, "$g_encountered_party", slot_town_lord, 0),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_auto", "str_automation_off", 16),
			(else_try),
				(create_text_overlay, "$pst_town_auto", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 905),
			(position_set_y, 1, 710),
			(overlay_set_position, "$pst_town_auto", 1),
			(overlay_set_color, "$pst_town_auto", 16777215),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 905),
				(position_set_y, 1, 710),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 9000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(create_button_overlay, "$pst_town_help", "str_t_town_help", 16),
			(position_set_x, 1, 905),
			(position_set_y, 1, 660),
			(overlay_set_position, "$pst_town_help", 1),
			(overlay_set_color, "$pst_town_help", 16777215),
			(create_mesh_overlay, reg0, "mesh_white_plane_center"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 905),
			(position_set_y, 1, 660),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 6000),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(create_button_overlay, "$pst_town_buy_buildp", "str_t_town_buy_build_p", 16),
			(position_set_x, 1, 905),
			(position_set_y, 1, 700),
			(overlay_set_position, "$pst_town_buy_buildp", 1),
			(overlay_set_color, "$pst_town_buy_buildp", 16777215),
			(create_mesh_overlay, reg0, "mesh_white_plane_center"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 905),
			(position_set_y, 1, 700),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 6000),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(call_script, "script_troop_type_sett", "trp_player"),
			(assign, ":value", 0),
			(try_begin),
				(eq, "$adult_content", 1),
				(lt, "$troop_gender_type", 10),
				(party_slot_eq, "$g_encountered_party", 15, 1),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_quest_tavern", "str_q_raperoftavern", 16),
				(overlay_set_color, "$pst_town_quest_tavern", 16711680),
			(else_try),
				(create_text_overlay, "$pst_town_quest_tavern", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 102),
			(position_set_y, 1, 400),
			(overlay_set_position, "$pst_town_quest_tavern", 1),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 102),
				(position_set_y, 1, 400),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 9000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(assign, ":value", 0),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", 15, 3),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_quest_street", "str_q_grandtheftgem", 16),
				(overlay_set_color, "$pst_town_quest_street", 16711680),
			(else_try),
				(party_slot_eq, "$g_encountered_party", 15, 4),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_quest_street", "str_q_kidnapper", 16),
				(overlay_set_color, "$pst_town_quest_street", 16711680),
			(else_try),
				(party_slot_eq, "$g_encountered_party", 15, 5),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_quest_street", "str_q_sniper", 16),
				(overlay_set_color, "$pst_town_quest_street", 16711680),
			(else_try),
				(party_slot_eq, "$g_encountered_party", 15, 6),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_quest_street", "str_q_duelist", 16),
				(overlay_set_color, "$pst_town_quest_street", 16776960),
			(else_try),
				(create_text_overlay, "$pst_town_quest_street", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 450),
			(position_set_y, 1, 250),
			(overlay_set_position, "$pst_town_quest_street", 1),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 450),
				(position_set_y, 1, 250),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 9000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(call_script, "script_troop_type_sett", "trp_player"),
			(assign, ":value", 0),
			(try_begin),
				(eq, "$adult_content", 1),
				(lt, "$troop_gender_type", 10),
				(party_slot_eq, "$g_encountered_party", 15, 7),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_quest_house", "str_q_raper", 16),
				(overlay_set_color, "$pst_town_quest_house", 16711680),
			(else_try),
				(eq, "$adult_content", 1),
				(party_slot_eq, "$g_encountered_party", 15, 8),
				(assign, ":value", 1),
				(create_button_overlay, "$pst_town_quest_house", "str_q_prostitution", 16),
				(overlay_set_color, "$pst_town_quest_house", 16711680),
			(else_try),
				(create_text_overlay, "$pst_town_quest_house", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 663),
			(position_set_y, 1, 290),
			(overlay_set_position, "$pst_town_quest_house", 1),
			(try_begin),
				(eq, ":value", 1),
				(create_mesh_overlay, reg0, "mesh_white_plane_center"),
				(overlay_set_color, reg0, 0),
				(overlay_set_alpha, reg0, 96),
				(position_set_x, 1, 663),
				(position_set_y, 1, 290),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 9000),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 16777215),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 8),
			(position_set_y, 1, 12),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 16500),
			(position_set_y, 1, 18500),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(eq, "$town_menu_type", 2),
				(assign, ":value_2", 68),
				(assign, ":value_3", 218),
				(assign, ":value_4", 65),
				(assign, ":value_5", 104),
				(party_get_slot, reg8, "p_main_party", slot_party_commander_party),
				(create_text_overlay, reg0, "str_glob_reg8", 8),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(val_add, ":value_2", ":value_4"),
				(party_get_slot, reg8, "p_main_party", slot_party_following_player),
				(create_text_overlay, reg0, "str_glob_reg8", 8),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(val_add, ":value_2", ":value_4"),
				(party_get_slot, reg8, "p_main_party", slot_party_follow_player_until_time),
				(create_text_overlay, reg0, "str_glob_reg8", 8),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(val_add, ":value_2", ":value_4"),
				(party_get_slot, reg8, "p_main_party", slot_party_dont_follow_player_until_time),
				(create_text_overlay, reg0, "str_glob_reg8", 8),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(val_add, ":value_2", ":value_4"),
				(party_get_slot, reg8, "p_main_party", slot_village_raided_by),
				(create_text_overlay, reg0, "str_glob_reg8", 8),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(assign, ":value_2", 68),
				(val_sub, ":value_3", ":value_5"),
				(party_get_slot, reg8, "p_main_party", slot_village_state),
				(create_text_overlay, reg0, "str_glob_reg8", 8),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(val_add, ":value_2", ":value_4"),
				(party_get_slot, reg8, "p_main_party", slot_village_raid_progress),
				(create_text_overlay, reg0, "str_glob_reg8", 8),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(val_add, ":value_2", ":value_4"),
				(party_get_slot, reg8, "p_main_party", slot_village_recover_progress),
				(create_text_overlay, reg0, "str_glob_reg8", 8),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(val_add, ":value_2", ":value_4"),
				(party_get_slot, reg8, "p_main_party", slot_village_smoke_added),
				(create_text_overlay, reg0, "str_glob_reg8", 8),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(val_add, ":value_2", ":value_4"),
				(party_get_slot, reg8, "p_main_party", slot_village_infested_by_bandits),
				(create_text_overlay, reg0, "str_glob_reg8", 8),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(assign, ":value_2", 68),
				(val_sub, ":value_3", ":value_5"),
				(party_get_slot, reg8, "p_main_party", 40),
				(create_text_overlay, reg0, "str_glob_reg8", 8),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(val_add, ":value_2", ":value_4"),
				(party_get_slot, reg8, "p_main_party", slot_center_last_visited_by_lord),
				(create_text_overlay, reg0, "str_glob_reg8", 8),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(val_add, ":value_2", ":value_4"),
				(party_get_slot, reg8, "p_main_party", slot_center_last_player_alarm_hour),
				(create_text_overlay, reg0, "str_glob_reg8", 8),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
			(try_end),
			(assign, ":value_2", 13),
			(assign, ":value_3", 241),
			(assign, ":value_4", 65),
			(assign, ":value_5", 104),
			(position_set_x, 4, 360),
			(position_set_y, 4, 640),
			(try_begin),
				(eq, "$supp_equip_01", 1),
				(create_image_button_overlay, "$town_equip_01", "mesh_town_e_onehand", "mesh_town_d_onehand"),
			(else_try),
				(create_image_button_overlay, "$town_equip_01", "mesh_town_d_onehand", "mesh_town_e_onehand"),
			(try_end),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_equip_01", 1),
			(overlay_set_size, "$town_equip_01", 4),
			(val_add, ":value_2", ":value_4"),
			(try_begin),
				(eq, "$supp_equip_02", 1),
				(create_image_button_overlay, "$town_equip_02", "mesh_town_e_twohand", "mesh_town_d_twohand"),
			(else_try),
				(create_image_button_overlay, "$town_equip_02", "mesh_town_d_twohand", "mesh_town_e_twohand"),
			(try_end),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_equip_02", 1),
			(overlay_set_size, "$town_equip_02", 4),
			(val_add, ":value_2", ":value_4"),
			(try_begin),
				(eq, "$supp_equip_03", 1),
				(create_image_button_overlay, "$town_equip_03", "mesh_town_e_polearm", "mesh_town_d_polearm"),
			(else_try),
				(create_image_button_overlay, "$town_equip_03", "mesh_town_d_polearm", "mesh_town_e_polearm"),
			(try_end),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_equip_03", 1),
			(overlay_set_size, "$town_equip_03", 4),
			(val_add, ":value_2", ":value_4"),
			(try_begin),
				(eq, "$supp_equip_04", 1),
				(create_image_button_overlay, "$town_equip_04", "mesh_town_e_bow", "mesh_town_d_bow"),
			(else_try),
				(create_image_button_overlay, "$town_equip_04", "mesh_town_d_bow", "mesh_town_e_bow"),
			(try_end),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_equip_04", 1),
			(overlay_set_size, "$town_equip_04", 4),
			(val_add, ":value_2", ":value_4"),
			(try_begin),
				(eq, "$supp_equip_05", 1),
				(create_image_button_overlay, "$town_equip_05", "mesh_town_e_crossbow", "mesh_town_d_crossbow"),
			(else_try),
				(create_image_button_overlay, "$town_equip_05", "mesh_town_d_crossbow", "mesh_town_e_crossbow"),
			(try_end),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_equip_05", 1),
			(overlay_set_size, "$town_equip_05", 4),
			(assign, ":value_2", 13),
			(val_sub, ":value_3", ":value_5"),
			(try_begin),
				(eq, "$supp_equip_06", 1),
				(create_image_button_overlay, "$town_equip_06", "mesh_town_e_arquebus", "mesh_town_d_arquebus"),
			(else_try),
				(create_image_button_overlay, "$town_equip_06", "mesh_town_d_arquebus", "mesh_town_e_arquebus"),
			(try_end),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_equip_06", 1),
			(overlay_set_size, "$town_equip_06", 4),
			(val_add, ":value_2", ":value_4"),
			(try_begin),
				(eq, "$supp_equip_07", 1),
				(create_image_button_overlay, "$town_equip_07", "mesh_town_e_ammo", "mesh_town_d_ammo"),
			(else_try),
				(create_image_button_overlay, "$town_equip_07", "mesh_town_d_ammo", "mesh_town_e_ammo"),
			(try_end),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_equip_07", 1),
			(overlay_set_size, "$town_equip_07", 4),
			(val_add, ":value_2", ":value_4"),
			(try_begin),
				(eq, "$supp_equip_08", 1),
				(create_image_button_overlay, "$town_equip_08", "mesh_town_e_light", "mesh_town_d_light"),
			(else_try),
				(create_image_button_overlay, "$town_equip_08", "mesh_town_d_light", "mesh_town_e_light"),
			(try_end),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_equip_08", 1),
			(overlay_set_size, "$town_equip_08", 4),
			(val_add, ":value_2", ":value_4"),
			(try_begin),
				(eq, "$supp_equip_09", 1),
				(create_image_button_overlay, "$town_equip_09", "mesh_town_e_heavy", "mesh_town_d_heavy"),
			(else_try),
				(create_image_button_overlay, "$town_equip_09", "mesh_town_d_heavy", "mesh_town_e_heavy"),
			(try_end),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_equip_09", 1),
			(overlay_set_size, "$town_equip_09", 4),
			(val_add, ":value_2", ":value_4"),
			(try_begin),
				(eq, "$supp_equip_10", 1),
				(create_image_button_overlay, "$town_equip_10", "mesh_town_e_horse", "mesh_town_d_horse"),
			(else_try),
				(create_image_button_overlay, "$town_equip_10", "mesh_town_d_horse", "mesh_town_e_horse"),
			(try_end),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_equip_10", 1),
			(overlay_set_size, "$town_equip_10", 4),
			(assign, ":value_2", 13),
			(val_sub, ":value_3", ":value_5"),
			(try_begin),
				(eq, "$supp_equip_11", 1),
				(create_image_button_overlay, "$town_equip_11", "mesh_town_e_siege", "mesh_town_d_siege"),
			(else_try),
				(create_image_button_overlay, "$town_equip_11", "mesh_town_d_siege", "mesh_town_e_siege"),
			(try_end),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_equip_11", 1),
			(overlay_set_size, "$town_equip_11", 4),
			(val_add, ":value_2", ":value_4"),
			(try_begin),
				(eq, "$supp_equip_12", 1),
				(create_image_button_overlay, "$town_equip_12", "mesh_town_e_wood", "mesh_town_d_wood"),
			(else_try),
				(create_image_button_overlay, "$town_equip_12", "mesh_town_d_wood", "mesh_town_e_wood"),
			(try_end),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_equip_12", 1),
			(overlay_set_size, "$town_equip_12", 4),
			(val_add, ":value_2", ":value_4"),
			(try_begin),
				(eq, "$supp_equip_13", 1),
				(create_image_button_overlay, "$town_equip_13", "mesh_town_e_shipammo", "mesh_town_d_shipammo"),
			(else_try),
				(create_image_button_overlay, "$town_equip_13", "mesh_town_d_shipammo", "mesh_town_e_shipammo"),
			(try_end),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_equip_13", 1),
			(overlay_set_size, "$town_equip_13", 4),
			(assign, ":value_2", 13),
			(assign, ":value_3", 266),
			(assign, ":value_4", 65),
			(assign, ":value_5", 62),
			(position_set_x, 4, 240),
			(position_set_y, 4, 440),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 1),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_01", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_01", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_01", 1),
			(overlay_set_size, "$town_tile_01", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 2),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_02", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_02", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_02", 1),
			(overlay_set_size, "$town_tile_02", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 3),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_03", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_03", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_03", 1),
			(overlay_set_size, "$town_tile_03", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 4),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_04", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_04", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_04", 1),
			(overlay_set_size, "$town_tile_04", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 5),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_05", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_05", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_05", 1),
			(overlay_set_size, "$town_tile_05", 4),
			(assign, ":value_2", 13),
			(val_sub, ":value_3", ":value_5"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 6),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_06", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_06", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_06", 1),
			(overlay_set_size, "$town_tile_06", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 7),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_07", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_07", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_07", 1),
			(overlay_set_size, "$town_tile_07", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 8),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_08", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_08", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_08", 1),
			(overlay_set_size, "$town_tile_08", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 9),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_09", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_09", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_09", 1),
			(overlay_set_size, "$town_tile_09", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 10),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_10", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_10", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_10", 1),
			(overlay_set_size, "$town_tile_10", 4),
			(assign, ":value_2", 13),
			(val_sub, ":value_3", ":value_5"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 11),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_11", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_11", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_11", 1),
			(overlay_set_size, "$town_tile_11", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 12),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_12", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_12", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_12", 1),
			(overlay_set_size, "$town_tile_12", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 13),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_13", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_13", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_13", 1),
			(overlay_set_size, "$town_tile_13", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 14),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_14", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_14", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_14", 1),
			(overlay_set_size, "$town_tile_14", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 15),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_15", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_15", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_15", 1),
			(overlay_set_size, "$town_tile_15", 4),
			(assign, ":value_2", 13),
			(val_sub, ":value_3", ":value_5"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 16),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_16", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_16", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_16", 1),
			(overlay_set_size, "$town_tile_16", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 17),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_17", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_17", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_17", 1),
			(overlay_set_size, "$town_tile_17", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 18),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_18", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_18", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_18", 1),
			(overlay_set_size, "$town_tile_18", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 19),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_19", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_19", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_19", 1),
			(overlay_set_size, "$town_tile_19", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 20),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_20", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_20", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_20", 1),
			(overlay_set_size, "$town_tile_20", 4),
			(assign, ":value_2", 13),
			(val_sub, ":value_3", ":value_5"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 21),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_21", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_21", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_21", 1),
			(overlay_set_size, "$town_tile_21", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 22),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_22", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_22", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_22", 1),
			(overlay_set_size, "$town_tile_22", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 23),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_23", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_23", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_23", 1),
			(overlay_set_size, "$town_tile_23", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 24),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_24", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_24", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_24", 1),
			(overlay_set_size, "$town_tile_24", 4),
			(val_add, ":value_2", ":value_4"),
			(call_script, "script_tile_party_get_slot", "$g_encountered_party", 25),
			(call_script, "script_tile_image_butt_out", "$town_tile_num"),
			(create_image_button_overlay, "$town_tile_25", "$towm_tile_mesh", "mesh_white_plane"),
			(overlay_set_color, "$town_tile_25", 16777215),
			(position_set_x, 1, ":value_2"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$town_tile_25", 1),
			(overlay_set_size, "$town_tile_25", 4),
			(create_button_overlay, "$pst_town_building", "str_town_tile_select_build", 16),
			(position_set_x, 1, 80),
			(position_set_y, 1, 340),
			(overlay_set_position, "$pst_town_building", 1),
			(overlay_set_color, "$pst_town_building", 16777215),
			(create_mesh_overlay, reg0, "mesh_white_plane_center"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 80),
			(position_set_y, 1, 340),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 6000),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(create_button_overlay, "$pst_town_equip", "str_town_tile_select_equip", 16),
			(position_set_x, 1, 220),
			(position_set_y, 1, 340),
			(overlay_set_position, "$pst_town_equip", 1),
			(overlay_set_color, "$pst_town_equip", 16777215),
			(create_mesh_overlay, reg0, "mesh_white_plane_center"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 220),
			(position_set_y, 1, 340),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 6000),
			(position_set_y, 1, 1300),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(neq, "$town_menu_type", 1),
				(overlay_set_display, "$town_tile_01", 0),
				(overlay_set_display, "$town_tile_02", 0),
				(overlay_set_display, "$town_tile_03", 0),
				(overlay_set_display, "$town_tile_04", 0),
				(overlay_set_display, "$town_tile_05", 0),
				(overlay_set_display, "$town_tile_06", 0),
				(overlay_set_display, "$town_tile_07", 0),
				(overlay_set_display, "$town_tile_08", 0),
				(overlay_set_display, "$town_tile_09", 0),
				(overlay_set_display, "$town_tile_10", 0),
				(overlay_set_display, "$town_tile_11", 0),
				(overlay_set_display, "$town_tile_12", 0),
				(overlay_set_display, "$town_tile_13", 0),
				(overlay_set_display, "$town_tile_14", 0),
				(overlay_set_display, "$town_tile_15", 0),
				(overlay_set_display, "$town_tile_16", 0),
				(overlay_set_display, "$town_tile_17", 0),
				(overlay_set_display, "$town_tile_18", 0),
				(overlay_set_display, "$town_tile_19", 0),
				(overlay_set_display, "$town_tile_20", 0),
				(overlay_set_display, "$town_tile_21", 0),
				(overlay_set_display, "$town_tile_22", 0),
				(overlay_set_display, "$town_tile_23", 0),
				(overlay_set_display, "$town_tile_24", 0),
				(overlay_set_display, "$town_tile_25", 0),
			(try_end),
			(try_begin),
				(neq, "$town_menu_type", 2),
				(overlay_set_display, "$town_equip_01", 0),
				(overlay_set_display, "$town_equip_02", 0),
				(overlay_set_display, "$town_equip_03", 0),
				(overlay_set_display, "$town_equip_04", 0),
				(overlay_set_display, "$town_equip_05", 0),
				(overlay_set_display, "$town_equip_06", 0),
				(overlay_set_display, "$town_equip_07", 0),
				(overlay_set_display, "$town_equip_08", 0),
				(overlay_set_display, "$town_equip_09", 0),
				(overlay_set_display, "$town_equip_10", 0),
				(overlay_set_display, "$town_equip_11", 0),
				(overlay_set_display, "$town_equip_12", 0),
				(overlay_set_display, "$town_equip_13", 0),
			(try_end),
			(try_begin),
				(eq, "$town_menu_type", 3),
				(assign, ":value_2", 13),
				(assign, ":value_3", 290),
				(assign, ":value_5", 22),
				(create_text_overlay, reg0, "str_town_guide_text_1"),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(val_sub, ":value_3", ":value_5"),
				(val_sub, ":value_3", ":value_5"),
				(create_text_overlay, reg0, "str_town_guide_text_2"),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(val_sub, ":value_3", ":value_5"),
				(val_sub, ":value_3", ":value_5"),
				(create_text_overlay, reg0, "str_town_guide_text_3"),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(val_sub, ":value_3", ":value_5"),
				(val_sub, ":value_3", ":value_5"),
				(create_text_overlay, reg0, "str_town_guide_text_4"),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(val_sub, ":value_3", ":value_5"),
				(val_sub, ":value_3", ":value_5"),
				(create_text_overlay, reg0, "str_town_guide_text_5"),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(val_sub, ":value_3", ":value_5"),
				(val_sub, ":value_3", ":value_5"),
				(create_text_overlay, reg0, "str_town_guide_text_6"),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(val_sub, ":value_3", ":value_5"),
				(val_sub, ":value_3", ":value_5"),
				(create_text_overlay, reg0, "str_town_guide_text_7"),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
			(try_end),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 16777215),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 779),
			(position_set_y, 1, 19),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 10000),
			(position_set_y, 1, 17500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 3, 900),
			(position_set_y, 3, 900),
			(try_begin),
				(eq, "$pst_mouse_over_on", 1),
				(gt, "$clicked_tile_num", 0),
				(mouse_get_position, 7),
				(set_fixed_point_multiplier, 1000),
				(create_mesh_overlay, reg0, "mesh_white_plane_upper"),
				(overlay_set_color, reg0, 16777215),
				(overlay_set_position, reg0, 7),
				(position_set_x, 1, 14000),
				(position_set_y, 1, 3000),
				(overlay_set_size, reg0, 1),
				(call_script, "script_tile_party_get_slot", "$g_encountered_party", "$clicked_tile_num"),
				(call_script, "script_tile_slot_output", "$town_tile_num"),
				(create_text_overlay, reg0, "str_tile_output_number"),
				(overlay_set_position, reg0, 7),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, reg0, 1),
			(else_try),
				(eq, "$pst_mouse_over_on", 2),
				(gt, "$clicked_tile_num", 0),
				(mouse_get_position, 7),
				(set_fixed_point_multiplier, 1000),
				(create_mesh_overlay, reg0, "mesh_white_plane_upper"),
				(overlay_set_color, reg0, 16777215),
				(overlay_set_position, reg0, 7),
				(position_set_x, 1, 15000),
				(position_set_y, 1, 2000),
				(overlay_set_size, reg0, 1),
				(store_add, ":value_6", "str_town_equip_1", "$clicked_tile_num"),
				(val_sub, ":value_6", 1),
				(create_text_overlay, reg0, ":value_6"),
				(overlay_set_position, reg0, 7),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, reg0, 1),
			(try_end),
			(try_begin),
				(eq, "$pst_mouse_over_on", 1),
				(gt, "$clicked_tile_num", 0),
				(assign, ":value_2", 784),
				(assign, ":value_3", 305),
				(assign, ":value_4", 65),
				(assign, ":value_5", 62),
				(position_set_x, 4, 240),
				(position_set_y, 4, 440),
				(create_image_button_overlay, "$town_build_01", "mesh_town_t_farm", "mesh_white_plane"),
				(overlay_set_color, "$town_build_01", 16777215),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$town_build_01", 1),
				(overlay_set_size, "$town_build_01", 4),
				(val_add, ":value_2", ":value_4"),
				(create_image_button_overlay, "$town_build_02", "mesh_town_t_pasture", "mesh_white_plane"),
				(overlay_set_color, "$town_build_02", 16777215),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$town_build_02", 1),
				(overlay_set_size, "$town_build_02", 4),
				(val_add, ":value_2", ":value_4"),
				(create_image_button_overlay, "$town_build_03", "mesh_town_t_mine", "mesh_white_plane"),
				(overlay_set_color, "$town_build_03", 16777215),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$town_build_03", 1),
				(overlay_set_size, "$town_build_03", 4),
				(assign, ":value_2", 784),
				(val_sub, ":value_3", ":value_5"),
				(create_image_button_overlay, "$town_build_04", "mesh_town_t_market", "mesh_white_plane"),
				(overlay_set_color, "$town_build_04", 16777215),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$town_build_04", 1),
				(overlay_set_size, "$town_build_04", 4),
				(val_add, ":value_2", ":value_4"),
				(create_image_button_overlay, "$town_build_05", "mesh_town_t_barrack", "mesh_white_plane"),
				(overlay_set_color, "$town_build_05", 16777215),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$town_build_05", 1),
				(overlay_set_size, "$town_build_05", 4),
				(val_add, ":value_2", ":value_4"),
				(create_image_button_overlay, "$town_build_06", "mesh_town_t_library", "mesh_white_plane"),
				(overlay_set_color, "$town_build_06", 16777215),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$town_build_06", 1),
				(overlay_set_size, "$town_build_06", 4),
				(assign, ":value_2", 784),
				(val_sub, ":value_3", ":value_5"),
				(create_image_button_overlay, "$town_build_07", "mesh_town_t_temple", "mesh_white_plane"),
				(overlay_set_color, "$town_build_07", 16777215),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$town_build_07", 1),
				(overlay_set_size, "$town_build_07", 4),
				(val_add, ":value_2", ":value_4"),
				(create_image_button_overlay, "$town_build_08", "mesh_town_t_prison", "mesh_white_plane"),
				(overlay_set_color, "$town_build_08", 16777215),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$town_build_08", 1),
				(overlay_set_size, "$town_build_08", 4),
				(val_add, ":value_2", ":value_4"),
				(create_image_button_overlay, "$town_build_09", "mesh_town_t_smithy", "mesh_white_plane"),
				(overlay_set_color, "$town_build_09", 16777215),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$town_build_09", 1),
				(overlay_set_size, "$town_build_09", 4),
				(assign, ":value_2", 784),
				(val_sub, ":value_3", ":value_5"),
				(create_image_button_overlay, "$town_build_00", "mesh_town_t_plain", "mesh_white_plane"),
				(overlay_set_color, "$town_build_00", 16777215),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, "$town_build_00", 1),
				(overlay_set_size, "$town_build_00", 4),
				(overlay_set_display, "$town_build_00", 0),
			(else_try),
				(create_text_overlay, "$town_build_00", "str_empty_string"),
				(create_text_overlay, "$town_build_01", "str_empty_string"),
				(create_text_overlay, "$town_build_02", "str_empty_string"),
				(create_text_overlay, "$town_build_03", "str_empty_string"),
				(create_text_overlay, "$town_build_04", "str_empty_string"),
				(create_text_overlay, "$town_build_05", "str_empty_string"),
				(create_text_overlay, "$town_build_06", "str_empty_string"),
				(create_text_overlay, "$town_build_07", "str_empty_string"),
				(create_text_overlay, "$town_build_08", "str_empty_string"),
				(create_text_overlay, "$town_build_09", "str_empty_string"),
				(assign, ":value_2", 875),
				(assign, ":value_3", 340),
				(assign, ":value_5", 22),
				(party_get_slot, ":g_encountered_party_town_tavern", "$g_encountered_party", slot_town_tavern),
				(str_store_troop_name, 8, ":g_encountered_party_town_tavern"),
				(create_text_overlay, reg0, "str_glob_s8", 16),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(party_get_slot, ":g_encountered_party_town_wealth", "$g_encountered_party", slot_town_wealth),
				(try_begin),
					(eq, ":g_encountered_party_town_wealth", 1),
					(str_store_string, 8, "str_nwm_place_spe_type_1"),
				(else_try),
					(eq, ":g_encountered_party_town_wealth", 2),
					(str_store_string, 8, "str_nwm_place_spe_type_2"),
				(else_try),
					(eq, ":g_encountered_party_town_wealth", 3),
					(str_store_string, 8, "str_nwm_place_spe_type_3"),
				(else_try),
					(eq, ":g_encountered_party_town_wealth", 4),
					(str_store_string, 8, "str_nwm_place_spe_type_4"),
				(else_try),
					(eq, ":g_encountered_party_town_wealth", 5),
					(str_store_string, 8, "str_nwm_place_spe_type_5"),
				(else_try),
					(eq, ":g_encountered_party_town_wealth", 6),
					(str_store_string, 8, "str_nwm_place_spe_type_6"),
				(else_try),
					(eq, ":g_encountered_party_town_wealth", 7),
					(str_store_string, 8, "str_nwm_place_spe_type_7"),
				(else_try),
					(str_store_string, 8, "str_empty_string"),
				(try_end),
				(val_sub, ":value_3", ":value_5"),
				(create_text_overlay, reg0, "str_glob_s8", 16),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(store_faction_of_party, ":faction_of_party_g_encountered_party_3", "$g_encountered_party"),
				(faction_get_slot, ":faction_of_party_g_encountered_party_3_27", ":faction_of_party_g_encountered_party_3", 27),
				(party_get_slot, ":g_encountered_party_ai_object", "$g_encountered_party", slot_party_ai_object),
				(store_sub, ":value_7", "$g_encountered_party", "p_pyongyang"),
				(val_add, ":value_7", "trp_tt_lord_01_00"),
				(assign, ":value_8", 0),
				(try_for_range, ":number", 42, 67),
					(troop_get_slot, ":value_7_number", ":value_7", ":number"),
					(try_begin),
						(eq, ":value_7_number", 17),
						(assign, ":value_8", 1),
					(try_end),
				(try_end),
				(assign, ":value_9", 48),
				(try_begin),
					(eq, ":value_8", 1),
					(assign, ":value_9", 24),
				(try_end),
				(try_begin),
					(neq, ":faction_of_party_g_encountered_party_3_27", ":g_encountered_party_ai_object"),
					(store_sub, reg8, ":value_9", reg16),
					(str_store_string, 8, "str_religious_conflict"),
				(else_try),
					(store_add, ":value_6", ":g_encountered_party_ai_object", "str_religion_title_0"),
					(str_store_string, 8, ":value_6"),
				(try_end),
				(val_sub, ":value_3", ":value_5"),
				(create_text_overlay, reg0, "str_glob_s8", 16),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(party_get_slot, ":g_encountered_party_ignore_player_until", "$g_encountered_party", slot_party_ignore_player_until),
				(try_begin),
					(eq, ":g_encountered_party_ignore_player_until", 1),
					(str_store_string, 8, "str_ndisaster_name_1"),
				(else_try),
					(eq, ":g_encountered_party_ignore_player_until", 2),
					(str_store_string, 8, "str_ndisaster_name_2"),
				(else_try),
					(eq, ":g_encountered_party_ignore_player_until", 3),
					(str_store_string, 8, "str_ndisaster_name_3"),
				(else_try),
					(eq, ":g_encountered_party_ignore_player_until", 4),
					(str_store_string, 8, "str_ndisaster_name_4"),
				(else_try),
					(eq, ":g_encountered_party_ignore_player_until", 5),
					(str_store_string, 8, "str_ndisaster_name_5"),
				(else_try),
					(eq, ":g_encountered_party_ignore_player_until", 6),
					(str_store_string, 8, "str_ndisaster_name_6"),
				(else_try),
					(eq, ":g_encountered_party_ignore_player_until", 7),
					(str_store_string, 8, "str_ndisaster_name_7"),
				(else_try),
					(eq, ":g_encountered_party_ignore_player_until", 8),
					(str_store_string, 8, "str_ndisaster_name_8"),
				(else_try),
					(eq, ":g_encountered_party_ignore_player_until", 9),
					(str_store_string, 8, "str_ndisaster_name_9"),
				(else_try),
					(eq, ":g_encountered_party_ignore_player_until", 11),
					(str_store_string, 8, "str_ndisaster_name_10"),
				(else_try),
					(eq, ":g_encountered_party_ignore_player_until", 10),
					(str_store_string, 8, "str_ndisaster_name_11"),
				(else_try),
					(eq, ":g_encountered_party_ignore_player_until", 12),
					(str_store_string, 8, "str_ndisaster_name_12"),
				(else_try),
					(str_store_string, 8, "str_ndisaster_name_0"),
				(try_end),
				(val_sub, ":value_3", ":value_5"),
				(create_text_overlay, reg0, "str_glob_s8", 16),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(val_sub, ":value_3", 13),
				(val_sub, ":value_3", ":value_5"),
				(store_party_size_wo_prisoners, reg9, "$g_encountered_party"),
				(party_get_slot, reg8, "$g_encountered_party", slot_town_armorer),
				(create_text_overlay, reg0, "str_t_defence", 16),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(val_sub, ":value_3", ":value_5"),
				(party_get_slot, reg8, "$g_encountered_party", slot_town_alley),
				(create_text_overlay, reg0, "str_t_agriculture", 16),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(val_sub, ":value_3", ":value_5"),
				(party_get_slot, reg8, "$g_encountered_party", slot_town_walls),
				(create_text_overlay, reg0, "str_t_produce", 16),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(val_sub, ":value_3", ":value_5"),
				(party_get_slot, reg8, "$g_encountered_party", slot_center_culture),
				(create_text_overlay, reg0, "str_t_commerce", 16),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(val_sub, ":value_3", ":value_5"),
				(party_get_slot, reg8, "$g_encountered_party", slot_town_tavernkeeper),
				(create_text_overlay, reg0, "str_t_culture", 16),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(val_sub, ":value_3", ":value_5"),
				(party_get_slot, reg8, "$g_encountered_party", slot_town_weaponsmith),
				(create_text_overlay, reg0, "str_t_stability", 16),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(try_begin),
					(le, reg8, 15),
					(overlay_set_color, reg0, 8912896),
				(else_try),
					(ge, reg8, 25),
					(overlay_set_color, reg0, 34816),
				(try_end),
				(val_sub, ":value_3", ":value_5"),
				(party_get_slot, reg8, "$g_encountered_party", slot_town_arena),
				(create_text_overlay, reg0, "str_t_productivity", 16),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(val_sub, ":value_3", 13),
				(val_sub, ":value_3", ":value_5"),
				(party_get_slot, reg8, "$g_encountered_party", slot_town_prison),
				(create_text_overlay, reg0, "str_t_relation", 16),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(val_sub, ":value_3", ":value_5"),
				(party_get_slot, reg8, "$g_encountered_party", slot_town_store),
				(create_text_overlay, reg0, "str_t_peace", 16),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(try_end)
		]),

		(ti_on_presentation_mouse_press,
		[
			(store_trigger_param_2, ":trigger_param_2"),
			(eq, ":trigger_param_2", 1),
			(assign, "$clicked_tile_num", 0),
			(assign, "$pst_mouse_over_on", 0),
			(start_presentation, "prsnt_town_encounter")
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_25"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_24"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_23"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_22"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_21"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_20"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_19"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_18"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_17"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_16"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_15"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_14"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_13"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_12"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_11"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_10"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_09"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_08"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_07"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_06"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_05"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_04"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_03"),
				(this_or_next|eq, ":trigger_param_1", "$town_tile_02"),
				(eq, ":trigger_param_1", "$town_tile_01"),
				(play_sound, "snd_pst_click"),
				(assign, "$pst_mouse_over_on", 1),
				(start_presentation, "prsnt_town_encounter"),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$town_equip_13"),
				(this_or_next|eq, ":trigger_param_1", "$town_equip_12"),
				(this_or_next|eq, ":trigger_param_1", "$town_equip_11"),
				(this_or_next|eq, ":trigger_param_1", "$town_equip_10"),
				(this_or_next|eq, ":trigger_param_1", "$town_equip_09"),
				(this_or_next|eq, ":trigger_param_1", "$town_equip_08"),
				(this_or_next|eq, ":trigger_param_1", "$town_equip_07"),
				(this_or_next|eq, ":trigger_param_1", "$town_equip_06"),
				(this_or_next|eq, ":trigger_param_1", "$town_equip_05"),
				(this_or_next|eq, ":trigger_param_1", "$town_equip_04"),
				(this_or_next|eq, ":trigger_param_1", "$town_equip_03"),
				(this_or_next|eq, ":trigger_param_1", "$town_equip_02"),
				(eq, ":trigger_param_1", "$town_equip_01"),
				(play_sound, "snd_pst_click"),
				(assign, "$pst_mouse_over_on", 2),
				(start_presentation, "prsnt_town_encounter"),
			(else_try),
				(assign, "$pst_mouse_over_on", 0),
			(try_end),
			(try_begin),
				(eq, ":trigger_param_1", "$town_tile_01"),
				(assign, "$clicked_tile_num", 1),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_02"),
				(assign, "$clicked_tile_num", 2),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_03"),
				(assign, "$clicked_tile_num", 3),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_04"),
				(assign, "$clicked_tile_num", 4),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_05"),
				(assign, "$clicked_tile_num", 5),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_06"),
				(assign, "$clicked_tile_num", 6),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_07"),
				(assign, "$clicked_tile_num", 7),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_08"),
				(assign, "$clicked_tile_num", 8),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_09"),
				(assign, "$clicked_tile_num", 9),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_10"),
				(assign, "$clicked_tile_num", 10),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_11"),
				(assign, "$clicked_tile_num", 11),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_12"),
				(assign, "$clicked_tile_num", 12),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_13"),
				(assign, "$clicked_tile_num", 13),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_14"),
				(assign, "$clicked_tile_num", 14),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_15"),
				(assign, "$clicked_tile_num", 15),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_16"),
				(assign, "$clicked_tile_num", 16),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_17"),
				(assign, "$clicked_tile_num", 17),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_18"),
				(assign, "$clicked_tile_num", 18),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_19"),
				(assign, "$clicked_tile_num", 19),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_20"),
				(assign, "$clicked_tile_num", 20),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_21"),
				(assign, "$clicked_tile_num", 21),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_22"),
				(assign, "$clicked_tile_num", 22),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_23"),
				(assign, "$clicked_tile_num", 23),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_24"),
				(assign, "$clicked_tile_num", 24),
			(else_try),
				(eq, ":trigger_param_1", "$town_tile_25"),
				(assign, "$clicked_tile_num", 25),
			(else_try),
				(eq, ":trigger_param_1", "$town_equip_01"),
				(assign, "$clicked_tile_num", 1),
				(try_begin),
					(eq, "$supp_equip_01", 1),
					(assign, "$supp_equip_01", 0),
				(else_try),
					(assign, "$supp_equip_01", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$town_equip_02"),
				(assign, "$clicked_tile_num", 2),
				(try_begin),
					(eq, "$supp_equip_02", 1),
					(assign, "$supp_equip_02", 0),
				(else_try),
					(assign, "$supp_equip_02", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$town_equip_03"),
				(assign, "$clicked_tile_num", 3),
				(try_begin),
					(eq, "$supp_equip_03", 1),
					(assign, "$supp_equip_03", 0),
				(else_try),
					(assign, "$supp_equip_03", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$town_equip_04"),
				(assign, "$clicked_tile_num", 4),
				(try_begin),
					(eq, "$supp_equip_04", 1),
					(assign, "$supp_equip_04", 0),
				(else_try),
					(assign, "$supp_equip_04", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$town_equip_05"),
				(assign, "$clicked_tile_num", 5),
				(try_begin),
					(eq, "$supp_equip_05", 1),
					(assign, "$supp_equip_05", 0),
				(else_try),
					(assign, "$supp_equip_05", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$town_equip_06"),
				(assign, "$clicked_tile_num", 6),
				(try_begin),
					(eq, "$supp_equip_06", 1),
					(assign, "$supp_equip_06", 0),
				(else_try),
					(assign, "$supp_equip_06", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$town_equip_07"),
				(assign, "$clicked_tile_num", 7),
				(try_begin),
					(eq, "$supp_equip_07", 1),
					(assign, "$supp_equip_07", 0),
				(else_try),
					(assign, "$supp_equip_07", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$town_equip_08"),
				(assign, "$clicked_tile_num", 8),
				(try_begin),
					(eq, "$supp_equip_08", 1),
					(assign, "$supp_equip_08", 0),
				(else_try),
					(assign, "$supp_equip_08", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$town_equip_09"),
				(assign, "$clicked_tile_num", 9),
				(try_begin),
					(eq, "$supp_equip_09", 1),
					(assign, "$supp_equip_09", 0),
				(else_try),
					(assign, "$supp_equip_09", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$town_equip_10"),
				(assign, "$clicked_tile_num", 10),
				(try_begin),
					(eq, "$supp_equip_10", 1),
					(assign, "$supp_equip_10", 0),
				(else_try),
					(assign, "$supp_equip_10", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$town_equip_11"),
				(assign, "$clicked_tile_num", 11),
				(try_begin),
					(eq, "$supp_equip_11", 1),
					(assign, "$supp_equip_11", 0),
				(else_try),
					(assign, "$supp_equip_11", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$town_equip_12"),
				(assign, "$clicked_tile_num", 12),
				(try_begin),
					(eq, "$supp_equip_12", 1),
					(assign, "$supp_equip_12", 0),
				(else_try),
					(assign, "$supp_equip_12", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$town_equip_13"),
				(assign, "$clicked_tile_num", 13),
				(try_begin),
					(eq, "$supp_equip_13", 1),
					(assign, "$supp_equip_13", 0),
				(else_try),
					(assign, "$supp_equip_13", 1),
				(try_end),
			(try_end),
			(try_begin),
				(eq, ":trigger_param_1", "$town_build_00"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(neg|party_slot_eq, "$g_encountered_party", slot_town_tavern, "trp_player"),
					(display_message, "str_town_tile_notown"),
				(else_try),
					(gt, "$clicked_tile_num", 0),
					(play_sound, "snd_sabotagee"),
					(call_script, "script_tile_slot_remove", "$g_encountered_party", "$clicked_tile_num"),
					(start_presentation, "prsnt_town_encounter"),
				(try_end),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$town_build_01"),
				(this_or_next|eq, ":trigger_param_1", "$town_build_02"),
				(this_or_next|eq, ":trigger_param_1", "$town_build_03"),
				(this_or_next|eq, ":trigger_param_1", "$town_build_04"),
				(this_or_next|eq, ":trigger_param_1", "$town_build_05"),
				(this_or_next|eq, ":trigger_param_1", "$town_build_06"),
				(this_or_next|eq, ":trigger_param_1", "$town_build_07"),
				(this_or_next|eq, ":trigger_param_1", "$town_build_08"),
				(eq, ":trigger_param_1", "$town_build_09"),
				(play_sound, "snd_pst_click"),
				(gt, "$clicked_tile_num", 0),
				(call_script, "script_tile_party_get_slot", "$g_encountered_party", "$clicked_tile_num"),
				(assign, ":value", 0),
				(try_begin),
					(eq, ":trigger_param_1", "$town_build_01"),
					(eq, "$town_tile_num", 0),
					(assign, ":value", 1),
					(assign, ":value_2", 11),
				(else_try),
					(eq, ":trigger_param_1", "$town_build_01"),
					(eq, "$town_tile_num", 2),
					(assign, ":value", 1),
					(assign, ":value_2", 21),
				(else_try),
					(eq, ":trigger_param_1", "$town_build_02"),
					(eq, "$town_tile_num", 0),
					(assign, ":value", 1),
					(assign, ":value_2", 12),
				(else_try),
					(eq, ":trigger_param_1", "$town_build_02"),
					(eq, "$town_tile_num", 3),
					(assign, ":value", 1),
					(assign, ":value_2", 22),
				(else_try),
					(eq, ":trigger_param_1", "$town_build_03"),
					(eq, "$town_tile_num", 1),
					(assign, ":value", 1),
					(assign, ":value_2", 13),
				(else_try),
					(eq, ":trigger_param_1", "$town_build_03"),
					(eq, "$town_tile_num", 4),
					(assign, ":value", 1),
					(assign, ":value_2", 23),
				(else_try),
					(eq, ":trigger_param_1", "$town_build_04"),
					(eq, "$town_tile_num", 0),
					(assign, ":value", 1),
					(assign, ":value_2", 14),
				(else_try),
					(eq, ":trigger_param_1", "$town_build_05"),
					(eq, "$town_tile_num", 0),
					(assign, ":value", 1),
					(assign, ":value_2", 15),
				(else_try),
					(eq, ":trigger_param_1", "$town_build_06"),
					(eq, "$town_tile_num", 0),
					(assign, ":value", 1),
					(assign, ":value_2", 18),
				(else_try),
					(eq, ":trigger_param_1", "$town_build_07"),
					(eq, "$town_tile_num", 0),
					(assign, ":value", 1),
					(assign, ":value_2", 17),
				(else_try),
					(eq, ":trigger_param_1", "$town_build_08"),
					(eq, "$town_tile_num", 0),
					(assign, ":value", 1),
					(assign, ":value_2", 16),
				(else_try),
					(eq, ":trigger_param_1", "$town_build_09"),
					(eq, "$town_tile_num", 0),
					(assign, ":value", 1),
					(assign, ":value_2", 19),
				(try_end),
				(party_get_slot, ":g_encountered_party_town_arena", "$g_encountered_party", slot_town_arena),
				(try_begin),
					(neg|party_slot_eq, "$g_encountered_party", slot_town_tavern, "trp_player"),
					(display_message, "str_town_tile_notown"),
				(else_try),
					(lt, ":g_encountered_party_town_arena", 20),
					(display_message, "str_produci_low"),
				(else_try),
					(eq, ":value", 1),
					(store_sub, ":value_3", "$g_encountered_party", "p_pyongyang"),
					(val_add, ":value_3", "trp_tt_lord_01_00"),
					(store_add, ":value_4", "$clicked_tile_num", 42),
					(val_sub, ":value_4", 1),
					(troop_set_slot, ":value_3", ":value_4", ":value_2"),
					(play_sound, "snd_wood_cuttt"),
					(val_sub, ":g_encountered_party_town_arena", 20),
					(party_set_slot, "$g_encountered_party", slot_town_arena, ":g_encountered_party_town_arena"),
					(start_presentation, "prsnt_town_encounter"),
				(else_try),
					(display_message, "str_town_tile_cantbuild"),
				(try_end),
			(try_end),
			(try_begin),
				(eq, ":trigger_param_1", "$pst_town_exit"),
				(play_sound, "snd_pst_click"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_save"),
				(play_sound, "snd_pst_click"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
				(auto_save),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_building"),
				(play_sound, "snd_pst_click"),
				(assign, "$town_menu_type", 1),
				(start_presentation, "prsnt_town_encounter"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_equip"),
				(play_sound, "snd_pst_click"),
				(assign, "$town_menu_type", 2),
				(start_presentation, "prsnt_town_encounter"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_help"),
				(play_sound, "snd_pst_click"),
				(assign, "$town_menu_type", 3),
				(start_presentation, "prsnt_town_encounter"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_buy_buildp"),
				(play_sound, "snd_pst_click"),
				(call_script, "script_party_money_level_ge", "p_main_party", 3000),
				(party_get_slot, ":g_encountered_party_town_arena", "$g_encountered_party", slot_town_arena),
				(try_begin),
					(neq, "$wm_mo_continue", 1),
					(assign, reg8, 3000),
					(display_message, "str_nomoney_reg", 0x00ff0000),
				(else_try),
					(lt, ":g_encountered_party_town_arena", 40),
					(call_script, "script_party_money_level_diff", "p_main_party", 1500, 34),
					(val_add, ":g_encountered_party_town_arena", 10),
					(party_set_slot, "$g_encountered_party", slot_town_arena, ":g_encountered_party_town_arena"),
					(display_message, "str_t_town_buy_build_y", 0x00ffff00),
					(start_presentation, "prsnt_town_encounter"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_quest_tavern"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(party_slot_eq, "$g_encountered_party", 15, 1),
					(eq, "$adult_content", 1),
					(jump_to_menu, "mnu_wm_quest_menu"),
				(else_try),
					(display_message, "str_quest_not_fit"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_quest_street"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(party_slot_eq, "$g_encountered_party", 15, 3),
					(jump_to_menu, "mnu_wm_quest_menu"),
				(else_try),
					(party_slot_eq, "$g_encountered_party", 15, 4),
					(jump_to_menu, "mnu_wm_quest_menu"),
				(else_try),
					(party_slot_eq, "$g_encountered_party", 15, 6),
					(jump_to_menu, "mnu_wm_quest_menu"),
				(else_try),
					(party_slot_eq, "$g_encountered_party", 15, 5),
					(jump_to_menu, "mnu_wm_quest_menu"),
				(else_try),
					(display_message, "str_quest_not_fit"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_quest_house"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(party_slot_eq, "$g_encountered_party", 15, 7),
					(jump_to_menu, "mnu_wm_quest_menu"),
				(else_try),
					(party_slot_eq, "$g_encountered_party", 15, 8),
					(jump_to_menu, "mnu_wm_quest_menu"),
				(else_try),
					(display_message, "str_quest_not_fit"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_palace"),
				(play_sound, "snd_pst_click"),
				(assign, ":value", 0),
				(try_begin),
					(troop_slot_ge, "trp_player", 18, 11),
					(assign, ":value", 1),
				(try_end),
				(try_begin),
					(eq, ":value", 1),
					(assign, "$wm_talk_state", 5),
					(set_jump_mission, "mt_visit_town_castle"),
					(assign, "$current_mission_template", "mt_visit_town_castle"),
					(mission_tpl_entry_clear_override_items, "mt_visit_town_castle", 0),
					(assign, ":value_5", "$g_encountered_party"),
					(call_script, "script_molda_scene_culture", ":value_5"),
					(assign, ":value_6", "$town_scene_hall"),
					(modify_visitors_at_site, ":value_6"),
					(reset_visitors),
					(call_script, "script_wm_troop_type_depend_train", ":value_5", 0),
					(assign, ":value_7", "$temp_party_troop_06"),
					(set_visitor, 6, ":value_7"),
					(set_visitor, 7, ":value_7"),
					(try_begin),
						(eq, "$g_encountered_party", "p_rome"),
						(set_visitor, 16, "trp_ex_npc_059"),
					(else_try),
						(eq, "$g_encountered_party", "p_kyoto"),
						(set_visitor, 16, "trp_ex_npc_060"),
					(try_end),
					(set_jump_entry, 0),
					(jump_to_scene, ":value_6"),
					(change_screen_mission),
				(else_try),
					(display_message, "str_t_palace_n"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_hall"),
				(play_sound, "snd_pst_click"),
				(assign, ":value", 0),
				(try_begin),
					(party_slot_eq, "$g_encountered_party", slot_town_tavern, "trp_player"),
					(assign, ":value", 1),
				(else_try),
					(neg|is_currently_night),
					(assign, ":value", 1),
				(try_end),
				(try_begin),
					(eq, ":value", 1),
					(assign, "$wm_talk_state", 5),
					(set_jump_mission, "mt_visit_town_castle"),
					(assign, "$current_mission_template", "mt_visit_town_castle"),
					(mission_tpl_entry_clear_override_items, "mt_visit_town_castle", 0),
					(assign, ":value_5", "$g_encountered_party"),
					(call_script, "script_molda_scene_culture", ":value_5"),
					(assign, ":value_6", "$town_scene_hall"),
					(modify_visitors_at_site, ":value_6"),
					(reset_visitors),
					(call_script, "script_wm_troop_type_depend_train", ":value_5", 0),
					(assign, ":value_7", "$temp_party_troop_06"),
					(set_visitor, 6, ":value_7"),
					(set_visitor, 7, ":value_7"),
					(try_begin),
						(party_get_slot, ":g_encountered_party_town_tavern", "$g_encountered_party", slot_town_tavern),
						(is_between, ":g_encountered_party_town_tavern", "trp_tt_lord_01_00", "trp_tt_lord_end"),
						(troop_slot_eq, ":g_encountered_party_town_tavern", slot_troop_love_interest_3, "$g_encountered_party"),
						(troop_slot_eq, ":g_encountered_party_town_tavern", slot_troop_cur_center, 0),
						(set_visitor, 16, ":g_encountered_party_town_tavern"),
					(try_end),
					(assign, ":var_11", 17),
					(try_begin),
						(party_slot_eq, "$g_encountered_party", slot_town_tavern, "trp_player"),
						(call_script, "script_troop_type_sett", "trp_player"),
						(lt, "$troop_gender_type", 10),
						(troop_get_slot, ":player_state", "trp_player", slot_troop_state),
						(is_between, ":player_state", "trp_tt_lady_01_01", "trp_tt_lady_end"),
						(troop_slot_eq, "trp_player", slot_troop_state, ":player_state"),
						(troop_slot_eq, ":player_state", slot_troop_state, "trp_player"),
						(set_visitor, ":var_11", ":player_state"),
						(val_add, ":var_11", 1),
					(try_end),
					(try_for_range, ":troop", "trp_tt_lady_01_01", "trp_tt_lady_end"),
						(troop_slot_eq, ":troop", slot_troop_betrothed, "$g_encountered_party"),
						(neg|troop_slot_eq, ":troop", slot_troop_leaded_party, 3),
						(neg|troop_slot_eq, "trp_player", slot_troop_state, ":troop"),
						(set_visitor, ":var_11", ":troop"),
						(val_add, ":var_11", 1),
					(try_end),
					(call_script, "script_wm_lord_count_own_place"),
					(store_faction_of_party, ":faction_of_party_g_encountered_party", "$g_encountered_party"),
					(try_for_range, ":troop_2", "trp_tt_lord_01_00", "trp_tt_lord_end"),
						(store_faction_of_troop, ":faction_of_troop_troop_2", ":troop_2"),
						(eq, ":faction_of_troop_troop_2", ":faction_of_party_g_encountered_party"),
						(faction_get_slot, ":faction_of_party_g_encountered_party_29", ":faction_of_party_g_encountered_party", 29),
						(eq, ":faction_of_party_g_encountered_party_29", "$g_encountered_party"),
						(troop_get_slot, ":troop_2_betrothed", ":troop_2", slot_troop_betrothed),
						(try_begin),
							(le, ":troop_2_betrothed", 0),
							(troop_slot_eq, ":troop_2", slot_troop_cur_center, 0),
							(set_visitor, ":var_11", ":troop_2"),
							(val_add, ":var_11", 1),
						(try_end),
					(try_end),
					(set_jump_entry, 0),
					(jump_to_scene, ":value_6"),
					(change_screen_mission),
				(else_try),
					(is_currently_night),
					(display_message, "str_door_close"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_street"),
				(play_sound, "snd_pst_click"),
				(assign, "$wm_talk_state", 4),
				(call_script, "script_molda_scene_culture", "$g_encountered_party"),
				(assign, ":var_19", "$town_scene_type"),
				(modify_visitors_at_site, ":var_19"),
				(reset_visitors),
				(call_script, "script_wm_troop_type_depend_train", "$g_encountered_party", 0),
				(assign, ":var_20", "$temp_party_troop_10"),
				(assign, ":var_21", "$temp_party_troop_06"),
				(assign, ":var_22", "$temp_party_troop_03"),
				(assign, ":var_23", "$temp_party_troop_04"),
				(set_visitor, 23, ":var_21"),
				(set_visitor, 24, ":var_20"),
				(assign, reg0, ":var_23"),
				(assign, reg1, ":var_23"),
				(assign, reg2, ":var_22"),
				(assign, reg3, ":var_22"),
				(shuffle_range, 0, 4),
				(set_visitor, 25, reg0),
				(set_visitor, 26, reg1),
				(set_visitor, 27, reg2),
				(set_visitor, 28, reg3),
				(set_visitor, 42, "$temp_party_troop_03"),
				(set_visitor, 43, "$temp_party_troop_03"),
				(set_visitor, 44, "$temp_party_troop_05"),
				(set_visitor, 45, "$temp_party_troop_05"),
				(call_script, "script_wm_every_global_sett_depend_faction", "$g_encountered_party"),
				(set_visitors, 32, "$wm_npc_walker_m", 2),
				(set_visitors, 33, "$wm_npc_walker_f", 2),
				(set_visitors, 34, "$wm_npc_walker_m", 2),
				(set_visitors, 35, "$wm_npc_walker_f", 2),
				(set_visitors, 36, "$wm_npc_walker_m", 2),
				(set_visitors, 37, "$wm_npc_walker_f", 2),
				(set_visitors, 38, "$wm_npc_walker_m", 2),
				(set_visitors, 39, "$wm_npc_walker_f", 2),
				(try_begin),
					(eq, "$qquest_type", 2),
					(eq, "$qquest_target_party", "$g_encountered_party"),
					(eq, "$qquest_progress", 0),
					(store_random_in_range, ":random_in_range_32_40", 32, 40),
					(set_visitors, ":random_in_range_32_40", "trp_fugitive", 1),
					(assign, "$wm_quest_mission_anti_skip_menu", 0),
				(try_end),
				(try_begin),
					(eq, "$qquest_type", 24),
					(eq, "$qquest_target_party", "$g_encountered_party"),
					(eq, "$qquest_progress", 0),
					(store_random_in_range, ":random_in_range_32_40_2", 32, 40),
					(store_random_in_range, ":random_in_range_32_40", 32, 40),
					(set_visitors, ":random_in_range_32_40_2", "$qquest_target_troop", 1),
					(set_visitors, ":random_in_range_32_40", "$qquest_target_faction", 1),
					(assign, "$wm_quest_mission_anti_skip_menu", 0),
				(try_end),
				(try_begin),
					(eq, "$wm_talk_state", 20),
					(assign, "$wm_talk_state", 20),
				(try_end),
				(set_visitor, 9, "$wm_npc_armorer"),
				(set_visitor, 10, "$wm_npc_merchant"),
				(store_random_in_range, ":random_in_range_0_7", 0, 7),
				(try_begin),
					(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_27"),
					(eq, ":random_in_range_0_7", 0),
					(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_05"),
					(eq, "$wm_comp_continue", 0),
					(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_05"),
					(neg|troop_slot_ge, "trp_tt_lady_ex_05", 3, "trp_tt_lord_01_00"),
					(set_visitor, 11, "trp_tt_lady_ex_05"),
				(else_try),
					(gt, "$main_q_step", 32),
					(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_9"),
					(eq, ":random_in_range_0_7", 0),
					(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_10"),
					(eq, "$wm_comp_continue", 0),
					(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_10"),
					(neg|troop_slot_ge, "trp_tt_lady_ex_10", 3, "trp_tt_lord_01_00"),
					(set_visitor, 11, "trp_tt_lady_ex_10"),
				(else_try),
					(this_or_next|eq, "$start_age", 1184),
					(eq, "$start_age", 0),
					(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_41"),
					(eq, ":random_in_range_0_7", 0),
					(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_11"),
					(eq, "$wm_comp_continue", 0),
					(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_11"),
					(neg|troop_slot_ge, "trp_tt_lady_ex_11", 3, "trp_tt_lord_01_00"),
					(set_visitor, 11, "trp_tt_lady_ex_11"),
				(else_try),
					(eq, "$start_age", 0),
					(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_3"),
					(eq, ":random_in_range_0_7", 0),
					(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_14"),
					(eq, "$wm_comp_continue", 0),
					(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_14"),
					(neg|troop_slot_ge, "trp_tt_lady_ex_14", 3, "trp_tt_lord_01_00"),
					(set_visitor, 11, "trp_tt_lady_ex_14"),
				(else_try),
					(gt, "$main_q_step", 48),
					(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_14"),
					(eq, ":random_in_range_0_7", 0),
					(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_16"),
					(eq, "$wm_comp_continue", 0),
					(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_16"),
					(neg|troop_slot_ge, "trp_tt_lady_ex_16", 3, "trp_tt_lord_01_00"),
					(set_visitor, 11, "trp_tt_lady_ex_16"),
				(else_try),
					(this_or_next|eq, "$start_age", 1573),
					(eq, "$start_age", 0),
					(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_africa_people"),
					(eq, ":random_in_range_0_7", 0),
					(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_17"),
					(eq, "$wm_comp_continue", 0),
					(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_17"),
					(neg|troop_slot_ge, "trp_tt_lady_ex_17", 3, "trp_tt_lord_01_00"),
					(set_visitor, 11, "trp_tt_lady_ex_17"),
				(else_try),
					(this_or_next|eq, "$start_age", 1573),
					(eq, "$start_age", 0),
					(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_23"),
					(eq, ":random_in_range_0_7", 0),
					(call_script, "script_wm_main_party_has_troop_sc", "trp_npc3"),
					(eq, "$wm_comp_continue", 0),
					(set_visitor, 11, "trp_npc3"),
				(else_try),
					(eq, "$start_age", 0),
					(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_19"),
					(eq, ":random_in_range_0_7", 0),
					(call_script, "script_wm_main_party_has_troop_sc", "trp_npc12"),
					(eq, "$wm_comp_continue", 0),
					(set_visitor, 11, "trp_npc12"),
				(else_try),
					(this_or_next|eq, "$start_age", 1573),
					(eq, "$start_age", 0),
					(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_20"),
					(eq, ":random_in_range_0_7", 0),
					(call_script, "script_wm_main_party_has_troop_sc", "trp_npc13"),
					(eq, "$wm_comp_continue", 0),
					(troop_slot_ge, "trp_npc13", 15, 1),
					(set_visitor, 11, "trp_npc13"),
				(else_try),
					(eq, "$start_age", 0),
					(eq, "$g_encountered_party", "p_syracuse"),
					(call_script, "script_wm_main_party_has_troop_sc", "trp_npc_19"),
					(eq, "$wm_comp_continue", 0),
					(set_visitor, 11, "trp_npc_19"),
				(else_try),
					(set_visitor, 11, "$wm_npc_religionist"),
				(try_end),
				(try_begin),
					(neg|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 15),
					(neg|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 16),
					(neg|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 17),
					(neg|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 18),
					(neg|party_slot_eq, "$g_encountered_party", slot_town_claimed_by_player, 24),
					(set_visitor, 12, "$wm_npc_horse_merchant"),
				(try_end),
				(set_jump_mission, "mt_town_center"),
				(assign, "$current_mission_template", "mt_town_center"),
				(assign, ":var_27", 256),
				(mission_tpl_entry_set_override_flags, "mt_town_center", 0, ":var_27"),
				(mission_tpl_entry_set_override_flags, "mt_town_center", 2, ":var_27"),
				(mission_tpl_entry_set_override_flags, "mt_town_center", 3, ":var_27"),
				(mission_tpl_entry_set_override_flags, "mt_town_center", 4, ":var_27"),
				(mission_tpl_entry_set_override_flags, "mt_town_center", 5, ":var_27"),
				(mission_tpl_entry_set_override_flags, "mt_town_center", 6, ":var_27"),
				(mission_tpl_entry_set_override_flags, "mt_town_center", 7, ":var_27"),
				(set_jump_entry, 1),
				(jump_to_scene, ":var_19"),
				(change_screen_mission),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_tavern"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(party_slot_eq, "$g_encountered_party", 15, 2),
					(assign, "$auto_event_enter", 1),
					(jump_to_menu, "mnu_wm_quest_menu"),
				(else_try),
					(assign, "$wm_talk_state", 3),
					(call_script, "script_molda_scene_culture", "$g_encountered_party"),
					(assign, ":var_28", "$town_scene_tavern"),
					(set_jump_mission, "mt_tavern_mission"),
					(assign, "$current_mission_template", "mt_tavern_mission"),
					(mission_tpl_entry_set_override_flags, "mt_tavern_mission", 0, 256),
					(jump_to_scene, ":var_28"),
					(modify_visitors_at_site, ":var_28"),
					(reset_visitors),
					(call_script, "script_wm_every_global_sett_depend_faction", "$g_encountered_party"),
					(set_visitor, 9, "$wm_npc_tavernkeeper"),
					(store_random_in_range, ":random_in_range_0_7", 0, 7),
					(try_begin),
						(gt, "$main_q_step", 32),
						(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_1"),
						(eq, ":random_in_range_0_7", 0),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_01"),
						(eq, "$wm_comp_continue", 0),
						(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_01"),
						(neg|troop_slot_ge, "trp_tt_lady_ex_01", 3, "trp_tt_lord_01_00"),
						(set_visitor, 5, "trp_tt_lady_ex_01"),
					(else_try),
						(this_or_next|eq, "$start_age", 1573),
						(eq, "$start_age", 0),
						(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_25"),
						(eq, ":random_in_range_0_7", 0),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_08"),
						(eq, "$wm_comp_continue", 0),
						(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_08"),
						(neg|troop_slot_ge, "trp_tt_lady_ex_08", 3, "trp_tt_lord_01_00"),
						(set_visitor, 5, "trp_tt_lady_ex_08"),
					(else_try),
						(eq, "$r18_control", 1),
						(gt, "$main_q_step", 48),
						(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_7"),
						(eq, ":random_in_range_0_7", 0),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_15"),
						(eq, "$wm_comp_continue", 0),
						(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_15"),
						(neg|troop_slot_ge, "trp_tt_lady_ex_15", 3, "trp_tt_lord_01_00"),
						(set_visitor, 5, "trp_tt_lady_ex_15"),
					(try_end),
					(try_begin),
						(eq, "$main_q_step", 20),
						(eq, "$main_q_party", "$g_encountered_party"),
						(gt, "$first_comp_id", 0),
						(set_visitor, 11, "$first_comp_id"),
					(else_try),
						(eq, "$main_q_step", 30),
						(eq, "$main_q_party", "$g_encountered_party"),
						(set_visitor, 11, "trp_npc_18"),
					(else_try),
						(set_visitor, 11, "$wm_npc_broker"),
					(try_end),
					(assign, ":value_8", 17),
					(store_random_in_range, ":random_in_range_0_7", 0, 7),
					(try_begin),
						(this_or_next|eq, "$start_age", 1573),
						(eq, "$start_age", 0),
						(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_40"),
						(eq, ":random_in_range_0_7", 0),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_02"),
						(eq, "$wm_comp_continue", 0),
						(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_02"),
						(neg|troop_slot_ge, "trp_tt_lady_ex_02", 3, "trp_tt_lord_01_00"),
						(set_visitor, ":value_8", "trp_tt_lady_ex_02"),
						(val_add, ":value_8", 1),
					(else_try),
						(this_or_next|eq, "$start_age", 1573),
						(eq, "$start_age", 0),
						(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_23"),
						(eq, ":random_in_range_0_7", 0),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_03"),
						(eq, "$wm_comp_continue", 0),
						(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_03"),
						(neg|troop_slot_ge, "trp_tt_lady_ex_03", 3, "trp_tt_lord_01_00"),
						(set_visitor, ":value_8", "trp_tt_lady_ex_03"),
						(val_add, ":value_8", 1),
					(else_try),
						(eq, "$start_age", 0),
						(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_28"),
						(eq, ":random_in_range_0_7", 0),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_04"),
						(eq, "$wm_comp_continue", 0),
						(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_04"),
						(neg|troop_slot_ge, "trp_tt_lady_ex_04", 3, "trp_tt_lord_01_00"),
						(set_visitor, ":value_8", "trp_tt_lady_ex_04"),
						(val_add, ":value_8", 1),
					(else_try),
						(this_or_next|eq, "$start_age", 1184),
						(eq, "$start_age", 0),
						(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_12"),
						(eq, ":random_in_range_0_7", 0),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_06"),
						(eq, "$wm_comp_continue", 0),
						(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_06"),
						(neg|troop_slot_ge, "trp_tt_lady_ex_06", 3, "trp_tt_lord_01_00"),
						(set_visitor, ":value_8", "trp_tt_lady_ex_06"),
						(val_add, ":value_8", 1),
					(else_try),
						(eq, "$start_age", 0),
						(eq, "$g_encountered_party", "p_orleans"),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_07"),
						(eq, "$wm_comp_continue", 0),
						(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_07"),
						(neg|troop_slot_ge, "trp_tt_lady_ex_07", 3, "trp_tt_lord_01_00"),
						(set_visitor, ":value_8", "trp_tt_lady_ex_07"),
						(val_add, ":value_8", 1),
					(else_try),
						(this_or_next|eq, "$start_age", 1184),
						(eq, "$start_age", 0),
						(gt, "$main_q_step", 48),
						(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_13"),
						(eq, ":random_in_range_0_7", 0),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_09"),
						(eq, "$wm_comp_continue", 0),
						(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_09"),
						(neg|troop_slot_ge, "trp_tt_lady_ex_09", 3, "trp_tt_lord_01_00"),
						(set_visitor, ":value_8", "trp_tt_lady_ex_09"),
						(val_add, ":value_8", 1),
					(else_try),
						(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_20"),
						(eq, ":random_in_range_0_7", 0),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_12"),
						(eq, "$wm_comp_continue", 0),
						(troop_slot_ge, "trp_tt_lady_ex_12", 15, 1),
						(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_12"),
						(neg|troop_slot_ge, "trp_tt_lady_ex_12", 3, "trp_tt_lord_01_00"),
						(set_visitor, ":value_8", "trp_tt_lady_ex_12"),
						(val_add, ":value_8", 1),
					(else_try),
						(eq, "$start_age", 1573),
						(eq, "$g_encountered_party", "p_okayama"),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_13"),
						(eq, "$wm_comp_continue", 0),
						(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_13"),
						(neg|troop_slot_ge, "trp_tt_lady_ex_13", 3, "trp_tt_lord_01_00"),
						(set_visitor, ":value_8", "trp_tt_lady_ex_13"),
						(val_add, ":value_8", 1),
					(else_try),
						(eq, "$r18_control", 1),
						(gt, "$main_q_step", 32),
						(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_47"),
						(eq, ":random_in_range_0_7", 0),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_tt_lady_ex_18"),
						(eq, "$wm_comp_continue", 0),
						(neg|troop_slot_eq, "trp_player", slot_troop_state, "trp_tt_lady_ex_18"),
						(neg|troop_slot_ge, "trp_tt_lady_ex_18", 3, "trp_tt_lord_01_00"),
						(set_visitor, ":value_8", "trp_tt_lady_ex_18"),
						(val_add, ":value_8", 1),
					(try_end),
					(store_random_in_range, ":random_in_range_0_7", 0, 7),
					(try_begin),
						(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_13"),
						(eq, ":random_in_range_0_7", 0),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_npc14"),
						(eq, "$wm_comp_continue", 0),
						(troop_slot_ge, "trp_npc14", 15, 1),
						(set_visitor, ":value_8", "trp_npc14"),
						(val_add, ":value_8", 1),
					(else_try),
						(this_or_next|eq, "$start_age", 1573),
						(eq, "$start_age", 0),
						(eq, "$g_encountered_party", "p_sevilla"),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_npc1"),
						(eq, "$wm_comp_continue", 0),
						(set_visitor, ":value_8", "trp_npc1"),
						(val_add, ":value_8", 1),
					(else_try),
						(this_or_next|eq, "$start_age", 1184),
						(eq, "$start_age", 0),
						(eq, "$g_encountered_party", "p_nottingham"),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_npc2"),
						(eq, "$wm_comp_continue", 0),
						(set_visitor, ":value_8", "trp_npc2"),
						(val_add, ":value_8", 1),
					(else_try),
						(eq, "$g_encountered_party", "p_northamton"),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_npc4"),
						(eq, "$wm_comp_continue", 0),
						(set_visitor, ":value_8", "trp_npc4"),
						(val_add, ":value_8", 1),
					(else_try),
						(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_5"),
						(eq, ":random_in_range_0_7", 0),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_npc5"),
						(eq, "$wm_comp_continue", 0),
						(set_visitor, ":value_8", "trp_npc5"),
						(val_add, ":value_8", 1),
					(else_try),
						(eq, "$start_age", 0),
						(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_28"),
						(eq, ":random_in_range_0_7", 0),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_npc6"),
						(eq, "$wm_comp_continue", 0),
						(set_visitor, ":value_8", "trp_npc6"),
						(val_add, ":value_8", 1),
					(else_try),
						(this_or_next|eq, "$start_age", 1184),
						(eq, "$start_age", 0),
						(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_1"),
						(eq, ":random_in_range_0_7", 0),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_npc7"),
						(eq, "$wm_comp_continue", 0),
						(set_visitor, ":value_8", "trp_npc7"),
						(val_add, ":value_8", 1),
					(else_try),
						(eq, "$start_age", 0),
						(eq, "$g_encountered_party", "p_dungannon"),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_npc9"),
						(eq, "$wm_comp_continue", 0),
						(set_visitor, ":value_8", "trp_npc9"),
						(val_add, ":value_8", 1),
					(else_try),
						(this_or_next|eq, "$start_age", 1573),
						(eq, "$start_age", 0),
						(party_slot_eq, "$g_encountered_party", slot_town_center, "fac_kingdom_50"),
						(eq, ":random_in_range_0_7", 0),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_npc11"),
						(eq, "$wm_comp_continue", 0),
						(set_visitor, ":value_8", "trp_npc11"),
						(val_add, ":value_8", 1),
					(else_try),
						(this_or_next|eq, "$start_age", 1573),
						(eq, "$start_age", 0),
						(eq, "$g_encountered_party", "p_ulsan"),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_npc_21"),
						(eq, "$wm_comp_continue", 0),
						(set_visitor, ":value_8", "trp_npc_21"),
						(val_add, ":value_8", 1),
					(else_try),
						(this_or_next|eq, "$start_age", 1573),
						(eq, "$start_age", 0),
						(eq, "$g_encountered_party", "p_mombasa"),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_npc_23"),
						(eq, "$wm_comp_continue", 0),
						(set_visitor, ":value_8", "trp_npc_23"),
						(val_add, ":value_8", 1),
					(else_try),
						(this_or_next|eq, "$start_age", 1184),
						(eq, "$start_age", 0),
						(eq, "$g_encountered_party", "p_brattalid"),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_npc_24"),
						(eq, "$wm_comp_continue", 0),
						(set_visitor, ":value_8", "trp_npc_24"),
						(val_add, ":value_8", 1),
					(else_try),
						(eq, "$start_age", 0),
						(eq, "$g_encountered_party", "p_liguria"),
						(call_script, "script_wm_main_party_has_troop_sc", "trp_npc_26"),
						(eq, "$wm_comp_continue", 0),
						(set_visitor, ":value_8", "trp_npc_26"),
						(val_add, ":value_8", 1),
					(try_end),
					(try_begin),
						(store_random_in_range, ":random_in_range_tavern_traveler_1_tavern_bookseller_1", "trp_tavern_traveler_1", "trp_tavern_bookseller_1"),
						(set_visitor, ":value_8", ":random_in_range_tavern_traveler_1_tavern_bookseller_1"),
						(val_add, ":value_8", 1),
					(try_end),
					(try_begin),
						(store_random_in_range, ":random_in_range_tavern_minstrel_1_religionists_1", "trp_tavern_minstrel_1", "trp_religionists_1"),
						(set_visitor, ":value_8", ":random_in_range_tavern_minstrel_1_religionists_1"),
						(val_add, ":value_8", 1),
					(try_end),
					(try_begin),
						(eq, "$wm_buying_drink_for_army", 0),
						(call_script, "script_wm_troop_type_depend_train", "$g_encountered_party", 0),
						(try_begin),
							(eq, "$comp_rel_passsss", 5),
							(assign, ":value_9", "$temp_party_troop_03"),
						(else_try),
							(eq, "$comp_rel_passsss", 4),
							(assign, ":value_9", "$temp_party_troop_04"),
						(else_try),
							(eq, "$comp_rel_passsss", 3),
							(assign, ":value_9", "$temp_party_troop_05"),
						(else_try),
							(eq, "$comp_rel_passsss", 2),
							(assign, ":value_9", "$temp_party_troop_06"),
						(else_try),
							(eq, "$comp_rel_passsss", 1),
							(assign, ":value_9", "$temp_party_troop_07"),
						(else_try),
							(assign, ":value_9", "$temp_party_troop_08"),
						(try_end),
						(set_visitor, ":value_8", ":value_9"),
						(val_add, ":value_8", 1),
					(try_end),
					(change_screen_mission),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_market"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(this_or_next|eq, "$hourr_count", 19),
					(eq, "$hourr_count", 20),
					(jump_to_menu, "mnu_night_market"),
				(else_try),
					(try_begin),
						(call_script, "script_wm_merchant_items_reset", "trp_town_1_merchant"),
						(party_get_slot, "$prev_encountered_party_culture", "$g_encountered_party", slot_town_claimed_by_player),
					(try_end),
					(call_script, "script_wm_trade_price_export", "$g_encountered_party", 1),
					(start_presentation, "prsnt_wm_item_trade"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_tradep"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(neg|party_slot_eq, "$g_encountered_party", slot_town_tavern, "trp_player"),
					(neg|party_slot_ge, "$g_encountered_party", 12, 0),
					(display_message, "str_place_repu_bad", 0x00ff9000),
				(else_try),
					(call_script, "script_wm_trade_price_export", "$g_encountered_party", 0),
					(call_script, "script_wm_trader_items_reset", "trp_town_1_merchant"),
					(start_presentation, "prsnt_wm_item_trade"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_library"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(neg|party_slot_eq, "$g_encountered_party", slot_town_tavern, "trp_player"),
					(neg|party_slot_ge, "$g_encountered_party", 12, 0),
					(display_message, "str_place_repu_bad", 0x00ff9000),
				(else_try),
					(assign, reg31, -1),
					(assign, reg32, -1),
					(assign, reg33, -1),
					(assign, reg34, -1),
					(assign, reg35, -1),
					(assign, reg40, 0),
					(str_clear, 41),
					(str_clear, 45),
					(str_store_string, 45, "str_lib_guess"),
					(start_presentation, "prsnt_library_pst"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_academy"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(neg|party_slot_eq, "$g_encountered_party", slot_town_tavern, "trp_player"),
					(neg|party_slot_ge, "$g_encountered_party", 12, 0),
					(display_message, "str_place_repu_bad", 0x00ff9000),
				(else_try),
					(call_script, "script_academy_scholr_setting", "$g_encountered_party"),
					(assign, ":var_33", reg0),
					(assign, "$wm_talk_state", 0),
					(call_script, "script_setup_troop_meet_interior", ":var_33", -1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_cpost"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(neg|party_slot_eq, "$g_encountered_party", slot_town_tavern, "trp_player"),
					(neg|party_slot_ge, "$g_encountered_party", 12, 0),
					(display_message, "str_place_repu_bad", 0x00ff9000),
				(else_try),
					(start_presentation, "prsnt_strategy_learn"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_bank"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(neg|party_slot_eq, "$g_encountered_party", slot_town_tavern, "trp_player"),
					(neg|party_slot_ge, "$g_encountered_party", 12, 0),
					(display_message, "str_place_repu_bad", 0x00ff9000),
				(else_try),
					(jump_to_menu, "mnu_wm_bank_menu"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_bstore"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(neg|party_slot_eq, "$g_encountered_party", slot_town_tavern, "trp_player"),
					(neg|party_slot_ge, "$g_encountered_party", 12, 0),
					(display_message, "str_place_repu_bad", 0x00ff9000),
				(else_try),
					(jump_to_menu, "mnu_wm_book_store"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_fightpit"),
				(play_sound, "snd_pst_click"),
				(call_script, "script_go_fight_pit_mission"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_bath"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(assign, "$wm_talk_state", 13),
					(assign, ":var_34", "scn_public_bath"),
					(modify_visitors_at_site, ":var_34"),
					(reset_visitors),
					(try_begin),
						(gt, "$player_bath_cooltime", 0),
						(play_sound, "snd_experience_gained"),
						(display_message, "str_player_bath_enter", 0x0000ff00),
					(try_end),
					(assign, "$player_bath_cooltime", 0),
					(call_script, "script_wm_every_global_sett_depend_faction", "$g_encountered_party"),
					(call_script, "script_wm_troop_type_depend_train", "$g_encountered_party", 0),
					(call_script, "script_troop_type_sett", "trp_player"),
					(try_begin),
						(gt, "$troop_gender_type", 10),
						(try_for_range, ":value_8", 21, 31),
							(set_visitor, ":value_8", "$wm_npc_walker_f"),
						(try_end),
						(assign, ":value_8", 16),
						(try_for_range, ":troop_2", "trp_tt_lady_01_01", "trp_tt_lady_end"),
							(call_script, "script_wm_main_party_has_troop_sc", ":troop_2"),
							(eq, "$wm_comp_continue", 1),
							(set_visitor, ":value_8", ":troop_2"),
							(val_add, ":value_8", 1),
						(try_end),
					(else_try),
						(try_for_range, ":value_8", 21, 31),
							(set_visitor, ":value_8", "$wm_npc_walker_m"),
						(try_end),
						(assign, ":value_8", 16),
						(try_for_range, ":troop_2", "trp_npc1", "trp_kingdom_1_lord"),
							(call_script, "script_wm_main_party_has_troop_sc", ":troop_2"),
							(eq, "$wm_comp_continue", 1),
							(set_visitor, ":value_8", ":troop_2"),
							(val_add, ":value_8", 1),
						(try_end),
					(try_end),
					(set_visitor, 11, "$temp_party_troop_06"),
					(set_visitor, 12, "$temp_party_troop_06"),
					(set_visitor, 13, "trp_bath_manager"),
					(assign, "$temp_num_01", 0),
					(store_random_in_range, ":random_in_range_32_40", 0, 20),
					(try_begin),
						(gt, "$troop_gender_type", 10),
						(eq, ":random_in_range_32_40", 0),
						(call_script, "script_temp_save_number11_initialize"),
						(try_for_range, ":troop_2", "trp_npc1", "trp_kingdom_1_lord"),
							(call_script, "script_wm_main_party_has_troop_sc", ":troop_2"),
							(eq, "$wm_comp_continue", 1),
							(call_script, "script_temp_save_number11_inject", ":troop_2"),
						(try_end),
						(call_script, "script_temp_save_number11_choice_rand"),
						(is_between, "$wm_target_number11", "trp_npc1", "trp_kingdom_1_lord"),
						(assign, "$temp_num_01", "$wm_target_number11"),
						(store_random_in_range, ":random_in_range_32_40_2", 14, 16),
						(set_visitor, ":random_in_range_32_40_2", "$temp_num_01"),
					(try_end),
					(set_jump_mission, "mt_camp_mission"),
					(assign, "$current_mission_template", "mt_camp_mission"),
					(set_jump_entry, 10),
					(jump_to_scene, ":var_34"),
					(change_screen_mission),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_army_stay"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(neg|is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
					(assign, "$ply_staying_party_no", "$g_encountered_party"),
					(assign, "$ply_staying_army_recruit_on", 0),
					(assign, ":value_10", 0),
					(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
					(try_for_range, ":localvariable", 0, ":num_companion_stacks_main_party"),
						(party_stack_get_troop_id, ":party_stack_troop_id_main_party_localvariable", "p_main_party", ":localvariable"),
						(eq, ":party_stack_troop_id_main_party_localvariable", "trp_army_size_troop"),
						(party_stack_get_size, ":party_stack_size_main_party_localvariable", "p_main_party", ":localvariable"),
						(assign, ":value_10", ":party_stack_size_main_party_localvariable"),
					(try_end),
					(try_begin),
						(gt, ":value_10", 0),
						(assign, "$ply_staying_army_size", ":value_10"),
						(call_script, "script_party_army_size_execute", "p_main_party", 0, 5),
					(try_end),
					(display_message, "str_t_armystay_1m", 0x00ffff00),
				(else_try),
					(is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
					(assign, "$ply_staying_party_no", 0),
					(assign, "$ply_staying_army_recruit_on", 0),
					(try_begin),
						(gt, "$ply_staying_army_size", 0),
						(call_script, "script_party_army_size_execute", "p_main_party", "$ply_staying_army_size", 5),
					(try_end),
					(assign, "$ply_staying_army_size", 0),
					(display_message, "str_t_armystay_2m", 0x00ffff00),
				(try_end),
				(start_presentation, "prsnt_town_encounter"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_rest"),
				(play_sound, "snd_pst_click"),
				(assign, "$player_recruit_train_start", 3),
				(rest_for_hours_interactive, 8760, 6, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_train"),
				(play_sound, "snd_pst_click"),
				(assign, "$player_recruit_train_start", 2),
				(rest_for_hours_interactive, 8760, 6, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_recruit"),
				(play_sound, "snd_pst_click"),
				(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party", "p_main_party"),
				(try_begin),
					(is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
					(neq, "$ply_staying_party_no", "$g_encountered_party"),
					(le, ":party_size_wo_prisoners_main_party", 300),
					(jump_to_menu, "mnu_stay_army_dispose_sure"),
				(else_try),
					(is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
					(eq, "$ply_staying_party_no", "$g_encountered_party"),
					(eq, "$ply_staying_army_recruit_on", 0),
					(assign, "$ply_staying_army_recruit_on", 1),
					(start_presentation, "prsnt_town_encounter"),
				(else_try),
					(is_between, "$ply_staying_party_no", "p_pyongyang", "p_place_end"),
					(eq, "$ply_staying_party_no", "$g_encountered_party"),
					(eq, "$ply_staying_army_recruit_on", 1),
					(assign, "$ply_staying_army_recruit_on", 0),
					(start_presentation, "prsnt_town_encounter"),
				(else_try),
					(assign, "$player_recruit_train_start", 1),
					(rest_for_hours_interactive, 8760, 6, 0),
					(jump_to_menu, "mnu_wm_pst_map_return"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_hire"),
				(play_sound, "snd_pst_click"),
				(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party", "p_main_party"),
				(try_begin),
					(gt, ":party_size_wo_prisoners_main_party", 300),
					(call_script, "script_wm_troop_type_depend_train", "$g_encountered_party", 50),
					(assign, "$last_hired_troop_id", "$temp_party_troop_01"),
					(dialog_box, "str_hire_tip", "str_box_note"),
				(else_try),
					(assign, ":var_41", 0),
					(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
					(try_for_range, ":localvariable", 0, ":num_companion_stacks_main_party"),
						(party_stack_get_troop_id, ":party_stack_troop_id_main_party_localvariable", "p_main_party", ":localvariable"),
						(gt, ":party_stack_troop_id_main_party_localvariable", "trp_army_size_troop"),
						(neg|troop_is_hero, ":party_stack_troop_id_main_party_localvariable"),
						(party_stack_get_size, ":party_stack_size_main_party_localvariable", "p_main_party", ":localvariable"),
						(val_add, ":var_41", ":party_stack_size_main_party_localvariable"),
					(try_end),
					(store_sub, ":value_11", 80, ":var_41"),
					(try_begin),
						(gt, ":value_11", 5),
						(assign, ":value_11", 5),
					(try_end),
					(store_mul, ":value_12", ":value_11", 30),
					(call_script, "script_party_money_level_ge", "p_main_party", ":value_12"),
					(try_begin),
						(ge, ":var_41", 80),
						(dialog_box, "str_hire_limits", "str_box_note"),
					(else_try),
						(neq, "$wm_mo_continue", 1),
						(dialog_box, "str_nomoney", "str_box_note"),
					(else_try),
						(call_script, "script_party_money_level_diff", "p_main_party", ":value_12", 34),
						(call_script, "script_wm_troop_type_depend_train", "$g_encountered_party", 50),
						(assign, "$last_hired_troop_id", "$temp_party_troop_01"),
						(party_add_members, "p_main_party", "$last_hired_troop_id", ":value_11"),
					(try_end),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_mansion"),
				(play_sound, "snd_pst_click"),
				(assign, "$lady_mansion_open", 0),
				(assign, "$pst_target_no", 0),
				(start_presentation, "prsnt_pst_lady_mansion"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_tournament"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(party_slot_eq, "$g_encountered_party", slot_party_last_toll_paid_hours, 1),
					(try_begin),
						(ge, "$random_succ_100_orand", 40),
						(assign, "$tournament_type", 1),
					(else_try),
						(assign, "$tournament_type", 2),
					(try_end),
					(assign, "$g_enter_arena", 0),
					(assign, "$tournament_phase", 1),
					(assign, "$tournament_bet_money", 0),
					(party_set_slot, "$g_encountered_party", slot_party_last_toll_paid_hours, 0),
					(jump_to_menu, "mnu_wm_tournament"),
				(else_try),
					(try_begin),
						(ge, "$random_succ_100_orand", 40),
						(assign, "$tournament_type", 1),
					(else_try),
						(assign, "$tournament_type", 2),
					(try_end),
					(assign, "$g_enter_arena", 1),
					(assign, "$tournament_phase", 1),
					(assign, "$tournament_bet_money", 0),
					(jump_to_menu, "mnu_wm_tournament"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_coup"),
				(play_sound, "snd_pst_click"),
				(jump_to_menu, "mnu_coup_view"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_town_auto"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(party_slot_eq, "$g_encountered_party", slot_town_tavern, "trp_player"),
					(party_slot_eq, "$g_encountered_party", slot_town_lord, 1),
					(party_set_slot, "$g_encountered_party", slot_town_lord, 0),
					(play_sound, "snd_wood_cuttt"),
					(display_message, "str_auto_mess_off"),
				(else_try),
					(party_slot_eq, "$g_encountered_party", slot_town_tavern, "trp_player"),
					(party_slot_eq, "$g_encountered_party", slot_town_lord, 0),
					(party_set_slot, "$g_encountered_party", slot_town_lord, 1),
					(play_sound, "snd_wood_cuttt"),
					(display_message, "str_auto_mess_on"),
				(try_end),
				(start_presentation, "prsnt_town_encounter"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("pst_pirate_occu", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(position_set_x, 3, 2000),
			(position_set_y, 3, 2000),
			(create_text_overlay, reg0, "str_sea_occupancy", 16),
			(position_set_x, 1, 490),
			(position_set_y, 1, 680),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(position_set_x, 3, 1000),
			(position_set_y, 3, 1000),
			(assign, ":var_1", 50),
			(assign, ":var_2", 620),
			(try_for_range, ":troop", "trp_ex_npc_020", "trp_ex_npc_054"),
				(neq, ":troop", "trp_ex_npc_039"),
				(neq, ":troop", "trp_ex_npc_040"),
				(neq, ":troop", "trp_ex_npc_041"),
				(neq, ":troop", "trp_ex_npc_042"),
				(neq, ":troop", "trp_ex_npc_043"),
				(troop_get_slot, ":troop_last_persuasion_time", ":troop", slot_troop_last_persuasion_time),
				(try_begin),
					(eq, ":troop_last_persuasion_time", 1),
					(assign, ":value", 33),
				(else_try),
					(eq, ":troop_last_persuasion_time", 2),
					(assign, ":value", 66),
				(else_try),
					(eq, ":troop_last_persuasion_time", 3),
					(assign, ":value", 100),
				(else_try),
					(assign, ":value", 0),
				(try_end),
				(str_store_troop_name, 8, ":troop"),
				(assign, reg8, ":value"),
				(create_text_overlay, reg0, "str_s8reg8per"),
				(position_set_x, 1, ":var_1"),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(try_begin),
					(eq, ":troop_last_persuasion_time", 3),
					(overlay_set_color, reg0, 65280),
				(try_end),
				(val_sub, ":var_2", 20),
			(try_end),
			(create_in_game_button_overlay, "$pst_occu_exit", "str_return_butt", 16),
			(position_set_x, 1, 490),
			(position_set_y, 1, 55),
			(overlay_set_position, "$pst_occu_exit", 1),
			(overlay_set_color, "$pst_occu_exit", 16777215)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$pst_occu_exit"),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_reports"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("pst_faction_hero_info", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_mesh_overlay, reg0, "mesh_pic_meetlady4"),
			(position_set_x, 1, 0),
			(position_set_y, 1, 0),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 16777215),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 20),
			(position_set_y, 1, 25),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 48000),
			(position_set_y, 1, 35000),
			(overlay_set_size, reg0, 1),
			(create_in_game_button_overlay, "$g_choose_kingdom_exit", "str_return_butt", 16),
			(position_set_x, 1, 495),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_choose_kingdom_exit", 1),
			(overlay_set_color, "$g_choose_kingdom_exit", 16777215),
			(create_text_overlay, reg0, "str_n_lord", 4),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 195),
			(position_set_y, 1, 645),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_n_lady", 4),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 710),
			(position_set_y, 1, 645),
			(overlay_set_position, reg0, 1),
			(call_script, "script_temp_save_number11_initialize"),
			(try_for_range, ":troop", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(eq, ":faction_of_troop_troop", "$pst_target_no"),
				(call_script, "script_temp_save_number11_inject", ":troop"),
			(try_end),
			(str_clear, 20),
			(str_clear, 21),
			(str_clear, 22),
			(str_clear, 23),
			(str_clear, 24),
			(str_clear, 25),
			(str_clear, 26),
			(str_clear, 27),
			(str_clear, 28),
			(str_clear, 29),
			(str_clear, 30),
			(str_clear, 31),
			(str_clear, 32),
			(str_clear, 33),
			(str_clear, 34),
			(str_clear, 35),
			(try_begin),
				(is_between, "$temp_save_number11_1", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 21, "$temp_save_number11_1"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_2", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 22, "$temp_save_number11_2"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_3", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 23, "$temp_save_number11_3"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_4", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 24, "$temp_save_number11_4"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_5", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 25, "$temp_save_number11_5"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 26, "$temp_save_number11_6"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_7", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 27, "$temp_save_number11_7"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_8", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 28, "$temp_save_number11_8"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_9", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 29, "$temp_save_number11_9"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_10", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 30, "$temp_save_number11_10"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_11", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 31, "$temp_save_number11_11"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_12", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 32, "$temp_save_number11_12"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_13", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 33, "$temp_save_number11_13"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_14", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 34, "$temp_save_number11_14"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_15", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(str_store_troop_name, 35, "$temp_save_number11_15"),
			(try_end),
			(assign, ":value", 45),
			(assign, ":value_2", 580),
			(assign, ":value_3", 25),
			(assign, ":value_4", 280),
			(assign, ":value_5", 60),
			(position_set_x, 5, 1000),
			(position_set_y, 5, 1000),
			(assign, ":value_6", "$temp_save_number11_1"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s21", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lord_1", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lord_1", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lord_1", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lord_1", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_2"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s22", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lord_2", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lord_2", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lord_2", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lord_2", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_3"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s23", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lord_3", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lord_3", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lord_3", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lord_3", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_4"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s24", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lord_4", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lord_4", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lord_4", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lord_4", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_5"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s25", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lord_5", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lord_5", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lord_5", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lord_5", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_6"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s26", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lord_6", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lord_6", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lord_6", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lord_6", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_7"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s27", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lord_7", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lord_7", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lord_7", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lord_7", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_8"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s28", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lord_8", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lord_8", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lord_8", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lord_8", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_9"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s29", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lord_9", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lord_9", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lord_9", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lord_9", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_10"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s30", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lord_10", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lord_10", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lord_10", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lord_10", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_11"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s31", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lord_11", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lord_11", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lord_11", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lord_11", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_12"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s32", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lord_12", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lord_12", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lord_12", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lord_12", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_13"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s33", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lord_13", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lord_13", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lord_13", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lord_13", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_14"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s34", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lord_14", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lord_14", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lord_14", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lord_14", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_15"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s35", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lord_01_00", "trp_tt_lord_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lord_15", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lord_15", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lord_15", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lord_15", "str_empty_string", 4),
			(try_end),
			(call_script, "script_temp_save_number11_initialize"),
			(try_for_range, ":troop", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(eq, ":faction_of_troop_troop", "$pst_target_no"),
				(neg|troop_slot_eq, "trp_player", slot_troop_state, ":troop"),
				(call_script, "script_temp_save_number11_inject", ":troop"),
			(try_end),
			(str_clear, 20),
			(str_clear, 21),
			(str_clear, 22),
			(str_clear, 23),
			(str_clear, 24),
			(str_clear, 25),
			(str_clear, 26),
			(str_clear, 27),
			(str_clear, 28),
			(str_clear, 29),
			(str_clear, 30),
			(str_clear, 31),
			(str_clear, 32),
			(str_clear, 33),
			(str_clear, 34),
			(str_clear, 35),
			(try_begin),
				(is_between, "$temp_save_number11_1", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 21, "$temp_save_number11_1"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_2", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 22, "$temp_save_number11_2"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_3", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 23, "$temp_save_number11_3"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_4", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 24, "$temp_save_number11_4"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_5", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 25, "$temp_save_number11_5"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 26, "$temp_save_number11_6"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_7", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 27, "$temp_save_number11_7"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_8", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 28, "$temp_save_number11_8"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_9", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 29, "$temp_save_number11_9"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_10", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 30, "$temp_save_number11_10"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_11", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 31, "$temp_save_number11_11"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_12", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 32, "$temp_save_number11_12"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_13", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 33, "$temp_save_number11_13"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_14", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 34, "$temp_save_number11_14"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_15", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 35, "$temp_save_number11_15"),
			(try_end),
			(assign, ":value", 600),
			(assign, ":value_2", 580),
			(assign, ":value_3", 25),
			(assign, ":value_4", 170),
			(assign, ":value_5", 60),
			(position_set_x, 5, 1000),
			(position_set_y, 5, 1000),
			(assign, ":value_6", "$temp_save_number11_1"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s21", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lady_1", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lady_1", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lady_1", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lady_1", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_2"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s22", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lady_2", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lady_2", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lady_2", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lady_2", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_3"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s23", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lady_3", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lady_3", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lady_3", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lady_3", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_4"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s24", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lady_4", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lady_4", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lady_4", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lady_4", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_5"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s25", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lady_5", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lady_5", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lady_5", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lady_5", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_6"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s26", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lady_6", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lady_6", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lady_6", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lady_6", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_7"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s27", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lady_7", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lady_7", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lady_7", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lady_7", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_8"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s28", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lady_8", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lady_8", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lady_8", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lady_8", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_9"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s29", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lady_9", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lady_9", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lady_9", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lady_9", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_10"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s30", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lady_10", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lady_10", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lady_10", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lady_10", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_11"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s31", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lady_11", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lady_11", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lady_11", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lady_11", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_12"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s32", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lady_12", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lady_12", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lady_12", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lady_12", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_13"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s33", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lady_13", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lady_13", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lady_13", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lady_13", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_14"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s34", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lady_14", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lady_14", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lady_14", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lady_14", "str_empty_string", 4),
			(try_end),
			(assign, ":value_6", "$temp_save_number11_15"),
			(val_sub, ":value_2", ":value_3"),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(call_script, "script_lord_lady_status_export_for_pst", ":value_6"),
				(create_text_overlay, reg0, "str_glob_s35", 4),
			(else_try),
				(create_text_overlay, reg0, "str_empty_string"),
			(try_end),
			(overlay_set_size, reg0, 5),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(is_between, ":value_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(val_add, ":value", ":value_4"),
				(create_text_overlay, reg0, "str_glob_s8", 4),
				(overlay_set_size, reg0, 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_add, ":value", ":value_5"),
				(create_button_overlay, "$hero_list_lady_15", "str_glob_s9", 4),
				(overlay_set_size, "$hero_list_lady_15", 5),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$hero_list_lady_15", 1),
				(val_sub, ":value", ":value_4"),
				(val_sub, ":value", ":value_5"),
			(else_try),
				(create_text_overlay, "$hero_list_lady_15", "str_empty_string", 4),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_choose_kingdom_exit"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lord_1"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lord_2"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lord_3"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lord_4"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lord_5"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lord_6"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lord_7"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lord_8"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lord_9"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lord_10"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lord_11"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lord_12"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lord_13"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lord_14"),
				(eq, ":trigger_param_1", "$hero_list_lord_15"),
				(call_script, "script_temp_save_number11_initialize"),
				(try_for_range, ":troop", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
					(eq, ":faction_of_troop_troop", "$pst_target_no"),
					(call_script, "script_temp_save_number11_inject", ":troop"),
				(try_end),
				(assign, ":value", 0),
				(try_begin),
					(eq, ":trigger_param_1", "$hero_list_lord_1"),
					(assign, ":value", "$temp_save_number11_1"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lord_2"),
					(assign, ":value", "$temp_save_number11_2"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lord_3"),
					(assign, ":value", "$temp_save_number11_3"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lord_4"),
					(assign, ":value", "$temp_save_number11_4"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lord_5"),
					(assign, ":value", "$temp_save_number11_5"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lord_6"),
					(assign, ":value", "$temp_save_number11_6"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lord_7"),
					(assign, ":value", "$temp_save_number11_7"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lord_8"),
					(assign, ":value", "$temp_save_number11_8"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lord_9"),
					(assign, ":value", "$temp_save_number11_9"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lord_10"),
					(assign, ":value", "$temp_save_number11_10"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lord_11"),
					(assign, ":value", "$temp_save_number11_11"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lord_12"),
					(assign, ":value", "$temp_save_number11_12"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lord_13"),
					(assign, ":value", "$temp_save_number11_13"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lord_14"),
					(assign, ":value", "$temp_save_number11_14"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lord_15"),
					(assign, ":value", "$temp_save_number11_15"),
				(try_end),
				(try_begin),
					(is_between, ":value", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(try_begin),
						(troop_slot_eq, ":value", slot_troop_cur_center, 1),
						(troop_get_slot, ":value_wealth", ":value", slot_troop_wealth),
						(party_is_active, ":value_wealth"),
						(neg|is_between, ":value_wealth", "p_temp_party", "p_reserved_5"),
						(party_slot_eq, ":value_wealth", slot_party_type, 1),
						(party_slot_eq, ":value_wealth", slot_town_horse_merchant, ":value"),
						(assign, ":value_2", ":value_wealth"),
					(else_try),
						(troop_slot_eq, ":value", slot_troop_cur_center, 0),
						(troop_get_slot, ":value_love_interest_3", ":value", slot_troop_love_interest_3),
						(is_between, ":value_love_interest_3", "p_pyongyang", "p_place_end"),
						(assign, ":value_2", ":value_love_interest_3"),
					(try_end),
					(presentation_set_duration, 0),
					(presentation_set_duration, 0),
					(jump_to_menu, "mnu_wm_pst_map_return"),
					(assign, "$camera_focus_on", 1),
					(set_camera_follow_party, ":value_2"),
				(try_end),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lady_1"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lady_2"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lady_3"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lady_4"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lady_5"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lady_6"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lady_7"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lady_8"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lady_9"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lady_10"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lady_11"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lady_12"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lady_13"),
				(this_or_next|eq, ":trigger_param_1", "$hero_list_lady_14"),
				(eq, ":trigger_param_1", "$hero_list_lady_15"),
				(call_script, "script_temp_save_number11_initialize"),
				(try_for_range, ":troop", "trp_tt_lady_01_01", "trp_tt_lady_end"),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
					(eq, ":faction_of_troop_troop", "$pst_target_no"),
					(call_script, "script_temp_save_number11_inject", ":troop"),
				(try_end),
				(assign, ":value", 0),
				(try_begin),
					(eq, ":trigger_param_1", "$hero_list_lady_1"),
					(assign, ":value", "$temp_save_number11_1"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lady_2"),
					(assign, ":value", "$temp_save_number11_2"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lady_3"),
					(assign, ":value", "$temp_save_number11_3"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lady_4"),
					(assign, ":value", "$temp_save_number11_4"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lady_5"),
					(assign, ":value", "$temp_save_number11_5"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lady_6"),
					(assign, ":value", "$temp_save_number11_6"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lady_7"),
					(assign, ":value", "$temp_save_number11_7"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lady_8"),
					(assign, ":value", "$temp_save_number11_8"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lady_9"),
					(assign, ":value", "$temp_save_number11_9"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lady_10"),
					(assign, ":value", "$temp_save_number11_10"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lady_11"),
					(assign, ":value", "$temp_save_number11_11"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lady_12"),
					(assign, ":value", "$temp_save_number11_12"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lady_13"),
					(assign, ":value", "$temp_save_number11_13"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lady_14"),
					(assign, ":value", "$temp_save_number11_14"),
				(else_try),
					(eq, ":trigger_param_1", "$hero_list_lady_15"),
					(assign, ":value", "$temp_save_number11_15"),
				(try_end),
				(try_begin),
					(is_between, ":value", "trp_tt_lady_01_01", "trp_tt_lady_end"),
					(troop_get_slot, ":value_love_interest_3", ":value", slot_troop_betrothed),
					(is_between, ":value_love_interest_3", "p_pyongyang", "p_place_end"),
					(presentation_set_duration, 0),
					(presentation_set_duration, 0),
					(jump_to_menu, "mnu_wm_pst_map_return"),
					(assign, "$camera_focus_on", 1),
					(set_camera_follow_party, ":value_love_interest_3"),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("pst_lady_mansion", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(try_begin),
				(is_between, "$pst_target_no", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 12, "$pst_target_no"),
				(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", "$pst_target_no"),
				(position_set_x, 1, 300),
				(position_set_y, 1, 300),
				(position_set_z, 1, 750),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1250),
				(position_set_y, 1, 1300),
				(overlay_set_size, reg0, 1),
			(try_end),
			(create_mesh_overlay, reg0, "mesh_pic_meetlady4"),
			(position_set_x, 1, 0),
			(position_set_y, 1, 0),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1200),
			(position_set_y, 1, 1200),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 16777215),
			(overlay_set_alpha, reg0, 96),
			(position_set_x, 1, 20),
			(position_set_y, 1, 25),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 48000),
			(position_set_y, 1, 35000),
			(overlay_set_size, reg0, 1),
			(create_in_game_button_overlay, "$g_choose_kingdom_exit", "str_return_butt", 16),
			(position_set_x, 1, 495),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_choose_kingdom_exit", 1),
			(overlay_set_color, "$g_choose_kingdom_exit", 16777215),
			(try_begin),
				(eq, "$lady_mansion_open", 0),
				(eq, "$attemp_commu", 0),
				(is_between, "$pst_target_no", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(create_in_game_button_overlay, "$pst_mansion_send_message", "str_send_message1", 16),
			(else_try),
				(create_text_overlay, "$pst_mansion_send_message", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 495),
			(position_set_y, 1, 100),
			(overlay_set_position, "$pst_mansion_send_message", 1),
			(overlay_set_color, "$pst_mansion_send_message", 16777215),
			(try_begin),
				(eq, "$lady_mansion_open", 1),
				(eq, "$attemp_commu", 0),
				(is_between, "$pst_target_no", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(create_in_game_button_overlay, "$pst_mansion_visit", "str_meet1", 16),
			(else_try),
				(create_text_overlay, "$pst_mansion_visit", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 495),
			(position_set_y, 1, 150),
			(overlay_set_position, "$pst_mansion_visit", 1),
			(overlay_set_color, "$pst_mansion_visit", 16777215),
			(call_script, "script_temp_save_number11_initialize"),
			(try_for_range, ":troop", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(troop_slot_eq, ":troop", slot_troop_betrothed, "$g_encountered_party"),
				(neg|troop_slot_eq, ":troop", slot_troop_leaded_party, 3),
				(neg|troop_slot_eq, "trp_player", slot_troop_state, ":troop"),
				(call_script, "script_temp_save_number11_inject", ":troop"),
			(try_end),
			(str_clear, 20),
			(str_clear, 21),
			(str_clear, 22),
			(str_clear, 23),
			(str_clear, 24),
			(str_clear, 25),
			(str_clear, 26),
			(str_clear, 27),
			(str_clear, 28),
			(str_clear, 29),
			(str_clear, 30),
			(str_clear, 31),
			(str_clear, 32),
			(str_clear, 33),
			(str_clear, 34),
			(str_clear, 35),
			(try_begin),
				(is_between, "$temp_save_number11_1", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 21, "$temp_save_number11_1"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_2", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 22, "$temp_save_number11_2"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_3", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 23, "$temp_save_number11_3"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_4", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 24, "$temp_save_number11_4"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_5", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 25, "$temp_save_number11_5"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_6", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 26, "$temp_save_number11_6"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_7", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 27, "$temp_save_number11_7"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_8", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 28, "$temp_save_number11_8"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_9", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 29, "$temp_save_number11_9"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_10", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 30, "$temp_save_number11_10"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_11", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 31, "$temp_save_number11_11"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_12", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 32, "$temp_save_number11_12"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_13", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 33, "$temp_save_number11_13"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_14", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 34, "$temp_save_number11_14"),
			(try_end),
			(try_begin),
				(is_between, "$temp_save_number11_15", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(str_store_troop_name, 35, "$temp_save_number11_15"),
			(try_end),
			(assign, ":var_2", 80),
			(assign, ":var_3", 640),
			(assign, ":var_4", 25),
			(position_set_x, 5, 1000),
			(position_set_y, 5, 1000),
			(val_sub, ":var_3", ":var_4"),
			(create_button_overlay, "$loc_button_01", "str_glob_s21", 4),
			(overlay_set_size, "$loc_button_01", 5),
			(position_set_x, 1, ":var_2"),
			(position_set_y, 1, ":var_3"),
			(overlay_set_position, "$loc_button_01", 1),
			(val_sub, ":var_3", ":var_4"),
			(create_button_overlay, "$loc_button_02", "str_glob_s22", 4),
			(overlay_set_size, "$loc_button_02", 5),
			(position_set_x, 1, ":var_2"),
			(position_set_y, 1, ":var_3"),
			(overlay_set_position, "$loc_button_02", 1),
			(val_sub, ":var_3", ":var_4"),
			(create_button_overlay, "$loc_button_03", "str_glob_s23", 4),
			(overlay_set_size, "$loc_button_03", 5),
			(position_set_x, 1, ":var_2"),
			(position_set_y, 1, ":var_3"),
			(overlay_set_position, "$loc_button_03", 1),
			(val_sub, ":var_3", ":var_4"),
			(create_button_overlay, "$loc_button_04", "str_glob_s24", 4),
			(overlay_set_size, "$loc_button_04", 5),
			(position_set_x, 1, ":var_2"),
			(position_set_y, 1, ":var_3"),
			(overlay_set_position, "$loc_button_04", 1),
			(val_sub, ":var_3", ":var_4"),
			(create_button_overlay, "$loc_button_05", "str_glob_s25", 4),
			(overlay_set_size, "$loc_button_05", 5),
			(position_set_x, 1, ":var_2"),
			(position_set_y, 1, ":var_3"),
			(overlay_set_position, "$loc_button_05", 1),
			(val_sub, ":var_3", ":var_4"),
			(create_button_overlay, "$loc_button_06", "str_glob_s26", 4),
			(overlay_set_size, "$loc_button_06", 5),
			(position_set_x, 1, ":var_2"),
			(position_set_y, 1, ":var_3"),
			(overlay_set_position, "$loc_button_06", 1),
			(val_sub, ":var_3", ":var_4"),
			(create_button_overlay, "$loc_button_07", "str_glob_s27", 4),
			(overlay_set_size, "$loc_button_07", 5),
			(position_set_x, 1, ":var_2"),
			(position_set_y, 1, ":var_3"),
			(overlay_set_position, "$loc_button_07", 1),
			(val_sub, ":var_3", ":var_4"),
			(create_button_overlay, "$loc_button_08", "str_glob_s28", 4),
			(overlay_set_size, "$loc_button_08", 5),
			(position_set_x, 1, ":var_2"),
			(position_set_y, 1, ":var_3"),
			(overlay_set_position, "$loc_button_08", 1),
			(val_sub, ":var_3", ":var_4"),
			(create_button_overlay, "$loc_button_09", "str_glob_s29", 4),
			(overlay_set_size, "$loc_button_09", 5),
			(position_set_x, 1, ":var_2"),
			(position_set_y, 1, ":var_3"),
			(overlay_set_position, "$loc_button_09", 1),
			(val_sub, ":var_3", ":var_4"),
			(create_button_overlay, "$loc_button_10", "str_glob_s30", 4),
			(overlay_set_size, "$loc_button_10", 5),
			(position_set_x, 1, ":var_2"),
			(position_set_y, 1, ":var_3"),
			(overlay_set_position, "$loc_button_10", 1),
			(val_sub, ":var_3", ":var_4"),
			(create_button_overlay, "$loc_button_11", "str_glob_s31", 4),
			(overlay_set_size, "$loc_button_11", 5),
			(position_set_x, 1, ":var_2"),
			(position_set_y, 1, ":var_3"),
			(overlay_set_position, "$loc_button_11", 1),
			(val_sub, ":var_3", ":var_4"),
			(create_button_overlay, "$loc_button_12", "str_glob_s32", 4),
			(overlay_set_size, "$loc_button_12", 5),
			(position_set_x, 1, ":var_2"),
			(position_set_y, 1, ":var_3"),
			(overlay_set_position, "$loc_button_12", 1),
			(val_sub, ":var_3", ":var_4"),
			(create_button_overlay, "$loc_button_13", "str_glob_s33", 4),
			(overlay_set_size, "$loc_button_13", 5),
			(position_set_x, 1, ":var_2"),
			(position_set_y, 1, ":var_3"),
			(overlay_set_position, "$loc_button_13", 1),
			(val_sub, ":var_3", ":var_4"),
			(create_button_overlay, "$loc_button_14", "str_glob_s34", 4),
			(overlay_set_size, "$loc_button_14", 5),
			(position_set_x, 1, ":var_2"),
			(position_set_y, 1, ":var_3"),
			(overlay_set_position, "$loc_button_14", 1),
			(val_sub, ":var_3", ":var_4"),
			(create_button_overlay, "$loc_button_15", "str_glob_s35", 4),
			(overlay_set_size, "$loc_button_15", 5),
			(position_set_x, 1, ":var_2"),
			(position_set_y, 1, ":var_3"),
			(overlay_set_position, "$loc_button_15", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_choose_kingdom_exit"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$pst_mansion_send_message"),
				(call_script, "script_troop_get_player_relation", "$pst_target_no"),
				(assign, ":var_2", reg0),
				(display_message, "str_can_we_meet_today", 0x0000ff00),
				(try_begin),
					(troop_slot_eq, "$pst_target_no", 41, 3),
					(display_message, "str_lady_respond_06", 0x00ffff00),
				(else_try),
					(troop_slot_eq, "$pst_target_no", 15, 0),
					(troop_slot_ge, "$pst_target_no", 3, "trp_tt_lord_01_00"),
					(display_message, "str_lady_respond_02", 0x00ffff00),
				(else_try),
					(troop_slot_eq, "$pst_target_no", 15, 0),
					(display_message, "str_lady_respond_01", 0x00ffff00),
				(else_try),
					(gt, ":var_2", 20),
					(troop_get_slot, ":player_banner_scene_prop", "trp_player", slot_troop_banner_scene_prop),
					(set_show_messages, 0),
					(assign, ":value", "$random_succ_100_trand"),
					(val_div, ":player_banner_scene_prop", 4),
					(val_add, ":value", ":player_banner_scene_prop"),
					(set_show_messages, 1),
					(assign, reg8, ":value"),
					(display_message, "str_lady_meet_honor_mod"),
					(try_begin),
						(gt, ":value", 40),
						(assign, "$lady_mansion_open", 1),
						(display_message, "str_lady_respond_03", 0x00ffff00),
					(else_try),
						(assign, "$attemp_commu", 72),
						(assign, reg9, "$attemp_commu"),
						(display_message, "str_communication_cool_add", 0x00ffff00),
						(display_message, "str_lady_respond_04", 0x00ffff00),
						(call_script, "script_rand_glob_dice"),
					(try_end),
				(else_try),
					(troop_get_slot, ":player_banner_scene_prop", "trp_player", slot_troop_banner_scene_prop),
					(set_show_messages, 0),
					(assign, ":value", "$random_succ_100_erand"),
					(val_div, ":player_banner_scene_prop", 4),
					(val_add, ":value", ":player_banner_scene_prop"),
					(set_show_messages, 1),
					(assign, reg8, ":value"),
					(display_message, "str_lady_meet_honor_mod"),
					(try_begin),
						(gt, ":value", 70),
						(assign, "$lady_mansion_open", 1),
						(display_message, "str_lady_respond_03", 0x00ffff00),
					(else_try),
						(assign, "$attemp_commu", 72),
						(assign, reg9, "$attemp_commu"),
						(display_message, "str_communication_cool_add", 0x00ffff00),
						(display_message, "str_lady_respond_05", 0x00ffff00),
						(call_script, "script_rand_glob_dice"),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_pst_lady_mansion"),
			(else_try),
				(eq, ":trigger_param_1", "$pst_mansion_visit"),
				(assign, "$wm_talk_state", 18),
				(set_jump_mission, "mt_visit_town_castle"),
				(assign, "$current_mission_template", "mt_visit_town_castle"),
				(mission_tpl_entry_clear_override_items, "mt_visit_town_castle", 0),
				(assign, ":var_5", "$g_encountered_party"),
				(call_script, "script_molda_scene_culture", ":var_5"),
				(assign, ":var_6", "$town_scene_hall"),
				(modify_visitors_at_site, ":var_6"),
				(reset_visitors),
				(set_visitor, 16, "$pst_target_no"),
				(set_jump_entry, 0),
				(jump_to_scene, ":var_6"),
				(change_screen_mission),
			(else_try),
				(neq, ":trigger_param_1", "$g_choose_kingdom_exit"),
				(neq, ":trigger_param_1", "$pst_mansion_send_message"),
				(neq, ":trigger_param_1", "$pst_mansion_visit"),
				(assign, "$lady_mansion_open", 0),
				(assign, ":value_2", 0),
				(try_begin),
					(eq, ":trigger_param_1", "$loc_button_01"),
					(assign, ":value_2", "$temp_save_number11_1"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_02"),
					(assign, ":value_2", "$temp_save_number11_2"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_03"),
					(assign, ":value_2", "$temp_save_number11_3"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_04"),
					(assign, ":value_2", "$temp_save_number11_4"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_05"),
					(assign, ":value_2", "$temp_save_number11_5"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_06"),
					(assign, ":value_2", "$temp_save_number11_6"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_07"),
					(assign, ":value_2", "$temp_save_number11_7"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_08"),
					(assign, ":value_2", "$temp_save_number11_8"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_09"),
					(assign, ":value_2", "$temp_save_number11_9"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_10"),
					(assign, ":value_2", "$temp_save_number11_10"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_11"),
					(assign, ":value_2", "$temp_save_number11_11"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_12"),
					(assign, ":value_2", "$temp_save_number11_12"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_13"),
					(assign, ":value_2", "$temp_save_number11_13"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_14"),
					(assign, ":value_2", "$temp_save_number11_14"),
				(else_try),
					(eq, ":trigger_param_1", "$loc_button_15"),
					(assign, ":value_2", "$temp_save_number11_15"),
				(try_end),
				(is_between, ":value_2", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(assign, "$pst_target_no", ":value_2"),
				(start_presentation, "prsnt_pst_lady_mansion"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
			(try_end),
			(try_begin),
				(key_clicked, 44),
				(mouse_get_position, 7),
				(set_fixed_point_multiplier, 1000),
				(position_get_x, ":position_x_7", 7),
				(position_get_y, ":position_y_7", 7),
				(assign, reg54, ":position_x_7"),
				(assign, reg55, ":position_y_7"),
				(display_message, "str_pst_xy_0"),
				(display_message, "str_pst_xy_x", 0x00ff0000),
				(display_message, "str_pst_xy_y", 0x00ffff00),
			(try_end)
		])
	]),

	("mod_option", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_in_game_button_overlay, "$option_exit", "str_return_butt"),
			(position_set_x, 1, 495),
			(position_set_y, 1, 50),
			(overlay_set_position, "$option_exit", 1),
			(overlay_set_color, "$option_exit", 16777215),
			(assign, ":value", 15),
			(assign, ":value_2", 620),
			(assign, ":var_3", 40),
			(position_set_x, 3, 1200),
			(position_set_y, 3, 1200),
			(create_button_overlay, "$option_abondon", "str_abandon_every", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_abondon", 1),
			(overlay_set_size, "$option_abondon", 3),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$bt_equipment_drop_off"),
			(create_button_overlay, "$option_equip_invisible", "str_fps_opt", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_equip_invisible", 1),
			(overlay_set_size, "$option_equip_invisible", 3),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$player_respawn_lvl_ge"),
			(create_button_overlay, "$option_respawn_min_lvl", "str_res_min_lev", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_respawn_min_lvl", 1),
			(overlay_set_size, "$option_respawn_min_lvl", 3),
			(val_sub, ":value_2", ":var_3"),
			(try_begin),
				(eq, "$player_respawn_class_type", 0),
				(create_button_overlay, "$option_respawn_class", "str_res_ia", 4),
			(else_try),
				(eq, "$player_respawn_class_type", 1),
				(create_button_overlay, "$option_respawn_class", "str_res_io", 4),
			(else_try),
				(create_button_overlay, "$option_respawn_class", "str_res_ao", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_respawn_class", 1),
			(overlay_set_size, "$option_respawn_class", 3),
			(val_sub, ":value_2", ":var_3"),
			(str_store_string, 10, "$wm_music_text"),
			(create_button_overlay, "$option_music_box", "str_glob_s10", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_music_box", 1),
			(overlay_set_size, "$option_music_box", 3),
			(val_sub, ":value_2", ":var_3"),
			(create_button_overlay, "$option_ply_map_icon", "str_ply_icon_change", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_ply_map_icon", 1),
			(overlay_set_size, "$option_ply_map_icon", 3),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$landmark_on"),
			(create_button_overlay, "$option_landmark", "str_landname", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_landmark", 1),
			(overlay_set_size, "$option_landmark", 3),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$minimap_number_display"),
			(create_button_overlay, "$option_minimap_score", "str_mapscore", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_minimap_score", 1),
			(overlay_set_size, "$option_minimap_score", 3),
			(val_sub, ":value_2", ":var_3"),
			(create_button_overlay, "$option_banner", "str_bannermod", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_banner", 1),
			(overlay_set_size, "$option_banner", 3),
			(val_sub, ":value_2", ":var_3"),
			(try_begin),
				(troop_slot_ge, "trp_player", 18, 11),
				(faction_slot_eq, "$wm_player_fac", 1, "trp_player"),
				(create_button_overlay, "$option_kingdom_name", "str_renamefac", 4),
			(else_try),
				(create_text_overlay, "$option_kingdom_name", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_kingdom_name", 1),
			(overlay_set_size, "$option_kingdom_name", 3),
			(val_sub, ":value_2", ":var_3"),
			(create_button_overlay, "$option_ply_color", "str_plycolorchange", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_ply_color", 1),
			(overlay_set_size, "$option_ply_color", 3),
			(val_sub, ":value_2", ":var_3"),
			(create_button_overlay, "$option_ply_rel_nogod", "str_religion_abandon", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_ply_rel_nogod", 1),
			(overlay_set_size, "$option_ply_rel_nogod", 3),
			(val_sub, ":value_2", ":var_3"),
			(create_button_overlay, "$option_face_and_gender_change", "str_opt_face_and_gender_change", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_face_and_gender_change", 1),
			(overlay_set_size, "$option_face_and_gender_change", 3),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$army_respawn_num"),
			(create_button_overlay, "$option_army_respawn_time", "str_opt_army_resp_time", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_army_respawn_time", 1),
			(overlay_set_size, "$option_army_respawn_time", 3),
			(assign, ":value", 500),
			(assign, ":value_2", 620),
			(try_begin),
				(eq, "$r18_control", 1),
				(assign, reg8, "$adult_content"),
				(create_button_overlay, "$option_adult_contents", "str_adult_con", 4),
			(else_try),
				(create_text_overlay, "$option_adult_contents", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_adult_contents", 1),
			(overlay_set_size, "$option_adult_contents", 3),
			(val_sub, ":value_2", ":var_3"),
			(try_begin),
				(eq, "$adult_content", 1),
				(call_script, "script_troop_type_sett", "trp_player"),
				(gt, "$troop_gender_type", 10),
				(neq, "$g_sex_officer", "trp_player"),
				(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party", "p_main_party"),
				(gt, ":party_size_wo_prisoners_main_party", 5),
				(create_button_overlay, "$option_s_officer", "str_sexoff_self", 4),
			(else_try),
				(eq, "$adult_content", 1),
				(eq, "$g_sex_officer", "trp_player"),
				(create_button_overlay, "$option_s_officer", "str_sexon_self", 4),
			(else_try),
				(create_text_overlay, "$option_s_officer", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_s_officer", 1),
			(overlay_set_size, "$option_s_officer", 3),
			(val_sub, ":value_2", ":var_3"),
			(try_begin),
				(call_script, "script_troop_type_sett", "trp_player"),
				(gt, "$troop_gender_type", 10),
				(eq, "$g_sex_officer", "trp_player"),
				(eq, "$ass_agreed", 0),
				(eq, "$adult_content", 1),
				(create_button_overlay, "$option_s_anal_allow", "str_allow_anal", 4),
			(else_try),
				(eq, "$g_sex_officer", "trp_player"),
				(eq, "$ass_agreed", 1),
				(eq, "$adult_content", 1),
				(create_button_overlay, "$option_s_anal_allow", "str_stop_anal", 4),
			(else_try),
				(create_text_overlay, "$option_s_anal_allow", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_s_anal_allow", 1),
			(overlay_set_size, "$option_s_anal_allow", 3),
			(val_sub, ":value_2", ":var_3"),
			(try_begin),
				(call_script, "script_troop_type_sett", "trp_player"),
				(gt, "$troop_gender_type", 10),
				(eq, "$g_sex_officer", "trp_player"),
				(eq, "$adult_content", 1),
				(create_button_overlay, "$option_cunt_view", "str_check_puss", 4),
			(else_try),
				(create_text_overlay, "$option_cunt_view", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_cunt_view", 1),
			(overlay_set_size, "$option_cunt_view", 3),
			(val_sub, ":value_2", ":var_3"),
			(try_begin),
				(call_script, "script_troop_type_sett", "trp_player"),
				(gt, "$troop_gender_type", 10),
				(player_has_item, 1432),
				(eq, "$adult_content", 1),
				(create_button_overlay, "$option_big_boob_herb", "str_use_bigboob_herb", 4),
			(else_try),
				(create_text_overlay, "$option_big_boob_herb", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_big_boob_herb", 1),
			(overlay_set_size, "$option_big_boob_herb", 3),
			(val_sub, ":value_2", ":var_3"),
			(try_begin),
				(call_script, "script_troop_type_sett", "trp_player"),
				(gt, "$troop_gender_type", 10),
				(player_has_item, 1431),
				(eq, "$adult_content", 1),
				(create_button_overlay, "$option_small_boob_herb", "str_use_smallboob_herb", 4),
			(else_try),
				(create_text_overlay, "$option_small_boob_herb", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_small_boob_herb", 1),
			(overlay_set_size, "$option_small_boob_herb", 3),
			(val_sub, ":value_2", ":var_3"),
			(try_begin),
				(call_script, "script_troop_type_sett", "trp_player"),
				(lt, "$troop_gender_type", 10),
				(player_has_item, 1434),
				(eq, "$adult_content", 1),
				(create_button_overlay, "$option_king_penis_herb", "str_use_kingpenis_herb", 4),
			(else_try),
				(create_text_overlay, "$option_king_penis_herb", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_king_penis_herb", 1),
			(overlay_set_size, "$option_king_penis_herb", 3),
			(val_sub, ":value_2", ":var_3"),
			(try_begin),
				(call_script, "script_troop_type_sett", "trp_player"),
				(lt, "$troop_gender_type", 10),
				(player_has_item, 1433),
				(eq, "$adult_content", 1),
				(create_button_overlay, "$option_pawn_penis_herb", "str_use_pawnpenis_herb", 4),
			(else_try),
				(create_text_overlay, "$option_pawn_penis_herb", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$option_pawn_penis_herb", 1),
			(overlay_set_size, "$option_pawn_penis_herb", 3)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$option_respawn_min_lvl"),
				(try_begin),
					(lt, "$player_respawn_lvl_ge", 32),
					(val_add, "$player_respawn_lvl_ge", 1),
				(else_try),
					(assign, "$player_respawn_lvl_ge", 12),
				(try_end),
				(start_presentation, "prsnt_mod_option"),
			(else_try),
				(eq, ":trigger_param_1", "$option_respawn_class"),
				(try_begin),
					(lt, "$player_respawn_class_type", 2),
					(val_add, "$player_respawn_class_type", 1),
				(else_try),
					(assign, "$player_respawn_class_type", 0),
				(try_end),
				(start_presentation, "prsnt_mod_option"),
			(else_try),
				(eq, ":trigger_param_1", "$option_music_box"),
				(try_begin),
					(lt, "$wm_music_box", 12),
					(val_add, "$wm_music_box", 1),
					#(call_script, "script_molda_music_box", 11, 0),
				(else_try),
					(assign, "$wm_music_box", 0),
					#(call_script, "script_molda_music_box", 1, "p_main_party"),
				(try_end),
				(start_presentation, "prsnt_mod_option"),
			(else_try),
				(eq, ":trigger_param_1", "$option_ply_map_icon"),
				(party_get_icon, ":icon_main_party", "p_main_party"),
				(try_begin),
					(ge, ":icon_main_party", "icon_woman_b"),
					(assign, ":value", "icon_player"),
				(else_try),
					(store_add, ":value", ":icon_main_party", 1),
				(try_end),
				(party_set_slot, "p_main_party", slot_town_player_odds, ":value"),
				(party_set_icon, "p_main_party", ":value"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
				(change_screen_return),
			(else_try),
				(eq, ":trigger_param_1", "$option_equip_invisible"),
				(try_begin),
					(eq, "$bt_equipment_drop_off", 0),
					(assign, "$bt_equipment_drop_off", 1),
				(else_try),
					(assign, "$bt_equipment_drop_off", 0),
				(try_end),
				(start_presentation, "prsnt_mod_option"),
			(else_try),
				(eq, ":trigger_param_1", "$option_landmark"),
				(try_begin),
					(eq, "$landmark_on", 0),
					(assign, "$landmark_on", 1),
					(party_set_icon, "p_markpoint_sea_mid1", "icon_text_sea_01"),
					(party_set_icon, "p_markpoint_sea_mid2", "icon_text_sea_01"),
					(party_set_icon, "p_markpoint_sea_oriental", "icon_text_sea_02"),
					(party_set_icon, "p_markpoint_sea_baltic", "icon_text_sea_03"),
					(party_set_icon, "p_markpoint_sea_north", "icon_text_sea_04"),
					(party_set_icon, "p_markpoint_sea_black", "icon_text_sea_05"),
					(party_set_icon, "p_markpoint_sea_schina", "icon_text_sea_06"),
					(party_set_icon, "p_markpoint_sea_caspi", "icon_text_sea_07"),
					(party_set_icon, "p_markpoint_sea_adri", "icon_text_sea_08"),
					(party_set_icon, "p_markpoint_sea_red", "icon_text_sea_09"),
					(party_set_icon, "p_markpoint_sea_cari", "icon_text_sea_10"),
					(party_set_icon, "p_markpoint_sea_aeg", "icon_text_sea_11"),
					(party_set_icon, "p_markpoint_sea_echina", "icon_text_sea_12"),
					(party_set_icon, "p_markpoint_sea_arab", "icon_text_sea_13"),
					(party_set_icon, "p_markpoint_sea_pers", "icon_text_sea_14"),
					(party_set_icon, "p_markpoint_sea_anda", "icon_text_sea_15"),
					(party_set_icon, "p_markpoint_sea_ioni", "icon_text_sea_16"),
					(party_set_icon, "p_markpoint_sea_bengal", "icon_text_sea_17"),
					(party_set_icon, "p_markpoint_sea_lacca", "icon_text_sea_18"),
					(party_set_icon, "p_markpoint_sea_bohai", "icon_text_sea_19"),
					(party_set_icon, "p_markpoint_sea_yellow", "icon_text_sea_20"),
					(party_set_icon, "p_markpoint_sea_oho", "icon_text_sea_21"),
					(party_set_icon, "p_markpoint_sea_java", "icon_text_sea_22"),
					(party_set_icon, "p_markpoint_sea_siam", "icon_text_sea_23"),
					(party_set_icon, "p_markpoint_sea_aral", "icon_text_sea_24"),
					(party_set_icon, "p_markpoint_sea_albo", "icon_text_sea_25"),
					(party_set_icon, "p_markpoint_sea_levan", "icon_text_sea_26"),
					(party_set_icon, "p_markpoint_sea_biscay", "icon_text_sea_27"),
					(party_set_icon, "p_markpoint_sea_norway", "icon_text_sea_28"),
					(party_set_icon, "p_markpoint_sea_engc", "icon_text_sea_29"),
					(party_set_icon, "p_markpoint_sea_maxi", "icon_text_sea_30"),
					(party_set_icon, "p_markpoint_sea_sagas", "icon_text_sea_31"),
					(party_set_icon, "p_markpoint_sea_tyr", "icon_text_sea_32"),
					(party_set_icon, "p_markpoint_sea_hud", "icon_text_sea_33"),
					(party_set_icon, "p_markpoint_sea_carpen", "icon_text_sea_34"),
					(party_set_icon, "p_markpoint_geo_gobi", "icon_text_geo_01"),
					(party_set_icon, "p_markpoint_geo_xinjiang", "icon_text_geo_02"),
					(party_set_icon, "p_markpoint_geo_balqash", "icon_text_geo_03"),
					(party_set_icon, "p_markpoint_geo_sahara", "icon_text_geo_04"),
					(party_set_icon, "p_markpoint_geo_gibr", "icon_text_geo_05"),
					(party_set_icon, "p_markpoint_geo_alps", "icon_text_geo_06"),
					(party_set_icon, "p_markpoint_geo_green", "icon_text_geo_07"),
					(party_set_icon, "p_markpoint_geo_ice", "icon_text_geo_08"),
					(party_set_icon, "p_markpoint_geo_aus", "icon_text_geo_09"),
					(party_set_icon, "p_markpoint_geo_papu", "icon_text_geo_10"),
					(party_set_icon, "p_markpoint_geo_himal", "icon_text_geo_11"),
					(party_set_icon, "p_markpoint_geo_pyre", "icon_text_geo_12"),
					(party_set_icon, "p_markpoint_geo_cauc", "icon_text_geo_13"),
					(party_set_icon, "p_markpoint_geo_arades", "icon_text_geo_14"),
					(party_set_icon, "p_markpoint_geo_vic", "icon_text_geo_15"),
					(party_set_icon, "p_markpoint_geo_mada", "icon_text_geo_16"),
					(party_set_icon, "p_markpoint_geo_amaz", "icon_text_geo_17"),
					(party_set_icon, "p_markpoint_geo_baikal", "icon_text_geo_18"),
				(else_try),
					(assign, "$landmark_on", 0),
					(party_set_icon, "p_markpoint_sea_mid1", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_mid2", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_oriental", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_baltic", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_north", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_black", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_schina", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_caspi", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_adri", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_red", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_cari", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_aeg", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_echina", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_arab", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_pers", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_anda", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_ioni", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_bengal", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_lacca", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_bohai", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_yellow", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_oho", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_java", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_siam", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_aral", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_albo", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_levan", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_biscay", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_norway", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_engc", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_maxi", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_sagas", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_tyr", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_hud", "icon_cantsee"),
					(party_set_icon, "p_markpoint_sea_carpen", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_gobi", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_xinjiang", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_balqash", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_sahara", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_gibr", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_alps", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_green", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_ice", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_aus", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_papu", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_himal", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_pyre", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_cauc", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_arades", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_vic", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_mada", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_amaz", "icon_cantsee"),
					(party_set_icon, "p_markpoint_geo_baikal", "icon_cantsee"),
				(try_end),
				(start_presentation, "prsnt_mod_option"),
			(else_try),
				(eq, ":trigger_param_1", "$option_adult_contents"),
				(try_begin),
					(eq, "$adult_content", 0),
					(assign, "$adult_content", 1),
				(else_try),
					(assign, "$adult_content", 0),
				(try_end),
				(start_presentation, "prsnt_mod_option"),
			(else_try),
				(eq, ":trigger_param_1", "$option_minimap_score"),
				(try_begin),
					(eq, "$minimap_number_display", 0),
					(assign, "$minimap_number_display", 1),
				(else_try),
					(assign, "$minimap_number_display", 0),
				(try_end),
				(start_presentation, "prsnt_mod_option"),
			(else_try),
				(eq, ":trigger_param_1", "$option_abondon"),
				(jump_to_menu, "mnu_bewanderer"),
			(else_try),
				(eq, ":trigger_param_1", "$option_banner"),
				(start_presentation, "prsnt_banner_selection"),
			(else_try),
				(eq, ":trigger_param_1", "$option_s_officer"),
				(start_presentation, "prsnt_mod_option"),
				(try_begin),
					(neq, "$g_sex_officer", "trp_player"),
					(assign, "$g_sex_officer", "trp_player"),
					(assign, "$ass_agreed", 0),
					(str_clear, 33),
					(str_store_troop_name, 33, "$g_sex_officer"),
					(display_message, "str_sexofficername"),
					(try_begin),
						(troop_slot_eq, "trp_player", slot_troop_last_persuasion_time, 1),
						(troop_set_slot, "trp_player", slot_troop_last_persuasion_time, 0),
						(display_message, "str_not_a_virgin", 0x00ff3333),
					(try_end),
					(try_begin),
						(neq, "$nick_slut_commander", 1),
						(gt, "$Sex_num", 3000),
						(assign, "$nick_slut_commander", 1),
						(display_message, "str_slut_commander"),
						(display_message, "str_slut_commander_bo"),
						(str_store_troop_name, 8, "trp_player"),
						(troop_set_name, "trp_player", "str_slut_commander_name"),
					(try_end),
				(else_try),
					(eq, "$g_sex_officer", "trp_player"),
					(assign, "$g_sex_officer", -1),
					(assign, "$ass_agreed", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$option_s_anal_allow"),
				(try_begin),
					(eq, "$ass_agreed", 0),
					(assign, "$ass_agreed", 1),
					(display_message, "str_sexofficerass"),
				(else_try),
					(assign, "$ass_agreed", 0),
				(try_end),
				(start_presentation, "prsnt_mod_option"),
			(else_try),
				(eq, ":trigger_param_1", "$option_cunt_view"),
				(troop_get_slot, ":player_last_quest", "trp_player", slot_troop_last_quest),
				(troop_set_slot, "trp_playerself_temp", slot_troop_last_quest, ":player_last_quest"),
				(assign, "$wm_talk_state", 0),
				(call_script, "script_setup_troop_meeting", "trp_playerself_temp", -1),
			(else_try),
				(eq, ":trigger_param_1", "$option_kingdom_name"),
				(start_presentation, "prsnt_name_kingdom"),
			(else_try),
				(eq, ":trigger_param_1", "$option_ply_color"),
				(start_presentation, "prsnt_player_color_select"),
			(else_try),
				(eq, ":trigger_param_1", "$option_ply_rel_nogod"),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_ply_rel_nogod"),
			(else_try),
				(eq, ":trigger_param_1", "$option_face_and_gender_change"),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_opt_face_and_gender_change"),
			(else_try),
				(eq, ":trigger_param_1", "$option_army_respawn_time"),
				(try_begin),
					(lt, "$army_respawn_num", 2),
					(val_add, "$army_respawn_num", 1),
				(else_try),
					(assign, "$army_respawn_num", 0),
				(try_end),
				(start_presentation, "prsnt_mod_option"),
			(else_try),
				(eq, ":trigger_param_1", "$option_big_boob_herb"),
				(try_begin),
					(troop_get_slot, ":player_last_quest_betrayed", "trp_player", slot_troop_last_quest_betrayed),
					(lt, ":player_last_quest_betrayed", 16),
					(val_add, ":player_last_quest_betrayed", 1),
					(troop_set_slot, "trp_player", slot_troop_last_quest_betrayed, ":player_last_quest_betrayed"),
					(display_message, "str_bodychannnn"),
				(try_end),
				(troop_remove_item, "trp_player", 1432),
				(start_presentation, "prsnt_mod_option"),
			(else_try),
				(eq, ":trigger_param_1", "$option_small_boob_herb"),
				(try_begin),
					(troop_get_slot, ":player_last_quest_betrayed", "trp_player", slot_troop_last_quest_betrayed),
					(gt, ":player_last_quest_betrayed", 1),
					(val_sub, ":player_last_quest_betrayed", 1),
					(troop_set_slot, "trp_player", slot_troop_last_quest_betrayed, ":player_last_quest_betrayed"),
					(display_message, "str_bodychannnn"),
				(try_end),
				(troop_remove_item, "trp_player", 1431),
				(start_presentation, "prsnt_mod_option"),
			(else_try),
				(eq, ":trigger_param_1", "$option_king_penis_herb"),
				(try_begin),
					(troop_get_slot, ":player_last_quest_betrayed", "trp_player", slot_troop_last_quest_betrayed),
					(lt, ":player_last_quest_betrayed", 5),
					(val_add, ":player_last_quest_betrayed", 1),
					(troop_set_slot, "trp_player", slot_troop_last_quest_betrayed, ":player_last_quest_betrayed"),
					(display_message, "str_bodychannnn"),
				(try_end),
				(troop_remove_item, "trp_player", 1434),
				(start_presentation, "prsnt_mod_option"),
			(else_try),
				(eq, ":trigger_param_1", "$option_pawn_penis_herb"),
				(try_begin),
					(troop_get_slot, ":player_last_quest_betrayed", "trp_player", slot_troop_last_quest_betrayed),
					(gt, ":player_last_quest_betrayed", 1),
					(val_sub, ":player_last_quest_betrayed", 1),
					(troop_set_slot, "trp_player", slot_troop_last_quest_betrayed, ":player_last_quest_betrayed"),
					(display_message, "str_bodychannnn"),
				(try_end),
				(troop_remove_item, "trp_player", 1433),
				(start_presentation, "prsnt_mod_option"),
			(else_try),
				(eq, ":trigger_param_1", "$option_exit"),
				(presentation_set_duration, 0),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("pst_debrif", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_mesh_overlay, reg0, "mesh_pic_victory"),
			(position_set_x, 1, 0),
			(position_set_y, 1, 0),
			(overlay_set_position, reg0, 1),
			(create_in_game_button_overlay, "$debrif_continue", "str_continue_butt", 16),
			(position_set_x, 1, 495),
			(position_set_y, 1, 30),
			(overlay_set_position, "$debrif_continue", 1),
			(overlay_set_color, "$debrif_continue", 16777215),
			(position_set_x, 3, 1400),
			(position_set_y, 3, 1400),
			(create_text_overlay, reg0, "str_glob_s7", 16),
			(position_set_x, 1, 495),
			(position_set_y, 1, 670),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(overlay_set_color, reg0, 0),
			(assign, ":value", 40),
			(assign, ":value_2", 630),
			(assign, ":var_3", 22),
			(position_set_x, 3, 900),
			(position_set_y, 3, 900),
			(create_text_overlay, reg0, "str_disp_ally_enemy", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", 12),
			(val_sub, ":value_2", ":var_3"),
			(assign, reg8, "$bt_kill_count_player"),
			(str_store_troop_name, 8, "trp_player"),
			(create_text_overlay, reg0, "str_bt_kill_count_text", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
				(troop_slot_ge, ":troop", 21, 1),
				(troop_get_slot, reg8, ":troop", slot_troop_player_debt),
				(str_store_troop_name, 8, ":troop"),
				(val_sub, ":value_2", ":var_3"),
				(create_text_overlay, reg0, "str_bt_kill_count_text", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(try_end),
			(try_for_range, ":troop", "trp_tt_lady_01_01", "trp_tt_lady_end"),
				(troop_slot_ge, ":troop", 21, 1),
				(troop_get_slot, reg8, ":troop", slot_troop_player_debt),
				(str_store_troop_name, 8, ":troop"),
				(val_sub, ":value_2", ":var_3"),
				(create_text_overlay, reg0, "str_bt_kill_count_text", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(try_end),
			(try_for_range, ":troop", "trp_elite_troops_01", "trp_elite_troops_end"),
				(troop_slot_ge, ":troop", 21, 1),
				(troop_get_slot, reg8, ":troop", slot_troop_player_debt),
				(str_store_troop_name, 8, ":troop"),
				(val_sub, ":value_2", ":var_3"),
				(create_text_overlay, reg0, "str_bt_kill_count_text", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(try_end),
			(try_for_range, ":troop", "trp_townsman", "trp_tournament_master"),
				(troop_slot_ge, ":troop", 21, 1),
				(troop_get_slot, reg8, ":troop", slot_troop_player_debt),
				(str_store_troop_name, 8, ":troop"),
				(val_sub, ":value_2", ":var_3"),
				(create_text_overlay, reg0, "str_bt_kill_count_text", 4),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(try_end),
			(val_sub, ":value_2", 12),
			(val_sub, ":value_2", ":var_3"),
			(create_text_overlay, reg0, "str_kill_e_leader", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":var_3"),
			(create_text_overlay, reg0, "str_kill_e_inf", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":var_3"),
			(create_text_overlay, reg0, "str_kill_e_arc", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(val_sub, ":value_2", ":var_3"),
			(create_text_overlay, reg0, "str_kill_e_cav", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(assign, ":value", 400),
			(assign, ":value_2", 590),
			(create_text_overlay, reg0, "str_booty_sel", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(assign, ":value", 330),
			(assign, ":value_2", 510),
			(assign, ":var_5", 135),
			(position_set_x, 3, 1200),
			(position_set_y, 3, 1600),
			(try_begin),
				(gt, "$ply_loot_1", 0),
				(create_mesh_overlay_with_item_id, "$pst_loot_1", "$ply_loot_1"),
			(else_try),
				(create_text_overlay, "$pst_loot_1", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$pst_loot_1", 1),
			(overlay_set_size, "$pst_loot_1", 3),
			(val_add, ":value", ":var_5"),
			(try_begin),
				(gt, "$ply_loot_2", 0),
				(create_mesh_overlay_with_item_id, "$pst_loot_2", "$ply_loot_2"),
			(else_try),
				(create_text_overlay, "$pst_loot_2", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$pst_loot_2", 1),
			(overlay_set_size, "$pst_loot_2", 3),
			(val_add, ":value", ":var_5"),
			(try_begin),
				(gt, "$ply_loot_3", 0),
				(create_mesh_overlay_with_item_id, "$pst_loot_3", "$ply_loot_3"),
			(else_try),
				(create_text_overlay, "$pst_loot_3", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$pst_loot_3", 1),
			(overlay_set_size, "$pst_loot_3", 3),
			(val_add, ":value", ":var_5"),
			(try_begin),
				(gt, "$ply_loot_4", 0),
				(create_mesh_overlay_with_item_id, "$pst_loot_4", "$ply_loot_4"),
			(else_try),
				(create_text_overlay, "$pst_loot_4", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$pst_loot_4", 1),
			(overlay_set_size, "$pst_loot_4", 3),
			(val_add, ":value", ":var_5"),
			(try_begin),
				(gt, "$ply_loot_5", 0),
				(create_mesh_overlay_with_item_id, "$pst_loot_5", "$ply_loot_5"),
			(else_try),
				(create_text_overlay, "$pst_loot_5", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$pst_loot_5", 1),
			(overlay_set_size, "$pst_loot_5", 3),
			(assign, ":value", 400),
			(assign, ":value_2", 330),
			(position_set_x, 3, 900),
			(position_set_y, 3, 900),
			(create_text_overlay, reg0, "str_reward_sel", 4),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 3),
			(assign, ":value", 400),
			(assign, ":value_2", 285),
			(try_begin),
				(gt, "$loot_reward_adv_exp", 0),
				(assign, reg8, "$loot_reward_adv_exp"),
				(create_in_game_button_overlay, "$debrif_advexp", "str_adv_exp_reg8"),
			(else_try),
				(create_text_overlay, "$debrif_advexp", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$debrif_advexp", 1),
			(overlay_set_color, "$debrif_advexp", 16777215),
			(val_add, ":value", 190),
			(try_begin),
				(gt, "$loot_reward_battle_exp", 0),
				(assign, reg8, "$loot_reward_battle_exp"),
				(create_in_game_button_overlay, "$debrif_btexp", "str_battle_exp_reg8"),
			(else_try),
				(create_text_overlay, "$debrif_btexp", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$debrif_btexp", 1),
			(overlay_set_color, "$debrif_btexp", 16777215),
			(assign, ":value", 400),
			(assign, ":value_2", 245),
			(try_begin),
				(gt, "$loot_reward_honor", 0),
				(assign, reg8, "$loot_reward_honor"),
				(create_in_game_button_overlay, "$debrif_honor", "str_honor_reg8"),
			(else_try),
				(create_text_overlay, "$debrif_honor", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$debrif_honor", 1),
			(overlay_set_color, "$debrif_honor", 16777215),
			(val_add, ":value", 190),
			(try_begin),
				(gt, "$loot_reward_contri", 0),
				(assign, reg8, "$loot_reward_contri"),
				(create_in_game_button_overlay, "$debrif_contribution", "str_contribution_reg8"),
			(else_try),
				(create_text_overlay, "$debrif_contribution", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$debrif_contribution", 1),
			(overlay_set_color, "$debrif_contribution", 16777215),
			(val_add, ":value", 190),
			(try_begin),
				(gt, "$loot_reward_money", 0),
				(assign, reg8, "$loot_reward_money"),
				(create_in_game_button_overlay, "$debrif_money", "str_money_reg8"),
			(else_try),
				(create_text_overlay, "$debrif_money", "str_empty_string"),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$debrif_money", 1),
			(overlay_set_color, "$debrif_money", 16777215)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_2", 0),
				(assign, ":value", 0),
				(try_begin),
					(eq, ":trigger_param_1", "$pst_loot_1"),
					(gt, "$ply_loot_1", 0),
					(assign, ":value", "$ply_loot_1"),
				(else_try),
					(eq, ":trigger_param_1", "$pst_loot_2"),
					(gt, "$ply_loot_2", 0),
					(assign, ":value", "$ply_loot_2"),
				(else_try),
					(eq, ":trigger_param_1", "$pst_loot_3"),
					(gt, "$ply_loot_3", 0),
					(assign, ":value", "$ply_loot_3"),
				(else_try),
					(eq, ":trigger_param_1", "$pst_loot_4"),
					(gt, "$ply_loot_4", 0),
					(assign, ":value", "$ply_loot_4"),
				(else_try),
					(eq, ":trigger_param_1", "$pst_loot_5"),
					(gt, "$ply_loot_5", 0),
					(assign, ":value", "$ply_loot_5"),
				(try_end),
				(try_begin),
					(gt, ":value", 0),
					(item_get_type, ":type_value", ":value"),
					(try_begin),
						(eq, ":type_value", 1),
						(assign, ":value_2", "$ply_loot_modi_for_horse"),
					(else_try),
						(this_or_next|eq, ":type_value", 2),
						(this_or_next|eq, ":type_value", 3),
						(this_or_next|eq, ":type_value", 4),
						(this_or_next|eq, ":type_value", 8),
						(this_or_next|eq, ":type_value", 9),
						(this_or_next|eq, ":type_value", 10),
						(this_or_next|eq, ":type_value", 16),
						(eq, ":type_value", 17),
						(assign, ":value_2", "$ply_loot_modi_for_weapon"),
					(else_try),
						(this_or_next|eq, ":type_value", 5),
						(this_or_next|eq, ":type_value", 6),
						(eq, ":type_value", 18),
						(assign, ":value_2", "$ply_loot_modi_for_ammo"),
					(else_try),
						(eq, ":type_value", 7),
						(assign, ":value_2", "$ply_loot_modi_for_shield"),
					(else_try),
						(assign, ":value_2", "$ply_loot_modi_for_armor"),
					(try_end),
					(overlay_get_position, 0, ":trigger_param_1"),
					(show_item_details_with_modifier, ":value", ":value_2", 0, 0),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_mouse_press,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_2", 0),
				(play_sound, "snd_pst_click"),
				(assign, ":value", 0),
				(try_begin),
					(eq, ":trigger_param_1", "$pst_loot_1"),
					(gt, "$ply_loot_1", 0),
					(assign, ":value", "$ply_loot_1"),
				(else_try),
					(eq, ":trigger_param_1", "$pst_loot_2"),
					(gt, "$ply_loot_2", 0),
					(assign, ":value", "$ply_loot_2"),
				(else_try),
					(eq, ":trigger_param_1", "$pst_loot_3"),
					(gt, "$ply_loot_3", 0),
					(assign, ":value", "$ply_loot_3"),
				(else_try),
					(eq, ":trigger_param_1", "$pst_loot_4"),
					(gt, "$ply_loot_4", 0),
					(assign, ":value", "$ply_loot_4"),
				(else_try),
					(eq, ":trigger_param_1", "$pst_loot_5"),
					(gt, "$ply_loot_5", 0),
					(assign, ":value", "$ply_loot_5"),
				(try_end),
				(try_begin),
					(gt, ":value", 0),
					(str_store_item_name, 8, ":value"),
					(display_message, "str_gotitem_s8"),
					(item_get_type, ":type_value", ":value"),
					(try_begin),
						(eq, ":type_value", 1),
						(assign, ":value_2", "$ply_loot_modi_for_horse"),
					(else_try),
						(this_or_next|eq, ":type_value", 2),
						(this_or_next|eq, ":type_value", 3),
						(this_or_next|eq, ":type_value", 4),
						(this_or_next|eq, ":type_value", 8),
						(this_or_next|eq, ":type_value", 9),
						(this_or_next|eq, ":type_value", 10),
						(this_or_next|eq, ":type_value", 16),
						(eq, ":type_value", 17),
						(assign, ":value_2", "$ply_loot_modi_for_weapon"),
					(else_try),
						(this_or_next|eq, ":type_value", 5),
						(this_or_next|eq, ":type_value", 6),
						(eq, ":type_value", 18),
						(assign, ":value_2", "$ply_loot_modi_for_ammo"),
					(else_try),
						(eq, ":type_value", 7),
						(assign, ":value_2", "$ply_loot_modi_for_shield"),
					(else_try),
						(assign, ":value_2", "$ply_loot_modi_for_armor"),
					(try_end),
					(troop_add_item, "trp_player", ":value", ":value_2"),
					(assign, "$ply_loot_1", 0),
					(assign, "$ply_loot_2", 0),
					(assign, "$ply_loot_3", 0),
					(assign, "$ply_loot_4", 0),
					(assign, "$ply_loot_5", 0),
					(start_presentation, "prsnt_pst_debrif"),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$debrif_continue"),
				(assign, ":value", 0),
				(assign, "$meeting_add_troop_no", 0),
				(store_random_in_range, ":random_in_range_0_3", 0, 3),
				(try_begin),
					(eq, "$adult_content", 1),
					(eq, "$is_prisoner", 1),
					(eq, ":random_in_range_0_3", 0),
					(call_script, "script_troop_type_sett", "trp_player"),
					(lt, "$troop_gender_type", 10),
					(is_between, "$enemy_commander", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(call_script, "script_troop_type_sett", "$enemy_commander"),
					(lt, "$troop_gender_type", 10),
					(neg|troop_slot_ge, "$enemy_commander", 2, -50),
					(troop_get_slot, ":enemy_commander_player_order_object", "$enemy_commander", slot_troop_player_order_object),
					(this_or_next|eq, ":enemy_commander_player_order_object", 1),
					(eq, ":enemy_commander_player_order_object", 5),
					(try_for_range, ":troop", "trp_tt_lady_01_01", "trp_tt_lady_end"),
						(troop_slot_eq, "trp_player", slot_troop_state, ":troop"),
						(troop_slot_eq, ":troop", slot_troop_state, "trp_player"),
						(call_script, "script_wm_main_party_has_troop_sc", ":troop"),
						(eq, "$wm_comp_continue", 1),
						(neg|troop_slot_eq, ":troop", slot_troop_party_template, "$enemy_commander"),
						(neg|troop_slot_eq, ":troop", slot_troop_met, "$enemy_commander"),
						(assign, "$meeting_add_troop_no", ":troop"),
						(assign, ":value", 1),
					(try_end),
				(try_end),
				(assign, ":value_2", 0),
				(store_random_in_range, ":random_in_range_0_3_2", 0, 3),
				(try_begin),
					(eq, "$adult_content", 1),
					(eq, "$is_prisoner", 1),
					(eq, ":random_in_range_0_3_2", 0),
					(eq, ":value", 0),
					(call_script, "script_troop_type_sett", "trp_player"),
					(gt, "$troop_gender_type", 10),
					(call_script, "script_troop_type_sett", "$enemy_commander"),
					(lt, "$troop_gender_type", 10),
					(try_begin),
						(is_between, "$enemy_commander", "trp_tt_lord_01_00", "trp_tt_lord_end"),
						(neg|troop_slot_ge, "$enemy_commander", 2, -50),
						(troop_get_slot, ":enemy_commander_player_order_object", "$enemy_commander", slot_troop_player_order_object),
						(this_or_next|eq, ":enemy_commander_player_order_object", 1),
						(eq, ":enemy_commander_player_order_object", 5),
						(assign, ":value_2", 1),
						(assign, ":value", 1),
					(try_end),
				(try_end),
				(store_random_in_range, ":random_in_range_0_100", 0, 100),
				(try_begin),
					(gt, "$policy_tracker", 0),
					(le, "$policy_tracker", 5),
					(store_mul, ":value_3", "$policy_tracker", 6),
					(val_sub, ":random_in_range_0_100", ":value_3"),
				(try_end),
				(try_begin),
					(eq, "$pre_battle_result_save", 1),
					(le, "$molda_start_map_conversation", 0),
					(eq, ":value", 0),
					(lt, ":random_in_range_0_100", 50),
					(is_between, "$enemy_commander", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(assign, "$molda_start_map_conversation", "$enemy_commander"),
				(try_end),
				(try_begin),
					(eq, "$is_prisoner", 1),
					(is_between, "$enemy_commander", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(troop_slot_eq, "$enemy_commander", 41, 3),
					(assign, "$molda_start_map_conversation", -1),
					(jump_to_menu, "mnu_wm_game_over"),
					(display_message, "str_ply_taken_pri", 0x00ff0000),
				(else_try),
					(eq, "$is_prisoner", 1),
					(eq, ":value_2", 1),
					(is_between, "$enemy_commander", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(le, "$molda_start_map_conversation", 0),
					(assign, "$molda_start_map_conversation", "$enemy_commander"),
					(assign, "$wm_talk_state", 14),
					(jump_to_menu, "mnu_molda_map_talk"),
					(display_message, "str_ply_taken_pri", 0x00ff0000),
					(call_script, "script_initialize_main_party"),
				(else_try),
					(eq, "$is_prisoner", 1),
					(is_between, "$meeting_add_troop_no", "trp_tt_lady_01_01", "trp_tt_lady_end"),
					(troop_slot_eq, "trp_player", slot_troop_state, "$meeting_add_troop_no"),
					(troop_slot_eq, "$meeting_add_troop_no", slot_troop_state, "trp_player"),
					(is_between, "$enemy_commander", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(le, "$molda_start_map_conversation", 0),
					(assign, "$molda_start_map_conversation", "$enemy_commander"),
					(assign, "$wm_talk_state", 8),
					(jump_to_menu, "mnu_molda_map_talk"),
					(display_message, "str_ply_taken_pri", 0x00ff0000),
					(call_script, "script_initialize_main_party"),
				(else_try),
					(eq, "$is_prisoner", 1),
					(assign, "$molda_start_map_conversation", -1),
					(jump_to_menu, "mnu_wm_player_prisoner"),
					(display_message, "str_ply_taken_pri", 0x00ff0000),
				(else_try),
					(eq, "$pre_battle_result_save", 2),
					(eq, "$low_encounter_battle", 1),
					(display_message, "str_ply_succ_esc", 0x0000ff00),
					(assign, "$molda_start_map_conversation", -1),
					(jump_to_menu, "mnu_wm_pst_map_return"),
				(else_try),
					(eq, "$pre_battle_result_save", 2),
					(display_message, "str_ply_succ_esc", 0x0000ff00),
					(call_script, "script_initialize_main_party"),
					(assign, "$molda_start_map_conversation", -1),
					(jump_to_menu, "mnu_wm_pst_map_return"),
				(else_try),
					(eq, "$pre_battle_result_save", 4),
					(assign, "$molda_start_map_conversation", -1),
					(jump_to_menu, "mnu_wm_pst_map_return"),
				(else_try),
					(eq, "$pre_battle_result_save", 1),
					(is_between, "$molda_start_map_conversation", "trp_tt_lady_01_01", "trp_tt_lady_end"),
					(assign, "$wm_talk_state", 16),
					(jump_to_menu, "mnu_molda_map_talk"),
				(else_try),
					(eq, "$pre_battle_result_save", 1),
					(is_between, "$molda_start_map_conversation", "trp_tt_lord_01_00", "trp_tt_lord_end"),
					(assign, "$wm_talk_state", 17),
					(jump_to_menu, "mnu_molda_map_talk"),
				(else_try),
					(assign, "$molda_start_map_conversation", -1),
					(jump_to_menu, "mnu_wm_pst_map_return"),
				(try_end),
			(try_end),
			(try_begin),
				(eq, ":trigger_param_1", "$debrif_advexp"),
				(call_script, "script_adv_exp_diff", "$loot_reward_adv_exp", 87),
				(assign, "$loot_reward_money", 0),
				(assign, "$loot_reward_contri", 0),
				(assign, "$loot_reward_honor", 0),
				(assign, "$loot_reward_battle_exp", 0),
				(assign, "$loot_reward_adv_exp", 0),
				(start_presentation, "prsnt_pst_debrif"),
			(else_try),
				(eq, ":trigger_param_1", "$debrif_btexp"),
				(call_script, "script_battle_exp_diff", "$loot_reward_battle_exp", 87),
				(assign, "$loot_reward_money", 0),
				(assign, "$loot_reward_contri", 0),
				(assign, "$loot_reward_honor", 0),
				(assign, "$loot_reward_battle_exp", 0),
				(assign, "$loot_reward_adv_exp", 0),
				(start_presentation, "prsnt_pst_debrif"),
			(else_try),
				(eq, ":trigger_param_1", "$debrif_honor"),
				(call_script, "script_wm_honor_change_diff", "trp_player", "$loot_reward_honor", 87),
				(assign, "$loot_reward_money", 0),
				(assign, "$loot_reward_contri", 0),
				(assign, "$loot_reward_honor", 0),
				(assign, "$loot_reward_battle_exp", 0),
				(assign, "$loot_reward_adv_exp", 0),
				(start_presentation, "prsnt_pst_debrif"),
			(else_try),
				(eq, ":trigger_param_1", "$debrif_contribution"),
				(call_script, "script_troop_contribution_diff", "trp_player", "$loot_reward_contri", 87),
				(assign, "$loot_reward_money", 0),
				(assign, "$loot_reward_contri", 0),
				(assign, "$loot_reward_honor", 0),
				(assign, "$loot_reward_battle_exp", 0),
				(assign, "$loot_reward_adv_exp", 0),
				(start_presentation, "prsnt_pst_debrif"),
			(else_try),
				(eq, ":trigger_param_1", "$debrif_money"),
				(call_script, "script_party_money_level_diff", "p_main_party", "$loot_reward_money", 87),
				(assign, "$loot_reward_money", 0),
				(assign, "$loot_reward_contri", 0),
				(assign, "$loot_reward_honor", 0),
				(assign, "$loot_reward_battle_exp", 0),
				(assign, "$loot_reward_adv_exp", 0),
				(start_presentation, "prsnt_pst_debrif"),
			(try_end)
		])
	]),

	("start_select_age", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_mesh_overlay, reg0, "mesh_OrteliusWorldMap1570"),
			(position_set_x, 1, 0),
			(position_set_y, 1, 0),
			(overlay_set_position, reg0, 1),
			(assign, ":var_1", 900),
			(assign, ":var_2", 310),
			(position_set_x, 3, 350),
			(position_set_y, 3, 480),
			(try_begin),
				(eq, "$start_age", 1184),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_richard_i"),
				(position_set_x, 1, 17),
				(position_set_y, 1, 569),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_philip_ii"),
				(position_set_x, 1, 67),
				(position_set_y, 1, 517),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_barbarossa"),
				(position_set_x, 1, 115),
				(position_set_y, 1, 552),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_alfonso_viii"),
				(position_set_x, 1, 20),
				(position_set_y, 1, 448),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_yaqub"),
				(position_set_x, 1, 88),
				(position_set_y, 1, 412),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_baldwin"),
				(position_set_x, 1, 310),
				(position_set_y, 1, 430),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_saladin"),
				(position_set_x, 1, 279),
				(position_set_y, 1, 336),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_genghiskhan"),
				(position_set_x, 1, 686),
				(position_set_y, 1, 593),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_shizong"),
				(position_set_x, 1, 766),
				(position_set_y, 1, 499),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_xiaozong"),
				(position_set_x, 1, 787),
				(position_set_y, 1, 364),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_yoritomo"),
				(position_set_x, 1, 930),
				(position_set_y, 1, 428),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_munemori"),
				(position_set_x, 1, 855),
				(position_set_y, 1, 428),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_tekish"),
				(position_set_x, 1, 529),
				(position_set_y, 1, 483),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_ghiyath"),
				(position_set_x, 1, 562),
				(position_set_y, 1, 363),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(else_try),
				(eq, "$start_age", 1573),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_akbar"),
				(position_set_x, 1, 562),
				(position_set_y, 1, 363),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_elizabeth"),
				(position_set_x, 1, 17),
				(position_set_y, 1, 569),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_wanli"),
				(position_set_x, 1, 757),
				(position_set_y, 1, 453),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_oda"),
				(position_set_x, 1, 910),
				(position_set_y, 1, 422),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_sebastian"),
				(position_set_x, 1, 5),
				(position_set_y, 1, 428),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_philip"),
				(position_set_x, 1, 55),
				(position_set_y, 1, 451),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_william"),
				(position_set_x, 1, 82),
				(position_set_y, 1, 559),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_maxi"),
				(position_set_x, 1, 156),
				(position_set_y, 1, 555),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_stephen"),
				(position_set_x, 1, 204),
				(position_set_y, 1, 501),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_selimii"),
				(position_set_x, 1, 268),
				(position_set_y, 1, 483),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_ivan"),
				(position_set_x, 1, 215),
				(position_set_y, 1, 607),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
				(create_mesh_overlay, reg0, "mesh_pic_portrait_john_iii"),
				(position_set_x, 1, 156),
				(position_set_y, 1, 665),
				(overlay_set_position, reg0, 1),
				(overlay_set_size, reg0, 3),
			(try_end),
			(try_begin),
				(eq, "$start_age", 1184),
				(create_in_game_button_overlay, "$ad_display", "str_ad1184"),
			(else_try),
				(eq, "$start_age", 1573),
				(create_in_game_button_overlay, "$ad_display", "str_ad1573"),
			(else_try),
				(create_in_game_button_overlay, "$ad_display", "str_admixed"),
			(try_end),
			(position_set_x, 1, 495),
			(position_set_y, 1, 650),
			(overlay_set_position, "$ad_display", 1),
			(overlay_set_color, "$ad_display", 16777215),
			(create_in_game_button_overlay, "$select_age_01", "str_ad1184_t"),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$select_age_01", 1),
			(try_begin),
				(eq, "$start_age", 1184),
				(overlay_set_color, "$select_age_01", 16776960),
			(else_try),
				(overlay_set_color, "$select_age_01", 16777215),
			(try_end),
			(val_sub, ":var_2", 40),
			(create_in_game_button_overlay, "$select_age_02", "str_ad1573_t"),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$select_age_02", 1),
			(try_begin),
				(eq, "$start_age", 1573),
				(overlay_set_color, "$select_age_02", 16776960),
			(else_try),
				(overlay_set_color, "$select_age_02", 16777215),
			(try_end),
			(val_sub, ":var_2", 40),
			(create_in_game_button_overlay, "$select_age_00", "str_admixed_t"),
			(position_set_x, 1, ":var_1"),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$select_age_00", 1),
			(try_begin),
				(eq, "$start_age", 0),
				(overlay_set_color, "$select_age_00", 16776960),
			(else_try),
				(overlay_set_color, "$select_age_00", 16777215),
			(try_end),
			(create_in_game_button_overlay, "$select_start_butt", "str_start_butt"),
			(position_set_x, 1, 495),
			(position_set_y, 1, 50),
			(overlay_set_position, "$select_start_butt", 1),
			(overlay_set_color, "$select_start_butt", 16777215)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$select_age_00"),
				(assign, "$start_age", 0),
				(play_sound, "snd_pst_click"),
				(start_presentation, "prsnt_start_select_age"),
			(else_try),
				(eq, ":trigger_param_1", "$select_age_01"),
				(assign, "$start_age", 1184),
				(play_sound, "snd_pst_click"),
				(start_presentation, "prsnt_start_select_age"),
			(else_try),
				(eq, ":trigger_param_1", "$select_age_02"),
				(assign, "$start_age", 1573),
				(play_sound, "snd_pst_click"),
				(start_presentation, "prsnt_start_select_age"),
			(else_try),
				(eq, ":trigger_param_1", "$select_start_butt"),
				(play_sound, "snd_pst_click"),
				(try_begin),
					(this_or_next|eq, "$start_age", 1573),
					(this_or_next|eq, "$start_age", 1184),
					(eq, "$start_age", 0),
					(call_script, "script_start_age_sett", "$start_age"),
					(presentation_set_duration, 0),
					(presentation_set_duration, 0),
					(jump_to_menu, "mnu_start_character_choose_culture"),
				(else_try),
					(display_message, "str_non_scenario"),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 44),
				(mouse_get_position, 7),
				(set_fixed_point_multiplier, 1000),
				(position_get_x, ":position_x_7", 7),
				(position_get_y, ":position_y_7", 7),
				(assign, reg54, ":position_x_7"),
				(assign, reg55, ":position_y_7"),
				(display_message, "str_pst_xy_0"),
				(display_message, "str_pst_xy_x", 0x00ff0000),
				(display_message, "str_pst_xy_y", 0x00ffff00),
			(try_end)
		])
	]),

	("pst_holywar", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(assign, ":var_1", 300),
			(assign, ":var_2", 650),
			(position_set_x, 3, 1000),
			(position_set_y, 3, 1000),
			(try_begin),
				(gt, "$holywar_ply_opinion", 0),
				(assign, ":var_3", 0),
				(assign, ":var_4", 0),
				(assign, ":var_5", 0),
				(try_for_range, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
					(faction_slot_eq, ":faction", slot_faction_player_alarm, 1),
					(faction_slot_eq, ":faction", 27, "$holy_war_religion_att"),
					(val_add, ":var_5", 1),
					(store_random_in_range, ":random_in_range_0_2", 0, 2),
					(str_store_faction_name, 8, ":faction"),
					(try_begin),
						(eq, ":faction", "$wm_player_fac"),
						(try_begin),
							(eq, "$holywar_ply_opinion", 1),
							(val_add, ":var_3", 1),
							(create_text_overlay, reg0, "str_holywar_agree", 4),
						(else_try),
							(eq, "$holywar_ply_opinion", 2),
							(val_add, ":var_4", 1),
							(create_text_overlay, reg0, "str_holywar_disagree", 4),
						(try_end),
					(else_try),
						(eq, ":random_in_range_0_2", 0),
						(val_add, ":var_3", 1),
						(create_text_overlay, reg0, "str_holywar_agree", 4),
					(else_try),
						(val_add, ":var_4", 1),
						(create_text_overlay, reg0, "str_holywar_disagree", 4),
					(try_end),
					(position_set_x, 1, ":var_1"),
					(position_set_y, 1, ":var_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 3),
					(val_sub, ":var_2", 24),
				(try_end),
				(try_begin),
					(gt, ":var_3", ":var_4"),
					(assign, "$holy_war_agreed", 1),
				(else_try),
					(assign, "$holy_war_agreed", 2),
				(try_end),
			(try_end),
			(create_text_overlay, reg0, "str_what_is_your_op", 16),
			(position_set_x, 1, 495),
			(position_set_y, 1, 135),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(eq, "$holy_war_agreed", 1),
				(create_in_game_button_overlay, "$holy_war_result", "str_holywar_start", 16),
			(else_try),
				(eq, "$holy_war_agreed", 2),
				(create_in_game_button_overlay, "$holy_war_result", "str_holywar_cancel", 16),
			(else_try),
				(create_in_game_button_overlay, "$holy_war_result", "str_exittt", 16),
			(try_end),
			(position_set_x, 1, 495),
			(position_set_y, 1, 50),
			(overlay_set_position, "$holy_war_result", 1),
			(overlay_set_color, "$holy_war_result", 16777215),
			(try_begin),
				(eq, "$holy_war_agreed", 0),
				(create_in_game_button_overlay, "$holy_war_yes", "str_meeting_opinion_agree", 16),
			(else_try),
				(create_text_overlay, "$holy_war_yes", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 395),
			(position_set_y, 1, 100),
			(overlay_set_position, "$holy_war_yes", 1),
			(overlay_set_color, "$holy_war_yes", 16777215),
			(try_begin),
				(eq, "$holy_war_agreed", 0),
				(create_in_game_button_overlay, "$holy_war_no", "str_meeting_opinion_disagree", 16),
			(else_try),
				(create_text_overlay, "$holy_war_no", "str_empty_string"),
			(try_end),
			(position_set_x, 1, 595),
			(position_set_y, 1, 100),
			(overlay_set_position, "$holy_war_no", 1),
			(overlay_set_color, "$holy_war_no", 16777215)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|eq, ":trigger_param_1", "$holy_war_yes"),
				(eq, ":trigger_param_1", "$holy_war_no"),
				(try_begin),
					(eq, ":trigger_param_1", "$holy_war_yes"),
					(assign, "$holywar_ply_opinion", 1),
				(else_try),
					(assign, "$holywar_ply_opinion", 2),
				(try_end),
				(start_presentation, "prsnt_pst_holywar"),
			(else_try),
				(eq, ":trigger_param_1", "$holy_war_result"),
				(try_begin),
					(eq, "$holy_war_agreed", 1),
					(call_script, "script_holywar_reln_set", "$holy_war_religion_att", "$holy_war_religion_def", "$holy_war_target_party"),
					(store_add, ":value", "$holy_war_religion_att", "str_religion_title_0"),
					(str_store_string, 8, ":value"),
					(store_add, ":value", "$holy_war_religion_def", "str_religion_title_0"),
					(str_store_string, 9, ":value"),
					(str_store_party_name, 10, "$holy_war_target_party"),
					(display_message, "str_holywar_declare_s", 0x00ffff00),
				(try_end),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_wm_pst_map_return"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("policy_learn", 0, mesh_pic_xex13, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(position_set_x, 3, 1100),
			(position_set_y, 3, 1100),
			(position_set_x, 4, 750),
			(position_set_y, 4, 750),
			(assign, ":value", 590),
			(assign, ":value_2", 15),
			(create_in_game_button_overlay, "$strategy_learn_exit", "str_return_butt", 4),
			(overlay_set_color, "$strategy_learn_exit", 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_exit", 1),
			(val_sub, ":value", 190),
			(assign, reg11, "$g_slot_troop_int_exp"),
			(create_in_game_button_overlay, reg0, "str_int_exp_reg11", 4),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(assign, ":value", 30),
			(assign, ":value_2", 710),
			(assign, reg8, "$policy_tax_collect"),
			(try_begin),
				(ge, "$policy_tax_collect", 5),
				(create_text_overlay, "$strategy_learn_fallrock", "str_policy_tax_collect_name", 4),
				(overlay_set_color, "$strategy_learn_fallrock", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_fallrock", "str_policy_tax_collect_name", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_fallrock", 1),
			(overlay_set_size, "$strategy_learn_fallrock", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_policy_tax_collect_txt", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(assign, reg8, "$policy_supply_manage"),
			(try_begin),
				(ge, "$policy_supply_manage", 5),
				(create_text_overlay, "$strategy_learn_firework", "str_policy_supply_manage_name", 4),
				(overlay_set_color, "$strategy_learn_firework", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_firework", "str_policy_supply_manage_name", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_firework", 1),
			(overlay_set_size, "$strategy_learn_firework", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_policy_supply_manage_txt", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(assign, reg8, "$policy_trade_plan"),
			(try_begin),
				(ge, "$policy_trade_plan", 5),
				(create_text_overlay, "$strategy_learn_submerge", "str_policy_trade_plan_name", 4),
				(overlay_set_color, "$strategy_learn_submerge", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_submerge", "str_policy_trade_plan_name", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_submerge", 1),
			(overlay_set_size, "$strategy_learn_submerge", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_policy_trade_plan_txt", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(assign, reg8, "$policy_frugal"),
			(try_begin),
				(ge, "$policy_frugal", 5),
				(create_text_overlay, "$strategy_learn_ambush", "str_policy_frugal_name", 4),
				(overlay_set_color, "$strategy_learn_ambush", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_ambush", "str_policy_frugal_name", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_ambush", 1),
			(overlay_set_size, "$strategy_learn_ambush", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_policy_frugal_txt", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(assign, reg8, "$policy_ship_manage"),
			(try_begin),
				(ge, "$policy_ship_manage", 5),
				(create_text_overlay, "$strategy_learn_lure", "str_policy_ship_manage_name", 4),
				(overlay_set_color, "$strategy_learn_lure", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_lure", "str_policy_ship_manage_name", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_lure", 1),
			(overlay_set_size, "$strategy_learn_lure", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_policy_ship_manage_txt", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(assign, reg8, "$policy_lascivious"),
			(try_begin),
				(ge, "$policy_lascivious", 5),
				(create_text_overlay, "$strategy_learn_blocking_supply", "str_policy_lascivious_name", 4),
				(overlay_set_color, "$strategy_learn_blocking_supply", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_blocking_supply", "str_policy_lascivious_name", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_blocking_supply", 1),
			(overlay_set_size, "$strategy_learn_blocking_supply", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_policy_lascivious_txt", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(val_sub, ":value_2", 50),
			(assign, reg8, "$policy_tracker"),
			(try_begin),
				(ge, "$policy_tracker", 5),
				(create_text_overlay, "$strategy_learn_confuse", "str_policy_tracker_name", 4),
				(overlay_set_color, "$strategy_learn_confuse", 255),
			(else_try),
				(create_button_overlay, "$strategy_learn_confuse", "str_policy_tracker_name", 4),
			(try_end),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$strategy_learn_confuse", 1),
			(overlay_set_size, "$strategy_learn_confuse", 3),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "str_policy_tracker_txt", 4),
			(overlay_set_color, reg0, 11403282),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 4),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(set_show_messages, 0),
			(assign, ":var_2", "$g_slot_troop_int_exp_backup"),
			(val_div, ":var_2", 47),
			(set_show_messages, 1),
			(try_begin),
				(eq, ":trigger_param_1", "$strategy_learn_fallrock"),
				(assign, ":value", "$policy_tax_collect"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_firework"),
				(assign, ":value", "$policy_supply_manage"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_submerge"),
				(assign, ":value", "$policy_trade_plan"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_ambush"),
				(assign, ":value", "$policy_frugal"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_lure"),
				(assign, ":value", "$policy_ship_manage"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_blocking_supply"),
				(assign, ":value", "$policy_lascivious"),
			(else_try),
				(eq, ":trigger_param_1", "$strategy_learn_confuse"),
				(assign, ":value", "$policy_tracker"),
			(try_end),
			(assign, ":value_2", 0),
			(store_attribute_level, ":attribute_level_player_2", "trp_player", 2),
			(val_add, ":value", 1),
			(val_mul, ":value", 8),
			(try_begin),
				(ge, ":attribute_level_player_2", ":value"),
				(assign, ":value_2", 1),
			(try_end),
			(try_begin),
				(eq, ":trigger_param_1", "$strategy_learn_exit"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":value_2", 1),
				(ge, ":var_2", 400),
				(try_begin),
					(eq, ":trigger_param_1", "$strategy_learn_fallrock"),
					(lt, "$policy_tax_collect", 5),
					(call_script, "script_int_exp_diff", -400),
					(play_sound, "snd_good_news_2"),
					(val_add, "$policy_tax_collect", 1),
					(start_presentation, "prsnt_policy_learn"),
				(else_try),
					(eq, ":trigger_param_1", "$strategy_learn_firework"),
					(lt, "$policy_supply_manage", 5),
					(call_script, "script_int_exp_diff", -400),
					(play_sound, "snd_good_news_2"),
					(val_add, "$policy_supply_manage", 1),
					(start_presentation, "prsnt_policy_learn"),
				(else_try),
					(eq, ":trigger_param_1", "$strategy_learn_submerge"),
					(lt, "$policy_trade_plan", 5),
					(call_script, "script_int_exp_diff", -400),
					(play_sound, "snd_good_news_2"),
					(val_add, "$policy_trade_plan", 1),
					(start_presentation, "prsnt_policy_learn"),
				(else_try),
					(eq, ":trigger_param_1", "$strategy_learn_ambush"),
					(lt, "$policy_frugal", 5),
					(call_script, "script_int_exp_diff", -400),
					(play_sound, "snd_good_news_2"),
					(val_add, "$policy_frugal", 1),
					(start_presentation, "prsnt_policy_learn"),
				(else_try),
					(eq, ":trigger_param_1", "$strategy_learn_lure"),
					(lt, "$policy_ship_manage", 5),
					(call_script, "script_int_exp_diff", -400),
					(play_sound, "snd_good_news_2"),
					(val_add, "$policy_ship_manage", 1),
					(start_presentation, "prsnt_policy_learn"),
				(else_try),
					(eq, ":trigger_param_1", "$strategy_learn_blocking_supply"),
					(lt, "$policy_lascivious", 5),
					(call_script, "script_int_exp_diff", -400),
					(play_sound, "snd_good_news_2"),
					(val_add, "$policy_lascivious", 1),
					(start_presentation, "prsnt_policy_learn"),
				(else_try),
					(eq, ":trigger_param_1", "$strategy_learn_confuse"),
					(lt, "$policy_tracker", 5),
					(call_script, "script_int_exp_diff", -400),
					(play_sound, "snd_good_news_2"),
					(val_add, "$policy_tracker", 1),
					(start_presentation, "prsnt_policy_learn"),
				(try_end),
			(else_try),
				(eq, ":value_2", 0),
				(display_message, "str_need_int_attri"),
			(else_try),
				(lt, ":var_2", 400),
				(display_message, "str_need_int_exp"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("game_custom_battle_designer", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, []),

	("pst_sample", prsntf_read_only|prsntf_manual_end_only, mesh_pic_bandits, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[]),

		(ti_on_presentation_run,
		[])
	]),
##################################################
##### troop_ratio_bar
##################################################
  ("troop_ratio_bar",prsntf_read_only,0,[
      (ti_on_presentation_load,
       [
        (assign, "$presentation_troop_ratio_bar_active", 1),
        (set_fixed_point_multiplier, 1000),
       
        (create_mesh_overlay, "$g_presentation_obj_1", "mesh_status_troop_ratio_bar"),
        (position_set_x, pos1, 30),
        (position_set_y, pos1, 700),
        (overlay_set_position, "$g_presentation_obj_1", pos1),
       
        (position_set_x, pos1, 35),
        (position_set_y, pos1, 713),
       
        (create_mesh_overlay, "$g_presentation_obj_2", "mesh_white_plane"),
        (overlay_set_color, "$g_presentation_obj_2", 0xAA1F1F),
        (overlay_set_position, "$g_presentation_obj_2", pos1),
       
        (create_mesh_overlay, "$g_presentation_obj_3", "mesh_white_plane"),
        (overlay_set_color, "$g_presentation_obj_3", 0x1F1FAA),
        (overlay_set_position, "$g_presentation_obj_3", pos1),
     
        (create_mesh_overlay, "$g_presentation_obj_4", "mesh_white_plane"),
        (overlay_set_color, "$g_presentation_obj_4", 0x1FAA1F),
        (overlay_set_position, "$g_presentation_obj_4", pos1),
       
        (create_mesh_overlay, "$g_presentation_obj_5", "mesh_status_troop_ratio_bar_button"),
        (position_set_x, pos1, 35),
        (position_set_y, pos1, 700),
        (overlay_set_position, "$g_presentation_obj_5", pos1),
       
        (create_mesh_overlay, "$g_presentation_obj_6", "mesh_status_troop_ratio_bar_button"),
        (position_set_x, pos1, 275),
        (position_set_y, pos1, 700),
        (overlay_set_position, "$g_presentation_obj_6", pos1),

        (create_mesh_overlay, "$g_presentation_obj_7", "mesh_status_troop_ratio_bar_button"),
        (create_mesh_overlay, "$g_presentation_obj_8", "mesh_status_troop_ratio_bar_button"),
       
        (presentation_set_duration, 999999),
       ]),
      (ti_on_presentation_run,
       [
        (store_trigger_param_1, ":cur_time"),
       
        (set_fixed_point_multiplier, 1000),
        (assign, ":player_count", 0),
        (assign, ":ally_count", 0),
        (assign, ":enemy_count", 0),
        (assign, ":total_count", 0),
       
        (try_for_agents, ":cur_agent"),
          (agent_is_human, ":cur_agent"),
          (agent_is_alive, ":cur_agent"),
          (agent_get_party_id, ":agent_party", ":cur_agent"),
          (try_begin),
            (eq, ":agent_party", "p_main_party"),
            (val_add, ":player_count", 1),
          (else_try),
            (agent_is_ally, ":cur_agent"),
            (val_add, ":ally_count", 1),
          (else_try),
            (val_add, ":enemy_count", 1),
          (try_end),
        (try_end),
        (val_add, ":total_count", ":player_count"),
        (val_add, ":total_count", ":ally_count"),
        (val_add, ":total_count", ":enemy_count"),

        (position_set_x, pos1, 12000),
        (position_set_y, pos1, 300),
        (overlay_set_size, "$g_presentation_obj_2", pos1),
     
        (store_add, ":ally_percent", ":player_count", ":ally_count"),
        (val_mul, ":ally_percent", 12000),
        (val_div, ":ally_percent", ":total_count"),
        (position_set_x, pos1, ":ally_percent"),
        (position_set_y, pos1, 300),
        (overlay_set_size, "$g_presentation_obj_3", pos1),
     
        (store_mul, ":player_percent", ":player_count", 12000),
        (val_div, ":player_percent", ":total_count"),
        (position_set_x, pos1, ":player_percent"),
        (position_set_y, pos1, 300),
        (overlay_set_size, "$g_presentation_obj_4", pos1),
       
        (store_add, ":ally_percent_2", ":player_count", ":ally_count"),
        (val_mul, ":ally_percent_2", 240),
        (val_div, ":ally_percent_2", ":total_count"),
        (val_add, ":ally_percent_2", 35),
        (position_set_x, pos1, ":ally_percent_2"),
        (position_set_y, pos1, 700),
        (overlay_set_position, "$g_presentation_obj_7", pos1),
       
        (store_mul, ":player_percent_2", ":player_count", 240),
        (val_div, ":player_percent_2", ":total_count"),
        (val_add, ":player_percent_2", 35),
        (position_set_x, pos1, ":player_percent_2"),
        (position_set_y, pos1, 700),
        (overlay_set_position, "$g_presentation_obj_8", pos1),
       
        (try_begin),
          (eq, "$presentation_troop_ratio_bar_active", 1),
          (gt, ":cur_time", 200),
          (game_key_clicked, gk_view_orders),
          (assign, "$presentation_troop_ratio_bar_active", 0),
          (presentation_set_duration, 0),
		  (start_presentation, "prsnt_mini_map"), #(start_presentation, "prsnt_battle"),
        (try_end),
       ]),
       
     ]),
##################################################
##### troop_ratio_bar
##################################################

#######Begin Blackjack
#####Source: https://forums.taleworlds.com/index.php/topic,52408.0.html
######plus
####  ("blackjack", 0, 0,#another 0 probably.
####   [
####     (ti_on_presentation_load,
####      [
####
####        (set_fixed_point_multiplier, 1000),
####        (assign,"$g_presentation_obj_1",-1), #
####        (assign,"$g_presentation_obj_2",-1), #        
####        (assign,"$g_presentation_obj_3",-1), #        
####        (assign,"$g_presentation_obj_4",-1), #
####        (assign,"$g_presentation_obj_5",-1), #
####        (assign,"$g_presentation_obj_6",-1), #
####        (assign,"$g_presentation_obj_7",-1), #
####        (assign,"$g_presentation_obj_8",-1), #
####        (assign,"$g_presentation_obj_9",-1), #
####        (assign,"$g_presentation_obj_10",-1), #
####        (assign,"$g_presentation_obj_11",-1), #
####        (assign,"$g_presentation_obj_12",-1), #
####        (assign,"$g_presentation_credits_obj_1",-1), #
####        (assign,"$g_presentation_credits_obj_2",-1), #      
####        (assign,"$g_presentation_credits_obj_3",-1), #        
####        (assign,"$g_presentation_credits_obj_4",-1), #
####        (assign,"$g_presentation_credits_obj_5",-1), #
####        (assign,reg1,0),#
####        (assign,reg21,0),#
####        (assign,reg22,0),
####        (assign,reg23,0),
####        (assign,reg24,0),
####        (assign,reg25,0),
####        (assign,reg26,0),
####        (assign,reg27,0),
####        (assign,reg28,0),
####        (assign,reg29,0),
####        (assign,reg30,0),
####        (assign,reg31,0),
####        (assign,reg32,0),
####        (assign,reg33,0),
####        (assign,reg34,0),
####        (assign,reg35,0),
####        (assign,reg36,0),
####        (assign,reg37,0),
####        (assign,reg38,0),
####        (assign,reg39,0),
####        (assign, reg51, 1),#
####        (assign, reg52, 0),#
####        (assign, reg53, 0),#
####        (assign, reg54, 0),#
####        (assign, reg55, 0),#
####        (assign, reg56, 0),#
####        (assign, reg57, 0),#
####        (assign, reg58, 0),#
####        (assign, reg60, 0),#
####        (assign, reg61, 0),#
####        (assign, reg62, 0),#
####        (assign, reg63, 0),#
####
####        (create_mesh_overlay, reg1, "mesh_wood_table"),#
####        (position_set_x, pos1, 0),
####        (position_set_y, pos1, 0),
####        (overlay_set_position, reg1, pos1),
####
####        (str_store_troop_name, s1, "$g_talk_troop"),#
####        (create_text_overlay, reg1, "@{s1}", tf_center_justify),
####        (position_set_x, pos1, 120),#820
####        (position_set_y, pos1, 470),#470
####        (overlay_set_position, reg1, pos1),#
####        (overlay_set_color, reg1, 0xffffff),
####        (str_store_troop_name, s1, "trp_player"),#
####        (create_text_overlay, reg1, "@{s1}", tf_center_justify),
####        (position_set_x, pos1, 815),#120
####        (position_set_y, pos1, 8),#8
####        (overlay_set_position, reg1, pos1),#
####        (overlay_set_color, reg1, 0xffffff),
####         # "mesh_21_troop_portrait"
####        (create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_troop_note_mesh", "$g_talk_troop"),
####        (position_set_x, pos1, 750),
####        (position_set_y, pos1, 750),
####        (overlay_set_size, reg1, pos1),
####        (position_set_x, pos1, 7),#700
####        (position_set_y, pos1, 500),#500
####        (overlay_set_position, reg1, pos1),
####         # "mesh_21_troop_portrait"
####        (create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_troop_note_mesh", "trp_player"),
####        (position_set_x, pos1, 750),
####        (position_set_y, pos1, 750),
####        (overlay_set_size, reg1, pos1),
####        (position_set_x, pos1, 740),#7
####        (position_set_y, pos1, 45),#20
####        (overlay_set_position, reg1, pos1),
####
####
####         #"$g_presentation_obj_1
####        (create_image_button_overlay, "$g_presentation_obj_1", "mesh_21_button", "mesh_21_button_down"),
####        (position_set_x, pos1, 650),#250
####        (position_set_y, pos1, 160),#160
####        (overlay_set_position, "$g_presentation_obj_1", pos1),
####        (position_set_x, pos1, 300),
####        (position_set_y, pos1, 450),
####        (overlay_set_size, "$g_presentation_obj_1", pos1),
####        (create_text_overlay, reg1, "@Hit"),#
####        (position_set_x, pos1, 660),#670 old font 660 additional 5
####        (position_set_y, pos1, 163),#148 old font 160 negative 12
####        (overlay_set_position, reg1, pos1),
####        (overlay_set_color, reg1, 0xffffff),
####         #"$g_presentation_obj_2
####        (create_image_button_overlay, "$g_presentation_obj_2", "mesh_21_button", "mesh_21_button_down"),
####        (position_set_x, pos1, 650),#250
####        (position_set_y, pos1, 100),#100
####        (overlay_set_position, "$g_presentation_obj_2", pos1),
####        (position_set_x, pos1, 300),
####        (position_set_y, pos1, 450),
####        (overlay_set_size, "$g_presentation_obj_2", pos1),
####        (create_text_overlay, reg1, "@Stay"),#
####        (position_set_x, pos1, 662),#660 662 old font
####        (position_set_y, pos1, 103),#100 88 old font
####        (overlay_set_position, reg1, pos1),
####        (overlay_set_color, reg1, 0xffffff),
####         #"$g_presentation_obj_3
####        (create_image_button_overlay, "$g_presentation_obj_3", "mesh_21_button", "mesh_21_button_down"),
####        (position_set_x, pos1, 650),#250
####        (position_set_y, pos1, 40),#40
####        (overlay_set_position, "$g_presentation_obj_3", pos1),
####        (position_set_x, pos1, 300),
####        (position_set_y, pos1, 450),
####        (overlay_set_size, "$g_presentation_obj_3", pos1),
####        (create_text_overlay, reg1, "@Double"),#
####        (position_set_x, pos1, 660),#660
####        (position_set_y, pos1, 43),#40 28 old font
####        (overlay_set_position, reg1, pos1),
####        (overlay_set_color, reg1, 0xffffff),
####
####        (create_mesh_overlay, reg1, "mesh_text_bar"),#
####        (position_set_x, pos1, 240),
####        (position_set_y, pos1, 800),
####        (overlay_set_size, reg1, pos1),
####        (position_set_x, pos1, 740),
####        (position_set_y, pos1, 305),
####        (overlay_set_position, reg1, pos1),
####
####        (str_store_string, s1, "@Bet: {reg51} Denars"),#
####        (create_text_overlay, "$g_presentation_obj_4", s1),#
####        (position_set_x, pos1, 755),#30
####        (position_set_y, pos1, 358),#300 355 def 345 old font
####        (overlay_set_position, "$g_presentation_obj_4", pos1),
####        (overlay_set_color, "$g_presentation_obj_4", 0xfffccc),
####        (store_troop_gold,reg1,"trp_player"),#
####        (create_text_overlay, "$g_presentation_obj_5", "@Money: {reg1} Denars"),
####        (position_set_x, pos1, 755),#30
####        (position_set_y, pos1, 328),#270 325 def 315 old font
####        (overlay_set_position, "$g_presentation_obj_5", pos1),
####        (overlay_set_color, "$g_presentation_obj_5", 0xfffccc),
####
####        (presentation_set_duration, 999999),
####        ]),
####      (ti_on_presentation_run,#
####       [
####        (store_trigger_param_1, ":cur_time"),
####        (set_fixed_point_multiplier, 1000),
####
####        (ge, ":cur_time",500),
####
####
####        (try_begin),
####          (eq, reg50, 0),#
####          (assign, reg50, 3),#
####          (create_mesh_overlay, "$g_presentation_obj_6", "mesh_text_bar"),#
####          (position_set_x, pos1, 350),
####          (position_set_y, pos1, 1800),
####          (overlay_set_size, "$g_presentation_obj_6", pos1),
####          (position_set_x, pos6, 330),
####          (position_set_y, pos6, 250),
####          (create_slider_overlay, "$g_presentation_obj_7", 1, 3000),# 1, 50 default change maximum bet amount in here for blackjack for the slider
####          (overlay_set_val, "$g_presentation_obj_7", reg51),
####          (position_set_x, pos7, 510),
####          (position_set_y, pos7, 360),
####          (create_text_overlay, "$g_presentation_obj_8", "@Bet: {reg51} Denars"),#
####          (position_set_x, pos8, 420),
####          (position_set_y, pos8, 403), #380 old font #400 def the slider i believe 380 is perfect if it is slider
####          (create_mesh_overlay, "$g_presentation_obj_9", "mesh_button_used"),#
####          (position_set_x, pos1, 350),
####          (position_set_y, pos1, 500),
####          (overlay_set_size, "$g_presentation_obj_9", pos1),
####          (position_set_x, pos9, 453),
####          (position_set_y, pos9, 284),
####		  #Default
####          (create_button_overlay, "$g_presentation_obj_10", "@Done ", tf_center_justify),#
####          (position_set_x, pos1, 1400),
####          (position_set_y, pos1, 1400), #1400 default
####          (overlay_set_size, "$g_presentation_obj_10", pos1),
####		  #End Default
####          (position_set_x, pos10, 500), #497 old font
####          (position_set_y, pos10, 287), #284 default TEXT VALUE #271 old font
####          (overlay_set_position, "$g_presentation_obj_6", pos6),
####          (overlay_set_val, "$g_presentation_obj_7", reg51),
####          (overlay_set_position, "$g_presentation_obj_7", pos7),
####          (overlay_set_position, "$g_presentation_obj_8", pos8),
####          (overlay_set_position, "$g_presentation_obj_9", pos9),
####          (overlay_set_position, "$g_presentation_obj_10", pos10),
####        (try_end),#
####
####        (try_begin),#
####          (eq, reg50, 4),#
####          (assign, reg50, 5),
####          (assign, reg58,":cur_time"),
####          (position_set_x, pos13, 320),#
####          (position_set_y, pos13, 265),
####          (position_set_x, pos14, 450),#
####          (position_set_y, pos14, 400),
####          (assign, reg63, 0),#
####        (try_end),
####        (try_begin),
####          (eq, reg50, 5),
####          (lt, reg63, 30),#
####          (store_sub, ":time_p",":cur_time",reg58),
####          (ge, ":time_p",20),
####          (assign, reg58,":cur_time"),
####          (position_get_x, ":x_13",pos13),
####          (val_add, ":x_13",3),
####          (position_set_x, pos13, ":x_13"),
####          (create_mesh_overlay, reg1, "mesh_poker_back"),#
####          (overlay_set_position, reg1, pos13),
####          (overlay_set_size, reg1, pos14),#
####          (val_add, reg63,1),
####        (else_try),
####          (eq, reg63, 30),
####          (assign, reg63, 0),
####          (assign, reg50, 1),#.
####          (assign, reg58,":cur_time"),
####        (try_end),
####
####        (eq, reg50, 1),#
####        (store_sub, ":time_p",":cur_time",reg58),
####        (ge, ":time_p",700),#
####
####        (try_begin),
####          (eq, reg21, 0),#
####          (assign,":reang_low","mesh_poker_heart_a"),
####          (assign,":reang_high","mesh_poker_red_joker"),
####           #
####          (store_random_in_range,":rp",":reang_low",":reang_high"),
####          (assign,reg21,":rp"),#
####          (store_sub,":banker_points",":rp",":reang_low"),
####          (val_add,":banker_points",1),
####          (try_begin),
####            (le,":banker_points",13),
####          (else_try),
####            (val_mod,":banker_points",13),
####            (try_begin),
####              (eq,":banker_points",0),
####              (assign,":banker_points",13),
####            (try_end),
####          (try_end),
####          (val_min,":banker_points",10),#
####          (val_add, reg52, ":banker_points"),#
####          (val_add, reg53, ":banker_points"),#
####          (try_begin),
####            #(this_or_next|eq,reg21,"mesh_poker_heart_a"),
####            #(this_or_next|eq,reg21,"mesh_poker_spade_a"),
####            #(this_or_next|eq,reg21,"mesh_poker_diamond_a"),
####            #(eq,reg21,"mesh_poker_club_a"),
####            (this_or_next|eq,reg21,407),
####            (this_or_next|eq,reg21,420),
####            (this_or_next|eq,reg21,433),
####            (eq,reg21,446),
####            (val_add, reg53, 10),#
####          (try_end),
####          (create_mesh_overlay, "$g_presentation_credits_obj_1", "mesh_poker_back"),#
####          (overlay_set_position, "$g_presentation_credits_obj_1", pos13),#
####          (overlay_set_size, "$g_presentation_credits_obj_1", pos14),#
####          (position_set_x, pos11, 350),#
####          (position_set_y, pos11, 500),
####          (copy_position,pos60,pos11),#
####          (overlay_animate_to_position, "$g_presentation_credits_obj_1",300, pos11),#
####          #
####          (try_for_range, ":unused", 0, 200),
####            (eq,reg22,0),#
####            (store_random_in_range,":rp",":reang_low",":reang_high"),
####            (neq,":rp",reg21),#
####            (assign,reg22,":rp"),#
####          (try_end),
####          (store_sub,":banker_points",":rp",":reang_low"),
####          (val_add,":banker_points",1),
####          (try_begin),
####            (le,":banker_points",13),
####          (else_try),
####            (val_mod,":banker_points",13),
####            (try_begin),
####              (eq,":banker_points",0),
####              (assign,":banker_points",13),
####            (try_end),
####          (try_end),
####          (val_min,":banker_points",10),#
####          (val_add, reg52, ":banker_points"),#
####          (val_add, reg53, ":banker_points"),#
####          (try_begin),
####            (eq, reg53, reg52),#
####            #(this_or_next|eq,reg22,"mesh_poker_heart_a"),
####            #(this_or_next|eq,reg22,"mesh_poker_spade_a"),
####            #(this_or_next|eq,reg22,"mesh_poker_diamond_a"),
####            #(eq,reg22,"mesh_poker_club_a"),
####            (this_or_next|eq,reg22,407),
####            (this_or_next|eq,reg22,420),
####            (this_or_next|eq,reg22,433),
####            (eq,reg22,446),
####            (val_add, reg53, 10),#
####          (try_end),
####          (create_mesh_overlay, "$g_presentation_credits_obj_2", reg22),#
####          (overlay_set_position, "$g_presentation_credits_obj_2", pos13),#
####          (overlay_set_size, "$g_presentation_credits_obj_2", pos14),#
####          (position_get_x,":x_p",pos11),
####          (val_add,":x_p",150),#
####          (position_set_x, pos11, ":x_p"),
####          #(position_move_x, pos11, 150),#
####          (overlay_animate_to_position, "$g_presentation_credits_obj_2",300, pos11),#
####
####           #
####          (try_for_range, ":unused", 0, 200),
####            (eq,reg23,0),#
####            (store_random_in_range,":rp",":reang_low",":reang_high"),
####            (neq,":rp",reg21),#
####            (neq,":rp",reg22),#
####            (assign,reg23,":rp"),#
####          (try_end),
####          (store_sub,":player_points",":rp",":reang_low"),
####          (val_add,":player_points",1),
####          (try_begin),
####            (le,":player_points",13),
####          (else_try),
####            (val_mod,":player_points",13),
####            (try_begin),
####              (eq,":player_points",0),
####              (assign,":player_points",13),
####            (try_end),
####          (try_end),
####          (val_min,":player_points",10),#
####          (val_add, reg54, ":player_points"),#
####          (val_add, reg55, ":player_points"),#
####          (try_begin),
####            #(this_or_next|eq,reg23,"mesh_poker_heart_a"),
####            #(this_or_next|eq,reg23,"mesh_poker_spade_a"),
####            #(this_or_next|eq,reg23,"mesh_poker_diamond_a"),
####            #(eq,reg23,"mesh_poker_club_a"),
####            (this_or_next|eq,reg23,407),
####            (this_or_next|eq,reg23,420),
####            (this_or_next|eq,reg23,433),
####            (eq,reg23,446),
####            (val_add, reg55, 10),#
####          (try_end),
####          (create_mesh_overlay, "$g_presentation_credits_obj_3", reg23),#
####          (overlay_set_position, "$g_presentation_credits_obj_3", pos13),#
####          (overlay_set_size, "$g_presentation_credits_obj_3", pos14),#
####          (position_set_x, pos12, 200),#
####          (position_set_y, pos12, 30),
####          (overlay_animate_to_position, "$g_presentation_credits_obj_3",300, pos12),#
####          #
####          (try_for_range, ":unused", 0, 200),
####            (eq,reg24,0),#
####            (store_random_in_range,":rp",":reang_low",":reang_high"),
####            (neq,":rp",reg21),#
####            (neq,":rp",reg22),#
####            (neq,":rp",reg23),#
####            (assign,reg24,":rp"),#
####          (try_end),
####          (store_sub,":player_points",":rp",":reang_low"),
####          (val_add,":player_points",1),
####          (try_begin),
####            (le,":player_points",13),
####          (else_try),
####            (val_mod,":player_points",13),
####            (try_begin),
####              (eq,":player_points",0),
####              (assign,":player_points",13),
####            (try_end),
####          (try_end),
####          (val_min,":player_points",10),#
####          (val_add, reg54, ":player_points"),#
####          (val_add, reg55, ":player_points"),#
####          (try_begin),
####            (eq, reg55, reg54),#
####            #(this_or_next|eq,reg24,"mesh_poker_heart_a"),
####            #(this_or_next|eq,reg24,"mesh_poker_spade_a"),
####            #(this_or_next|eq,reg24,"mesh_poker_diamond_a"),
####            #(eq,reg24,"mesh_poker_club_a"),
####            (this_or_next|eq,reg24,407),
####            (this_or_next|eq,reg24,420),
####            (this_or_next|eq,reg24,433),
####            (eq,reg24,446),
####            (val_add, reg55, 10),#
####          (try_end),
####          (create_mesh_overlay, "$g_presentation_credits_obj_4", reg24),#
####          (overlay_set_position, "$g_presentation_credits_obj_4", pos13),#
####          (overlay_set_size, "$g_presentation_credits_obj_4", pos14),#
####          (position_get_x,":x_p",pos12),
####          (val_add,":x_p",60),
####          (position_set_x, pos12, ":x_p"),
####          #(position_move_x, pos12, 100),#
####          (overlay_animate_to_position, "$g_presentation_credits_obj_4",300, pos12),#
####
####          (assign, reg58, ":cur_time"),
####        (try_end),
####
####        (gt,reg24,0),#
####        (store_sub, ":time1",":cur_time",reg58),
####        (ge, ":time1",1200),#
####
####        (try_begin),
####          (eq,reg25,0),#
####          (eq,reg56,0),#
####          (try_begin),
####            (eq,reg53,21),#
####            (eq,reg55,21),#
####            (display_message, "@Draw, the bets be returned to you."),
####            #(call_script, "script_troop_add_gold", "trp_player", reg51),
####            #(play_sound, "snd_game_draw"),
####            (assign,reg56,3),
####          (else_try),
####            (eq,reg53,21),#
####            (val_div, reg51, 2),
####            #(troop_remove_gold, "trp_player", reg51),
####            (play_sound, "snd_money_paid"),
####            (display_message, "@The banker has a Blackjack! You lose 50% more of your bets!"),
####            #(play_sound, "snd_game_lose"),
####            (assign,reg56,1),
####          (else_try),
####            (eq,reg55,21),#
####            (val_mul, reg51, 5),
####            (val_div, reg51, 2),
####            #(call_script, "script_troop_add_gold", "trp_player", reg51),
####            (display_message, "@You have a Blackjack! You win 50% more of your bets!"),
####            #(play_sound, "snd_game_win"),
####            (assign,reg56,2),
####          (try_end),
####
####          (neq,reg56,0),#
####          (try_begin),
####            (eq,reg61,0),#
####            (assign,reg61,1),
####            (create_mesh_overlay, reg1, reg21),#
####            (overlay_set_position, reg1, pos60),
####            (overlay_set_size, reg1, pos14),
####          (try_end),
####          (store_troop_gold,reg1,"trp_player"),
####          (str_store_string, s1, "@Bet: 0  Denars "),
####          (overlay_set_text, "$g_presentation_obj_4", s1),
####          (str_store_string, s1, "@Money: {reg1} Denars "),
####          (overlay_set_text, "$g_presentation_obj_5", s1),
####          (assign,reg58,":cur_time"),#
####        (try_end),
####
####        (try_begin),
####          (gt,reg24,0),#
####          (eq,reg56,0),#
####
####          (ge, reg57, 1),#
####
####          (try_begin),
####            (gt,reg52,21),#
####            (val_mul,reg51,2),
####            (display_message, "@The banker's hand value is over 21. You win!"),
####            #(call_script, "script_troop_add_gold", "trp_player", reg51),
####            #(play_sound, "snd_game_win"),
####            (assign,reg56,2),
####          (else_try),
####            (gt,reg54,21),#
####            (display_message, "@Your hand value is over 21. You lose!"),
####            #(play_sound, "snd_game_lose"),
####            (assign,reg56,1),
####          (else_try),
####            (eq,reg60,1),#
####            (eq,reg61,1),#
####            (try_begin),
####              (assign,":win",0),#
####              (try_begin),
####                (le,reg53,21),#
####                (gt,reg53,reg55),#
####                (assign,":win",1),
####              (else_try),
####                (gt,reg52,reg55),#
####                (assign,":win",1),
####              (try_end),
####              (eq,":win",1),#
####              (assign,reg56,1),#
####              (display_message, "@The banker has a higher hand value. You lose! "),
####              #(play_sound, "snd_game_lose"),
####              (overlay_set_text, "$g_presentation_obj_4", "@Bet: 0  Denars "),
####            (else_try),
####              (assign,":win",0),#
####              (try_begin),
####			    #(le,reg55,21),#Default
####                #(gt,reg55,reg53),#Default
####                (le,reg53,21),
####                (gt,reg54,reg53),
####                (assign,":win",1),
####              (else_try),
####                (gt,reg54,reg53),#
####                (assign,":win",1),
####              (try_end),
####              (eq,":win",1),#
####              (assign,reg56,2),#
####              (display_message, "@You have a higher hand value. You win! "),
####              (val_mul, reg51, 2),
####              #(call_script, "script_troop_add_gold", "trp_player", reg51),
####              #(play_sound, "snd_game_win"),
####            (else_try),
####              (display_message, "@Draw, the bets be returned to you."),
####              #(call_script, "script_troop_add_gold", "trp_player", reg51),
####              #(play_sound, "snd_game_draw"),
####              (assign,reg56,3),#
####            (try_end),
####          (try_end),
####          (neq,reg56,0),#
####          (try_begin),
####            (eq,reg61,0),#
####            (assign,reg61,1),
####            (create_mesh_overlay, reg1, reg21),
####            (overlay_set_position, reg1, pos60),
####            (overlay_set_size, reg1, pos14),
####          (try_end),
####          (store_troop_gold,reg1,"trp_player"),
####          (str_store_string, s1, "@Bet: 0  Denars "),
####          (overlay_set_text, "$g_presentation_obj_4", s1),
####          (str_store_string, s1, "@Money: {reg1} Denars "),
####          (overlay_set_text, "$g_presentation_obj_5", s1),
####          (assign,reg58,":cur_time"),#
####        (try_end),
####
####        (try_begin),
####          (neq,reg56,0),#
####          (store_sub,":time",":cur_time",reg58),
####          (ge,":time",800),#
####          (assign,reg50,2),#
####
####          (try_begin),
####            (eq,reg56,1),#
####            (str_store_string, s1, "@You lost. ^Play again?"),
####          (else_try),
####            (eq,reg56,2),#
####            (str_store_string, s1, "@You won! ^Play again?"),
####          (else_try),
####            (eq,reg56,3),#
####            (str_store_string, s1, "@Draw. ^Play again?"),
####          (try_end),
####          (create_text_overlay, reg1, "@{s1}", tf_center_justify),
####          (position_set_x, pos1, 480),
####          (position_set_y, pos1, 480),
####          (overlay_set_position, reg1, pos1),#
####          (position_set_x, pos1, 2000),
####          (position_set_y, pos1, 2000),
####          (overlay_set_size, reg1, pos1),#
####          (overlay_set_color, reg1, 0xffffff),
####
####          (create_button_overlay, "$g_presentation_obj_11", "@Yes ", tf_center_justify),
####          (position_set_x, pos1, 450),
####          (position_set_y, pos1, 370),
####          (overlay_set_position, "$g_presentation_obj_11", pos1),
####          (position_set_x, pos1, 1500),
####          (position_set_y, pos1, 1500),
####          (overlay_set_size, "$g_presentation_obj_11", pos1),
####          (overlay_set_color, "$g_presentation_obj_11", 0xffffff),
####          (create_button_overlay, "$g_presentation_obj_12", "@No ", tf_center_justify),
####          (position_set_x, pos1, 500),
####          (position_set_y, pos1, 370),
####          (overlay_set_position, "$g_presentation_obj_12", pos1),
####          (position_set_x, pos1, 1500),
####          (position_set_y, pos1, 1500),
####          (overlay_set_size, "$g_presentation_obj_12", pos1),
####          (overlay_set_color, "$g_presentation_obj_12", 0xffffff),
####        (try_end),
####
####        (try_begin),
####          (eq, reg56, 0),#
####          (eq, reg57, 0),
####          (assign, reg57, 1),#
####        (try_end),
####
####         #AI
####        (try_begin),#
####          (eq, reg56, 0),#
####          (eq,reg60,0),#
####          (this_or_next|eq, reg61, 1),#
####          (eq, reg57, 2),#
####          (neq, reg57, 3),
####          (assign, reg57, 3),
####          (assign,reg58,":cur_time"),
####        (try_end),
####        (try_begin),
####          (eq, reg56, 0),
####          (eq,reg60,0),
####          (eq, reg57, 3),
####          (store_sub,":time",":cur_time",reg58),
####          (ge,":time",700),#
####          (try_begin),#
####            (gt, reg52, 16),#
####            (le, reg52, 21),#
####            (assign,reg60,1),#
####            (display_message, "@Banker stay."),
####            (create_text_overlay, reg1, "@Stay"),#
####            (position_set_x, pos1, 255),
####            (position_set_y, pos1, 650),
####            (overlay_set_position, reg1, pos1),
####            (position_set_x, pos1, 1600),
####            (position_set_y, pos1, 1600),
####            (overlay_set_size, reg1, pos1),
####            (overlay_set_color, reg1, 0x11dd11),
####          (else_try),
####            (le, reg52, 16),#
####            (assign, ":banker_hit", 0),
####            (try_begin),
####              (le, reg53, 16),#
####              (assign, ":banker_hit", 1),#
####            (else_try),
####              (gt, reg53, 16),#
####              (store_sub,":oo", reg53, 16),
####              (val_mul,":oo", 30),
####              (store_random_in_range,":rp",0,100),
####              (try_begin),
####                (gt,":rp",":oo"),#
####                (assign, ":banker_hit", 1),#
####              (else_try),
####                (assign,reg60,1),#
####                (display_message, "@Banker stay."),
####                (create_text_overlay, reg1, "@Stay"),#
####                (position_set_x, pos1, 255),
####                (position_set_y, pos1, 650),
####                (overlay_set_position, reg1, pos1),
####                (position_set_x, pos1, 1400),
####                (position_set_y, pos1, 1400),
####                (overlay_set_size, reg1, pos1),
####                (overlay_set_color, reg1, 0x11dd11),
####              (try_end),
####            (try_end),
####            (eq, ":banker_hit", 1),#
####            #
####            (assign,":reang_low","mesh_poker_heart_a"),
####            (assign,":reang_high","mesh_poker_red_joker"),
####            (assign,":cur_card",0),#
####            (try_for_range, ":unused", 0, 300),
####              (eq,":cur_card",0),#
####              (store_random_in_range,":rp",":reang_low",":reang_high"),
####              (neq,":rp",reg21),#
####              (neq,":rp",reg22),
####              (neq,":rp",reg23),
####              (neq,":rp",reg24),
####              (neq,":rp",reg25),
####              (neq,":rp",reg26),
####              (neq,":rp",reg27),
####              (neq,":rp",reg28),
####              (neq,":rp",reg29),
####              (neq,":rp",reg30),
####              (neq,":rp",reg31),
####              (neq,":rp",reg32),
####              (neq,":rp",reg33),
####              (neq,":rp",reg34),
####              (neq,":rp",reg35),
####              (neq,":rp",reg36),
####              (neq,":rp",reg37),
####              (neq,":rp",reg38),
####              (neq,":rp",reg39),
####              (assign,":cur_card",":rp"),#
####            (try_end),
####            (try_begin),#
####              (eq,reg25,0),
####              (assign,reg25,":cur_card"),
####            (else_try),
####              (eq,reg26,0),
####              (assign,reg26,":cur_card"),
####            (else_try),
####              (eq,reg27,0),
####              (assign,reg27,":cur_card"),
####            (else_try),
####              (eq,reg28,0),
####              (assign,reg28,":cur_card"),
####            (else_try),
####              (eq,reg29,0),
####              (assign,reg29,":cur_card"),
####            (else_try),
####              (eq,reg30,0),
####              (assign,reg30,":cur_card"),
####            (else_try),
####              (eq,reg31,0),
####              (assign,reg31,":cur_card"),
####            (else_try),
####              (eq,reg32,0),
####              (assign,reg32,":cur_card"),
####            (else_try),
####              (eq,reg33,0),
####              (assign,reg33,":cur_card"),
####            (else_try),
####              (eq,reg34,0),
####              (assign,reg34,":cur_card"),
####            (else_try),
####              (eq,reg35,0),
####              (assign,reg35,":cur_card"),
####            (else_try),
####              (eq,reg36,0),
####              (assign,reg36,":cur_card"),
####            (else_try),
####              (eq,reg37,0),
####              (assign,reg37,":cur_card"),
####            (else_try),
####              (eq,reg38,0),
####              (assign,reg38,":cur_card"),
####            (else_try),
####              (eq,reg39,0),
####              (assign,reg39,":cur_card"),
####            (try_end),
####            (store_sub,":banker_points",":cur_card",":reang_low"),
####            (val_add,":banker_points",1),
####            (try_begin),
####              (le,":banker_points",13),
####            (else_try),
####              (val_mod,":banker_points",13),
####              (try_begin),
####                (eq,":banker_points",0),
####                (assign,":banker_points",13),
####              (try_end),
####            (try_end),
####            (val_min,":banker_points",10),#
####            (val_add, reg52, ":banker_points"),#
####            (val_add, reg53, ":banker_points"),#
####            (try_begin),
####              (eq, reg53, reg52),#
####              #(this_or_next|eq,":cur_card","mesh_poker_heart_a"),
####              #(this_or_next|eq,":cur_card","mesh_poker_spade_a"),
####              #(this_or_next|eq,":cur_card","mesh_poker_diamond_a"),
####              #(eq,":cur_card","mesh_poker_club_a"),
####              (this_or_next|eq,":cur_card",407),#
####              (this_or_next|eq,":cur_card",420),
####              (this_or_next|eq,":cur_card",433),
####              (eq,":cur_card",446),
####              (val_add, reg53, 10),#
####            (try_end),
####            (create_mesh_overlay, "$g_presentation_credits_obj_5", ":cur_card"),#
####            (overlay_set_position, "$g_presentation_credits_obj_5", pos13),#
####            (overlay_set_size, "$g_presentation_credits_obj_5", pos14),#
####            (position_get_x,":x_p",pos11),
####            (val_add,":x_p",60),
####            (position_set_x, pos11, ":x_p"),
####            #(position_move_x, pos11, 60),#
####            (overlay_animate_to_position, "$g_presentation_credits_obj_5",300, pos11),#
####          (try_end),
####          (assign, reg57, 1),#
####          (assign,reg58,":cur_time"),
####        (try_end),
####        ]),
####
####      (ti_on_presentation_event_state_change,#
####       [(store_trigger_param_1, ":object"),
####        (store_trigger_param_2, ":value"),
####
####        (try_begin),
####          (eq, ":object", "$g_presentation_obj_7"),#
####          (try_begin),
####            (neq, reg51, ":value"),
####            (assign, reg51, ":value"),
####          (try_end),
####          (overlay_set_val, "$g_presentation_obj_7", reg51),
####          (str_store_string, s1, "@Bet: {reg51} Denars "),
####          (overlay_set_text, "$g_presentation_obj_8", s1),
####        (else_try),
####          (eq, ":object", "$g_presentation_obj_10"),#
####          (store_troop_gold,reg1,"trp_player"),#
####          (try_begin),
####            (lt,reg1,reg51),#
####            (display_message, "@You don't have enough money."),
####          (else_try),
####            #(troop_remove_gold, "trp_player", reg51),#
####            (play_sound, "snd_money_paid"),
####            (position_set_x, pos1, 1400),
####            (position_set_y, pos1, 1400),#
####            (overlay_set_position, "$g_presentation_obj_6", pos1),#
####            (overlay_set_position, "$g_presentation_obj_7", pos1),
####            (overlay_set_position, "$g_presentation_obj_8", pos1),
####            (overlay_set_position, "$g_presentation_obj_9", pos1),
####            (overlay_set_position, "$g_presentation_obj_10", pos1),
####            (store_troop_gold,reg1,"trp_player"),#
####            (str_store_string, s1, "@Bet: {reg51} Denars "),#
####            (overlay_set_text, "$g_presentation_obj_4", s1),
####            (str_store_string, s1, "@Money: {reg1} Denars "),#
####            (overlay_set_text, "$g_presentation_obj_5", s1),
####            (assign, reg50, 4),#
####          (try_end),
####        (else_try),
####          (eq, ":object", "$g_presentation_obj_11"),#
####          (store_troop_gold,reg1,"trp_player"),#
####          (try_begin),
####            (lt,reg1,1),#
####            (display_message, "@You don't have enough money. "),
####          (else_try),
####            (presentation_set_duration, 0),
####            (assign, reg50,0),
####            (start_presentation, "prsnt_blackjack"),
####          (try_end),
####        (else_try),
####          (eq, ":object", "$g_presentation_obj_12"),#
####          (assign, "$black_jack",0),
####          (assign,reg1,0),#
####          (assign,reg21,0),#
####          (assign,reg22,0),
####          (assign,reg23,0),
####          (assign,reg24,0),
####          (assign,reg25,0),
####          (assign,reg26,0),
####          (assign,reg27,0),
####          (assign,reg28,0),
####          (assign,reg29,0),
####          (assign,reg30,0),
####          (assign,reg31,0),
####          (assign,reg32,0),
####          (assign,reg33,0),
####          (assign,reg34,0),
####          (assign,reg35,0),
####          (assign,reg36,0),
####          (assign,reg37,0),
####          (assign,reg38,0),
####          (assign,reg39,0),
####          (assign, reg51, 0),#
####          (assign, reg50, 0),#
####          (assign, reg52, 0),#
####          (assign, reg53, 0),#
####          (assign, reg54, 0),#
####          (assign, reg55, 0),#
####          (assign, reg56, 0),#
####          (assign, reg57, 0),#
####          (assign, reg58, 0),#
####          (assign, reg60, 0),#
####          (assign, reg61, 0),#
####          (assign, reg62, 0),
####          (assign, reg63, 0),#
####          (presentation_set_duration, 0),
####        (try_end),
####
####        (eq, reg56, 0),#
####        (eq, reg57, 1),#
####        (eq, reg61, 0),#
####
####        (try_begin),
####          (eq, ":object", "$g_presentation_obj_1"),#
####
####           #
####          (assign,":reang_low","mesh_poker_heart_a"),
####          (assign,":reang_high","mesh_poker_red_joker"),
####          (assign,":cur_card",0),#
####          (try_for_range, ":unused", 0, 300),
####            (eq,":cur_card",0),#
####            (store_random_in_range,":rp",":reang_low",":reang_high"),
####            (neq,":rp",reg21),#
####            (neq,":rp",reg22),
####            (neq,":rp",reg23),
####            (neq,":rp",reg24),
####            (neq,":rp",reg25),
####            (neq,":rp",reg26),
####            (neq,":rp",reg27),
####            (neq,":rp",reg28),
####            (neq,":rp",reg29),
####            (neq,":rp",reg30),
####            (neq,":rp",reg31),
####            (neq,":rp",reg32),
####            (neq,":rp",reg33),
####            (neq,":rp",reg34),
####            (neq,":rp",reg35),
####            (neq,":rp",reg36),
####            (neq,":rp",reg37),
####            (neq,":rp",reg38),
####            (neq,":rp",reg39),
####            (assign,":cur_card",":rp"),#
####          (try_end),
####
####          (try_begin),#
####            (eq,reg25,0),
####            (assign,reg25,":cur_card"),
####          (else_try),
####            (eq,reg26,0),
####            (assign,reg26,":cur_card"),
####          (else_try),
####            (eq,reg27,0),
####            (assign,reg27,":cur_card"),
####          (else_try),
####            (eq,reg28,0),
####            (assign,reg28,":cur_card"),
####          (else_try),
####            (eq,reg29,0),
####            (assign,reg29,":cur_card"),
####          (else_try),
####            (eq,reg30,0),
####            (assign,reg30,":cur_card"),
####          (else_try),
####            (eq,reg31,0),
####            (assign,reg31,":cur_card"),
####          (else_try),
####            (eq,reg32,0),
####            (assign,reg32,":cur_card"),
####          (else_try),
####            (eq,reg33,0),
####            (assign,reg33,":cur_card"),
####          (else_try),
####            (eq,reg34,0),
####            (assign,reg34,":cur_card"),
####          (else_try),
####            (eq,reg35,0),
####            (assign,reg35,":cur_card"),
####          (else_try),
####            (eq,reg36,0),
####            (assign,reg36,":cur_card"),
####          (else_try),
####            (eq,reg37,0),
####            (assign,reg37,":cur_card"),
####          (else_try),
####            (eq,reg38,0),
####            (assign,reg38,":cur_card"),
####          (else_try),
####            (eq,reg39,0),
####            (assign,reg39,":cur_card"),
####          (try_end),
####
####          (store_sub,":player_points",":cur_card",":reang_low"),
####          (val_add,":player_points",1),
####          (try_begin),
####            (le,":player_points",13),
####          (else_try),
####            (val_mod,":player_points",13),
####            (try_begin),
####              (eq,":player_points",0),
####              (assign,":player_points",13),
####            (try_end),
####          (try_end),
####          (val_min,":player_points",10),#
####          (val_add, reg54, ":player_points"),#
####          (val_add, reg55,":player_points"),#
####          (try_begin),
####            (eq, reg55, reg54),#
####            #(this_or_next|eq,":cur_card","mesh_poker_heart_a"),
####            #(this_or_next|eq,":cur_card","mesh_poker_spade_a"),
####            #(this_or_next|eq,":cur_card","mesh_poker_diamond_a"),
####            #(eq,":cur_card","mesh_poker_club_a"),
####            (this_or_next|eq,":cur_card",407),
####            (this_or_next|eq,":cur_card",420),
####            (this_or_next|eq,":cur_card",433),
####            (eq,":cur_card",446),
####            (val_add, reg55, 10),#
####          (try_end),
####          (create_mesh_overlay, "$g_presentation_credits_obj_5", ":cur_card"),#
####          (overlay_set_position, "$g_presentation_credits_obj_5", pos13),#
####          (overlay_set_size, "$g_presentation_credits_obj_5", pos14),#
####          (position_get_x,":x_p",pos12),
####          (val_add,":x_p",60),
####          (position_set_x, pos12, ":x_p"),
####          (overlay_animate_to_position, "$g_presentation_credits_obj_5",300, pos12),#
####
####          (try_begin),
####            (eq, reg62, 1),#
####            (assign, reg61, 1),#
####            (create_mesh_overlay, reg1, reg21),#
####            (overlay_set_position, reg1, pos60),
####            (overlay_set_size, reg1, pos14),
####          (try_end),
####
####          (assign, reg57, 2),#
####        (else_try),
####          (eq, ":object", "$g_presentation_obj_2"),#
####          (display_message, "@You stay."),
####          (create_text_overlay, reg1, "@Stay"),#
####          (position_set_x, pos1, 660),#
####          (position_set_y, pos1, 100),
####          (overlay_set_position, reg1, pos1),
####          (overlay_set_color, reg1, 0x11dd11),#
####          (create_mesh_overlay, reg1, reg21),#
####          (overlay_set_position, reg1, pos60),
####          (overlay_set_size, reg1, pos14),
####          (assign, reg61, 1),
####          (assign, reg57, 2),#
####        (else_try),
####          (eq, ":object", "$g_presentation_obj_3"),#
####          (try_begin),
####            (store_troop_gold,reg1,"trp_player"),#
####            (lt,reg1,reg51),
####            (display_message, "@You don't have enough money."),
####          (else_try),
####            (eq, reg25, 0),
####            (assign, reg62, 1),
####            (display_message, "@Double bets! You can only get one card again."),
####            #(troop_remove_gold, "trp_player", reg51),
####            (play_sound, "snd_money_paid"),
####            (val_mul, reg51, 2),
####            (store_troop_gold,reg1,"trp_player"),
####            (str_store_string, s1, "@Bet: {reg51} Denars "),
####            (overlay_set_text, "$g_presentation_obj_4", s1),
####            (str_store_string, s1, "@Money: {reg1} Denars "),
####            (overlay_set_text, "$g_presentation_obj_5", s1),
####          (else_try),
####            (display_message, "@Not right now."),
####          (try_end),
####        (try_end),
####        ]),
####     ]),
####
####
#####Source: https://forums.taleworlds.com/index.php/topic,52408.0.html
#######END POKER
#######End Blackjack
####
####	### Three Cards ### Find the Lady ###
##### prsnt_three_card
####  ("three_card", 0, 0,#find the lady
####   [
####     (ti_on_presentation_load,
####      [
####        (set_fixed_point_multiplier, 1000),
####        (presentation_set_duration, 999999),
####		
#####Little Pos Helper by Kuba begin
####		(create_text_overlay, "$g_little_pos_helper", "@00,00"),
####		(overlay_set_color, "$g_little_pos_helper", 0xFFFFFFFF),
####		(position_set_x, pos1, 10),
####		(position_set_y, pos1, 700),
####		(overlay_set_position, "$g_little_pos_helper", pos1),
#####Little Pos Helper by Kuba end 
####	  		
####		(assign,"$g_presentation_obj_card1",-1),
####		(assign,"$g_presentation_obj_card2",-1),
####        (assign,"$g_presentation_obj_card3",-1),
####        (assign,"$g_presentation_obj_1",-1), # mesh king of spades
####        (assign,"$g_presentation_obj_2",-1), # mesh queen of heart      
####        (assign,"$g_presentation_obj_3",-1), # mesh king of clubs       
####        (assign,"$g_presentation_obj_4",-1), # text "@Bet: {reg51}Denar"
####        (assign,"$g_presentation_obj_5",-1), # text "@Money: {reg1}Denar"
####        (assign,"$g_presentation_obj_6",-1), # "mesh_text_bar"
####        (assign,"$g_presentation_obj_7",-1), # slider
####        (assign,"$g_presentation_obj_8",-1), # text "@Bet: {reg51}Denar" above slider
####        (assign,"$g_presentation_obj_9",-1), # win or lose window	
####        (assign,"$g_presentation_obj_10",-1), #done button 
####        (assign,"$g_presentation_obj_11",-1), #find the lady
####        (assign,"$g_presentation_obj_12",-1),#yes
####        (assign,"$g_presentation_obj_13",-1),#no
####        (assign,"$g_presentation_obj_14",-1),#start game button	
####        (assign,"$g_presentation_obj_15",-1),
####        (assign,"$g_presentation_obj_16",-1),
####        (assign,"$g_presentation_obj_17",-1),		
####		(assign, reg1,0),
####		(assign, reg2,0),
####		(assign, reg3,0),
####        (assign, reg50, 0),		
####        (assign, reg51, 1),
####        (assign, reg52, 0),		
####        (assign, reg55, 1),
####        (assign, reg58, 0),		
####		(str_clear,s1),
####        (create_mesh_overlay, reg1, "mesh_3card_table"),#mesh_wood_table
####        (position_set_x, pos1, 0),
####        (position_set_y, pos1, 0),
####        (overlay_set_position, reg1, pos1),
####	
####        (str_store_troop_name, s1, "$g_talk_troop"),# NPC
####        (create_text_overlay, reg1, "@{s1}", tf_center_justify),
####        (position_set_x, pos1, 120),#820
####        (position_set_y, pos1, 470),#470
####        (overlay_set_position, reg1, pos1),#
####        (overlay_set_color, reg1, 0xffffff),
####        (str_store_troop_name, s1, "trp_player"),#
####        (create_text_overlay, reg1, "@{s1}", tf_center_justify),
####        (position_set_x, pos1, 815),#120
####        (position_set_y, pos1, 8),#8
####        (overlay_set_position, reg1, pos1),#
####        (overlay_set_color, reg1, 0xffffff),
####         # "mesh_jack_black_portrait"
####        (create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_troop_note_mesh", "$g_talk_troop"),#-1
####        (position_set_x, pos1, 750),
####        (position_set_y, pos1, 750),
####        (overlay_set_size, reg1, pos1),
####        (position_set_x, pos1, 7),#700
####        (position_set_y, pos1, 500),#500
####        (overlay_set_position, reg1, pos1),
####         #"mesh_trp_player_portrait"
####        (create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_troop_note_mesh", "trp_player"),
####        (position_set_x, pos1, 750),
####        (position_set_y, pos1, 750),
####        (overlay_set_size, reg1, pos1),
####        (position_set_x, pos1, 740),#7
####        (position_set_y, pos1, 45),#20
####        (overlay_set_position, reg1, pos1),
####
##### info window right
####        (create_mesh_overlay, reg1, "mesh_3card_window"),#3card_textbar#text_bar
####        (position_set_x, pos1, 780),#700
####        (position_set_y, pos1, 310),#270
####        (overlay_set_position, reg1, pos1),
####        (position_set_x, pos1, 250),#
####        (position_set_y, pos1, 200),#
####        (overlay_set_size, reg1, pos1),		
####
####        (str_store_string, s1, "@Bet: {reg51} Denars"),#
####        (create_text_overlay, "$g_presentation_obj_4", s1),#
####        (position_set_x, pos1, 790),#755
####        (position_set_y, pos1, 355),#355 Default size of Bet on the right side
####        (overlay_set_position, "$g_presentation_obj_4", pos1),
####        (overlay_set_color, "$g_presentation_obj_4",),#0xfffccc
####        (store_troop_gold,reg1,"trp_player"),#
####        (create_text_overlay, "$g_presentation_obj_5", "@Money: {reg1} Denars"),
####        (position_set_x, pos1, 790),# 798 for old font #755 #Default 790, moved a bit to the left to compensate
####        (position_set_y, pos1, 325),#315 for old font default size of amount of money on the right side
####        (overlay_set_position, "$g_presentation_obj_5", pos1),
####        (overlay_set_color, "$g_presentation_obj_5"),#0xfffccc
####        ]),
####		
####      (ti_on_presentation_run,#
####       [
#####Little Pos Helper by Kuba begin
####		(mouse_get_position, pos1),
####		(position_get_x, reg1, pos1),
####		(position_get_y, reg2, pos1),
####		(overlay_set_text, "$g_little_pos_helper", "@{reg1},{reg2}"),
#####Little Pos Helper by Kuba end  
####	    (store_trigger_param_1, ":cur_time"),
####        (set_fixed_point_multiplier, 1000),
####        (ge, ":cur_time",500),
####        (try_begin),
####		  (eq, reg50, 0),
####          (assign, reg50, 1),#3 
####          (create_mesh_overlay, "$g_presentation_obj_6", "mesh_3card_window"), #"mesh_text_bar"
####          (position_set_x, pos6, 335),#685 #345
####          (position_set_y, pos6, 265),#482 #217
####          (position_set_x, pos1, 500),#
####          (position_set_y, pos1, 500),#
####          (overlay_set_size, "$g_presentation_obj_6", pos1),		  
####		  (store_troop_gold,":plr_gold","trp_player"),#
####		    (try_begin),
####			    (ge,":plr_gold",500), #Change maximum bet amount here for find the lady as well as the next value for the slider
####                (assign,":bet50",500), #Change this value as well to be the same
#### 			(else_try),
####			    (assign,":bet50",":plr_gold"),          
####		    (try_end),
####          (create_slider_overlay, "$g_presentation_obj_7", 1, ":bet50"),#
####          (overlay_set_val, "$g_presentation_obj_7", reg51),
####          (position_set_x, pos7, 510),
####          (position_set_y, pos7, 360),
####          (create_text_overlay, "$g_presentation_obj_8", "@Bet: {reg51} Denars"),#
####          (position_set_x, pos8, 450),#420
####          (position_set_y, pos8, 400),
####          (create_game_button_overlay, "$g_presentation_obj_10", "@Done", tf_center_justify),#
####          (position_set_x, pos10, 500),
####          (position_set_y, pos10, 284),
####          (overlay_set_position, "$g_presentation_obj_6", pos6),
####          (overlay_set_val, "$g_presentation_obj_7", reg51),
####          (overlay_set_position, "$g_presentation_obj_7", pos7),
####          (overlay_set_position, "$g_presentation_obj_8", pos8),
####          (overlay_set_position, "$g_presentation_obj_10", pos10),
####        (try_end),#
####		
####        (try_begin),
####		    (eq, reg50, 2),
####            (assign, reg50, 3),#5
####            (position_set_x, pos14, 375),#
####            (position_set_y, pos14, 550),					
####	# King of Spades			
####            (create_mesh_overlay, "$g_presentation_obj_1", "mesh_3card_kos"),#
####            (position_set_x, pos1, 275),
####            (position_set_y, pos1, 300),
####			(overlay_set_position, "$g_presentation_obj_1", pos1),
####			(overlay_set_size, "$g_presentation_obj_1", pos14),#
####	# Queen of Heart
####            (create_mesh_overlay, "$g_presentation_obj_2", "mesh_3card_qoh"),#
####            (position_set_x, pos1, 425),
####            (position_set_y, pos1, 300),
####			(overlay_set_position, "$g_presentation_obj_2", pos1),
####			(overlay_set_size, "$g_presentation_obj_2", pos14),#
####	# King of Clubs
####            (create_mesh_overlay, "$g_presentation_obj_3", "mesh_3card_koc"),#
####            (position_set_x, pos1, 575),
####            (position_set_y, pos1, 300),
####			(overlay_set_position, "$g_presentation_obj_3", pos1),
####			(overlay_set_size, "$g_presentation_obj_3", pos14),#
####	#start game button
####            (create_game_button_overlay, "$g_presentation_obj_14", "@Start Game", tf_center_justify),#
####            (position_set_x, pos1, 475),
####            (position_set_y, pos1, 600),
####            (overlay_set_position, "$g_presentation_obj_14", pos1),
####	    (try_end),
####
####         (try_begin),
####		     (eq, reg50, 4),
####			 (assign,reg50, 5),
####             (overlay_set_display, "$g_presentation_obj_14", 0),#start game button				 
####             (assign,reg58,":cur_time"),			 
####             (overlay_set_display, "$g_presentation_obj_1", 0),
####             (overlay_set_display, "$g_presentation_obj_2", 0),
####             (overlay_set_display, "$g_presentation_obj_3", 0),				
####			
####            (try_begin),
####                (create_mesh_overlay, "$g_presentation_obj_16", "mesh_3card_back", "mesh_3card_back"),#
####                (position_set_x, pos15, 275),
####                (position_set_y, pos15, 300),
####		    	(overlay_set_position, "$g_presentation_obj_16", pos15),
####		     	(overlay_set_size, "$g_presentation_obj_16", pos14),
####			
####                (create_mesh_overlay, "$g_presentation_obj_17", "mesh_3card_back", "mesh_3card_back"),#
####                (position_set_x, pos16, 425),
####                (position_set_y, pos16, 300),
####			    (overlay_set_position, "$g_presentation_obj_17", pos16),
####			    (overlay_set_size, "$g_presentation_obj_17", pos14),#
####
####                (create_mesh_overlay, "$g_presentation_obj_15", "mesh_3card_back", "mesh_3card_back"),#
####                (position_set_x, pos17, 575),
####                (position_set_y, pos17, 300),
####			    (overlay_set_position, "$g_presentation_obj_15", pos17),
####			    (overlay_set_size, "$g_presentation_obj_15", pos14),#
####
####			    (overlay_animate_to_position, "$g_presentation_obj_15",500, pos15),
####			    (overlay_animate_to_position, "$g_presentation_obj_16",500, pos16), 
####                (overlay_animate_to_position, "$g_presentation_obj_17",500, pos17),
####
####			(try_end),
####			(assign,reg50, 6),	 
####    	 (try_end),		
####
####         (store_add, reg52, 550, reg58),		
####         (ge, ":cur_time",reg52),
####		 
####        (try_begin),
####		    (eq, reg50, 6),
####            (assign, reg50, 7),
####            (overlay_set_display, "$g_presentation_obj_15", 0),
####			(overlay_set_display, "$g_presentation_obj_16", 0),
####            (overlay_set_display, "$g_presentation_obj_17", 0),				
####            (position_set_x, pos14, 375),#
####            (position_set_y, pos14, 550),	
####
####                (create_image_button_overlay, "$g_presentation_obj_card1", "mesh_3card_back", "mesh_3card_back"),
####                (position_set_x, pos1, 275),
####                (position_set_y, pos1, 300),
####		    	(overlay_set_position, "$g_presentation_obj_card1", pos1),
####		     	(overlay_set_size, "$g_presentation_obj_card1", pos14),
####			
####                (create_image_button_overlay, "$g_presentation_obj_card2", "mesh_3card_back", "mesh_3card_back"),
####                (position_set_x, pos1, 425),
####                (position_set_y, pos1, 300),
####			    (overlay_set_position, "$g_presentation_obj_card2", pos1),
####			    (overlay_set_size, "$g_presentation_obj_card2", pos14),#
####
####                (create_image_button_overlay, "$g_presentation_obj_card3", "mesh_3card_back", "mesh_3card_back"),
####                (position_set_x, pos1, 575),
####                (position_set_y, pos1, 300),
####			    (overlay_set_position, "$g_presentation_obj_card3", pos1),
####			    (overlay_set_size, "$g_presentation_obj_card3", pos14),#			
####
####			(assign, reg55, 2),
####            (create_mesh_overlay, "$g_presentation_obj_9", "mesh_3card_window"), #"mesh_text_bar"
####            (position_set_x, pos1, 375),#
####            (position_set_y, pos1, 595),# 595 default
####            (overlay_set_position, "$g_presentation_obj_9", pos1),			
####            (position_set_x, pos1, 300),#
####            (position_set_y, pos1, 125),#
####            (overlay_set_size, "$g_presentation_obj_9", pos1),				
####						
####            (str_store_string, s1, "@Find the Lady"),
####            (create_text_overlay, "$g_presentation_obj_11", "@{s1}", tf_center_justify),
####            (position_set_x, pos1, 475),
####            (position_set_y, pos1, 610), #600 default find the lady text on the top.
####            (overlay_set_position, "$g_presentation_obj_11", pos1),#Find the Lady
####            (position_set_x, pos1, 2000),
####            (position_set_y, pos1, 2000),
####            (overlay_set_size, "$g_presentation_obj_11", pos1),
#####            (overlay_set_color, "$g_presentation_obj_11", 0xffffff),#
####        (try_end),
####
####        (try_begin),
####		    (eq, reg50, 8),	
####            (assign, reg50, 9),
####            (overlay_set_display, "$g_presentation_obj_card1", 0),
####			(overlay_set_display, "$g_presentation_obj_card2", 0),
####            (overlay_set_display, "$g_presentation_obj_card3", 0),			
####		    (store_random_in_range,":lady",1,4),
####			(store_random_in_range,":players_kingdom_leader",1,3),
####			(store_random_in_range,":queen",1,3),
####			    (try_begin),
####                    (eq,":players_kingdom_leader",1), 
####                    (assign,":king1","mesh_3card_kos"),
####                    (assign,":king2","mesh_3card_koc"),
####		        (else_try),
####                    (assign,":king1","mesh_3card_koc"),
####                    (assign,":king2","mesh_3card_kos"),				
####				(try_end),
####
####			    (try_begin),
####                    (eq,":queen",1), 
####                    (assign,":queen1","mesh_3card_qoh"),
####                    (assign,":queen2",":king2"),
####		        (else_try),
####                    (assign,":queen1",":king2"),
####                    (assign,":queen2","mesh_3card_qoh"),				
####				(try_end),
####				
####                (try_begin),
####				    (eq,reg55, 3),#1card
####					    (try_begin),
####						    (eq,":lady",1), #win
####							(assign,reg55,7),#win
####							(assign,":card1","mesh_3card_qoh"),
####                            (assign,":card2",":king1"),
####                            (assign,":card3",":king2"),
####						(else_try),
####      					    (assign,reg55,8),#loose 
####							(assign,":card1",":king1"),
####                            (assign,":card2",":queen1"),
####                            (assign,":card3",":queen2"),
####						(try_end),
####				(else_try),
####				    (eq,reg55, 4),#2card  
####					    (try_begin),
####						    (eq,":lady",1), #win
####							(assign,reg55,7),#win
####							(assign,":card1",":king1"),
####                            (assign,":card2","mesh_3card_qoh"),
####                            (assign,":card3",":king2"),
####						(else_try),
####						    (assign,reg55,8),#loose 
####                            (assign,":card1", ":queen1"),#
####                            (assign,":card2", ":king1"),#
####                            (assign,":card3", ":queen2"),#
####						(try_end),	
####                (else_try),
####                    (eq,reg55, 5),#3card  
####					    (try_begin),
####						    (eq,":lady",1), #win
####							(assign,reg55,7),#win
####							(assign,":card1",":king1"),
####                            (assign,":card2",":king2"),
####                            (assign,":card3","mesh_3card_qoh"),							
####						(else_try),
####						    (assign,reg55,8),#loose
####                            (assign,":card1", ":queen1"),#
####                            (assign,":card2", ":queen2"),#
####                            (assign,":card3", ":king1"),#							
####						(try_end),						
####				(try_end),
####				
####                (try_begin),#open cards
####				    (position_set_x, pos14, 375),#
####                    (position_set_y, pos14, 550),		
####				
####                    (create_mesh_overlay, reg1, ":card1"),#
####                    (position_set_x, pos1, 275),
####                    (position_set_y, pos1, 300),
####                 	(overlay_set_position, reg1, pos1),
####					(overlay_set_size, reg1, pos14),# 
####
####                    (create_mesh_overlay, reg2, ":card2"),#
####                    (position_set_x, pos1, 425),
####                    (position_set_y, pos1, 300),
####		            (overlay_set_position, reg2, pos1),
####                    (overlay_set_size, reg2, pos14),#
####
####                    (create_mesh_overlay, reg3, ":card3"),#
####                    (position_set_x, pos1, 575),
####                    (position_set_y, pos1, 300),
####	                (overlay_set_position, reg3, pos1),
####	                (overlay_set_size, reg3, pos14),#						                       
####				(try_end),
####				
####                (str_clear,s1),				
####			    (try_begin),
####                    (eq,reg55,7),#
####                    (val_mul,reg51,2),					
####					#(call_script, "script_troop_add_gold", "trp_player", reg51),
####                    (str_store_string, s1, "@You win! Try again?"),					
####                (else_try),
####                    (str_store_string, s1, "@You lose. Try again?"),
####                (try_end),
####                (create_text_overlay, reg1, "@{s1}", tf_center_justify),
####                (position_set_x, pos1, 480),
####                (position_set_y, pos1, 650), #650 default size of You win, or you lose message.
####                (overlay_set_position, reg1, pos1),#
####                (position_set_x, pos1, 2000),
####                (position_set_y, pos1, 2000),
####                (overlay_set_size, reg1, pos1),#
#####                (overlay_set_color, reg1, 0xffffff),#0xffffff #white
####
####                (create_mesh_overlay, reg1, "mesh_3card_window"),#3card_textbar#text_bar
####                (position_set_x, pos1, 306),#700
####                (position_set_y, pos1, 580),#270
####                (overlay_set_position, reg1, pos1),
####                (position_set_x, pos1, 500),#
####                (position_set_y, pos1, 300),#
####                (overlay_set_size, reg1, pos1),		
####				
####                (create_game_button_overlay, "$g_presentation_obj_12", "@Yes ", tf_center_justify),				
####                (position_set_x, pos1, 400),#450
####                (position_set_y, pos1, 600),
####                (overlay_set_position, "$g_presentation_obj_12", pos1),
####
####                (create_game_button_overlay, "$g_presentation_obj_13", "@No ", tf_center_justify),
####                (position_set_x, pos1, 560),#500
####                (position_set_y, pos1, 600),
####                (overlay_set_position, "$g_presentation_obj_13", pos1),
####        (try_end),			
####        ]),
####
####      (ti_on_presentation_event_state_change,#
####       [(store_trigger_param_1, ":object"),
####        (store_trigger_param_2, ":value"),
####        (position_set_x, pos13, 1400),
####        (position_set_y, pos13, 1400),		
####        (try_begin),
####          (eq, ":object", "$g_presentation_obj_7"),#
####          (try_begin),
####            (neq, reg51, ":value"),
####            (assign, reg51, ":value"),
####          (try_end),
####          (overlay_set_val, "$g_presentation_obj_7", reg51),
####          (str_store_string, s1, "@Bet: {reg51} Denars"),
####          (overlay_set_text, "$g_presentation_obj_8", s1),
####        (else_try),
####          (eq, ":object", "$g_presentation_obj_10"),#
####          (store_troop_gold,reg1,"trp_player"),#
####          (try_begin),
####            (lt,reg1,reg51),#
####            (display_message, "@You don't have enough money."),
####          (else_try),
####            #(troop_remove_gold, "trp_player", reg51),#
####            (play_sound, "snd_money_paid"),
####
####            (overlay_set_display, "$g_presentation_obj_6", 0),
####			(overlay_set_display, "$g_presentation_obj_7", 0),
####            (overlay_set_display, "$g_presentation_obj_8", 0),
####            (overlay_set_display, "$g_presentation_obj_10", 0),
####
####            (store_troop_gold,reg1,"trp_player"),#
####            (str_store_string, s1, "@Bet: {reg51} Denars"),#
####            (overlay_set_text, "$g_presentation_obj_4", s1),
####            (str_store_string, s1, "@Money: {reg1} Denars"),#
####            (overlay_set_text, "$g_presentation_obj_5", s1),
####            (assign, reg50, 2),#4
####          (try_end),
####		(try_end),  
####        (try_begin),
####            (eq, ":object", "$g_presentation_obj_14"),#start game button	
####		    (assign, reg50, 4),#6
####		(try_end),
####
####        (try_begin),
####	    	(eq, reg50, 7), 
####		    (eq, reg55, 2),          
####		        (try_begin),         
####                    (eq, ":object", "$g_presentation_obj_card1"),
####					(assign, reg55, 3),
####				(else_try),	
####	                (eq, ":object", "$g_presentation_obj_card2"),
####                    (assign, reg55, 4), 
####				(else_try),	
####			        (eq, ":object", "$g_presentation_obj_card3"),
####					(assign, reg55, 5),
####				(try_end),
####            (overlay_set_display, "$g_presentation_obj_11", 0),	#Find the Lady	
####			(overlay_set_display, "$g_presentation_obj_9", 0),
####		    (assign, reg50, 8),
####		(try_end),
####
####        (try_begin),
####          (eq, ":object", "$g_presentation_obj_12"),#yes
####          (store_troop_gold,reg1,"trp_player"),#
####          (try_begin),
####            (lt,reg1,1),#
####            (display_message, "@You don't have enough money."),
####          (else_try),
####            (presentation_set_duration, 0),
####            (assign, reg50,0),
####            (start_presentation, "prsnt_three_card"),
####          (try_end),
####        (else_try),
####          (eq, ":object", "$g_presentation_obj_13"),#no
####          (assign,reg1,0),#
####          (assign, reg51, 1),
####          (assign, reg55, 0),#
####          (presentation_set_duration, 0),
####        (try_end),		
####        ]),
####     ]),  
####### Three Cards ### Find the Lady ### END ### 
####	
####	### Dice game ### Dice game ###
####
##### prsnt_dices_game
####  ("dices_game", 0, 0,#dices game reg0
####   [
####    (ti_on_presentation_load,
####       [
####        (set_fixed_point_multiplier, 1000),
####        (presentation_set_duration, 999999),		
####        #(call_script, "script_pos_helper",1),
####        (call_script, "script_mmc_gamblers_header"),
####        ]),
####
####    (ti_on_presentation_run,#
####       [#(call_script, "script_pos_helper",2),
####	    (store_trigger_param_1, ":cur_time"),
####        (set_fixed_point_multiplier, 1000),
####		(ge, ":cur_time",500),
####		    (try_begin),
####		        (eq, reg50, 0),
####                (assign, reg50, 1),
####                (create_mesh_overlay, "$g_presentation_obj_6", "mesh_3card_window"), 
####                (position_set_x, pos6, 335),
####                (position_set_y, pos6, 265),
####                (position_set_x, pos1, 500),#
####                (position_set_y, pos1, 500),#
####                (overlay_set_size, "$g_presentation_obj_6", pos1),		  
####		        (store_troop_gold,":plr_gold","trp_player"),#
####		            (try_begin),
####			            (ge,":plr_gold",500), #Change value here for the dice game betting, maximum slider, change the next value as well to be the same
####                        (assign,":bet50",500),  # Change this value as well
#### 			        (else_try),
####			            (assign,":bet50",":plr_gold"),          
####		            (try_end),
####			
####			        (try_begin),
####		                (eq,"$g_gamble",1),
####     			        (assign,reg51,"$temp"),			     
####			        (else_try), 
####                        (create_slider_overlay, "$g_presentation_obj_7", 1, ":bet50"),#
####                        (overlay_set_val, "$g_presentation_obj_7", reg51),
####                        (position_set_x, pos7, 510),
####                        (position_set_y, pos7, 360),
####			        (try_end),	
####                (create_text_overlay, "$g_presentation_obj_8", "@Bet: {reg51} Denars"),#
####                (position_set_x, pos8, 450),
####                (position_set_y, pos8, 400),
####                (create_game_button_overlay, "$g_presentation_obj_10", "@Done", tf_center_justify),#
####                (position_set_x, pos10, 500),
####                (position_set_y, pos10, 284),
####                (overlay_set_position, "$g_presentation_obj_6", pos6),
####		            (try_begin), 
####			            (eq,"$g_gamble",0),
####                        (overlay_set_val, "$g_presentation_obj_7", reg51),
####                        (overlay_set_position, "$g_presentation_obj_7", pos7),
####		            (try_end),          
####                (overlay_set_position, "$g_presentation_obj_8", pos8),
####                (overlay_set_position, "$g_presentation_obj_10", pos10),
####            (try_end),
####	
####            (try_begin),
####		        (eq, reg50, 2),
####                (assign, reg50, 3),
####                (create_game_button_overlay, "$g_presentation_obj_14", "@Roll Dice", tf_center_justify),#
####                (position_set_x, pos1, 475),
####                (position_set_y, pos1, 515),
####                (overlay_set_position, "$g_presentation_obj_14", pos1),
####	        (try_end),
####
####		    (try_begin),        
####		        (eq, reg50, 4),
####                (assign, reg50, 5),
####                (call_script, "script_d6_roll",0),# d6_1
####                (assign, reg10, reg1),
####                (call_script, "script_d6_roll",0),# d6_2
####		        (assign, reg20, reg1),
####                # (call_script, "script_d6_roll",0),# d6_3
####		        # (assign, reg30, reg1),				
####		    	(store_add, reg3, reg10, reg20),
####				# (val_add,reg3,reg30),
####			        (try_begin),    
####                        (store_random_in_range,reg11,1,7),# dice1 start side
####                        (store_random_in_range,reg21,1,7),# dice2 start side
####						# (store_random_in_range,reg31,1,7),# dice3 start side
####                            (try_begin),
####                                (gt, reg11, reg10),
####                                (val_add, reg10, 6),
####			                (try_end),
####			        	    (try_begin),
####                                (gt,reg21,reg20),
####                                (val_add,reg20,6),
####					        (try_end),
####			        	    # (try_begin),# dice3
####                                # (gt,reg31,reg30),# dice3
####                                # (val_add,reg30,6),# dice3
####					        # (try_end),# dice3							
####				    (try_end),
####				(assign, reg5, 0),
####				(assign, reg6, 0),
####                (assign, reg58,":cur_time"),				
####		    (try_end),
####               
####		    (try_begin),			
####		        (eq, reg50, 5),
####                (eq, reg6, 0),        				
####		        (lt, reg5, 6),
####				(store_sub, ":time_pass",":cur_time",reg58),
####                (ge, ":time_pass",200),
####                (assign, reg58,":cur_time"),				
####                (val_add, reg5,1),				
####				    (try_begin),
####    	    	        (le, reg11, reg10),
####	                    (call_script, "script_draw_d6_side",1,reg5,reg11),
####						(val_add, reg11, 1),
####					(try_end),
####					(try_begin),
####				        (le,reg21,reg20),
####	                    (call_script, "script_draw_d6_side",2,reg5,reg21),
####						(val_add,reg21,1),
####					(try_end),
####					# (try_begin),# dice3
####				        # (le,reg31,reg30),# dice3
####	                    # (call_script, "script_draw_d6_side",3,reg5,reg31),# dice3
####						# (val_add,reg31,1),# dice3
####					# (try_end),
####			(else_try),
####                (eq, reg50, 5),			
####                (eq, reg5, 6),
####			    (assign, reg6, 1),
####                (assign, reg50, 6),   
####                (assign, reg58,":cur_time"),			
####		    (try_end),			
####		(ge, reg6, 1),
####		    (try_begin),
####                (eq, reg6, 1),				
####                (eq, reg50, 6),
####                (assign, reg50, 7),			
####                (eq, reg5, 6),				
####                (str_store_string, s1, "@{reg3}"),
####                (create_text_overlay, "$g_presentation_obj_15", "@{s1}", tf_center_justify),
####                (position_set_x, pos1, 850),
####                (position_set_y, pos1, 470),
####                (overlay_set_position, "$g_presentation_obj_15", pos1),#sum
####                (position_set_x, pos1, 5000),
####                (position_set_y, pos1, 5000),
####                (overlay_set_size, "$g_presentation_obj_15", pos1),
####                (assign, reg50, 8),	
####		    (try_end),
####	
####		    (try_begin),
####		        (eq, reg50, 8),
####                (assign, reg50, 9),
####		    	(overlay_set_display, "$g_presentation_obj_14", 0),
####	            (str_store_troop_name, s1, "$g_talk_troop"), 
####                (create_game_button_overlay, "$g_presentation_obj_14", "@{s1} Rolls", tf_center_justify),#
####                (position_set_x, pos1, 475),
####                (position_set_y, pos1, 515),
####                (overlay_set_position, "$g_presentation_obj_14", pos1),
####	        (try_end),
####
####			(try_begin),        
####		        (eq, reg50, 10),#80
####                (assign, reg50, 11),				
####		    	(overlay_set_display, "$g_presentation_obj_1", 0),
####		    	(overlay_set_display, "$g_presentation_obj_2", 0),
####				#(overlay_set_display, "$g_presentation_obj_3", 0),# dice3
####                (call_script, "script_d6_roll",0),# d6_1
####                (assign, reg10, reg1),
####                (call_script, "script_d6_roll",0),# d6_2
####		        (assign, reg20, reg1),
####				(store_add, reg4, reg10, reg20),
####                # (call_script, "script_d6_roll",0),# d6_3
####		        # (assign, reg30, reg1),				
####				# (val_add,reg4,reg30),
####			        (try_begin),    
####                        (store_random_in_range,reg11,1,7),# dice1 start side
####                        (store_random_in_range,reg21,1,7),# dice2 start side
####						# (store_random_in_range,reg31,1,7),# dice3 start side
####                            (try_begin),
####                                (gt, reg11, reg10),
####                                (val_add, reg10, 6),
####			                (try_end),
####			        	    (try_begin),
####                                (gt,reg21,reg20),
####                                (val_add,reg20,6),
####					        (try_end),
####			        	    # (try_begin),# dice3
####                                # (gt,reg31,reg30),# dice3
####                                # (val_add,reg30,6),# dice3
####					        # (try_end),# dice3							
####				    (try_end),
####				(assign, reg5, 0),
####				(assign, reg6, 2),
####                (assign, reg58,":cur_time"),				
####		    (try_end),
####
####		    (try_begin),			
####		        (eq, reg50, 11),                          
####                (eq, reg6, 2),        				
####		        (lt, reg5, 6),
####				(store_sub, ":time_pass",":cur_time",reg58),
####                (ge, ":time_pass",200),
####                (assign, reg58,":cur_time"),				
####                (val_add, reg5,1),				
####				    (try_begin),
####    	    	        (le, reg11, reg10),
####	                    (call_script, "script_draw_d6_side",1,reg5,reg11),
####						(val_add, reg11, 1),
####					(try_end),
####					(try_begin),
####				        (le,reg21,reg20),
####	                    (call_script, "script_draw_d6_side",2,reg5,reg21),
####						(val_add,reg21,1),
####					(try_end),
####					# (try_begin),# dice3
####				        # (le,reg31,reg30),# dice3
####	                    # (call_script, "script_draw_d6_side",3,reg5,reg31),# dice3
####						# (val_add,reg31,1),# dice3
####					# (try_end),
####			(else_try),
####		        (eq, reg50, 11),
####                (eq, reg5, 6),
####			    (assign, reg6, 3),
####                (assign, reg50, 12), 
####		    (try_end),						
####	(gt, reg6, 2),					
####		(try_begin),
####		    (eq, reg50, 12),
####            (eq, reg6, 3),    			
####            (str_store_string, s1, "@{reg4}"),
####            (create_text_overlay, "$g_presentation_obj_15", "@{s1}", tf_center_justify),
####            (position_set_x, pos1, 130),
####            (position_set_y, pos1, 180),
####            (overlay_set_position, "$g_presentation_obj_15", pos1),#sum
####            (position_set_x, pos1, 5000),
####            (position_set_y, pos1, 5000),
####            (overlay_set_size, "$g_presentation_obj_15", pos1),
####            (assign, reg50, 13),
####
####		(try_begin),
####		    (str_clear,s1),  
####		    (eq, reg50, 13),
####			(overlay_set_display, "$g_presentation_obj_14", 0),
####			(assign, reg50, 14),
####                (try_begin),
####                    (eq,reg3,reg4),
####					(str_clear,s1), 
####                    (str_store_string, s1, "@Draw! Bet Twice?"),# Bet Twice?
####					(assign, reg50, 15),
####				(else_try),
####	                (gt, reg3, reg4),
####                    (val_mul,reg51,2),					
####					#(call_script, "script_troop_add_gold", "trp_player", reg51),
####                    (str_store_string, s1, "@You win! Try again?"),					
####				(else_try),
####                    (gt, reg4, reg3),
####                    (str_store_string, s1, "@You lose. Try again?"),					
####                (try_end),
####                (create_text_overlay, reg1, "@{s1}", tf_center_justify),
####                (position_set_x, pos1, 480),
####                (position_set_y, pos1, 650), #Height for you lose try again & you win
####                (overlay_set_position, reg1, pos1),#
####                (position_set_x, pos1, 2000),
####                (position_set_y, pos1, 2000),
####                (overlay_set_size, reg1, pos1),#
####                (create_mesh_overlay, reg1, "mesh_3card_window"),
####                (position_set_x, pos1, 306),#
####                (position_set_y, pos1, 580),#
####                (overlay_set_position, reg1, pos1),
####                (position_set_x, pos1, 500),#
####                (position_set_y, pos1, 300),#
####                (overlay_set_size, reg1, pos1),		
####				
####                (create_game_button_overlay, "$g_presentation_obj_12", "@Yes ", tf_center_justify),				
####                (position_set_x, pos1, 400),
####                (position_set_y, pos1, 600),
####                (overlay_set_position, "$g_presentation_obj_12", pos1),
####
####                (create_game_button_overlay, "$g_presentation_obj_13", "@No ", tf_center_justify),
####                (position_set_x, pos1, 560),
####                (position_set_y, pos1, 600),
####                (overlay_set_position, "$g_presentation_obj_13", pos1),				
####		(try_end),	
####       ]),
####	   
####      (ti_on_presentation_event_state_change,
####       [(store_trigger_param_1, ":object"),
####        (store_trigger_param_2, ":value"),
####        (try_begin),
####		  (eq,"$g_gamble",0),
####          (eq, ":object", "$g_presentation_obj_7"),#
####          (try_begin),
####            (neq, reg51, ":value"),
####            (assign, reg51, ":value"),
####          (try_end),
####          (overlay_set_val, "$g_presentation_obj_7", reg51),
####          (str_store_string, s1, "@Bet: {reg51} Denars"),
####          (overlay_set_text, "$g_presentation_obj_8", s1),
####        (else_try),
####          (eq, ":object", "$g_presentation_obj_10"),#
####          (store_troop_gold,reg1,"trp_player"),#
####          (try_begin),
####            (lt,reg1,reg51),#
####            (display_message, "@You don't have enough money."),
####          (else_try),
####            #(troop_remove_gold, "trp_player", reg51),#
####            (play_sound, "snd_money_paid"),
####            (overlay_set_display, "$g_presentation_obj_6", 0),
####		      (try_begin), 
####			    (eq,"$g_gamble",0),			
####			    (overlay_set_display, "$g_presentation_obj_7", 0),
####			  (try_end),	
####            (overlay_set_display, "$g_presentation_obj_8", 0),
####            (overlay_set_display, "$g_presentation_obj_10", 0),
####            (store_troop_gold,reg1,"trp_player"),#
####            (str_store_string, s1, "@Bet: {reg51} Denars"),#
####            (overlay_set_text, "$g_presentation_obj_4", s1),
####            (str_store_string, s1, "@Money: {reg1} Denars"),#
####            (overlay_set_text, "$g_presentation_obj_5", s1),
####			#ATTEMPT ENHANCE
####        #(position_set_x, pos1, 790),#755
####        #(position_set_y, pos1, 345),#355 Default size of Bet on the right side
####        #(overlay_set_position, "$g_presentation_obj_4", pos1),
####        #(overlay_set_color, "$g_presentation_obj_4",),#0xfffccc
####        #(position_set_x, pos1, 788),#755 #Default 790, moved a bit to the left to compensate
####        #(position_set_y, pos1, 315),#325 default size of amount of money on the right side
####        #(overlay_set_position, "$g_presentation_obj_5", pos1),
####        #(overlay_set_color, "$g_presentation_obj_5"),#0xfffccc
####			#END ENHANCE
####            (assign, reg50, 2),
####          (try_end),
####		(try_end),  
####        (try_begin),
####		    (eq, reg50, 3),        
####            (eq, ":object", "$g_presentation_obj_14"),#Roll Dice button
####            (play_sound, "snd_dice_roll"),	         			
####		    (assign, reg50, 4),
####		(try_end),
####        (try_begin),
####		    (eq, reg50, 9),   
####            (eq, ":object", "$g_presentation_obj_14"),#Oppo Roll Dice button
####            (play_sound, "snd_dice_roll"),	         			
####		    (assign, reg50, 10),
####		(try_end),
####
####        (try_begin),#DRAW
####	      (eq, reg50, 15),# 
####		  (eq,reg3,reg4),#
####		  (assign,"$g_gamble",0),
####          (eq, ":object", "$g_presentation_obj_12"),#yes
####          (store_troop_gold,reg1,"trp_player"),#
####          (try_begin),
####            (lt,reg1,reg51),#
####            (display_message, "@You don't have enough denars,"),
####          (else_try),
####            (presentation_set_duration, 0),
####		    (assign,"$g_gamble",1),
####			(val_mul,reg51,2),
####			(assign,"$temp",reg51),
####            #(call_script, "script_troop_add_gold", "trp_player", reg51),			
####            (assign, reg50,0),
####            (start_presentation, "prsnt_dices_game"),
####          (try_end),
####        (else_try),
####          (eq, ":object", "$g_presentation_obj_13"),#no
####		  #(call_script, "script_troop_add_gold", "trp_player", reg51),
####          (assign,reg1,0),#
####          (assign, reg51, 1),
####          (presentation_set_duration, 0),
####        (try_end),				
####		
####        (try_begin),
####	      (eq, reg50, 14),#12 		
####          (eq, ":object", "$g_presentation_obj_12"),#yes
####          (store_troop_gold,reg1,"trp_player"),#
####          (try_begin),
####            (lt,reg1,1),#
####            (display_message, "@You don't have enough money."),
####          (else_try),
####            (presentation_set_duration, 0),
####            (assign, reg50,0),
####			(assign,"$g_gamble",0),
####            (start_presentation, "prsnt_dices_game"),
####          (try_end),
####        (else_try),
####          (eq, ":object", "$g_presentation_obj_13"),#no
####		  (assign,"$g_gamble",0),
####          (presentation_set_duration, 0),
####        (try_end),		
####        ]),
####     ]),
####	 # prsnt_dices game end END	
####### Dice game ### Dice game ### END ### 

		#Mod Options Page 2
	("mod_options_pt2", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(play_sound, "snd_summary_finance"),
			(set_fixed_point_multiplier, 1000),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_6", 0, 8192),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(position_set_x, 1, 550),
			(position_set_y, 1, 630),
			(position_set_x, 1, 50),
			(create_text_overlay, reg0, "@Use shield bash (player):", 4096),
			(position_set_y, 1, 675),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Use shield bash (AI):", 4096),
			(position_set_y, 1, 635),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Weapon break (Currently, this feature is slightly buggy, troops do not always switch to another weapon after their weapon breaks):", 4096),
			(position_set_y, 1, 595),
			(overlay_set_position, reg0, 1),
			

			(create_text_overlay, reg0, "@Lance breaking (Warning: can cause crashes):", 4096),
			(position_set_y, 1, 555),
			(overlay_set_position, reg0, 1),
			##V2
		    (create_text_overlay, reg0, "@Host Campaign into Multiplayer (Co-Op/MP) *Still not implemented*:", 4096),
			(position_set_y, 1, 515), # Can be altered without causing issues # Indecent by 40 px
			(overlay_set_position, reg0, 1),
		
			(create_text_overlay, reg0, "@Troops spawn with Torches at night %: (Note: currently, this feature is very buggy):", 4096),
			(position_set_y, 1, 475),
			(overlay_set_position, reg0, 1),
			
			(create_text_overlay, reg0, "@Add me in Snapchat if you want: envarm", 4096),
			(position_set_y, 1, 435),
			(overlay_set_position, reg0, 1),
			
			(create_text_overlay, reg0, "@Enable Hardcore Mode (realistic & very difficult) *Partial implementation*:", 4096),
			(position_set_y, 1, 395),
			(overlay_set_position, reg0, 1),
			
			(create_text_overlay, reg0, "@Enable Extended Camera Mode (Usage: CTRL + Arrow Keys during battle):", 4096),
			(position_set_y, 1, 355), # Can be altered without causing issues # Indecent by 40 px
			(overlay_set_position, reg0, 1),
			
			(create_text_overlay, reg0, "@Lord Slay/Execute/Mortality by other Lord %: *Still not implemented*", 4096),
			(position_set_y, 1, 315),
			(overlay_set_position, reg0, 1),
			
			(create_text_overlay, reg0, "@Player Permadeath chance (Note that hardcore mode is independent). *Partial implementation*:", 4096),
			(position_set_y, 1, 275),
			(overlay_set_position, reg0, 1),
			
			(create_text_overlay, reg0, "@Enable Music during battles (I highly recommend you keep this enabled, it really makes the battles shine):", 4096),
			(position_set_y, 1, 232),
			(overlay_set_position, reg0, 1),
			
						(create_text_overlay, reg0, "@Enable Horn Sounds when Commanding Troops:", 4096),
			(position_set_y, 1, 195),
			(overlay_set_position, reg0, 1),
			
			(create_text_overlay, reg0, "@Enable dynamic decapitations (Note: may cause harmless script errors, but works fine!):", 4096),
			(position_set_y, 1, 155),
			(overlay_set_position, reg0, 1),
			
			(create_text_overlay, reg0, "@Enable dynamic decapitation notifications (casulty feed, only works if dynamic decapitations above is enabled):", 4096),
			(position_set_y, 1, 115),
			(overlay_set_position, reg0, 1),
			


			(position_set_x, 1, 880), #Distance to left for checkboxes
			(create_check_box_overlay, "$g_presentation_obj_7", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, 665),
			(overlay_set_position, "$g_presentation_obj_7", 1),
			(overlay_set_val, "$g_presentation_obj_7", "$sp_shield_bash"),
			(create_check_box_overlay, "$g_presentation_obj_8", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, 625),
			(overlay_set_position, "$g_presentation_obj_8", 1),
			(overlay_set_val, "$g_presentation_obj_8", "$sp_shield_bash_ai"),
			
			(create_check_box_overlay, "$g_presentation_obj_31", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, 585),
			(overlay_set_position, "$g_presentation_obj_31", 1),
			(overlay_set_val, "$g_presentation_obj_31", "$tom_weapon_break"),
			
			(position_set_y, 1, 545), # 20PX Lower than multi-choice for new font 10px lower for old font (1257AD)
			(create_check_box_overlay, "$g_presentation_obj_34", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_34", 1),
			(overlay_set_val, "$g_presentation_obj_34", "$tom_lance_breaking"),

			(position_set_y, 1, 511), # 
			(create_check_box_overlay, "$g_presentation_obj_69", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_69", 1),
			(overlay_set_val, "$g_presentation_obj_69", "$battle_time"),
				
			###Torches	
			#(position_set_x, 1, 910), #New
			##(position_set_x, 1, 850), #Width at right side
			(create_number_box_overlay, "$g_presentation_obj_71", 0, 101),
			(position_set_y, 1, 465), #Height at right side
			(overlay_set_position, "$g_presentation_obj_71", 1),
			(overlay_set_val, "$g_presentation_obj_71", "$torch_chance"),
			##End
			#(position_set_y, 1, 595), # 20PX Lower than multi-choice
			
			######Emoticon Presentation start
			#(position_set_y, 1, 504), # PX Equal to text overlay (Checkbox Choice)
			##(position_set_x, 1, 800), #New
			#(create_check_box_overlay, "$g_presentation_obj_72", "mesh_checkbox_off", "mesh_checkbox_on"),
			#(overlay_set_position, "$g_presentation_obj_72", 1),
			#(overlay_set_val, "$g_presentation_obj_72", "$enforce_rebellions"),
			######Emoticon presentation end
			
			(position_set_y, 1, 387), # PX Equal to text overlay (Checkbox Choice)
			#(position_set_x, 1, 910), #New
			(create_check_box_overlay, "$g_presentation_obj_73", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_73", 1),
			(overlay_set_val, "$g_presentation_obj_73", "$hardcore_mode"),
			
			(position_set_y, 1, 347), # PX Equal to text overlay (Checkbox Choice)
			(create_check_box_overlay, "$g_presentation_obj_75", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_75", 1),
			(overlay_set_val, "$g_presentation_obj_75", "$extended_camera_mode"),


			#(position_set_x, 1, 910), #New
			#(position_set_x, 1, 850), #Width at right side
			(create_number_box_overlay, "$g_presentation_obj_80", 0, 101),
			(position_set_y, 1, 305), #Height at right side
			(overlay_set_position, "$g_presentation_obj_80", 1),
			(overlay_set_val, "$g_presentation_obj_80", "$g_ai_executions"),
			
			
			#(position_set_x, 1, 910), #New
			#(position_set_x, 1, 850), #Width at right side
			(create_number_box_overlay, "$g_presentation_obj_81", 0, 101),
			(position_set_y, 1, 265), #Height at right side
			(overlay_set_position, "$g_presentation_obj_81", 1),
			(overlay_set_val, "$g_presentation_obj_81", "$g_player_death"),
			
			
			(position_set_y, 1, 225), # PX Equal to text overlay (Checkbox Choice)
			#(position_set_x, 1, 106), #IF below are same, use the one above instead
			#(position_set_x, 1, 910), #New
			(create_check_box_overlay, "$g_presentation_obj_82", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_82", 1),
			(overlay_set_val, "$g_presentation_obj_82", "$additional_music"),
			(position_set_y, 1, 185), # PX Equal to text overlay (Checkbox Choice)
			#(position_set_x, 1, 106), #IF below are same, use the one above instead
			#(position_set_x, 1, 910), #New
			(create_check_box_overlay, "$g_presentation_obj_83", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_83", 1),
			(overlay_set_val, "$g_presentation_obj_83", "$horn_multiple"),
			
			
			(position_set_y, 1, 145), # PX Equal to text overlay (Checkbox Choice)
			#(position_set_x, 1, 106), #IF below are same, use the one above instead
			#(position_set_x, 1, 910), #New
			(create_check_box_overlay, "$g_presentation_obj_8444", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_8444", 1),
			(overlay_set_val, "$g_presentation_obj_8444", "$dynamic_decap"),
			
			(position_set_y, 1, 105), # PX Equal to text overlay (Checkbox Choice)
			#(position_set_x, 1, 106), #IF below are same, use the one above instead
			#(position_set_x, 1, 910), #New
			(create_check_box_overlay, "$g_presentation_obj_8445", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_8445", 1),
			(overlay_set_val, "$g_presentation_obj_8445", "$allow_decap_mess"),
			
		(create_game_button_overlay, "$g_presentation_obj_84155", "@Page 2"),
			(position_set_x, 1, 700),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_84155", 1),

			
			(create_game_button_overlay, "$g_presentation_obj_20", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_20", 1),

		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_7"),
				(assign, "$sp_shield_bash", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_8"),
				(assign, "$sp_shield_bash_ai", ":trigger_param_2"),
(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_31"),
				(assign, "$tom_weapon_break", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_34"),
				(assign, "$tom_lance_breaking", ":trigger_param_2"),
				(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_69"),
				(assign, "$battle_time", ":trigger_param_2"),
				(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_71"),
				(assign, "$torch_chance", ":trigger_param_2"),
				(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_73"),
				(assign, "$hardcore_mode", ":trigger_param_2"),

												(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_75"),
				(assign, "$extended_camera_mode", ":trigger_param_2"),
				(else_try),
								(eq, ":trigger_param_1", "$g_presentation_obj_80"),
				(assign, "$g_ai_executions", ":trigger_param_2"),
																				(else_try),
								(eq, ":trigger_param_1", "$g_presentation_obj_81"),
				(assign, "$g_player_death", ":trigger_param_2"),
																								(else_try),
								(eq, ":trigger_param_1", "$g_presentation_obj_82"),
				(assign, "$additional_music", ":trigger_param_2"),
				
																												(else_try),
								(eq, ":trigger_param_1", "$g_presentation_obj_83"),
				(assign, "$horn_multiple", ":trigger_param_2"),
																																(else_try),
								(eq, ":trigger_param_1", "$g_presentation_obj_8444"),
				(assign, "$dynamic_decap", ":trigger_param_2"),
																																(else_try),
								(eq, ":trigger_param_1", "$g_presentation_obj_8445"),
				(assign, "$allow_decap_mess", ":trigger_param_2"),
				
				
				(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_84155"),
				#(presentation_set_duration, 0),
				(start_presentation, "prsnt_mod_options_new"),
				(stop_all_sounds, 1),
				(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_20"),
				(stop_all_sounds, 1), #Used to be value of 1
				(presentation_set_duration, 0),
			(try_end)
		])
	]),
	
		#Mod Options Page 2
	("mod_options_new", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(play_sound, "snd_summary_finance"),
			(set_fixed_point_multiplier, 1000),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_644444", 0, 8192),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_644444", 1),
			(position_set_x, 1, 550),
			(position_set_y, 1, 630),
			(position_set_x, 1, 50),
			(create_text_overlay, reg0, "@Minimum damage required to be able to decapitate:", 4096),
			(position_set_y, 1, 715),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Divide decapitations chance based on damage (The lower this value is, the more likely decapitations occur, this takes into account damage done to factor chance):", 4096),
			(position_set_y, 1, 675),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Ceiling for decapitations random chance (This is just a randomizer, the lower this value is, the more likely decapitations occur.):", 4096),
			(position_set_y, 1, 615),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Enable AI Kicking (Can AI kick?):", 4096),
			(position_set_y, 1, 555),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Lessen weather effects (fixes the battle detection briefing on weather, however enabling this will reduce weather effects and thus, your enjoyment.) :", 4096),
			(position_set_y, 1, 515),
			(overlay_set_position, reg0, 1),
			


			#Decapitations next level
			(position_set_x, 1, 700),
			(create_number_box_overlay, "$g_presentation_obj_8446", 5, 51),
			(position_set_y, 1, 703), #Height at right side
			(overlay_set_position, "$g_presentation_obj_8446", 1),
			(overlay_set_val, "$g_presentation_obj_8446", "$decap_damage"),
			
			(create_number_box_overlay, "$g_presentation_obj_8447", 1, 31),
			(position_set_y, 1, 657), #Height at right side
			(overlay_set_position, "$g_presentation_obj_8447", 1),
			(overlay_set_val, "$g_presentation_obj_8447", "$decap_damage_divider"),
			
			(create_number_box_overlay, "$g_presentation_obj_8448", 0, 101),
			(position_set_y, 1, 591), #Height at right side
			(overlay_set_position, "$g_presentation_obj_8448", 1),
			(overlay_set_val, "$g_presentation_obj_8448", "$decap_randomizer"),
			#(position_set_x, 1, 650), #New
			#(position_set_y, 1, 703), #Height at right side

			(position_set_y, 1, 545), # PX Equal to text overlay (Checkbox Choice)
			#(position_set_x, 1, 106), #IF below are same, use the one above instead
			#(position_set_x, 1, 910), #New
			(create_check_box_overlay, "$g_presentation_obj_84409", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_84409", 1),
			(overlay_set_val, "$g_presentation_obj_84409", "$ai_kicking"),
			
						(position_set_y, 1, 499), # PX Equal to text overlay (Checkbox Choice)
			#(position_set_x, 1, 106), #IF below are same, use the one above instead
			#(position_set_x, 1, 910), #New
			(create_check_box_overlay, "$g_presentation_obj_844033", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_844033", 1),
			(overlay_set_val, "$g_presentation_obj_844033", "$detect_weather_for_menu_enabled"),
			
			
			(position_set_y, 1, 313),
			(position_set_x, 1, 650),
			#More options..
			
			(create_game_button_overlay, "$g_presentation_obj_114444", "@Page 1"),
			(position_set_x, 1, 700),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_114444", 1),
			##END
			(create_game_button_overlay, "$g_presentation_obj_20008", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_20008", 1),

		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_8446"),
				(assign, "$decap_damage", ":trigger_param_2"),
				(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_8447"),
				(assign, "$decap_damage_divider", ":trigger_param_2"),
				(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_84409"),
				(assign, "$ai_kicking", ":trigger_param_2"),
				(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_8448"),
				(assign, "$decap_randomizer", ":trigger_param_2"),
				(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_844033"),
				(assign, "$detect_weather_for_menu_enabled", ":trigger_param_2"),
				(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_114444"),
				#(presentation_set_duration, 0),
				(start_presentation, "prsnt_mod_options_pt2"),
				(stop_all_sounds, 1),
				(else_try),
				#####Multi-Choice end
				(eq, ":trigger_param_1", "$g_presentation_obj_20008"),
				(stop_all_sounds, 1), #Used to be value of 1
				(presentation_set_duration, 0),
			(try_end)
		])
	]),
	#End Mod Optiosn Page 2


]